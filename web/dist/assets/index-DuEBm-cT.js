var Hc=e=>{throw TypeError(e)};var No=(e,t,r)=>t.has(e)||Hc("Cannot "+r);var H=(e,t,r)=>(No(e,t,"read from private field"),r?r.call(e):t.get(e)),ee=(e,t,r)=>t.has(e)?Hc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),J=(e,t,r,i)=>(No(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),ne=(e,t,r)=>(No(e,t,"access private method"),r);var on=(e,t,r,i)=>({set _(o){J(e,t,o,r)},get _(){return H(e,t,i)}});function Z_(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const f=Object.getOwnPropertyDescriptor(i,o);f&&Object.defineProperty(e,o,f.get?f:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function r(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function i(o){if(o.ep)return;o.ep=!0;const f=r(o);fetch(o.href,f)}})();function ep(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Lh={exports:{}},yo={},Rh={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gs=Symbol.for("react.element"),tp=Symbol.for("react.portal"),rp=Symbol.for("react.fragment"),ip=Symbol.for("react.strict_mode"),sp=Symbol.for("react.profiler"),np=Symbol.for("react.provider"),op=Symbol.for("react.context"),ap=Symbol.for("react.forward_ref"),lp=Symbol.for("react.suspense"),cp=Symbol.for("react.memo"),up=Symbol.for("react.lazy"),$c=Symbol.iterator;function hp(e){return e===null||typeof e!="object"?null:(e=$c&&e[$c]||e["@@iterator"],typeof e=="function"?e:null)}var kh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dh=Object.assign,Ah={};function qi(e,t,r){this.props=e,this.context=t,this.refs=Ah,this.updater=r||kh}qi.prototype.isReactComponent={};qi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Mh(){}Mh.prototype=qi.prototype;function Tl(e,t,r){this.props=e,this.context=t,this.refs=Ah,this.updater=r||kh}var Pl=Tl.prototype=new Mh;Pl.constructor=Tl;Dh(Pl,qi.prototype);Pl.isPureReactComponent=!0;var Uc=Array.isArray,Th=Object.prototype.hasOwnProperty,Ol={current:null},Ph={key:!0,ref:!0,__self:!0,__source:!0};function Oh(e,t,r){var i,o={},f=null,g=null;if(t!=null)for(i in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(f=""+t.key),t)Th.call(t,i)&&!Ph.hasOwnProperty(i)&&(o[i]=t[i]);var s=arguments.length-2;if(s===1)o.children=r;else if(1<s){for(var a=Array(s),d=0;d<s;d++)a[d]=arguments[d+2];o.children=a}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)o[i]===void 0&&(o[i]=s[i]);return{$$typeof:Gs,type:e,key:f,ref:g,props:o,_owner:Ol.current}}function dp(e,t){return{$$typeof:Gs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gs}function fp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Wc=/\/+/g;function Ho(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fp(""+e.key):t.toString(36)}function kn(e,t,r,i,o){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(f){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case Gs:case tp:g=!0}}if(g)return g=e,o=o(g),e=i===""?"."+Ho(g,0):i,Uc(o)?(r="",e!=null&&(r=e.replace(Wc,"$&/")+"/"),kn(o,t,r,"",function(d){return d})):o!=null&&(Bl(o)&&(o=dp(o,r+(!o.key||g&&g.key===o.key?"":(""+o.key).replace(Wc,"$&/")+"/")+e)),t.push(o)),1;if(g=0,i=i===""?".":i+":",Uc(e))for(var s=0;s<e.length;s++){f=e[s];var a=i+Ho(f,s);g+=kn(f,t,r,a,o)}else if(a=hp(e),typeof a=="function")for(e=a.call(e),s=0;!(f=e.next()).done;)f=f.value,a=i+Ho(f,s++),g+=kn(f,t,r,a,o);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function an(e,t,r){if(e==null)return e;var i=[],o=0;return kn(e,i,"","",function(f){return t.call(r,f,o++)}),i}function _p(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Je={current:null},Dn={transition:null},pp={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:Dn,ReactCurrentOwner:Ol};function Bh(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:an,forEach:function(e,t,r){an(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return an(e,function(){t++}),t},toArray:function(e){return an(e,function(t){return t})||[]},only:function(e){if(!Bl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};se.Component=qi;se.Fragment=rp;se.Profiler=sp;se.PureComponent=Tl;se.StrictMode=ip;se.Suspense=lp;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pp;se.act=Bh;se.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=Dh({},e.props),o=e.key,f=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,g=Ol.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(a in t)Th.call(t,a)&&!Ph.hasOwnProperty(a)&&(i[a]=t[a]===void 0&&s!==void 0?s[a]:t[a])}var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){s=Array(a);for(var d=0;d<a;d++)s[d]=arguments[d+2];i.children=s}return{$$typeof:Gs,type:e.type,key:o,ref:f,props:i,_owner:g}};se.createContext=function(e){return e={$$typeof:op,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:np,_context:e},e.Consumer=e};se.createElement=Oh;se.createFactory=function(e){var t=Oh.bind(null,e);return t.type=e,t};se.createRef=function(){return{current:null}};se.forwardRef=function(e){return{$$typeof:ap,render:e}};se.isValidElement=Bl;se.lazy=function(e){return{$$typeof:up,_payload:{_status:-1,_result:e},_init:_p}};se.memo=function(e,t){return{$$typeof:cp,type:e,compare:t===void 0?null:t}};se.startTransition=function(e){var t=Dn.transition;Dn.transition={};try{e()}finally{Dn.transition=t}};se.unstable_act=Bh;se.useCallback=function(e,t){return Je.current.useCallback(e,t)};se.useContext=function(e){return Je.current.useContext(e)};se.useDebugValue=function(){};se.useDeferredValue=function(e){return Je.current.useDeferredValue(e)};se.useEffect=function(e,t){return Je.current.useEffect(e,t)};se.useId=function(){return Je.current.useId()};se.useImperativeHandle=function(e,t,r){return Je.current.useImperativeHandle(e,t,r)};se.useInsertionEffect=function(e,t){return Je.current.useInsertionEffect(e,t)};se.useLayoutEffect=function(e,t){return Je.current.useLayoutEffect(e,t)};se.useMemo=function(e,t){return Je.current.useMemo(e,t)};se.useReducer=function(e,t,r){return Je.current.useReducer(e,t,r)};se.useRef=function(e){return Je.current.useRef(e)};se.useState=function(e){return Je.current.useState(e)};se.useSyncExternalStore=function(e,t,r){return Je.current.useSyncExternalStore(e,t,r)};se.useTransition=function(){return Je.current.useTransition()};se.version="18.3.1";Rh.exports=se;var F=Rh.exports;const Dt=ep(F),Ih=Z_({__proto__:null,default:Dt},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp=F,gp=Symbol.for("react.element"),mp=Symbol.for("react.fragment"),yp=Object.prototype.hasOwnProperty,Sp=vp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cp={key:!0,ref:!0,__self:!0,__source:!0};function Fh(e,t,r){var i,o={},f=null,g=null;r!==void 0&&(f=""+r),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(g=t.ref);for(i in t)yp.call(t,i)&&!Cp.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)o[i]===void 0&&(o[i]=t[i]);return{$$typeof:gp,type:e,key:f,ref:g,props:o,_owner:Sp.current}}yo.Fragment=mp;yo.jsx=Fh;yo.jsxs=Fh;Lh.exports=yo;var X=Lh.exports,ga={},Nh={exports:{}},dt={},Hh={exports:{}},$h={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,T){var P=R.length;R.push(T);e:for(;0<P;){var O=P-1>>>1,W=R[O];if(0<o(W,T))R[O]=T,R[P]=W,P=O;else break e}}function r(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var T=R[0],P=R.pop();if(P!==T){R[0]=P;e:for(var O=0,W=R.length,V=W>>>1;O<V;){var Q=2*(O+1)-1,q=R[Q],Z=Q+1,M=R[Z];if(0>o(q,P))Z<W&&0>o(M,q)?(R[O]=M,R[Z]=P,O=Z):(R[O]=q,R[Q]=P,O=Q);else if(Z<W&&0>o(M,P))R[O]=M,R[Z]=P,O=Z;else break e}}return T}function o(R,T){var P=R.sortIndex-T.sortIndex;return P!==0?P:R.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var g=Date,s=g.now();e.unstable_now=function(){return g.now()-s}}var a=[],d=[],v=1,u=null,p=3,C=!1,E=!1,_=!1,n=typeof setTimeout=="function"?setTimeout:null,l=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(R){for(var T=r(d);T!==null;){if(T.callback===null)i(d);else if(T.startTime<=R)i(d),T.sortIndex=T.expirationTime,t(a,T);else break;T=r(d)}}function m(R){if(_=!1,h(R),!E)if(r(a)!==null)E=!0,$(w);else{var T=r(d);T!==null&&I(m,T.startTime-R)}}function w(R,T){E=!1,_&&(_=!1,l(y),y=-1),C=!0;var P=p;try{for(h(T),u=r(a);u!==null&&(!(u.expirationTime>T)||R&&!k());){var O=u.callback;if(typeof O=="function"){u.callback=null,p=u.priorityLevel;var W=O(u.expirationTime<=T);T=e.unstable_now(),typeof W=="function"?u.callback=W:u===r(a)&&i(a),h(T)}else i(a);u=r(a)}if(u!==null)var V=!0;else{var Q=r(d);Q!==null&&I(m,Q.startTime-T),V=!1}return V}finally{u=null,p=P,C=!1}}var b=!1,x=null,y=-1,S=5,L=-1;function k(){return!(e.unstable_now()-L<S)}function D(){if(x!==null){var R=e.unstable_now();L=R;var T=!0;try{T=x(!0,R)}finally{T?A():(b=!1,x=null)}}else b=!1}var A;if(typeof c=="function")A=function(){c(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,N=B.port2;B.port1.onmessage=D,A=function(){N.postMessage(null)}}else A=function(){n(D,0)};function $(R){x=R,b||(b=!0,A())}function I(R,T){y=n(function(){R(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){E||C||(E=!0,$(w))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(a)},e.unstable_next=function(R){switch(p){case 1:case 2:case 3:var T=3;break;default:T=p}var P=p;p=T;try{return R()}finally{p=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,T){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var P=p;p=R;try{return T()}finally{p=P}},e.unstable_scheduleCallback=function(R,T,P){var O=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?O+P:O):P=O,R){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=P+W,R={id:v++,callback:T,priorityLevel:R,startTime:P,expirationTime:W,sortIndex:-1},P>O?(R.sortIndex=P,t(d,R),r(a)===null&&R===r(d)&&(_?(l(y),y=-1):_=!0,I(m,P-O))):(R.sortIndex=W,t(a,R),E||C||(E=!0,$(w))),R},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(R){var T=p;return function(){var P=p;p=T;try{return R.apply(this,arguments)}finally{p=P}}}})($h);Hh.exports=$h;var wp=Hh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep=F,ht=wp;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Uh=new Set,bs={};function oi(e,t){$i(e,t),$i(e+"Capture",t)}function $i(e,t){for(bs[e]=t,e=0;e<t.length;e++)Uh.add(t[e])}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ma=Object.prototype.hasOwnProperty,bp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zc={},jc={};function xp(e){return ma.call(jc,e)?!0:ma.call(zc,e)?!1:bp.test(e)?jc[e]=!0:(zc[e]=!0,!1)}function Lp(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Rp(e,t,r,i){if(t===null||typeof t>"u"||Lp(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ze(e,t,r,i,o,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var Ue={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ue[e]=new Ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ue[t]=new Ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ue[e]=new Ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ue[e]=new Ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ue[e]=new Ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ue[e]=new Ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ue[e]=new Ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ue[e]=new Ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ue[e]=new Ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var Il=/[\-:]([a-z])/g;function Fl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Il,Fl);Ue[t]=new Ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Il,Fl);Ue[t]=new Ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Il,Fl);Ue[t]=new Ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ue[e]=new Ze(e,1,!1,e.toLowerCase(),null,!1,!1)});Ue.xlinkHref=new Ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ue[e]=new Ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function Nl(e,t,r,i){var o=Ue.hasOwnProperty(t)?Ue[t]:null;(o!==null?o.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Rp(t,r,o,i)&&(r=null),i||o===null?xp(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,i=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var ar=Ep.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ln=Symbol.for("react.element"),ci=Symbol.for("react.portal"),ui=Symbol.for("react.fragment"),Hl=Symbol.for("react.strict_mode"),ya=Symbol.for("react.profiler"),Wh=Symbol.for("react.provider"),zh=Symbol.for("react.context"),$l=Symbol.for("react.forward_ref"),Sa=Symbol.for("react.suspense"),Ca=Symbol.for("react.suspense_list"),Ul=Symbol.for("react.memo"),ur=Symbol.for("react.lazy"),jh=Symbol.for("react.offscreen"),Vc=Symbol.iterator;function Zi(e){return e===null||typeof e!="object"?null:(e=Vc&&e[Vc]||e["@@iterator"],typeof e=="function"?e:null)}var xe=Object.assign,$o;function cs(e){if($o===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);$o=t&&t[1]||""}return`
`+$o+e}var Uo=!1;function Wo(e,t){if(!e||Uo)return"";Uo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var i=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){i=d}e.call(t.prototype)}else{try{throw Error()}catch(d){i=d}e()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),f=i.stack.split(`
`),g=o.length-1,s=f.length-1;1<=g&&0<=s&&o[g]!==f[s];)s--;for(;1<=g&&0<=s;g--,s--)if(o[g]!==f[s]){if(g!==1||s!==1)do if(g--,s--,0>s||o[g]!==f[s]){var a=`
`+o[g].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=g&&0<=s);break}}}finally{Uo=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?cs(e):""}function kp(e){switch(e.tag){case 5:return cs(e.type);case 16:return cs("Lazy");case 13:return cs("Suspense");case 19:return cs("SuspenseList");case 0:case 2:case 15:return e=Wo(e.type,!1),e;case 11:return e=Wo(e.type.render,!1),e;case 1:return e=Wo(e.type,!0),e;default:return""}}function wa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ui:return"Fragment";case ci:return"Portal";case ya:return"Profiler";case Hl:return"StrictMode";case Sa:return"Suspense";case Ca:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zh:return(e.displayName||"Context")+".Consumer";case Wh:return(e._context.displayName||"Context")+".Provider";case $l:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ul:return t=e.displayName||null,t!==null?t:wa(e.type)||"Memo";case ur:t=e._payload,e=e._init;try{return wa(e(t))}catch{}}return null}function Dp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wa(t);case 8:return t===Hl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ap(e){var t=Vh(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(g){i=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cn(e){e._valueTracker||(e._valueTracker=Ap(e))}function Kh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=Vh(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function Wn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ea(e,t){var r=t.checked;return xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Kc(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Pr(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qh(e,t){t=t.checked,t!=null&&Nl(e,"checked",t,!1)}function ba(e,t){qh(e,t);var r=Pr(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xa(e,t.type,r):t.hasOwnProperty("defaultValue")&&xa(e,t.type,Pr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function xa(e,t,r){(t!=="number"||Wn(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var us=Array.isArray;function Ci(e,t,r,i){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Pr(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function La(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(K(92));if(us(r)){if(1<r.length)throw Error(K(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Pr(r)}}function Gh(e,t){var r=Pr(t.value),i=Pr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function Qc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Qh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ra(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Qh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var un,Xh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(un=un||document.createElement("div"),un.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=un.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mp=["Webkit","ms","Moz","O"];Object.keys(ps).forEach(function(e){Mp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ps[t]=ps[e]})});function Yh(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ps.hasOwnProperty(e)&&ps[e]?(""+t).trim():t+"px"}function Jh(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,o=Yh(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,o):e[r]=o}}var Tp=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ka(e,t){if(t){if(Tp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function Da(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Aa=null;function Wl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ma=null,wi=null,Ei=null;function Xc(e){if(e=Ys(e)){if(typeof Ma!="function")throw Error(K(280));var t=e.stateNode;t&&(t=bo(t),Ma(e.stateNode,e.type,t))}}function Zh(e){wi?Ei?Ei.push(e):Ei=[e]:wi=e}function ed(){if(wi){var e=wi,t=Ei;if(Ei=wi=null,Xc(e),t)for(e=0;e<t.length;e++)Xc(t[e])}}function td(e,t){return e(t)}function rd(){}var zo=!1;function id(e,t,r){if(zo)return e(t,r);zo=!0;try{return td(e,t,r)}finally{zo=!1,(wi!==null||Ei!==null)&&(rd(),ed())}}function Ls(e,t){var r=e.stateNode;if(r===null)return null;var i=bo(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(K(231,t,typeof r));return r}var Ta=!1;if(rr)try{var es={};Object.defineProperty(es,"passive",{get:function(){Ta=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{Ta=!1}function Pp(e,t,r,i,o,f,g,s,a){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(v){this.onError(v)}}var vs=!1,zn=null,jn=!1,Pa=null,Op={onError:function(e){vs=!0,zn=e}};function Bp(e,t,r,i,o,f,g,s,a){vs=!1,zn=null,Pp.apply(Op,arguments)}function Ip(e,t,r,i,o,f,g,s,a){if(Bp.apply(this,arguments),vs){if(vs){var d=zn;vs=!1,zn=null}else throw Error(K(198));jn||(jn=!0,Pa=d)}}function ai(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function sd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Yc(e){if(ai(e)!==e)throw Error(K(188))}function Fp(e){var t=e.alternate;if(!t){if(t=ai(e),t===null)throw Error(K(188));return t!==e?null:e}for(var r=e,i=t;;){var o=r.return;if(o===null)break;var f=o.alternate;if(f===null){if(i=o.return,i!==null){r=i;continue}break}if(o.child===f.child){for(f=o.child;f;){if(f===r)return Yc(o),e;if(f===i)return Yc(o),t;f=f.sibling}throw Error(K(188))}if(r.return!==i.return)r=o,i=f;else{for(var g=!1,s=o.child;s;){if(s===r){g=!0,r=o,i=f;break}if(s===i){g=!0,i=o,r=f;break}s=s.sibling}if(!g){for(s=f.child;s;){if(s===r){g=!0,r=f,i=o;break}if(s===i){g=!0,i=f,r=o;break}s=s.sibling}if(!g)throw Error(K(189))}}if(r.alternate!==i)throw Error(K(190))}if(r.tag!==3)throw Error(K(188));return r.stateNode.current===r?e:t}function nd(e){return e=Fp(e),e!==null?od(e):null}function od(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=od(e);if(t!==null)return t;e=e.sibling}return null}var ad=ht.unstable_scheduleCallback,Jc=ht.unstable_cancelCallback,Np=ht.unstable_shouldYield,Hp=ht.unstable_requestPaint,De=ht.unstable_now,$p=ht.unstable_getCurrentPriorityLevel,zl=ht.unstable_ImmediatePriority,ld=ht.unstable_UserBlockingPriority,Vn=ht.unstable_NormalPriority,Up=ht.unstable_LowPriority,cd=ht.unstable_IdlePriority,So=null,Wt=null;function Wp(e){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(So,e,void 0,(e.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:Vp,zp=Math.log,jp=Math.LN2;function Vp(e){return e>>>=0,e===0?32:31-(zp(e)/jp|0)|0}var hn=64,dn=4194304;function hs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Kn(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,o=e.suspendedLanes,f=e.pingedLanes,g=r&268435455;if(g!==0){var s=g&~o;s!==0?i=hs(s):(f&=g,f!==0&&(i=hs(f)))}else g=r&~o,g!==0?i=hs(g):f!==0&&(i=hs(f));if(i===0)return 0;if(t!==0&&t!==i&&!(t&o)&&(o=i&-i,f=t&-t,o>=f||o===16&&(f&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Tt(t),o=1<<r,i|=e[r],t&=~o;return i}function Kp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qp(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-Tt(f),s=1<<g,a=o[g];a===-1?(!(s&r)||s&i)&&(o[g]=Kp(s,t)):a<=t&&(e.expiredLanes|=s),f&=~s}}function Oa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ud(){var e=hn;return hn<<=1,!(hn&4194240)&&(hn=64),e}function jo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Qs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tt(t),e[t]=r}function Gp(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-Tt(r),f=1<<o;t[o]=0,i[o]=-1,e[o]=-1,r&=~f}}function jl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Tt(r),o=1<<i;o&t|e[i]&t&&(e[i]|=t),r&=~o}}var _e=0;function hd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dd,Vl,fd,_d,pd,Ba=!1,fn=[],br=null,xr=null,Lr=null,Rs=new Map,ks=new Map,dr=[],Qp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zc(e,t){switch(e){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":Rs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ks.delete(t.pointerId)}}function ts(e,t,r,i,o,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:f,targetContainers:[o]},t!==null&&(t=Ys(t),t!==null&&Vl(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Xp(e,t,r,i,o){switch(t){case"focusin":return br=ts(br,e,t,r,i,o),!0;case"dragenter":return xr=ts(xr,e,t,r,i,o),!0;case"mouseover":return Lr=ts(Lr,e,t,r,i,o),!0;case"pointerover":var f=o.pointerId;return Rs.set(f,ts(Rs.get(f)||null,e,t,r,i,o)),!0;case"gotpointercapture":return f=o.pointerId,ks.set(f,ts(ks.get(f)||null,e,t,r,i,o)),!0}return!1}function vd(e){var t=Ur(e.target);if(t!==null){var r=ai(t);if(r!==null){if(t=r.tag,t===13){if(t=sd(r),t!==null){e.blockedOn=t,pd(e.priority,function(){fd(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function An(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ia(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Aa=i,r.target.dispatchEvent(i),Aa=null}else return t=Ys(r),t!==null&&Vl(t),e.blockedOn=r,!1;t.shift()}return!0}function eu(e,t,r){An(e)&&r.delete(t)}function Yp(){Ba=!1,br!==null&&An(br)&&(br=null),xr!==null&&An(xr)&&(xr=null),Lr!==null&&An(Lr)&&(Lr=null),Rs.forEach(eu),ks.forEach(eu)}function rs(e,t){e.blockedOn===t&&(e.blockedOn=null,Ba||(Ba=!0,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,Yp)))}function Ds(e){function t(o){return rs(o,e)}if(0<fn.length){rs(fn[0],e);for(var r=1;r<fn.length;r++){var i=fn[r];i.blockedOn===e&&(i.blockedOn=null)}}for(br!==null&&rs(br,e),xr!==null&&rs(xr,e),Lr!==null&&rs(Lr,e),Rs.forEach(t),ks.forEach(t),r=0;r<dr.length;r++)i=dr[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<dr.length&&(r=dr[0],r.blockedOn===null);)vd(r),r.blockedOn===null&&dr.shift()}var bi=ar.ReactCurrentBatchConfig,qn=!0;function Jp(e,t,r,i){var o=_e,f=bi.transition;bi.transition=null;try{_e=1,Kl(e,t,r,i)}finally{_e=o,bi.transition=f}}function Zp(e,t,r,i){var o=_e,f=bi.transition;bi.transition=null;try{_e=4,Kl(e,t,r,i)}finally{_e=o,bi.transition=f}}function Kl(e,t,r,i){if(qn){var o=Ia(e,t,r,i);if(o===null)ea(e,t,i,Gn,r),Zc(e,i);else if(Xp(o,e,t,r,i))i.stopPropagation();else if(Zc(e,i),t&4&&-1<Qp.indexOf(e)){for(;o!==null;){var f=Ys(o);if(f!==null&&dd(f),f=Ia(e,t,r,i),f===null&&ea(e,t,i,Gn,r),f===o)break;o=f}o!==null&&i.stopPropagation()}else ea(e,t,i,null,r)}}var Gn=null;function Ia(e,t,r,i){if(Gn=null,e=Wl(i),e=Ur(e),e!==null)if(t=ai(e),t===null)e=null;else if(r=t.tag,r===13){if(e=sd(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gn=e,null}function gd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($p()){case zl:return 1;case ld:return 4;case Vn:case Up:return 16;case cd:return 536870912;default:return 16}default:return 16}}var wr=null,ql=null,Mn=null;function md(){if(Mn)return Mn;var e,t=ql,r=t.length,i,o="value"in wr?wr.value:wr.textContent,f=o.length;for(e=0;e<r&&t[e]===o[e];e++);var g=r-e;for(i=1;i<=g&&t[r-i]===o[f-i];i++);return Mn=o.slice(e,1<i?1-i:void 0)}function Tn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _n(){return!0}function tu(){return!1}function ft(e){function t(r,i,o,f,g){this._reactName=r,this._targetInst=o,this.type=i,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(f):f[s]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?_n:tu,this.isPropagationStopped=tu,this}return xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=_n)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=_n)},persist:function(){},isPersistent:_n}),t}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gl=ft(Gi),Xs=xe({},Gi,{view:0,detail:0}),ev=ft(Xs),Vo,Ko,is,Co=xe({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ql,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==is&&(is&&e.type==="mousemove"?(Vo=e.screenX-is.screenX,Ko=e.screenY-is.screenY):Ko=Vo=0,is=e),Vo)},movementY:function(e){return"movementY"in e?e.movementY:Ko}}),ru=ft(Co),tv=xe({},Co,{dataTransfer:0}),rv=ft(tv),iv=xe({},Xs,{relatedTarget:0}),qo=ft(iv),sv=xe({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),nv=ft(sv),ov=xe({},Gi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),av=ft(ov),lv=xe({},Gi,{data:0}),iu=ft(lv),cv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hv[e])?!!t[e]:!1}function Ql(){return dv}var fv=xe({},Xs,{key:function(e){if(e.key){var t=cv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Tn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ql,charCode:function(e){return e.type==="keypress"?Tn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Tn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_v=ft(fv),pv=xe({},Co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),su=ft(pv),vv=xe({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ql}),gv=ft(vv),mv=xe({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),yv=ft(mv),Sv=xe({},Co,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Cv=ft(Sv),wv=[9,13,27,32],Xl=rr&&"CompositionEvent"in window,gs=null;rr&&"documentMode"in document&&(gs=document.documentMode);var Ev=rr&&"TextEvent"in window&&!gs,yd=rr&&(!Xl||gs&&8<gs&&11>=gs),nu=" ",ou=!1;function Sd(e,t){switch(e){case"keyup":return wv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hi=!1;function bv(e,t){switch(e){case"compositionend":return Cd(t);case"keypress":return t.which!==32?null:(ou=!0,nu);case"textInput":return e=t.data,e===nu&&ou?null:e;default:return null}}function xv(e,t){if(hi)return e==="compositionend"||!Xl&&Sd(e,t)?(e=md(),Mn=ql=wr=null,hi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yd&&t.locale!=="ko"?null:t.data;default:return null}}var Lv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function au(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Lv[e.type]:t==="textarea"}function wd(e,t,r,i){Zh(i),t=Qn(t,"onChange"),0<t.length&&(r=new Gl("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var ms=null,As=null;function Rv(e){Pd(e,0)}function wo(e){var t=_i(e);if(Kh(t))return e}function kv(e,t){if(e==="change")return t}var Ed=!1;if(rr){var Go;if(rr){var Qo="oninput"in document;if(!Qo){var lu=document.createElement("div");lu.setAttribute("oninput","return;"),Qo=typeof lu.oninput=="function"}Go=Qo}else Go=!1;Ed=Go&&(!document.documentMode||9<document.documentMode)}function cu(){ms&&(ms.detachEvent("onpropertychange",bd),As=ms=null)}function bd(e){if(e.propertyName==="value"&&wo(As)){var t=[];wd(t,As,e,Wl(e)),id(Rv,t)}}function Dv(e,t,r){e==="focusin"?(cu(),ms=t,As=r,ms.attachEvent("onpropertychange",bd)):e==="focusout"&&cu()}function Av(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wo(As)}function Mv(e,t){if(e==="click")return wo(t)}function Tv(e,t){if(e==="input"||e==="change")return wo(t)}function Pv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ot=typeof Object.is=="function"?Object.is:Pv;function Ms(e,t){if(Ot(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var o=r[i];if(!ma.call(t,o)||!Ot(e[o],t[o]))return!1}return!0}function uu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hu(e,t){var r=uu(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=uu(r)}}function xd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ld(){for(var e=window,t=Wn();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Wn(e.document)}return t}function Yl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ov(e){var t=Ld(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&xd(r.ownerDocument.documentElement,r)){if(i!==null&&Yl(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,f=Math.min(i.start,o);i=i.end===void 0?f:Math.min(i.end,o),!e.extend&&f>i&&(o=i,i=f,f=o),o=hu(r,f);var g=hu(r,i);o&&g&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),f>i?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Bv=rr&&"documentMode"in document&&11>=document.documentMode,di=null,Fa=null,ys=null,Na=!1;function du(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Na||di==null||di!==Wn(i)||(i=di,"selectionStart"in i&&Yl(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ys&&Ms(ys,i)||(ys=i,i=Qn(Fa,"onSelect"),0<i.length&&(t=new Gl("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=di)))}function pn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var fi={animationend:pn("Animation","AnimationEnd"),animationiteration:pn("Animation","AnimationIteration"),animationstart:pn("Animation","AnimationStart"),transitionend:pn("Transition","TransitionEnd")},Xo={},Rd={};rr&&(Rd=document.createElement("div").style,"AnimationEvent"in window||(delete fi.animationend.animation,delete fi.animationiteration.animation,delete fi.animationstart.animation),"TransitionEvent"in window||delete fi.transitionend.transition);function Eo(e){if(Xo[e])return Xo[e];if(!fi[e])return e;var t=fi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Rd)return Xo[e]=t[r];return e}var kd=Eo("animationend"),Dd=Eo("animationiteration"),Ad=Eo("animationstart"),Md=Eo("transitionend"),Td=new Map,fu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(e,t){Td.set(e,t),oi(t,[e])}for(var Yo=0;Yo<fu.length;Yo++){var Jo=fu[Yo],Iv=Jo.toLowerCase(),Fv=Jo[0].toUpperCase()+Jo.slice(1);Br(Iv,"on"+Fv)}Br(kd,"onAnimationEnd");Br(Dd,"onAnimationIteration");Br(Ad,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(Md,"onTransitionEnd");$i("onMouseEnter",["mouseout","mouseover"]);$i("onMouseLeave",["mouseout","mouseover"]);$i("onPointerEnter",["pointerout","pointerover"]);$i("onPointerLeave",["pointerout","pointerover"]);oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ds));function _u(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,Ip(i,t,void 0,e),e.currentTarget=null}function Pd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],o=i.event;i=i.listeners;e:{var f=void 0;if(t)for(var g=i.length-1;0<=g;g--){var s=i[g],a=s.instance,d=s.currentTarget;if(s=s.listener,a!==f&&o.isPropagationStopped())break e;_u(o,s,d),f=a}else for(g=0;g<i.length;g++){if(s=i[g],a=s.instance,d=s.currentTarget,s=s.listener,a!==f&&o.isPropagationStopped())break e;_u(o,s,d),f=a}}}if(jn)throw e=Pa,jn=!1,Pa=null,e}function ge(e,t){var r=t[za];r===void 0&&(r=t[za]=new Set);var i=e+"__bubble";r.has(i)||(Od(t,e,2,!1),r.add(i))}function Zo(e,t,r){var i=0;t&&(i|=4),Od(r,e,i,t)}var vn="_reactListening"+Math.random().toString(36).slice(2);function Ts(e){if(!e[vn]){e[vn]=!0,Uh.forEach(function(r){r!=="selectionchange"&&(Nv.has(r)||Zo(r,!1,e),Zo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vn]||(t[vn]=!0,Zo("selectionchange",!1,t))}}function Od(e,t,r,i){switch(gd(t)){case 1:var o=Jp;break;case 4:o=Zp;break;default:o=Kl}r=o.bind(null,t,r,e),o=void 0,!Ta||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function ea(e,t,r,i,o){var f=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var g=i.tag;if(g===3||g===4){var s=i.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(g===4)for(g=i.return;g!==null;){var a=g.tag;if((a===3||a===4)&&(a=g.stateNode.containerInfo,a===o||a.nodeType===8&&a.parentNode===o))return;g=g.return}for(;s!==null;){if(g=Ur(s),g===null)return;if(a=g.tag,a===5||a===6){i=f=g;continue e}s=s.parentNode}}i=i.return}id(function(){var d=f,v=Wl(r),u=[];e:{var p=Td.get(e);if(p!==void 0){var C=Gl,E=e;switch(e){case"keypress":if(Tn(r)===0)break e;case"keydown":case"keyup":C=_v;break;case"focusin":E="focus",C=qo;break;case"focusout":E="blur",C=qo;break;case"beforeblur":case"afterblur":C=qo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=rv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=gv;break;case kd:case Dd:case Ad:C=nv;break;case Md:C=yv;break;case"scroll":C=ev;break;case"wheel":C=Cv;break;case"copy":case"cut":case"paste":C=av;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=su}var _=(t&4)!==0,n=!_&&e==="scroll",l=_?p!==null?p+"Capture":null:p;_=[];for(var c=d,h;c!==null;){h=c;var m=h.stateNode;if(h.tag===5&&m!==null&&(h=m,l!==null&&(m=Ls(c,l),m!=null&&_.push(Ps(c,m,h)))),n)break;c=c.return}0<_.length&&(p=new C(p,E,null,r,v),u.push({event:p,listeners:_}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",p&&r!==Aa&&(E=r.relatedTarget||r.fromElement)&&(Ur(E)||E[ir]))break e;if((C||p)&&(p=v.window===v?v:(p=v.ownerDocument)?p.defaultView||p.parentWindow:window,C?(E=r.relatedTarget||r.toElement,C=d,E=E?Ur(E):null,E!==null&&(n=ai(E),E!==n||E.tag!==5&&E.tag!==6)&&(E=null)):(C=null,E=d),C!==E)){if(_=ru,m="onMouseLeave",l="onMouseEnter",c="mouse",(e==="pointerout"||e==="pointerover")&&(_=su,m="onPointerLeave",l="onPointerEnter",c="pointer"),n=C==null?p:_i(C),h=E==null?p:_i(E),p=new _(m,c+"leave",C,r,v),p.target=n,p.relatedTarget=h,m=null,Ur(v)===d&&(_=new _(l,c+"enter",E,r,v),_.target=h,_.relatedTarget=n,m=_),n=m,C&&E)t:{for(_=C,l=E,c=0,h=_;h;h=li(h))c++;for(h=0,m=l;m;m=li(m))h++;for(;0<c-h;)_=li(_),c--;for(;0<h-c;)l=li(l),h--;for(;c--;){if(_===l||l!==null&&_===l.alternate)break t;_=li(_),l=li(l)}_=null}else _=null;C!==null&&pu(u,p,C,_,!1),E!==null&&n!==null&&pu(u,n,E,_,!0)}}e:{if(p=d?_i(d):window,C=p.nodeName&&p.nodeName.toLowerCase(),C==="select"||C==="input"&&p.type==="file")var w=kv;else if(au(p))if(Ed)w=Tv;else{w=Av;var b=Dv}else(C=p.nodeName)&&C.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(w=Mv);if(w&&(w=w(e,d))){wd(u,w,r,v);break e}b&&b(e,p,d),e==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&xa(p,"number",p.value)}switch(b=d?_i(d):window,e){case"focusin":(au(b)||b.contentEditable==="true")&&(di=b,Fa=d,ys=null);break;case"focusout":ys=Fa=di=null;break;case"mousedown":Na=!0;break;case"contextmenu":case"mouseup":case"dragend":Na=!1,du(u,r,v);break;case"selectionchange":if(Bv)break;case"keydown":case"keyup":du(u,r,v)}var x;if(Xl)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else hi?Sd(e,r)&&(y="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(y="onCompositionStart");y&&(yd&&r.locale!=="ko"&&(hi||y!=="onCompositionStart"?y==="onCompositionEnd"&&hi&&(x=md()):(wr=v,ql="value"in wr?wr.value:wr.textContent,hi=!0)),b=Qn(d,y),0<b.length&&(y=new iu(y,e,null,r,v),u.push({event:y,listeners:b}),x?y.data=x:(x=Cd(r),x!==null&&(y.data=x)))),(x=Ev?bv(e,r):xv(e,r))&&(d=Qn(d,"onBeforeInput"),0<d.length&&(v=new iu("onBeforeInput","beforeinput",null,r,v),u.push({event:v,listeners:d}),v.data=x))}Pd(u,t)})}function Ps(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Qn(e,t){for(var r=t+"Capture",i=[];e!==null;){var o=e,f=o.stateNode;o.tag===5&&f!==null&&(o=f,f=Ls(e,r),f!=null&&i.unshift(Ps(e,f,o)),f=Ls(e,t),f!=null&&i.push(Ps(e,f,o))),e=e.return}return i}function li(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pu(e,t,r,i,o){for(var f=t._reactName,g=[];r!==null&&r!==i;){var s=r,a=s.alternate,d=s.stateNode;if(a!==null&&a===i)break;s.tag===5&&d!==null&&(s=d,o?(a=Ls(r,f),a!=null&&g.unshift(Ps(r,a,s))):o||(a=Ls(r,f),a!=null&&g.push(Ps(r,a,s)))),r=r.return}g.length!==0&&e.push({event:t,listeners:g})}var Hv=/\r\n?/g,$v=/\u0000|\uFFFD/g;function vu(e){return(typeof e=="string"?e:""+e).replace(Hv,`
`).replace($v,"")}function gn(e,t,r){if(t=vu(t),vu(e)!==t&&r)throw Error(K(425))}function Xn(){}var Ha=null,$a=null;function Ua(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wa=typeof setTimeout=="function"?setTimeout:void 0,Uv=typeof clearTimeout=="function"?clearTimeout:void 0,gu=typeof Promise=="function"?Promise:void 0,Wv=typeof queueMicrotask=="function"?queueMicrotask:typeof gu<"u"?function(e){return gu.resolve(null).then(e).catch(zv)}:Wa;function zv(e){setTimeout(function(){throw e})}function ta(e,t){var r=t,i=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(i===0){e.removeChild(o),Ds(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=o}while(r);Ds(t)}function Rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function mu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Qi=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Qi,Os="__reactProps$"+Qi,ir="__reactContainer$"+Qi,za="__reactEvents$"+Qi,jv="__reactListeners$"+Qi,Vv="__reactHandles$"+Qi;function Ur(e){var t=e[Ut];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ir]||r[Ut]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=mu(e);e!==null;){if(r=e[Ut])return r;e=mu(e)}return t}e=r,r=e.parentNode}return null}function Ys(e){return e=e[Ut]||e[ir],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function _i(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function bo(e){return e[Os]||null}var ja=[],pi=-1;function Ir(e){return{current:e}}function me(e){0>pi||(e.current=ja[pi],ja[pi]=null,pi--)}function ve(e,t){pi++,ja[pi]=e.current,e.current=t}var Or={},Ke=Ir(Or),nt=Ir(!1),ei=Or;function Ui(e,t){var r=e.type.contextTypes;if(!r)return Or;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o={},f;for(f in r)o[f]=t[f];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ot(e){return e=e.childContextTypes,e!=null}function Yn(){me(nt),me(Ke)}function yu(e,t,r){if(Ke.current!==Or)throw Error(K(168));ve(Ke,t),ve(nt,r)}function Bd(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var o in i)if(!(o in t))throw Error(K(108,Dp(e)||"Unknown",o));return xe({},r,i)}function Jn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Or,ei=Ke.current,ve(Ke,e),ve(nt,nt.current),!0}function Su(e,t,r){var i=e.stateNode;if(!i)throw Error(K(169));r?(e=Bd(e,t,ei),i.__reactInternalMemoizedMergedChildContext=e,me(nt),me(Ke),ve(Ke,e)):me(nt),ve(nt,r)}var Qt=null,xo=!1,ra=!1;function Id(e){Qt===null?Qt=[e]:Qt.push(e)}function Kv(e){xo=!0,Id(e)}function Fr(){if(!ra&&Qt!==null){ra=!0;var e=0,t=_e;try{var r=Qt;for(_e=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Qt=null,xo=!1}catch(o){throw Qt!==null&&(Qt=Qt.slice(e+1)),ad(zl,Fr),o}finally{_e=t,ra=!1}}return null}var vi=[],gi=0,Zn=null,eo=0,gt=[],mt=0,ti=null,Yt=1,Jt="";function Hr(e,t){vi[gi++]=eo,vi[gi++]=Zn,Zn=e,eo=t}function Fd(e,t,r){gt[mt++]=Yt,gt[mt++]=Jt,gt[mt++]=ti,ti=e;var i=Yt;e=Jt;var o=32-Tt(i)-1;i&=~(1<<o),r+=1;var f=32-Tt(t)+o;if(30<f){var g=o-o%5;f=(i&(1<<g)-1).toString(32),i>>=g,o-=g,Yt=1<<32-Tt(t)+o|r<<o|i,Jt=f+e}else Yt=1<<f|r<<o|i,Jt=e}function Jl(e){e.return!==null&&(Hr(e,1),Fd(e,1,0))}function Zl(e){for(;e===Zn;)Zn=vi[--gi],vi[gi]=null,eo=vi[--gi],vi[gi]=null;for(;e===ti;)ti=gt[--mt],gt[mt]=null,Jt=gt[--mt],gt[mt]=null,Yt=gt[--mt],gt[mt]=null}var ut=null,ct=null,Ce=!1,Mt=null;function Nd(e,t){var r=yt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Cu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ut=e,ct=Rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ut=e,ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ti!==null?{id:Yt,overflow:Jt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=yt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ut=e,ct=null,!0):!1;default:return!1}}function Va(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ka(e){if(Ce){var t=ct;if(t){var r=t;if(!Cu(e,t)){if(Va(e))throw Error(K(418));t=Rr(r.nextSibling);var i=ut;t&&Cu(e,t)?Nd(i,r):(e.flags=e.flags&-4097|2,Ce=!1,ut=e)}}else{if(Va(e))throw Error(K(418));e.flags=e.flags&-4097|2,Ce=!1,ut=e}}}function wu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ut=e}function mn(e){if(e!==ut)return!1;if(!Ce)return wu(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ua(e.type,e.memoizedProps)),t&&(t=ct)){if(Va(e))throw Hd(),Error(K(418));for(;t;)Nd(e,t),t=Rr(t.nextSibling)}if(wu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ct=Rr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ct=null}}else ct=ut?Rr(e.stateNode.nextSibling):null;return!0}function Hd(){for(var e=ct;e;)e=Rr(e.nextSibling)}function Wi(){ct=ut=null,Ce=!1}function ec(e){Mt===null?Mt=[e]:Mt.push(e)}var qv=ar.ReactCurrentBatchConfig;function ss(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(K(309));var i=r.stateNode}if(!i)throw Error(K(147,e));var o=i,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var s=o.refs;g===null?delete s[f]:s[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(K(284));if(!r._owner)throw Error(K(290,e))}return e}function yn(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Eu(e){var t=e._init;return t(e._payload)}function $d(e){function t(l,c){if(e){var h=l.deletions;h===null?(l.deletions=[c],l.flags|=16):h.push(c)}}function r(l,c){if(!e)return null;for(;c!==null;)t(l,c),c=c.sibling;return null}function i(l,c){for(l=new Map;c!==null;)c.key!==null?l.set(c.key,c):l.set(c.index,c),c=c.sibling;return l}function o(l,c){return l=Mr(l,c),l.index=0,l.sibling=null,l}function f(l,c,h){return l.index=h,e?(h=l.alternate,h!==null?(h=h.index,h<c?(l.flags|=2,c):h):(l.flags|=2,c)):(l.flags|=1048576,c)}function g(l){return e&&l.alternate===null&&(l.flags|=2),l}function s(l,c,h,m){return c===null||c.tag!==6?(c=ca(h,l.mode,m),c.return=l,c):(c=o(c,h),c.return=l,c)}function a(l,c,h,m){var w=h.type;return w===ui?v(l,c,h.props.children,m,h.key):c!==null&&(c.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ur&&Eu(w)===c.type)?(m=o(c,h.props),m.ref=ss(l,c,h),m.return=l,m):(m=Hn(h.type,h.key,h.props,null,l.mode,m),m.ref=ss(l,c,h),m.return=l,m)}function d(l,c,h,m){return c===null||c.tag!==4||c.stateNode.containerInfo!==h.containerInfo||c.stateNode.implementation!==h.implementation?(c=ua(h,l.mode,m),c.return=l,c):(c=o(c,h.children||[]),c.return=l,c)}function v(l,c,h,m,w){return c===null||c.tag!==7?(c=Zr(h,l.mode,m,w),c.return=l,c):(c=o(c,h),c.return=l,c)}function u(l,c,h){if(typeof c=="string"&&c!==""||typeof c=="number")return c=ca(""+c,l.mode,h),c.return=l,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case ln:return h=Hn(c.type,c.key,c.props,null,l.mode,h),h.ref=ss(l,null,c),h.return=l,h;case ci:return c=ua(c,l.mode,h),c.return=l,c;case ur:var m=c._init;return u(l,m(c._payload),h)}if(us(c)||Zi(c))return c=Zr(c,l.mode,h,null),c.return=l,c;yn(l,c)}return null}function p(l,c,h,m){var w=c!==null?c.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return w!==null?null:s(l,c,""+h,m);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ln:return h.key===w?a(l,c,h,m):null;case ci:return h.key===w?d(l,c,h,m):null;case ur:return w=h._init,p(l,c,w(h._payload),m)}if(us(h)||Zi(h))return w!==null?null:v(l,c,h,m,null);yn(l,h)}return null}function C(l,c,h,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return l=l.get(h)||null,s(c,l,""+m,w);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ln:return l=l.get(m.key===null?h:m.key)||null,a(c,l,m,w);case ci:return l=l.get(m.key===null?h:m.key)||null,d(c,l,m,w);case ur:var b=m._init;return C(l,c,h,b(m._payload),w)}if(us(m)||Zi(m))return l=l.get(h)||null,v(c,l,m,w,null);yn(c,m)}return null}function E(l,c,h,m){for(var w=null,b=null,x=c,y=c=0,S=null;x!==null&&y<h.length;y++){x.index>y?(S=x,x=null):S=x.sibling;var L=p(l,x,h[y],m);if(L===null){x===null&&(x=S);break}e&&x&&L.alternate===null&&t(l,x),c=f(L,c,y),b===null?w=L:b.sibling=L,b=L,x=S}if(y===h.length)return r(l,x),Ce&&Hr(l,y),w;if(x===null){for(;y<h.length;y++)x=u(l,h[y],m),x!==null&&(c=f(x,c,y),b===null?w=x:b.sibling=x,b=x);return Ce&&Hr(l,y),w}for(x=i(l,x);y<h.length;y++)S=C(x,l,y,h[y],m),S!==null&&(e&&S.alternate!==null&&x.delete(S.key===null?y:S.key),c=f(S,c,y),b===null?w=S:b.sibling=S,b=S);return e&&x.forEach(function(k){return t(l,k)}),Ce&&Hr(l,y),w}function _(l,c,h,m){var w=Zi(h);if(typeof w!="function")throw Error(K(150));if(h=w.call(h),h==null)throw Error(K(151));for(var b=w=null,x=c,y=c=0,S=null,L=h.next();x!==null&&!L.done;y++,L=h.next()){x.index>y?(S=x,x=null):S=x.sibling;var k=p(l,x,L.value,m);if(k===null){x===null&&(x=S);break}e&&x&&k.alternate===null&&t(l,x),c=f(k,c,y),b===null?w=k:b.sibling=k,b=k,x=S}if(L.done)return r(l,x),Ce&&Hr(l,y),w;if(x===null){for(;!L.done;y++,L=h.next())L=u(l,L.value,m),L!==null&&(c=f(L,c,y),b===null?w=L:b.sibling=L,b=L);return Ce&&Hr(l,y),w}for(x=i(l,x);!L.done;y++,L=h.next())L=C(x,l,y,L.value,m),L!==null&&(e&&L.alternate!==null&&x.delete(L.key===null?y:L.key),c=f(L,c,y),b===null?w=L:b.sibling=L,b=L);return e&&x.forEach(function(D){return t(l,D)}),Ce&&Hr(l,y),w}function n(l,c,h,m){if(typeof h=="object"&&h!==null&&h.type===ui&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case ln:e:{for(var w=h.key,b=c;b!==null;){if(b.key===w){if(w=h.type,w===ui){if(b.tag===7){r(l,b.sibling),c=o(b,h.props.children),c.return=l,l=c;break e}}else if(b.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ur&&Eu(w)===b.type){r(l,b.sibling),c=o(b,h.props),c.ref=ss(l,b,h),c.return=l,l=c;break e}r(l,b);break}else t(l,b);b=b.sibling}h.type===ui?(c=Zr(h.props.children,l.mode,m,h.key),c.return=l,l=c):(m=Hn(h.type,h.key,h.props,null,l.mode,m),m.ref=ss(l,c,h),m.return=l,l=m)}return g(l);case ci:e:{for(b=h.key;c!==null;){if(c.key===b)if(c.tag===4&&c.stateNode.containerInfo===h.containerInfo&&c.stateNode.implementation===h.implementation){r(l,c.sibling),c=o(c,h.children||[]),c.return=l,l=c;break e}else{r(l,c);break}else t(l,c);c=c.sibling}c=ua(h,l.mode,m),c.return=l,l=c}return g(l);case ur:return b=h._init,n(l,c,b(h._payload),m)}if(us(h))return E(l,c,h,m);if(Zi(h))return _(l,c,h,m);yn(l,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,c!==null&&c.tag===6?(r(l,c.sibling),c=o(c,h),c.return=l,l=c):(r(l,c),c=ca(h,l.mode,m),c.return=l,l=c),g(l)):r(l,c)}return n}var zi=$d(!0),Ud=$d(!1),to=Ir(null),ro=null,mi=null,tc=null;function rc(){tc=mi=ro=null}function ic(e){var t=to.current;me(to),e._currentValue=t}function qa(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function xi(e,t){ro=e,tc=mi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(st=!0),e.firstContext=null)}function Ct(e){var t=e._currentValue;if(tc!==e)if(e={context:e,memoizedValue:t,next:null},mi===null){if(ro===null)throw Error(K(308));mi=e,ro.dependencies={lanes:0,firstContext:e}}else mi=mi.next=e;return t}var Wr=null;function sc(e){Wr===null?Wr=[e]:Wr.push(e)}function Wd(e,t,r,i){var o=t.interleaved;return o===null?(r.next=r,sc(t)):(r.next=o.next,o.next=r),t.interleaved=r,sr(e,i)}function sr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var hr=!1;function nc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kr(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,ce&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,sr(e,r)}return o=i.interleaved,o===null?(t.next=t,sc(i)):(t.next=o.next,o.next=t),i.interleaved=t,sr(e,r)}function Pn(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,jl(e,r)}}function bu(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var o=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var g={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?o=f=g:f=f.next=g,r=r.next}while(r!==null);f===null?o=f=t:f=f.next=t}else o=f=t;r={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:f,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function io(e,t,r,i){var o=e.updateQueue;hr=!1;var f=o.firstBaseUpdate,g=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var a=s,d=a.next;a.next=null,g===null?f=d:g.next=d,g=a;var v=e.alternate;v!==null&&(v=v.updateQueue,s=v.lastBaseUpdate,s!==g&&(s===null?v.firstBaseUpdate=d:s.next=d,v.lastBaseUpdate=a))}if(f!==null){var u=o.baseState;g=0,v=d=a=null,s=f;do{var p=s.lane,C=s.eventTime;if((i&p)===p){v!==null&&(v=v.next={eventTime:C,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var E=e,_=s;switch(p=t,C=r,_.tag){case 1:if(E=_.payload,typeof E=="function"){u=E.call(C,u,p);break e}u=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=_.payload,p=typeof E=="function"?E.call(C,u,p):E,p==null)break e;u=xe({},u,p);break e;case 2:hr=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,p=o.effects,p===null?o.effects=[s]:p.push(s))}else C={eventTime:C,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},v===null?(d=v=C,a=u):v=v.next=C,g|=p;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;p=s,s=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);if(v===null&&(a=u),o.baseState=a,o.firstBaseUpdate=d,o.lastBaseUpdate=v,t=o.shared.interleaved,t!==null){o=t;do g|=o.lane,o=o.next;while(o!==t)}else f===null&&(o.shared.lanes=0);ii|=g,e.lanes=g,e.memoizedState=u}}function xu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],o=i.callback;if(o!==null){if(i.callback=null,i=r,typeof o!="function")throw Error(K(191,o));o.call(i)}}}var Js={},zt=Ir(Js),Bs=Ir(Js),Is=Ir(Js);function zr(e){if(e===Js)throw Error(K(174));return e}function oc(e,t){switch(ve(Is,t),ve(Bs,e),ve(zt,Js),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ra(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ra(t,e)}me(zt),ve(zt,t)}function ji(){me(zt),me(Bs),me(Is)}function jd(e){zr(Is.current);var t=zr(zt.current),r=Ra(t,e.type);t!==r&&(ve(Bs,e),ve(zt,r))}function ac(e){Bs.current===e&&(me(zt),me(Bs))}var we=Ir(0);function so(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ia=[];function lc(){for(var e=0;e<ia.length;e++)ia[e]._workInProgressVersionPrimary=null;ia.length=0}var On=ar.ReactCurrentDispatcher,sa=ar.ReactCurrentBatchConfig,ri=0,Ee=null,Pe=null,Ie=null,no=!1,Ss=!1,Fs=0,Gv=0;function ze(){throw Error(K(321))}function cc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ot(e[r],t[r]))return!1;return!0}function uc(e,t,r,i,o,f){if(ri=f,Ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,On.current=e===null||e.memoizedState===null?Jv:Zv,e=r(i,o),Ss){f=0;do{if(Ss=!1,Fs=0,25<=f)throw Error(K(301));f+=1,Ie=Pe=null,t.updateQueue=null,On.current=eg,e=r(i,o)}while(Ss)}if(On.current=oo,t=Pe!==null&&Pe.next!==null,ri=0,Ie=Pe=Ee=null,no=!1,t)throw Error(K(300));return e}function hc(){var e=Fs!==0;return Fs=0,e}function Ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?Ee.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function wt(){if(Pe===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var t=Ie===null?Ee.memoizedState:Ie.next;if(t!==null)Ie=t,Pe=e;else{if(e===null)throw Error(K(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Ie===null?Ee.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function Ns(e,t){return typeof t=="function"?t(e):t}function na(e){var t=wt(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var i=Pe,o=i.baseQueue,f=r.pending;if(f!==null){if(o!==null){var g=o.next;o.next=f.next,f.next=g}i.baseQueue=o=f,r.pending=null}if(o!==null){f=o.next,i=i.baseState;var s=g=null,a=null,d=f;do{var v=d.lane;if((ri&v)===v)a!==null&&(a=a.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:e(i,d.action);else{var u={lane:v,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};a===null?(s=a=u,g=i):a=a.next=u,Ee.lanes|=v,ii|=v}d=d.next}while(d!==null&&d!==f);a===null?g=i:a.next=s,Ot(i,t.memoizedState)||(st=!0),t.memoizedState=i,t.baseState=g,t.baseQueue=a,r.lastRenderedState=i}if(e=r.interleaved,e!==null){o=e;do f=o.lane,Ee.lanes|=f,ii|=f,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function oa(e){var t=wt(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var i=r.dispatch,o=r.pending,f=t.memoizedState;if(o!==null){r.pending=null;var g=o=o.next;do f=e(f,g.action),g=g.next;while(g!==o);Ot(f,t.memoizedState)||(st=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,i]}function Vd(){}function Kd(e,t){var r=Ee,i=wt(),o=t(),f=!Ot(i.memoizedState,o);if(f&&(i.memoizedState=o,st=!0),i=i.queue,dc(Qd.bind(null,r,i,e),[e]),i.getSnapshot!==t||f||Ie!==null&&Ie.memoizedState.tag&1){if(r.flags|=2048,Hs(9,Gd.bind(null,r,i,o,t),void 0,null),Fe===null)throw Error(K(349));ri&30||qd(r,t,o)}return o}function qd(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Gd(e,t,r,i){t.value=r,t.getSnapshot=i,Xd(t)&&Yd(e)}function Qd(e,t,r){return r(function(){Xd(t)&&Yd(e)})}function Xd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ot(e,r)}catch{return!0}}function Yd(e){var t=sr(e,1);t!==null&&Pt(t,e,1,-1)}function Lu(e){var t=Ft();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:e},t.queue=e,e=e.dispatch=Yv.bind(null,Ee,e),[t.memoizedState,e]}function Hs(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function Jd(){return wt().memoizedState}function Bn(e,t,r,i){var o=Ft();Ee.flags|=e,o.memoizedState=Hs(1|t,r,void 0,i===void 0?null:i)}function Lo(e,t,r,i){var o=wt();i=i===void 0?null:i;var f=void 0;if(Pe!==null){var g=Pe.memoizedState;if(f=g.destroy,i!==null&&cc(i,g.deps)){o.memoizedState=Hs(t,r,f,i);return}}Ee.flags|=e,o.memoizedState=Hs(1|t,r,f,i)}function Ru(e,t){return Bn(8390656,8,e,t)}function dc(e,t){return Lo(2048,8,e,t)}function Zd(e,t){return Lo(4,2,e,t)}function ef(e,t){return Lo(4,4,e,t)}function tf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rf(e,t,r){return r=r!=null?r.concat([e]):null,Lo(4,4,tf.bind(null,t,e),r)}function fc(){}function sf(e,t){var r=wt();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&cc(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function nf(e,t){var r=wt();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&cc(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function of(e,t,r){return ri&21?(Ot(r,t)||(r=ud(),Ee.lanes|=r,ii|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,st=!0),e.memoizedState=r)}function Qv(e,t){var r=_e;_e=r!==0&&4>r?r:4,e(!0);var i=sa.transition;sa.transition={};try{e(!1),t()}finally{_e=r,sa.transition=i}}function af(){return wt().memoizedState}function Xv(e,t,r){var i=Ar(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},lf(e))cf(t,r);else if(r=Wd(e,t,r,i),r!==null){var o=Ye();Pt(r,e,i,o),uf(r,t,i)}}function Yv(e,t,r){var i=Ar(e),o={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(lf(e))cf(t,o);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,s=f(g,r);if(o.hasEagerState=!0,o.eagerState=s,Ot(s,g)){var a=t.interleaved;a===null?(o.next=o,sc(t)):(o.next=a.next,a.next=o),t.interleaved=o;return}}catch{}finally{}r=Wd(e,t,o,i),r!==null&&(o=Ye(),Pt(r,e,i,o),uf(r,t,i))}}function lf(e){var t=e.alternate;return e===Ee||t!==null&&t===Ee}function cf(e,t){Ss=no=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function uf(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,jl(e,r)}}var oo={readContext:Ct,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},Jv={readContext:Ct,useCallback:function(e,t){return Ft().memoizedState=[e,t===void 0?null:t],e},useContext:Ct,useEffect:Ru,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Bn(4194308,4,tf.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Bn(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bn(4,2,e,t)},useMemo:function(e,t){var r=Ft();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Ft();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Xv.bind(null,Ee,e),[i.memoizedState,e]},useRef:function(e){var t=Ft();return e={current:e},t.memoizedState=e},useState:Lu,useDebugValue:fc,useDeferredValue:function(e){return Ft().memoizedState=e},useTransition:function(){var e=Lu(!1),t=e[0];return e=Qv.bind(null,e[1]),Ft().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Ee,o=Ft();if(Ce){if(r===void 0)throw Error(K(407));r=r()}else{if(r=t(),Fe===null)throw Error(K(349));ri&30||qd(i,t,r)}o.memoizedState=r;var f={value:r,getSnapshot:t};return o.queue=f,Ru(Qd.bind(null,i,f,e),[e]),i.flags|=2048,Hs(9,Gd.bind(null,i,f,r,t),void 0,null),r},useId:function(){var e=Ft(),t=Fe.identifierPrefix;if(Ce){var r=Jt,i=Yt;r=(i&~(1<<32-Tt(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Fs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Gv++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zv={readContext:Ct,useCallback:sf,useContext:Ct,useEffect:dc,useImperativeHandle:rf,useInsertionEffect:Zd,useLayoutEffect:ef,useMemo:nf,useReducer:na,useRef:Jd,useState:function(){return na(Ns)},useDebugValue:fc,useDeferredValue:function(e){var t=wt();return of(t,Pe.memoizedState,e)},useTransition:function(){var e=na(Ns)[0],t=wt().memoizedState;return[e,t]},useMutableSource:Vd,useSyncExternalStore:Kd,useId:af,unstable_isNewReconciler:!1},eg={readContext:Ct,useCallback:sf,useContext:Ct,useEffect:dc,useImperativeHandle:rf,useInsertionEffect:Zd,useLayoutEffect:ef,useMemo:nf,useReducer:oa,useRef:Jd,useState:function(){return oa(Ns)},useDebugValue:fc,useDeferredValue:function(e){var t=wt();return Pe===null?t.memoizedState=e:of(t,Pe.memoizedState,e)},useTransition:function(){var e=oa(Ns)[0],t=wt().memoizedState;return[e,t]},useMutableSource:Vd,useSyncExternalStore:Kd,useId:af,unstable_isNewReconciler:!1};function Lt(e,t){if(e&&e.defaultProps){t=xe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ga(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:xe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ro={isMounted:function(e){return(e=e._reactInternals)?ai(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Ye(),o=Ar(e),f=Zt(i,o);f.payload=t,r!=null&&(f.callback=r),t=kr(e,f,o),t!==null&&(Pt(t,e,o,i),Pn(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Ye(),o=Ar(e),f=Zt(i,o);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=kr(e,f,o),t!==null&&(Pt(t,e,o,i),Pn(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ye(),i=Ar(e),o=Zt(r,i);o.tag=2,t!=null&&(o.callback=t),t=kr(e,o,i),t!==null&&(Pt(t,e,i,r),Pn(t,e,i))}};function ku(e,t,r,i,o,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,f,g):t.prototype&&t.prototype.isPureReactComponent?!Ms(r,i)||!Ms(o,f):!0}function hf(e,t,r){var i=!1,o=Or,f=t.contextType;return typeof f=="object"&&f!==null?f=Ct(f):(o=ot(t)?ei:Ke.current,i=t.contextTypes,f=(i=i!=null)?Ui(e,o):Or),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ro,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=f),t}function Du(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Ro.enqueueReplaceState(t,t.state,null)}function Qa(e,t,r,i){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},nc(e);var f=t.contextType;typeof f=="object"&&f!==null?o.context=Ct(f):(f=ot(t)?ei:Ke.current,o.context=Ui(e,f)),o.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Ga(e,t,f,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Ro.enqueueReplaceState(o,o.state,null),io(e,r,o,i),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Vi(e,t){try{var r="",i=t;do r+=kp(i),i=i.return;while(i);var o=r}catch(f){o=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:o,digest:null}}function aa(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Xa(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var tg=typeof WeakMap=="function"?WeakMap:Map;function df(e,t,r){r=Zt(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){lo||(lo=!0,ol=i),Xa(e,t)},r}function ff(e,t,r){r=Zt(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var o=t.value;r.payload=function(){return i(o)},r.callback=function(){Xa(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){Xa(e,t),typeof i!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),r}function Au(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new tg;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(r)||(o.add(r),e=pg.bind(null,e,t,r),t.then(e,e))}function Mu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Tu(e,t,r,i,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Zt(-1,1),t.tag=2,kr(r,t,1))),r.lanes|=1),e)}var rg=ar.ReactCurrentOwner,st=!1;function Xe(e,t,r,i){t.child=e===null?Ud(t,null,r,i):zi(t,e.child,r,i)}function Pu(e,t,r,i,o){r=r.render;var f=t.ref;return xi(t,o),i=uc(e,t,r,i,f,o),r=hc(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,nr(e,t,o)):(Ce&&r&&Jl(t),t.flags|=1,Xe(e,t,i,o),t.child)}function Ou(e,t,r,i,o){if(e===null){var f=r.type;return typeof f=="function"&&!Cc(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,_f(e,t,f,i,o)):(e=Hn(r.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&o)){var g=f.memoizedProps;if(r=r.compare,r=r!==null?r:Ms,r(g,i)&&e.ref===t.ref)return nr(e,t,o)}return t.flags|=1,e=Mr(f,i),e.ref=t.ref,e.return=t,t.child=e}function _f(e,t,r,i,o){if(e!==null){var f=e.memoizedProps;if(Ms(f,i)&&e.ref===t.ref)if(st=!1,t.pendingProps=i=f,(e.lanes&o)!==0)e.flags&131072&&(st=!0);else return t.lanes=e.lanes,nr(e,t,o)}return Ya(e,t,r,i,o)}function pf(e,t,r){var i=t.pendingProps,o=i.children,f=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Si,lt),lt|=r;else{if(!(r&1073741824))return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ve(Si,lt),lt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=f!==null?f.baseLanes:r,ve(Si,lt),lt|=i}else f!==null?(i=f.baseLanes|r,t.memoizedState=null):i=r,ve(Si,lt),lt|=i;return Xe(e,t,o,r),t.child}function vf(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ya(e,t,r,i,o){var f=ot(r)?ei:Ke.current;return f=Ui(t,f),xi(t,o),r=uc(e,t,r,i,f,o),i=hc(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,nr(e,t,o)):(Ce&&i&&Jl(t),t.flags|=1,Xe(e,t,r,o),t.child)}function Bu(e,t,r,i,o){if(ot(r)){var f=!0;Jn(t)}else f=!1;if(xi(t,o),t.stateNode===null)In(e,t),hf(t,r,i),Qa(t,r,i,o),i=!0;else if(e===null){var g=t.stateNode,s=t.memoizedProps;g.props=s;var a=g.context,d=r.contextType;typeof d=="object"&&d!==null?d=Ct(d):(d=ot(r)?ei:Ke.current,d=Ui(t,d));var v=r.getDerivedStateFromProps,u=typeof v=="function"||typeof g.getSnapshotBeforeUpdate=="function";u||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(s!==i||a!==d)&&Du(t,g,i,d),hr=!1;var p=t.memoizedState;g.state=p,io(t,i,g,o),a=t.memoizedState,s!==i||p!==a||nt.current||hr?(typeof v=="function"&&(Ga(t,r,v,i),a=t.memoizedState),(s=hr||ku(t,r,s,i,p,a,d))?(u||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=a),g.props=i,g.state=a,g.context=d,i=s):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{g=t.stateNode,zd(e,t),s=t.memoizedProps,d=t.type===t.elementType?s:Lt(t.type,s),g.props=d,u=t.pendingProps,p=g.context,a=r.contextType,typeof a=="object"&&a!==null?a=Ct(a):(a=ot(r)?ei:Ke.current,a=Ui(t,a));var C=r.getDerivedStateFromProps;(v=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(s!==u||p!==a)&&Du(t,g,i,a),hr=!1,p=t.memoizedState,g.state=p,io(t,i,g,o);var E=t.memoizedState;s!==u||p!==E||nt.current||hr?(typeof C=="function"&&(Ga(t,r,C,i),E=t.memoizedState),(d=hr||ku(t,r,d,i,p,E,a)||!1)?(v||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(i,E,a),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(i,E,a)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=E),g.props=i,g.state=E,g.context=a,i=d):(typeof g.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),i=!1)}return Ja(e,t,r,i,f,o)}function Ja(e,t,r,i,o,f){vf(e,t);var g=(t.flags&128)!==0;if(!i&&!g)return o&&Su(t,r,!1),nr(e,t,f);i=t.stateNode,rg.current=t;var s=g&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&g?(t.child=zi(t,e.child,null,f),t.child=zi(t,null,s,f)):Xe(e,t,s,f),t.memoizedState=i.state,o&&Su(t,r,!0),t.child}function gf(e){var t=e.stateNode;t.pendingContext?yu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yu(e,t.context,!1),oc(e,t.containerInfo)}function Iu(e,t,r,i,o){return Wi(),ec(o),t.flags|=256,Xe(e,t,r,i),t.child}var Za={dehydrated:null,treeContext:null,retryLane:0};function el(e){return{baseLanes:e,cachePool:null,transitions:null}}function mf(e,t,r){var i=t.pendingProps,o=we.current,f=!1,g=(t.flags&128)!==0,s;if((s=g)||(s=e!==null&&e.memoizedState===null?!1:(o&2)!==0),s?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ve(we,o&1),e===null)return Ka(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=i.children,e=i.fallback,f?(i=t.mode,f=t.child,g={mode:"hidden",children:g},!(i&1)&&f!==null?(f.childLanes=0,f.pendingProps=g):f=Ao(g,i,0,null),e=Zr(e,i,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=el(r),t.memoizedState=Za,e):_c(t,g));if(o=e.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return ig(e,t,g,i,s,o,r);if(f){f=i.fallback,g=t.mode,o=e.child,s=o.sibling;var a={mode:"hidden",children:i.children};return!(g&1)&&t.child!==o?(i=t.child,i.childLanes=0,i.pendingProps=a,t.deletions=null):(i=Mr(o,a),i.subtreeFlags=o.subtreeFlags&14680064),s!==null?f=Mr(s,f):(f=Zr(f,g,r,null),f.flags|=2),f.return=t,i.return=t,i.sibling=f,t.child=i,i=f,f=t.child,g=e.child.memoizedState,g=g===null?el(r):{baseLanes:g.baseLanes|r,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~r,t.memoizedState=Za,i}return f=e.child,e=f.sibling,i=Mr(f,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function _c(e,t){return t=Ao({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Sn(e,t,r,i){return i!==null&&ec(i),zi(t,e.child,null,r),e=_c(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ig(e,t,r,i,o,f,g){if(r)return t.flags&256?(t.flags&=-257,i=aa(Error(K(422))),Sn(e,t,g,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=i.fallback,o=t.mode,i=Ao({mode:"visible",children:i.children},o,0,null),f=Zr(f,o,g,null),f.flags|=2,i.return=t,f.return=t,i.sibling=f,t.child=i,t.mode&1&&zi(t,e.child,null,g),t.child.memoizedState=el(g),t.memoizedState=Za,f);if(!(t.mode&1))return Sn(e,t,g,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var s=i.dgst;return i=s,f=Error(K(419)),i=aa(f,i,void 0),Sn(e,t,g,i)}if(s=(g&e.childLanes)!==0,st||s){if(i=Fe,i!==null){switch(g&-g){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|g)?0:o,o!==0&&o!==f.retryLane&&(f.retryLane=o,sr(e,o),Pt(i,e,o,-1))}return Sc(),i=aa(Error(K(421))),Sn(e,t,g,i)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=vg.bind(null,e),o._reactRetry=t,null):(e=f.treeContext,ct=Rr(o.nextSibling),ut=t,Ce=!0,Mt=null,e!==null&&(gt[mt++]=Yt,gt[mt++]=Jt,gt[mt++]=ti,Yt=e.id,Jt=e.overflow,ti=t),t=_c(t,i.children),t.flags|=4096,t)}function Fu(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),qa(e.return,t,r)}function la(e,t,r,i,o){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:o}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=r,f.tailMode=o)}function yf(e,t,r){var i=t.pendingProps,o=i.revealOrder,f=i.tail;if(Xe(e,t,i.children,r),i=we.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fu(e,r,t);else if(e.tag===19)Fu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ve(we,i),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&so(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),la(t,!1,o,r,f);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&so(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}la(t,!0,r,null,f);break;case"together":la(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function In(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ii|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,r=Mr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Mr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function sg(e,t,r){switch(t.tag){case 3:gf(t),Wi();break;case 5:jd(t);break;case 1:ot(t.type)&&Jn(t);break;case 4:oc(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,o=t.memoizedProps.value;ve(to,i._currentValue),i._currentValue=o;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(ve(we,we.current&1),t.flags|=128,null):r&t.child.childLanes?mf(e,t,r):(ve(we,we.current&1),e=nr(e,t,r),e!==null?e.sibling:null);ve(we,we.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return yf(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ve(we,we.current),i)break;return null;case 22:case 23:return t.lanes=0,pf(e,t,r)}return nr(e,t,r)}var Sf,tl,Cf,wf;Sf=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};tl=function(){};Cf=function(e,t,r,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,zr(zt.current);var f=null;switch(r){case"input":o=Ea(e,o),i=Ea(e,i),f=[];break;case"select":o=xe({},o,{value:void 0}),i=xe({},i,{value:void 0}),f=[];break;case"textarea":o=La(e,o),i=La(e,i),f=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Xn)}ka(r,i);var g;r=null;for(d in o)if(!i.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var s=o[d];for(g in s)s.hasOwnProperty(g)&&(r||(r={}),r[g]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(bs.hasOwnProperty(d)?f||(f=[]):(f=f||[]).push(d,null));for(d in i){var a=i[d];if(s=o!=null?o[d]:void 0,i.hasOwnProperty(d)&&a!==s&&(a!=null||s!=null))if(d==="style")if(s){for(g in s)!s.hasOwnProperty(g)||a&&a.hasOwnProperty(g)||(r||(r={}),r[g]="");for(g in a)a.hasOwnProperty(g)&&s[g]!==a[g]&&(r||(r={}),r[g]=a[g])}else r||(f||(f=[]),f.push(d,r)),r=a;else d==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,s=s?s.__html:void 0,a!=null&&s!==a&&(f=f||[]).push(d,a)):d==="children"?typeof a!="string"&&typeof a!="number"||(f=f||[]).push(d,""+a):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(bs.hasOwnProperty(d)?(a!=null&&d==="onScroll"&&ge("scroll",e),f||s===a||(f=[])):(f=f||[]).push(d,a))}r&&(f=f||[]).push("style",r);var d=f;(t.updateQueue=d)&&(t.flags|=4)}};wf=function(e,t,r,i){r!==i&&(t.flags|=4)};function ns(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function je(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function ng(e,t,r){var i=t.pendingProps;switch(Zl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(t),null;case 1:return ot(t.type)&&Yn(),je(t),null;case 3:return i=t.stateNode,ji(),me(nt),me(Ke),lc(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(mn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mt!==null&&(cl(Mt),Mt=null))),tl(e,t),je(t),null;case 5:ac(t);var o=zr(Is.current);if(r=t.type,e!==null&&t.stateNode!=null)Cf(e,t,r,i,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(K(166));return je(t),null}if(e=zr(zt.current),mn(t)){i=t.stateNode,r=t.type;var f=t.memoizedProps;switch(i[Ut]=t,i[Os]=f,e=(t.mode&1)!==0,r){case"dialog":ge("cancel",i),ge("close",i);break;case"iframe":case"object":case"embed":ge("load",i);break;case"video":case"audio":for(o=0;o<ds.length;o++)ge(ds[o],i);break;case"source":ge("error",i);break;case"img":case"image":case"link":ge("error",i),ge("load",i);break;case"details":ge("toggle",i);break;case"input":Kc(i,f),ge("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!f.multiple},ge("invalid",i);break;case"textarea":Gc(i,f),ge("invalid",i)}ka(r,f),o=null;for(var g in f)if(f.hasOwnProperty(g)){var s=f[g];g==="children"?typeof s=="string"?i.textContent!==s&&(f.suppressHydrationWarning!==!0&&gn(i.textContent,s,e),o=["children",s]):typeof s=="number"&&i.textContent!==""+s&&(f.suppressHydrationWarning!==!0&&gn(i.textContent,s,e),o=["children",""+s]):bs.hasOwnProperty(g)&&s!=null&&g==="onScroll"&&ge("scroll",i)}switch(r){case"input":cn(i),qc(i,f,!0);break;case"textarea":cn(i),Qc(i);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(i.onclick=Xn)}i=o,t.updateQueue=i,i!==null&&(t.flags|=4)}else{g=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qh(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=g.createElement(r,{is:i.is}):(e=g.createElement(r),r==="select"&&(g=e,i.multiple?g.multiple=!0:i.size&&(g.size=i.size))):e=g.createElementNS(e,r),e[Ut]=t,e[Os]=i,Sf(e,t,!1,!1),t.stateNode=e;e:{switch(g=Da(r,i),r){case"dialog":ge("cancel",e),ge("close",e),o=i;break;case"iframe":case"object":case"embed":ge("load",e),o=i;break;case"video":case"audio":for(o=0;o<ds.length;o++)ge(ds[o],e);o=i;break;case"source":ge("error",e),o=i;break;case"img":case"image":case"link":ge("error",e),ge("load",e),o=i;break;case"details":ge("toggle",e),o=i;break;case"input":Kc(e,i),o=Ea(e,i),ge("invalid",e);break;case"option":o=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=xe({},i,{value:void 0}),ge("invalid",e);break;case"textarea":Gc(e,i),o=La(e,i),ge("invalid",e);break;default:o=i}ka(r,o),s=o;for(f in s)if(s.hasOwnProperty(f)){var a=s[f];f==="style"?Jh(e,a):f==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Xh(e,a)):f==="children"?typeof a=="string"?(r!=="textarea"||a!=="")&&xs(e,a):typeof a=="number"&&xs(e,""+a):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(bs.hasOwnProperty(f)?a!=null&&f==="onScroll"&&ge("scroll",e):a!=null&&Nl(e,f,a,g))}switch(r){case"input":cn(e),qc(e,i,!1);break;case"textarea":cn(e),Qc(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Pr(i.value));break;case"select":e.multiple=!!i.multiple,f=i.value,f!=null?Ci(e,!!i.multiple,f,!1):i.defaultValue!=null&&Ci(e,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Xn)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return je(t),null;case 6:if(e&&t.stateNode!=null)wf(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(K(166));if(r=zr(Is.current),zr(zt.current),mn(t)){if(i=t.stateNode,r=t.memoizedProps,i[Ut]=t,(f=i.nodeValue!==r)&&(e=ut,e!==null))switch(e.tag){case 3:gn(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gn(i.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Ut]=t,t.stateNode=i}return je(t),null;case 13:if(me(we),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&ct!==null&&t.mode&1&&!(t.flags&128))Hd(),Wi(),t.flags|=98560,f=!1;else if(f=mn(t),i!==null&&i.dehydrated!==null){if(e===null){if(!f)throw Error(K(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(K(317));f[Ut]=t}else Wi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;je(t),f=!1}else Mt!==null&&(cl(Mt),Mt=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||we.current&1?Oe===0&&(Oe=3):Sc())),t.updateQueue!==null&&(t.flags|=4),je(t),null);case 4:return ji(),tl(e,t),e===null&&Ts(t.stateNode.containerInfo),je(t),null;case 10:return ic(t.type._context),je(t),null;case 17:return ot(t.type)&&Yn(),je(t),null;case 19:if(me(we),f=t.memoizedState,f===null)return je(t),null;if(i=(t.flags&128)!==0,g=f.rendering,g===null)if(i)ns(f,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=so(e),g!==null){for(t.flags|=128,ns(f,!1),i=g.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)f=r,e=i,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ve(we,we.current&1|2),t.child}e=e.sibling}f.tail!==null&&De()>Ki&&(t.flags|=128,i=!0,ns(f,!1),t.lanes=4194304)}else{if(!i)if(e=so(g),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ns(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ce)return je(t),null}else 2*De()-f.renderingStartTime>Ki&&r!==1073741824&&(t.flags|=128,i=!0,ns(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(r=f.last,r!==null?r.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=De(),t.sibling=null,r=we.current,ve(we,i?r&1|2:r&1),t):(je(t),null);case 22:case 23:return yc(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?lt&1073741824&&(je(t),t.subtreeFlags&6&&(t.flags|=8192)):je(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function og(e,t){switch(Zl(t),t.tag){case 1:return ot(t.type)&&Yn(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ji(),me(nt),me(Ke),lc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ac(t),null;case 13:if(me(we),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));Wi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return me(we),null;case 4:return ji(),null;case 10:return ic(t.type._context),null;case 22:case 23:return yc(),null;case 24:return null;default:return null}}var Cn=!1,Ve=!1,ag=typeof WeakSet=="function"?WeakSet:Set,Y=null;function yi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Re(e,t,i)}else r.current=null}function rl(e,t,r){try{r()}catch(i){Re(e,t,i)}}var Nu=!1;function lg(e,t){if(Ha=qn,e=Ld(),Yl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var o=i.anchorOffset,f=i.focusNode;i=i.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var g=0,s=-1,a=-1,d=0,v=0,u=e,p=null;t:for(;;){for(var C;u!==r||o!==0&&u.nodeType!==3||(s=g+o),u!==f||i!==0&&u.nodeType!==3||(a=g+i),u.nodeType===3&&(g+=u.nodeValue.length),(C=u.firstChild)!==null;)p=u,u=C;for(;;){if(u===e)break t;if(p===r&&++d===o&&(s=g),p===f&&++v===i&&(a=g),(C=u.nextSibling)!==null)break;u=p,p=u.parentNode}u=C}r=s===-1||a===-1?null:{start:s,end:a}}else r=null}r=r||{start:0,end:0}}else r=null;for($a={focusedElem:e,selectionRange:r},qn=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var E=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var _=E.memoizedProps,n=E.memoizedState,l=t.stateNode,c=l.getSnapshotBeforeUpdate(t.elementType===t.type?_:Lt(t.type,_),n);l.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(m){Re(t,t.return,m)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return E=Nu,Nu=!1,E}function Cs(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&e)===e){var f=o.destroy;o.destroy=void 0,f!==void 0&&rl(t,r,f)}o=o.next}while(o!==i)}}function ko(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function il(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Ef(e){var t=e.alternate;t!==null&&(e.alternate=null,Ef(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ut],delete t[Os],delete t[za],delete t[jv],delete t[Vv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bf(e){return e.tag===5||e.tag===3||e.tag===4}function Hu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Xn));else if(i!==4&&(e=e.child,e!==null))for(sl(e,t,r),e=e.sibling;e!==null;)sl(e,t,r),e=e.sibling}function nl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(nl(e,t,r),e=e.sibling;e!==null;)nl(e,t,r),e=e.sibling}var Ne=null,At=!1;function lr(e,t,r){for(r=r.child;r!==null;)xf(e,t,r),r=r.sibling}function xf(e,t,r){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(So,r)}catch{}switch(r.tag){case 5:Ve||yi(r,t);case 6:var i=Ne,o=At;Ne=null,lr(e,t,r),Ne=i,At=o,Ne!==null&&(At?(e=Ne,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ne.removeChild(r.stateNode));break;case 18:Ne!==null&&(At?(e=Ne,r=r.stateNode,e.nodeType===8?ta(e.parentNode,r):e.nodeType===1&&ta(e,r),Ds(e)):ta(Ne,r.stateNode));break;case 4:i=Ne,o=At,Ne=r.stateNode.containerInfo,At=!0,lr(e,t,r),Ne=i,At=o;break;case 0:case 11:case 14:case 15:if(!Ve&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var f=o,g=f.destroy;f=f.tag,g!==void 0&&(f&2||f&4)&&rl(r,t,g),o=o.next}while(o!==i)}lr(e,t,r);break;case 1:if(!Ve&&(yi(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(s){Re(r,t,s)}lr(e,t,r);break;case 21:lr(e,t,r);break;case 22:r.mode&1?(Ve=(i=Ve)||r.memoizedState!==null,lr(e,t,r),Ve=i):lr(e,t,r);break;default:lr(e,t,r)}}function $u(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ag),t.forEach(function(i){var o=gg.bind(null,e,i);r.has(i)||(r.add(i),i.then(o,o))})}}function xt(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];try{var f=e,g=t,s=g;e:for(;s!==null;){switch(s.tag){case 5:Ne=s.stateNode,At=!1;break e;case 3:Ne=s.stateNode.containerInfo,At=!0;break e;case 4:Ne=s.stateNode.containerInfo,At=!0;break e}s=s.return}if(Ne===null)throw Error(K(160));xf(f,g,o),Ne=null,At=!1;var a=o.alternate;a!==null&&(a.return=null),o.return=null}catch(d){Re(o,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Lf(t,e),t=t.sibling}function Lf(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xt(t,e),It(e),i&4){try{Cs(3,e,e.return),ko(3,e)}catch(_){Re(e,e.return,_)}try{Cs(5,e,e.return)}catch(_){Re(e,e.return,_)}}break;case 1:xt(t,e),It(e),i&512&&r!==null&&yi(r,r.return);break;case 5:if(xt(t,e),It(e),i&512&&r!==null&&yi(r,r.return),e.flags&32){var o=e.stateNode;try{xs(o,"")}catch(_){Re(e,e.return,_)}}if(i&4&&(o=e.stateNode,o!=null)){var f=e.memoizedProps,g=r!==null?r.memoizedProps:f,s=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{s==="input"&&f.type==="radio"&&f.name!=null&&qh(o,f),Da(s,g);var d=Da(s,f);for(g=0;g<a.length;g+=2){var v=a[g],u=a[g+1];v==="style"?Jh(o,u):v==="dangerouslySetInnerHTML"?Xh(o,u):v==="children"?xs(o,u):Nl(o,v,u,d)}switch(s){case"input":ba(o,f);break;case"textarea":Gh(o,f);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!f.multiple;var C=f.value;C!=null?Ci(o,!!f.multiple,C,!1):p!==!!f.multiple&&(f.defaultValue!=null?Ci(o,!!f.multiple,f.defaultValue,!0):Ci(o,!!f.multiple,f.multiple?[]:"",!1))}o[Os]=f}catch(_){Re(e,e.return,_)}}break;case 6:if(xt(t,e),It(e),i&4){if(e.stateNode===null)throw Error(K(162));o=e.stateNode,f=e.memoizedProps;try{o.nodeValue=f}catch(_){Re(e,e.return,_)}}break;case 3:if(xt(t,e),It(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Ds(t.containerInfo)}catch(_){Re(e,e.return,_)}break;case 4:xt(t,e),It(e);break;case 13:xt(t,e),It(e),o=e.child,o.flags&8192&&(f=o.memoizedState!==null,o.stateNode.isHidden=f,!f||o.alternate!==null&&o.alternate.memoizedState!==null||(gc=De())),i&4&&$u(e);break;case 22:if(v=r!==null&&r.memoizedState!==null,e.mode&1?(Ve=(d=Ve)||v,xt(t,e),Ve=d):xt(t,e),It(e),i&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!v&&e.mode&1)for(Y=e,v=e.child;v!==null;){for(u=Y=v;Y!==null;){switch(p=Y,C=p.child,p.tag){case 0:case 11:case 14:case 15:Cs(4,p,p.return);break;case 1:yi(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){i=p,r=p.return;try{t=i,E.props=t.memoizedProps,E.state=t.memoizedState,E.componentWillUnmount()}catch(_){Re(i,r,_)}}break;case 5:yi(p,p.return);break;case 22:if(p.memoizedState!==null){Wu(u);continue}}C!==null?(C.return=p,Y=C):Wu(u)}v=v.sibling}e:for(v=null,u=e;;){if(u.tag===5){if(v===null){v=u;try{o=u.stateNode,d?(f=o.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(s=u.stateNode,a=u.memoizedProps.style,g=a!=null&&a.hasOwnProperty("display")?a.display:null,s.style.display=Yh("display",g))}catch(_){Re(e,e.return,_)}}}else if(u.tag===6){if(v===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(_){Re(e,e.return,_)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;v===u&&(v=null),u=u.return}v===u&&(v=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:xt(t,e),It(e),i&4&&$u(e);break;case 21:break;default:xt(t,e),It(e)}}function It(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(bf(r)){var i=r;break e}r=r.return}throw Error(K(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(xs(o,""),i.flags&=-33);var f=Hu(e);nl(e,f,o);break;case 3:case 4:var g=i.stateNode.containerInfo,s=Hu(e);sl(e,s,g);break;default:throw Error(K(161))}}catch(a){Re(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cg(e,t,r){Y=e,Rf(e)}function Rf(e,t,r){for(var i=(e.mode&1)!==0;Y!==null;){var o=Y,f=o.child;if(o.tag===22&&i){var g=o.memoizedState!==null||Cn;if(!g){var s=o.alternate,a=s!==null&&s.memoizedState!==null||Ve;s=Cn;var d=Ve;if(Cn=g,(Ve=a)&&!d)for(Y=o;Y!==null;)g=Y,a=g.child,g.tag===22&&g.memoizedState!==null?zu(o):a!==null?(a.return=g,Y=a):zu(o);for(;f!==null;)Y=f,Rf(f),f=f.sibling;Y=o,Cn=s,Ve=d}Uu(e)}else o.subtreeFlags&8772&&f!==null?(f.return=o,Y=f):Uu(e)}}function Uu(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ve||ko(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Ve)if(r===null)i.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:Lt(t.type,r.memoizedProps);i.componentDidUpdate(o,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&xu(t,f,i);break;case 3:var g=t.updateQueue;if(g!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}xu(t,g,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break;case"img":a.src&&(r.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var v=d.memoizedState;if(v!==null){var u=v.dehydrated;u!==null&&Ds(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Ve||t.flags&512&&il(t)}catch(p){Re(t,t.return,p)}}if(t===e){Y=null;break}if(r=t.sibling,r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Wu(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Y=r;break}Y=t.return}}function zu(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ko(4,t)}catch(a){Re(t,r,a)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var o=t.return;try{i.componentDidMount()}catch(a){Re(t,o,a)}}var f=t.return;try{il(t)}catch(a){Re(t,f,a)}break;case 5:var g=t.return;try{il(t)}catch(a){Re(t,g,a)}}}catch(a){Re(t,t.return,a)}if(t===e){Y=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Y=s;break}Y=t.return}}var ug=Math.ceil,ao=ar.ReactCurrentDispatcher,pc=ar.ReactCurrentOwner,St=ar.ReactCurrentBatchConfig,ce=0,Fe=null,Me=null,$e=0,lt=0,Si=Ir(0),Oe=0,$s=null,ii=0,Do=0,vc=0,ws=null,it=null,gc=0,Ki=1/0,Gt=null,lo=!1,ol=null,Dr=null,wn=!1,Er=null,co=0,Es=0,al=null,Fn=-1,Nn=0;function Ye(){return ce&6?De():Fn!==-1?Fn:Fn=De()}function Ar(e){return e.mode&1?ce&2&&$e!==0?$e&-$e:qv.transition!==null?(Nn===0&&(Nn=ud()),Nn):(e=_e,e!==0||(e=window.event,e=e===void 0?16:gd(e.type)),e):1}function Pt(e,t,r,i){if(50<Es)throw Es=0,al=null,Error(K(185));Qs(e,r,i),(!(ce&2)||e!==Fe)&&(e===Fe&&(!(ce&2)&&(Do|=r),Oe===4&&fr(e,$e)),at(e,i),r===1&&ce===0&&!(t.mode&1)&&(Ki=De()+500,xo&&Fr()))}function at(e,t){var r=e.callbackNode;qp(e,t);var i=Kn(e,e===Fe?$e:0);if(i===0)r!==null&&Jc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&Jc(r),t===1)e.tag===0?Kv(ju.bind(null,e)):Id(ju.bind(null,e)),Wv(function(){!(ce&6)&&Fr()}),r=null;else{switch(hd(i)){case 1:r=zl;break;case 4:r=ld;break;case 16:r=Vn;break;case 536870912:r=cd;break;default:r=Vn}r=Bf(r,kf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function kf(e,t){if(Fn=-1,Nn=0,ce&6)throw Error(K(327));var r=e.callbackNode;if(Li()&&e.callbackNode!==r)return null;var i=Kn(e,e===Fe?$e:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=uo(e,i);else{t=i;var o=ce;ce|=2;var f=Af();(Fe!==e||$e!==t)&&(Gt=null,Ki=De()+500,Jr(e,t));do try{fg();break}catch(s){Df(e,s)}while(!0);rc(),ao.current=f,ce=o,Me!==null?t=0:(Fe=null,$e=0,t=Oe)}if(t!==0){if(t===2&&(o=Oa(e),o!==0&&(i=o,t=ll(e,o))),t===1)throw r=$s,Jr(e,0),fr(e,i),at(e,De()),r;if(t===6)fr(e,i);else{if(o=e.current.alternate,!(i&30)&&!hg(o)&&(t=uo(e,i),t===2&&(f=Oa(e),f!==0&&(i=f,t=ll(e,f))),t===1))throw r=$s,Jr(e,0),fr(e,i),at(e,De()),r;switch(e.finishedWork=o,e.finishedLanes=i,t){case 0:case 1:throw Error(K(345));case 2:$r(e,it,Gt);break;case 3:if(fr(e,i),(i&130023424)===i&&(t=gc+500-De(),10<t)){if(Kn(e,0)!==0)break;if(o=e.suspendedLanes,(o&i)!==i){Ye(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Wa($r.bind(null,e,it,Gt),t);break}$r(e,it,Gt);break;case 4:if(fr(e,i),(i&4194240)===i)break;for(t=e.eventTimes,o=-1;0<i;){var g=31-Tt(i);f=1<<g,g=t[g],g>o&&(o=g),i&=~f}if(i=o,i=De()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ug(i/1960))-i,10<i){e.timeoutHandle=Wa($r.bind(null,e,it,Gt),i);break}$r(e,it,Gt);break;case 5:$r(e,it,Gt);break;default:throw Error(K(329))}}}return at(e,De()),e.callbackNode===r?kf.bind(null,e):null}function ll(e,t){var r=ws;return e.current.memoizedState.isDehydrated&&(Jr(e,t).flags|=256),e=uo(e,t),e!==2&&(t=it,it=r,t!==null&&cl(t)),e}function cl(e){it===null?it=e:it.push.apply(it,e)}function hg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var o=r[i],f=o.getSnapshot;o=o.value;try{if(!Ot(f(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fr(e,t){for(t&=~vc,t&=~Do,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Tt(t),i=1<<r;e[r]=-1,t&=~i}}function ju(e){if(ce&6)throw Error(K(327));Li();var t=Kn(e,0);if(!(t&1))return at(e,De()),null;var r=uo(e,t);if(e.tag!==0&&r===2){var i=Oa(e);i!==0&&(t=i,r=ll(e,i))}if(r===1)throw r=$s,Jr(e,0),fr(e,t),at(e,De()),r;if(r===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$r(e,it,Gt),at(e,De()),null}function mc(e,t){var r=ce;ce|=1;try{return e(t)}finally{ce=r,ce===0&&(Ki=De()+500,xo&&Fr())}}function si(e){Er!==null&&Er.tag===0&&!(ce&6)&&Li();var t=ce;ce|=1;var r=St.transition,i=_e;try{if(St.transition=null,_e=1,e)return e()}finally{_e=i,St.transition=r,ce=t,!(ce&6)&&Fr()}}function yc(){lt=Si.current,me(Si)}function Jr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Uv(r)),Me!==null)for(r=Me.return;r!==null;){var i=r;switch(Zl(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Yn();break;case 3:ji(),me(nt),me(Ke),lc();break;case 5:ac(i);break;case 4:ji();break;case 13:me(we);break;case 19:me(we);break;case 10:ic(i.type._context);break;case 22:case 23:yc()}r=r.return}if(Fe=e,Me=e=Mr(e.current,null),$e=lt=t,Oe=0,$s=null,vc=Do=ii=0,it=ws=null,Wr!==null){for(t=0;t<Wr.length;t++)if(r=Wr[t],i=r.interleaved,i!==null){r.interleaved=null;var o=i.next,f=r.pending;if(f!==null){var g=f.next;f.next=o,i.next=g}r.pending=i}Wr=null}return e}function Df(e,t){do{var r=Me;try{if(rc(),On.current=oo,no){for(var i=Ee.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}no=!1}if(ri=0,Ie=Pe=Ee=null,Ss=!1,Fs=0,pc.current=null,r===null||r.return===null){Oe=1,$s=t,Me=null;break}e:{var f=e,g=r.return,s=r,a=t;if(t=$e,s.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var d=a,v=s,u=v.tag;if(!(v.mode&1)&&(u===0||u===11||u===15)){var p=v.alternate;p?(v.updateQueue=p.updateQueue,v.memoizedState=p.memoizedState,v.lanes=p.lanes):(v.updateQueue=null,v.memoizedState=null)}var C=Mu(g);if(C!==null){C.flags&=-257,Tu(C,g,s,f,t),C.mode&1&&Au(f,d,t),t=C,a=d;var E=t.updateQueue;if(E===null){var _=new Set;_.add(a),t.updateQueue=_}else E.add(a);break e}else{if(!(t&1)){Au(f,d,t),Sc();break e}a=Error(K(426))}}else if(Ce&&s.mode&1){var n=Mu(g);if(n!==null){!(n.flags&65536)&&(n.flags|=256),Tu(n,g,s,f,t),ec(Vi(a,s));break e}}f=a=Vi(a,s),Oe!==4&&(Oe=2),ws===null?ws=[f]:ws.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var l=df(f,a,t);bu(f,l);break e;case 1:s=a;var c=f.type,h=f.stateNode;if(!(f.flags&128)&&(typeof c.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Dr===null||!Dr.has(h)))){f.flags|=65536,t&=-t,f.lanes|=t;var m=ff(f,s,t);bu(f,m);break e}}f=f.return}while(f!==null)}Tf(r)}catch(w){t=w,Me===r&&r!==null&&(Me=r=r.return);continue}break}while(!0)}function Af(){var e=ao.current;return ao.current=oo,e===null?oo:e}function Sc(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Fe===null||!(ii&268435455)&&!(Do&268435455)||fr(Fe,$e)}function uo(e,t){var r=ce;ce|=2;var i=Af();(Fe!==e||$e!==t)&&(Gt=null,Jr(e,t));do try{dg();break}catch(o){Df(e,o)}while(!0);if(rc(),ce=r,ao.current=i,Me!==null)throw Error(K(261));return Fe=null,$e=0,Oe}function dg(){for(;Me!==null;)Mf(Me)}function fg(){for(;Me!==null&&!Np();)Mf(Me)}function Mf(e){var t=Of(e.alternate,e,lt);e.memoizedProps=e.pendingProps,t===null?Tf(e):Me=t,pc.current=null}function Tf(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=og(r,t),r!==null){r.flags&=32767,Me=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Me=null;return}}else if(r=ng(r,t,lt),r!==null){Me=r;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);Oe===0&&(Oe=5)}function $r(e,t,r){var i=_e,o=St.transition;try{St.transition=null,_e=1,_g(e,t,r,i)}finally{St.transition=o,_e=i}return null}function _g(e,t,r,i){do Li();while(Er!==null);if(ce&6)throw Error(K(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(Gp(e,f),e===Fe&&(Me=Fe=null,$e=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||wn||(wn=!0,Bf(Vn,function(){return Li(),null})),f=(r.flags&15990)!==0,r.subtreeFlags&15990||f){f=St.transition,St.transition=null;var g=_e;_e=1;var s=ce;ce|=4,pc.current=null,lg(e,r),Lf(r,e),Ov($a),qn=!!Ha,$a=Ha=null,e.current=r,cg(r),Hp(),ce=s,_e=g,St.transition=f}else e.current=r;if(wn&&(wn=!1,Er=e,co=o),f=e.pendingLanes,f===0&&(Dr=null),Wp(r.stateNode),at(e,De()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],i(o.value,{componentStack:o.stack,digest:o.digest});if(lo)throw lo=!1,e=ol,ol=null,e;return co&1&&e.tag!==0&&Li(),f=e.pendingLanes,f&1?e===al?Es++:(Es=0,al=e):Es=0,Fr(),null}function Li(){if(Er!==null){var e=hd(co),t=St.transition,r=_e;try{if(St.transition=null,_e=16>e?16:e,Er===null)var i=!1;else{if(e=Er,Er=null,co=0,ce&6)throw Error(K(331));var o=ce;for(ce|=4,Y=e.current;Y!==null;){var f=Y,g=f.child;if(Y.flags&16){var s=f.deletions;if(s!==null){for(var a=0;a<s.length;a++){var d=s[a];for(Y=d;Y!==null;){var v=Y;switch(v.tag){case 0:case 11:case 15:Cs(8,v,f)}var u=v.child;if(u!==null)u.return=v,Y=u;else for(;Y!==null;){v=Y;var p=v.sibling,C=v.return;if(Ef(v),v===d){Y=null;break}if(p!==null){p.return=C,Y=p;break}Y=C}}}var E=f.alternate;if(E!==null){var _=E.child;if(_!==null){E.child=null;do{var n=_.sibling;_.sibling=null,_=n}while(_!==null)}}Y=f}}if(f.subtreeFlags&2064&&g!==null)g.return=f,Y=g;else e:for(;Y!==null;){if(f=Y,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Cs(9,f,f.return)}var l=f.sibling;if(l!==null){l.return=f.return,Y=l;break e}Y=f.return}}var c=e.current;for(Y=c;Y!==null;){g=Y;var h=g.child;if(g.subtreeFlags&2064&&h!==null)h.return=g,Y=h;else e:for(g=c;Y!==null;){if(s=Y,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:ko(9,s)}}catch(w){Re(s,s.return,w)}if(s===g){Y=null;break e}var m=s.sibling;if(m!==null){m.return=s.return,Y=m;break e}Y=s.return}}if(ce=o,Fr(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(So,e)}catch{}i=!0}return i}finally{_e=r,St.transition=t}}return!1}function Vu(e,t,r){t=Vi(r,t),t=df(e,t,1),e=kr(e,t,1),t=Ye(),e!==null&&(Qs(e,1,t),at(e,t))}function Re(e,t,r){if(e.tag===3)Vu(e,e,r);else for(;t!==null;){if(t.tag===3){Vu(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Dr===null||!Dr.has(i))){e=Vi(r,e),e=ff(t,e,1),t=kr(t,e,1),e=Ye(),t!==null&&(Qs(t,1,e),at(t,e));break}}t=t.return}}function pg(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Ye(),e.pingedLanes|=e.suspendedLanes&r,Fe===e&&($e&r)===r&&(Oe===4||Oe===3&&($e&130023424)===$e&&500>De()-gc?Jr(e,0):vc|=r),at(e,t)}function Pf(e,t){t===0&&(e.mode&1?(t=dn,dn<<=1,!(dn&130023424)&&(dn=4194304)):t=1);var r=Ye();e=sr(e,t),e!==null&&(Qs(e,t,r),at(e,r))}function vg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Pf(e,r)}function gg(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(K(314))}i!==null&&i.delete(t),Pf(e,r)}var Of;Of=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||nt.current)st=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return st=!1,sg(e,t,r);st=!!(e.flags&131072)}else st=!1,Ce&&t.flags&1048576&&Fd(t,eo,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;In(e,t),e=t.pendingProps;var o=Ui(t,Ke.current);xi(t,r),o=uc(null,t,i,e,o,r);var f=hc();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ot(i)?(f=!0,Jn(t)):f=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,nc(t),o.updater=Ro,t.stateNode=o,o._reactInternals=t,Qa(t,i,e,r),t=Ja(null,t,i,!0,f,r)):(t.tag=0,Ce&&f&&Jl(t),Xe(null,t,o,r),t=t.child),t;case 16:i=t.elementType;e:{switch(In(e,t),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=yg(i),e=Lt(i,e),o){case 0:t=Ya(null,t,i,e,r);break e;case 1:t=Bu(null,t,i,e,r);break e;case 11:t=Pu(null,t,i,e,r);break e;case 14:t=Ou(null,t,i,Lt(i.type,e),r);break e}throw Error(K(306,i,""))}return t;case 0:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Lt(i,o),Ya(e,t,i,o,r);case 1:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Lt(i,o),Bu(e,t,i,o,r);case 3:e:{if(gf(t),e===null)throw Error(K(387));i=t.pendingProps,f=t.memoizedState,o=f.element,zd(e,t),io(t,i,null,r);var g=t.memoizedState;if(i=g.element,f.isDehydrated)if(f={element:i,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){o=Vi(Error(K(423)),t),t=Iu(e,t,i,r,o);break e}else if(i!==o){o=Vi(Error(K(424)),t),t=Iu(e,t,i,r,o);break e}else for(ct=Rr(t.stateNode.containerInfo.firstChild),ut=t,Ce=!0,Mt=null,r=Ud(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Wi(),i===o){t=nr(e,t,r);break e}Xe(e,t,i,r)}t=t.child}return t;case 5:return jd(t),e===null&&Ka(t),i=t.type,o=t.pendingProps,f=e!==null?e.memoizedProps:null,g=o.children,Ua(i,o)?g=null:f!==null&&Ua(i,f)&&(t.flags|=32),vf(e,t),Xe(e,t,g,r),t.child;case 6:return e===null&&Ka(t),null;case 13:return mf(e,t,r);case 4:return oc(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=zi(t,null,i,r):Xe(e,t,i,r),t.child;case 11:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Lt(i,o),Pu(e,t,i,o,r);case 7:return Xe(e,t,t.pendingProps,r),t.child;case 8:return Xe(e,t,t.pendingProps.children,r),t.child;case 12:return Xe(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,o=t.pendingProps,f=t.memoizedProps,g=o.value,ve(to,i._currentValue),i._currentValue=g,f!==null)if(Ot(f.value,g)){if(f.children===o.children&&!nt.current){t=nr(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var s=f.dependencies;if(s!==null){g=f.child;for(var a=s.firstContext;a!==null;){if(a.context===i){if(f.tag===1){a=Zt(-1,r&-r),a.tag=2;var d=f.updateQueue;if(d!==null){d=d.shared;var v=d.pending;v===null?a.next=a:(a.next=v.next,v.next=a),d.pending=a}}f.lanes|=r,a=f.alternate,a!==null&&(a.lanes|=r),qa(f.return,r,t),s.lanes|=r;break}a=a.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(K(341));g.lanes|=r,s=g.alternate,s!==null&&(s.lanes|=r),qa(g,r,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}Xe(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps.children,xi(t,r),o=Ct(o),i=i(o),t.flags|=1,Xe(e,t,i,r),t.child;case 14:return i=t.type,o=Lt(i,t.pendingProps),o=Lt(i.type,o),Ou(e,t,i,o,r);case 15:return _f(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Lt(i,o),In(e,t),t.tag=1,ot(i)?(e=!0,Jn(t)):e=!1,xi(t,r),hf(t,i,o),Qa(t,i,o,r),Ja(null,t,i,!0,e,r);case 19:return yf(e,t,r);case 22:return pf(e,t,r)}throw Error(K(156,t.tag))};function Bf(e,t){return ad(e,t)}function mg(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(e,t,r,i){return new mg(e,t,r,i)}function Cc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yg(e){if(typeof e=="function")return Cc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$l)return 11;if(e===Ul)return 14}return 2}function Mr(e,t){var r=e.alternate;return r===null?(r=yt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Hn(e,t,r,i,o,f){var g=2;if(i=e,typeof e=="function")Cc(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case ui:return Zr(r.children,o,f,t);case Hl:g=8,o|=8;break;case ya:return e=yt(12,r,t,o|2),e.elementType=ya,e.lanes=f,e;case Sa:return e=yt(13,r,t,o),e.elementType=Sa,e.lanes=f,e;case Ca:return e=yt(19,r,t,o),e.elementType=Ca,e.lanes=f,e;case jh:return Ao(r,o,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wh:g=10;break e;case zh:g=9;break e;case $l:g=11;break e;case Ul:g=14;break e;case ur:g=16,i=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=yt(g,r,t,o),t.elementType=e,t.type=i,t.lanes=f,t}function Zr(e,t,r,i){return e=yt(7,e,i,t),e.lanes=r,e}function Ao(e,t,r,i){return e=yt(22,e,i,t),e.elementType=jh,e.lanes=r,e.stateNode={isHidden:!1},e}function ca(e,t,r){return e=yt(6,e,null,t),e.lanes=r,e}function ua(e,t,r){return t=yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Sg(e,t,r,i,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jo(0),this.expirationTimes=jo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jo(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function wc(e,t,r,i,o,f,g,s,a){return e=new Sg(e,t,r,s,a),t===1?(t=1,f===!0&&(t|=8)):t=0,f=yt(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},nc(f),e}function Cg(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ci,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function If(e){if(!e)return Or;e=e._reactInternals;e:{if(ai(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ot(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var r=e.type;if(ot(r))return Bd(e,r,t)}return t}function Ff(e,t,r,i,o,f,g,s,a){return e=wc(r,i,!0,e,o,f,g,s,a),e.context=If(null),r=e.current,i=Ye(),o=Ar(r),f=Zt(i,o),f.callback=t??null,kr(r,f,o),e.current.lanes=o,Qs(e,o,i),at(e,i),e}function Mo(e,t,r,i){var o=t.current,f=Ye(),g=Ar(o);return r=If(r),t.context===null?t.context=r:t.pendingContext=r,t=Zt(f,g),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=kr(o,t,g),e!==null&&(Pt(e,o,g,f),Pn(e,o,g)),g}function ho(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ku(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ec(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}function wg(){return null}var Nf=typeof reportError=="function"?reportError:function(e){console.error(e)};function bc(e){this._internalRoot=e}To.prototype.render=bc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));Mo(e,t,null,null)};To.prototype.unmount=bc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;si(function(){Mo(null,e,null,null)}),t[ir]=null}};function To(e){this._internalRoot=e}To.prototype.unstable_scheduleHydration=function(e){if(e){var t=_d();e={blockedOn:null,target:e,priority:t};for(var r=0;r<dr.length&&t!==0&&t<dr[r].priority;r++);dr.splice(r,0,e),r===0&&vd(e)}};function xc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Po(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qu(){}function Eg(e,t,r,i,o){if(o){if(typeof i=="function"){var f=i;i=function(){var d=ho(g);f.call(d)}}var g=Ff(t,i,e,0,null,!1,!1,"",qu);return e._reactRootContainer=g,e[ir]=g.current,Ts(e.nodeType===8?e.parentNode:e),si(),g}for(;o=e.lastChild;)e.removeChild(o);if(typeof i=="function"){var s=i;i=function(){var d=ho(a);s.call(d)}}var a=wc(e,0,!1,null,null,!1,!1,"",qu);return e._reactRootContainer=a,e[ir]=a.current,Ts(e.nodeType===8?e.parentNode:e),si(function(){Mo(t,a,r,i)}),a}function Oo(e,t,r,i,o){var f=r._reactRootContainer;if(f){var g=f;if(typeof o=="function"){var s=o;o=function(){var a=ho(g);s.call(a)}}Mo(t,g,e,o)}else g=Eg(r,t,e,o,i);return ho(g)}dd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=hs(t.pendingLanes);r!==0&&(jl(t,r|1),at(t,De()),!(ce&6)&&(Ki=De()+500,Fr()))}break;case 13:si(function(){var i=sr(e,1);if(i!==null){var o=Ye();Pt(i,e,1,o)}}),Ec(e,1)}};Vl=function(e){if(e.tag===13){var t=sr(e,134217728);if(t!==null){var r=Ye();Pt(t,e,134217728,r)}Ec(e,134217728)}};fd=function(e){if(e.tag===13){var t=Ar(e),r=sr(e,t);if(r!==null){var i=Ye();Pt(r,e,t,i)}Ec(e,t)}};_d=function(){return _e};pd=function(e,t){var r=_e;try{return _e=e,t()}finally{_e=r}};Ma=function(e,t,r){switch(t){case"input":if(ba(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var o=bo(i);if(!o)throw Error(K(90));Kh(i),ba(i,o)}}}break;case"textarea":Gh(e,r);break;case"select":t=r.value,t!=null&&Ci(e,!!r.multiple,t,!1)}};td=mc;rd=si;var bg={usingClientEntryPoint:!1,Events:[Ys,_i,bo,Zh,ed,mc]},os={findFiberByHostInstance:Ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xg={bundleType:os.bundleType,version:os.version,rendererPackageName:os.rendererPackageName,rendererConfig:os.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nd(e),e===null?null:e.stateNode},findFiberByHostInstance:os.findFiberByHostInstance||wg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var En=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!En.isDisabled&&En.supportsFiber)try{So=En.inject(xg),Wt=En}catch{}}dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bg;dt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xc(t))throw Error(K(200));return Cg(e,t,null,r)};dt.createRoot=function(e,t){if(!xc(e))throw Error(K(299));var r=!1,i="",o=Nf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=wc(e,1,!1,null,null,r,!1,i,o),e[ir]=t.current,Ts(e.nodeType===8?e.parentNode:e),new bc(t)};dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=nd(t),e=e===null?null:e.stateNode,e};dt.flushSync=function(e){return si(e)};dt.hydrate=function(e,t,r){if(!Po(t))throw Error(K(200));return Oo(null,e,t,!0,r)};dt.hydrateRoot=function(e,t,r){if(!xc(e))throw Error(K(405));var i=r!=null&&r.hydratedSources||null,o=!1,f="",g=Nf;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(g=r.onRecoverableError)),t=Ff(t,null,e,1,r??null,o,!1,f,g),e[ir]=t.current,Ts(e),i)for(e=0;e<i.length;e++)r=i[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new To(t)};dt.render=function(e,t,r){if(!Po(t))throw Error(K(200));return Oo(null,e,t,!1,r)};dt.unmountComponentAtNode=function(e){if(!Po(e))throw Error(K(40));return e._reactRootContainer?(si(function(){Oo(null,null,e,!1,function(){e._reactRootContainer=null,e[ir]=null})}),!0):!1};dt.unstable_batchedUpdates=mc;dt.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Po(r))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return Oo(e,t,r,!1,i)};dt.version="18.3.1-next-f1338f8080-20240426";function Hf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hf)}catch(e){console.error(e)}}Hf(),Nh.exports=dt;var Lg=Nh.exports,Gu=Lg;ga.createRoot=Gu.createRoot,ga.hydrateRoot=Gu.hydrateRoot;var Zs=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ni=typeof window>"u"||"Deno"in globalThis;function rt(){}function Rg(e,t){return typeof e=="function"?e(t):e}function ul(e){return typeof e=="number"&&e>=0&&e!==1/0}function $f(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Tr(e,t){return typeof e=="function"?e(t):e}function vt(e,t){return typeof e=="function"?e(t):e}function Qu(e,t){const{type:r="all",exact:i,fetchStatus:o,predicate:f,queryKey:g,stale:s}=e;if(g){if(i){if(t.queryHash!==Lc(g,t.options))return!1}else if(!Ws(t.queryKey,g))return!1}if(r!=="all"){const a=t.isActive();if(r==="active"&&!a||r==="inactive"&&a)return!1}return!(typeof s=="boolean"&&t.isStale()!==s||o&&o!==t.state.fetchStatus||f&&!f(t))}function Xu(e,t){const{exact:r,status:i,predicate:o,mutationKey:f}=e;if(f){if(!t.options.mutationKey)return!1;if(r){if(Us(t.options.mutationKey)!==Us(f))return!1}else if(!Ws(t.options.mutationKey,f))return!1}return!(i&&t.state.status!==i||o&&!o(t))}function Lc(e,t){return((t==null?void 0:t.queryKeyHashFn)||Us)(e)}function Us(e){return JSON.stringify(e,(t,r)=>dl(r)?Object.keys(r).sort().reduce((i,o)=>(i[o]=r[o],i),{}):r)}function Ws(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Ws(e[r],t[r])):!1}function Uf(e,t){if(e===t)return e;const r=Yu(e)&&Yu(t);if(r||dl(e)&&dl(t)){const i=r?e:Object.keys(e),o=i.length,f=r?t:Object.keys(t),g=f.length,s=r?[]:{},a=new Set(i);let d=0;for(let v=0;v<g;v++){const u=r?v:f[v];(!r&&a.has(u)||r)&&e[u]===void 0&&t[u]===void 0?(s[u]=void 0,d++):(s[u]=Uf(e[u],t[u]),s[u]===e[u]&&e[u]!==void 0&&d++)}return o===g&&d===o?e:s}return t}function hl(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Yu(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function dl(e){if(!Ju(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Ju(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ju(e){return Object.prototype.toString.call(e)==="[object Object]"}function kg(e){return new Promise(t=>{setTimeout(t,e)})}function fl(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Uf(e,t):t}function Dg(e,t,r=0){const i=[...e,t];return r&&i.length>r?i.slice(1):i}function Ag(e,t,r=0){const i=[t,...e];return r&&i.length>r?i.slice(0,-1):i}var Rc=Symbol();function Wf(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Rc?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Mg(e,t){return typeof e=="function"?e(...t):!!e}var jr,_r,Ri,gh,Tg=(gh=class extends Zs{constructor(){super();ee(this,jr);ee(this,_r);ee(this,Ri);J(this,Ri,t=>{if(!ni&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){H(this,_r)||this.setEventListener(H(this,Ri))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,_r))==null||t.call(this),J(this,_r,void 0))}setEventListener(t){var r;J(this,Ri,t),(r=H(this,_r))==null||r.call(this),J(this,_r,t(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(t){H(this,jr)!==t&&(J(this,jr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof H(this,jr)=="boolean"?H(this,jr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},jr=new WeakMap,_r=new WeakMap,Ri=new WeakMap,gh),kc=new Tg,ki,pr,Di,mh,Pg=(mh=class extends Zs{constructor(){super();ee(this,ki,!0);ee(this,pr);ee(this,Di);J(this,Di,t=>{if(!ni&&window.addEventListener){const r=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i)}}})}onSubscribe(){H(this,pr)||this.setEventListener(H(this,Di))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,pr))==null||t.call(this),J(this,pr,void 0))}setEventListener(t){var r;J(this,Di,t),(r=H(this,pr))==null||r.call(this),J(this,pr,t(this.setOnline.bind(this)))}setOnline(t){H(this,ki)!==t&&(J(this,ki,t),this.listeners.forEach(i=>{i(t)}))}isOnline(){return H(this,ki)}},ki=new WeakMap,pr=new WeakMap,Di=new WeakMap,mh),fo=new Pg;function _l(){let e,t;const r=new Promise((o,f)=>{e=o,t=f});r.status="pending",r.catch(()=>{});function i(o){Object.assign(r,o),delete r.resolve,delete r.reject}return r.resolve=o=>{i({status:"fulfilled",value:o}),e(o)},r.reject=o=>{i({status:"rejected",reason:o}),t(o)},r}function Og(e){return Math.min(1e3*2**e,3e4)}function zf(e){return(e??"online")==="online"?fo.isOnline():!0}var jf=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Vf(e){let t=!1,r=0,i;const o=_l(),f=()=>o.status!=="pending",g=_=>{var n;f()||(p(new jf(_)),(n=e.abort)==null||n.call(e))},s=()=>{t=!0},a=()=>{t=!1},d=()=>kc.isFocused()&&(e.networkMode==="always"||fo.isOnline())&&e.canRun(),v=()=>zf(e.networkMode)&&e.canRun(),u=_=>{f()||(i==null||i(),o.resolve(_))},p=_=>{f()||(i==null||i(),o.reject(_))},C=()=>new Promise(_=>{var n;i=l=>{(f()||d())&&_(l)},(n=e.onPause)==null||n.call(e)}).then(()=>{var _;i=void 0,f()||(_=e.onContinue)==null||_.call(e)}),E=()=>{if(f())return;let _;const n=r===0?e.initialPromise:void 0;try{_=n??e.fn()}catch(l){_=Promise.reject(l)}Promise.resolve(_).then(u).catch(l=>{var b;if(f())return;const c=e.retry??(ni?0:3),h=e.retryDelay??Og,m=typeof h=="function"?h(r,l):h,w=c===!0||typeof c=="number"&&r<c||typeof c=="function"&&c(r,l);if(t||!w){p(l);return}r++,(b=e.onFail)==null||b.call(e,r,l),kg(m).then(()=>d()?void 0:C()).then(()=>{t?p(l):E()})})};return{promise:o,status:()=>o.status,cancel:g,continue:()=>(i==null||i(),o),cancelRetry:s,continueRetry:a,canStart:v,start:()=>(v()?E():C().then(E),o)}}var Bg=e=>setTimeout(e,0);function Ig(){let e=[],t=0,r=s=>{s()},i=s=>{s()},o=Bg;const f=s=>{t?e.push(s):o(()=>{r(s)})},g=()=>{const s=e;e=[],s.length&&o(()=>{i(()=>{s.forEach(a=>{r(a)})})})};return{batch:s=>{let a;t++;try{a=s()}finally{t--,t||g()}return a},batchCalls:s=>(...a)=>{f(()=>{s(...a)})},schedule:f,setNotifyFunction:s=>{r=s},setBatchNotifyFunction:s=>{i=s},setScheduler:s=>{o=s}}}var He=Ig(),Vr,yh,Kf=(yh=class{constructor(){ee(this,Vr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ul(this.gcTime)&&J(this,Vr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ni?1/0:5*60*1e3))}clearGcTimeout(){H(this,Vr)&&(clearTimeout(H(this,Vr)),J(this,Vr,void 0))}},Vr=new WeakMap,yh),Ai,Mi,pt,Kr,Be,js,qr,Rt,qt,Sh,Fg=(Sh=class extends Kf{constructor(t){super();ee(this,Rt);ee(this,Ai);ee(this,Mi);ee(this,pt);ee(this,Kr);ee(this,Be);ee(this,js);ee(this,qr);J(this,qr,!1),J(this,js,t.defaultOptions),this.setOptions(t.options),this.observers=[],J(this,Kr,t.client),J(this,pt,H(this,Kr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,J(this,Ai,Ng(this.options)),this.state=t.state??H(this,Ai),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=H(this,Be))==null?void 0:t.promise}setOptions(t){this.options={...H(this,js),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,pt).remove(this)}setData(t,r){const i=fl(this.state.data,t,this.options);return ne(this,Rt,qt).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){ne(this,Rt,qt).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,o;const r=(i=H(this,Be))==null?void 0:i.promise;return(o=H(this,Be))==null||o.cancel(t),r?r.then(rt).catch(rt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,Ai))}isActive(){return this.observers.some(t=>vt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Rc||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Tr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!$f(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=H(this,Be))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=H(this,Be))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),H(this,pt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(H(this,Be)&&(H(this,qr)?H(this,Be).cancel({revert:!0}):H(this,Be).cancelRetry()),this.scheduleGc()),H(this,pt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ne(this,Rt,qt).call(this,{type:"invalidate"})}async fetch(t,r){var a,d,v,u,p,C,E,_,n,l,c,h;if(this.state.fetchStatus!=="idle"&&((a=H(this,Be))==null?void 0:a.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(H(this,Be))return H(this,Be).continueRetry(),H(this,Be).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(w=>w.options.queryFn);m&&this.setOptions(m.options)}const i=new AbortController,o=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(J(this,qr,!0),i.signal)})},f=()=>{const m=Wf(this.options,r),b=(()=>{const x={client:H(this,Kr),queryKey:this.queryKey,meta:this.meta};return o(x),x})();return J(this,qr,!1),this.options.persister?this.options.persister(m,b,this):m(b)},s=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:H(this,Kr),state:this.state,fetchFn:f};return o(m),m})();(d=this.options.behavior)==null||d.onFetch(s,this),J(this,Mi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((v=s.fetchOptions)==null?void 0:v.meta))&&ne(this,Rt,qt).call(this,{type:"fetch",meta:(u=s.fetchOptions)==null?void 0:u.meta}),J(this,Be,Vf({initialPromise:r==null?void 0:r.initialPromise,fn:s.fetchFn,abort:i.abort.bind(i),onFail:(m,w)=>{ne(this,Rt,qt).call(this,{type:"failed",failureCount:m,error:w})},onPause:()=>{ne(this,Rt,qt).call(this,{type:"pause"})},onContinue:()=>{ne(this,Rt,qt).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}));try{const m=await H(this,Be).start();if(m===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(m),(C=(p=H(this,pt).config).onSuccess)==null||C.call(p,m,this),(_=(E=H(this,pt).config).onSettled)==null||_.call(E,m,this.state.error,this),m}catch(m){if(m instanceof jf){if(m.silent)return H(this,Be).promise;if(m.revert)return this.setState({...H(this,Mi),fetchStatus:"idle"}),this.state.data}throw ne(this,Rt,qt).call(this,{type:"error",error:m}),(l=(n=H(this,pt).config).onError)==null||l.call(n,m,this),(h=(c=H(this,pt).config).onSettled)==null||h.call(c,this.state.data,m,this),m}finally{this.scheduleGc()}}},Ai=new WeakMap,Mi=new WeakMap,pt=new WeakMap,Kr=new WeakMap,Be=new WeakMap,js=new WeakMap,qr=new WeakMap,Rt=new WeakSet,qt=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...qf(i.data,this.options),fetchMeta:t.meta??null};case"success":const o={...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return J(this,Mi,t.manual?o:void 0),o;case"error":const f=t.error;return{...i,error:f,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:f,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),He.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),H(this,pt).notify({query:this,type:"updated",action:t})})},Sh);function qf(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:zf(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Ng(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,i=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Nt,Ch,Hg=(Ch=class extends Zs{constructor(t={}){super();ee(this,Nt);this.config=t,J(this,Nt,new Map)}build(t,r,i){const o=r.queryKey,f=r.queryHash??Lc(o,r);let g=this.get(f);return g||(g=new Fg({client:t,queryKey:o,queryHash:f,options:t.defaultQueryOptions(r),state:i,defaultOptions:t.getQueryDefaults(o)}),this.add(g)),g}add(t){H(this,Nt).has(t.queryHash)||(H(this,Nt).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=H(this,Nt).get(t.queryHash);r&&(t.destroy(),r===t&&H(this,Nt).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){He.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return H(this,Nt).get(t)}getAll(){return[...H(this,Nt).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(i=>Qu(r,i))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(i=>Qu(t,i)):r}notify(t){He.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){He.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){He.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Nt=new WeakMap,Ch),Ht,Ge,Gr,$t,cr,wh,$g=(wh=class extends Kf{constructor(t){super();ee(this,$t);ee(this,Ht);ee(this,Ge);ee(this,Gr);this.mutationId=t.mutationId,J(this,Ge,t.mutationCache),J(this,Ht,[]),this.state=t.state||Ug(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){H(this,Ht).includes(t)||(H(this,Ht).push(t),this.clearGcTimeout(),H(this,Ge).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){J(this,Ht,H(this,Ht).filter(r=>r!==t)),this.scheduleGc(),H(this,Ge).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){H(this,Ht).length||(this.state.status==="pending"?this.scheduleGc():H(this,Ge).remove(this))}continue(){var t;return((t=H(this,Gr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var f,g,s,a,d,v,u,p,C,E,_,n,l,c,h,m,w,b,x,y;const r=()=>{ne(this,$t,cr).call(this,{type:"continue"})};J(this,Gr,Vf({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(S,L)=>{ne(this,$t,cr).call(this,{type:"failed",failureCount:S,error:L})},onPause:()=>{ne(this,$t,cr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,Ge).canRun(this)}));const i=this.state.status==="pending",o=!H(this,Gr).canStart();try{if(i)r();else{ne(this,$t,cr).call(this,{type:"pending",variables:t,isPaused:o}),await((g=(f=H(this,Ge).config).onMutate)==null?void 0:g.call(f,t,this));const L=await((a=(s=this.options).onMutate)==null?void 0:a.call(s,t));L!==this.state.context&&ne(this,$t,cr).call(this,{type:"pending",context:L,variables:t,isPaused:o})}const S=await H(this,Gr).start();return await((v=(d=H(this,Ge).config).onSuccess)==null?void 0:v.call(d,S,t,this.state.context,this)),await((p=(u=this.options).onSuccess)==null?void 0:p.call(u,S,t,this.state.context)),await((E=(C=H(this,Ge).config).onSettled)==null?void 0:E.call(C,S,null,this.state.variables,this.state.context,this)),await((n=(_=this.options).onSettled)==null?void 0:n.call(_,S,null,t,this.state.context)),ne(this,$t,cr).call(this,{type:"success",data:S}),S}catch(S){try{throw await((c=(l=H(this,Ge).config).onError)==null?void 0:c.call(l,S,t,this.state.context,this)),await((m=(h=this.options).onError)==null?void 0:m.call(h,S,t,this.state.context)),await((b=(w=H(this,Ge).config).onSettled)==null?void 0:b.call(w,void 0,S,this.state.variables,this.state.context,this)),await((y=(x=this.options).onSettled)==null?void 0:y.call(x,void 0,S,t,this.state.context)),S}finally{ne(this,$t,cr).call(this,{type:"error",error:S})}}finally{H(this,Ge).runNext(this)}}},Ht=new WeakMap,Ge=new WeakMap,Gr=new WeakMap,$t=new WeakSet,cr=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),He.batch(()=>{H(this,Ht).forEach(i=>{i.onMutationUpdate(t)}),H(this,Ge).notify({mutation:this,type:"updated",action:t})})},wh);function Ug(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xt,kt,Vs,Eh,Wg=(Eh=class extends Zs{constructor(t={}){super();ee(this,Xt);ee(this,kt);ee(this,Vs);this.config=t,J(this,Xt,new Set),J(this,kt,new Map),J(this,Vs,0)}build(t,r,i){const o=new $g({mutationCache:this,mutationId:++on(this,Vs)._,options:t.defaultMutationOptions(r),state:i});return this.add(o),o}add(t){H(this,Xt).add(t);const r=bn(t);if(typeof r=="string"){const i=H(this,kt).get(r);i?i.push(t):H(this,kt).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(H(this,Xt).delete(t)){const r=bn(t);if(typeof r=="string"){const i=H(this,kt).get(r);if(i)if(i.length>1){const o=i.indexOf(t);o!==-1&&i.splice(o,1)}else i[0]===t&&H(this,kt).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=bn(t);if(typeof r=="string"){const i=H(this,kt).get(r),o=i==null?void 0:i.find(f=>f.state.status==="pending");return!o||o===t}else return!0}runNext(t){var i;const r=bn(t);if(typeof r=="string"){const o=(i=H(this,kt).get(r))==null?void 0:i.find(f=>f!==t&&f.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){He.batch(()=>{H(this,Xt).forEach(t=>{this.notify({type:"removed",mutation:t})}),H(this,Xt).clear(),H(this,kt).clear()})}getAll(){return Array.from(H(this,Xt))}find(t){const r={exact:!0,...t};return this.getAll().find(i=>Xu(r,i))}findAll(t={}){return this.getAll().filter(r=>Xu(t,r))}notify(t){He.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return He.batch(()=>Promise.all(t.map(r=>r.continue().catch(rt))))}},Xt=new WeakMap,kt=new WeakMap,Vs=new WeakMap,Eh);function bn(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Zu(e){return{onFetch:(t,r)=>{var v,u,p,C,E;const i=t.options,o=(p=(u=(v=t.fetchOptions)==null?void 0:v.meta)==null?void 0:u.fetchMore)==null?void 0:p.direction,f=((C=t.state.data)==null?void 0:C.pages)||[],g=((E=t.state.data)==null?void 0:E.pageParams)||[];let s={pages:[],pageParams:[]},a=0;const d=async()=>{let _=!1;const n=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(t.signal.aborted?_=!0:t.signal.addEventListener("abort",()=>{_=!0}),t.signal)})},l=Wf(t.options,t.fetchOptions),c=async(h,m,w)=>{if(_)return Promise.reject();if(m==null&&h.pages.length)return Promise.resolve(h);const x=(()=>{const k={client:t.client,queryKey:t.queryKey,pageParam:m,direction:w?"backward":"forward",meta:t.options.meta};return n(k),k})(),y=await l(x),{maxPages:S}=t.options,L=w?Ag:Dg;return{pages:L(h.pages,y,S),pageParams:L(h.pageParams,m,S)}};if(o&&f.length){const h=o==="backward",m=h?zg:eh,w={pages:f,pageParams:g},b=m(i,w);s=await c(w,b,h)}else{const h=e??f.length;do{const m=a===0?g[0]??i.initialPageParam:eh(i,s);if(a>0&&m==null)break;s=await c(s,m),a++}while(a<h)}return s};t.options.persister?t.fetchFn=()=>{var _,n;return(n=(_=t.options).persister)==null?void 0:n.call(_,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function eh(e,{pages:t,pageParams:r}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,r[i],r):void 0}function zg(e,{pages:t,pageParams:r}){var i;return t.length>0?(i=e.getPreviousPageParam)==null?void 0:i.call(e,t[0],t,r[0],r):void 0}var Le,vr,gr,Ti,Pi,mr,Oi,Bi,bh,jg=(bh=class{constructor(e={}){ee(this,Le);ee(this,vr);ee(this,gr);ee(this,Ti);ee(this,Pi);ee(this,mr);ee(this,Oi);ee(this,Bi);J(this,Le,e.queryCache||new Hg),J(this,vr,e.mutationCache||new Wg),J(this,gr,e.defaultOptions||{}),J(this,Ti,new Map),J(this,Pi,new Map),J(this,mr,0)}mount(){on(this,mr)._++,H(this,mr)===1&&(J(this,Oi,kc.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Le).onFocus())})),J(this,Bi,fo.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Le).onOnline())})))}unmount(){var e,t;on(this,mr)._--,H(this,mr)===0&&((e=H(this,Oi))==null||e.call(this),J(this,Oi,void 0),(t=H(this,Bi))==null||t.call(this),J(this,Bi,void 0))}isFetching(e){return H(this,Le).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return H(this,vr).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=H(this,Le).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=H(this,Le).build(this,t),i=r.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Tr(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return H(this,Le).findAll(e).map(({queryKey:t,state:r})=>{const i=r.data;return[t,i]})}setQueryData(e,t,r){const i=this.defaultQueryOptions({queryKey:e}),o=H(this,Le).get(i.queryHash),f=o==null?void 0:o.state.data,g=Rg(t,f);if(g!==void 0)return H(this,Le).build(this,i).setData(g,{...r,manual:!0})}setQueriesData(e,t,r){return He.batch(()=>H(this,Le).findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=H(this,Le).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=H(this,Le);He.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=H(this,Le);return He.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},i=He.batch(()=>H(this,Le).findAll(e).map(o=>o.cancel(r)));return Promise.all(i).then(rt).catch(rt)}invalidateQueries(e,t={}){return He.batch(()=>(H(this,Le).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},i=He.batch(()=>H(this,Le).findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let f=o.fetch(void 0,r);return r.throwOnError||(f=f.catch(rt)),o.state.fetchStatus==="paused"?Promise.resolve():f}));return Promise.all(i).then(rt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=H(this,Le).build(this,t);return r.isStaleByTime(Tr(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(rt).catch(rt)}fetchInfiniteQuery(e){return e.behavior=Zu(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(rt).catch(rt)}ensureInfiniteQueryData(e){return e.behavior=Zu(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return fo.isOnline()?H(this,vr).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,Le)}getMutationCache(){return H(this,vr)}getDefaultOptions(){return H(this,gr)}setDefaultOptions(e){J(this,gr,e)}setQueryDefaults(e,t){H(this,Ti).set(Us(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...H(this,Ti).values()],r={};return t.forEach(i=>{Ws(e,i.queryKey)&&Object.assign(r,i.defaultOptions)}),r}setMutationDefaults(e,t){H(this,Pi).set(Us(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...H(this,Pi).values()],r={};return t.forEach(i=>{Ws(e,i.mutationKey)&&Object.assign(r,i.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...H(this,gr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Lc(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Rc&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...H(this,gr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){H(this,Le).clear(),H(this,vr).clear()}},Le=new WeakMap,vr=new WeakMap,gr=new WeakMap,Ti=new WeakMap,Pi=new WeakMap,mr=new WeakMap,Oi=new WeakMap,Bi=new WeakMap,bh),tt,oe,Ks,Qe,Qr,Ii,yr,Sr,qs,Fi,Ni,Xr,Yr,Cr,Hi,fe,fs,pl,vl,gl,ml,yl,Sl,Cl,Gf,xh,Vg=(xh=class extends Zs{constructor(t,r){super();ee(this,fe);ee(this,tt);ee(this,oe);ee(this,Ks);ee(this,Qe);ee(this,Qr);ee(this,Ii);ee(this,yr);ee(this,Sr);ee(this,qs);ee(this,Fi);ee(this,Ni);ee(this,Xr);ee(this,Yr);ee(this,Cr);ee(this,Hi,new Set);this.options=r,J(this,tt,t),J(this,Sr,null),J(this,yr,_l()),this.options.experimental_prefetchInRender||H(this,yr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(H(this,oe).addObserver(this),th(H(this,oe),this.options)?ne(this,fe,fs).call(this):this.updateResult(),ne(this,fe,ml).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return wl(H(this,oe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return wl(H(this,oe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ne(this,fe,yl).call(this),ne(this,fe,Sl).call(this),H(this,oe).removeObserver(this)}setOptions(t){const r=this.options,i=H(this,oe);if(this.options=H(this,tt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof vt(this.options.enabled,H(this,oe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ne(this,fe,Cl).call(this),H(this,oe).setOptions(this.options),r._defaulted&&!hl(this.options,r)&&H(this,tt).getQueryCache().notify({type:"observerOptionsUpdated",query:H(this,oe),observer:this});const o=this.hasListeners();o&&rh(H(this,oe),i,this.options,r)&&ne(this,fe,fs).call(this),this.updateResult(),o&&(H(this,oe)!==i||vt(this.options.enabled,H(this,oe))!==vt(r.enabled,H(this,oe))||Tr(this.options.staleTime,H(this,oe))!==Tr(r.staleTime,H(this,oe)))&&ne(this,fe,pl).call(this);const f=ne(this,fe,vl).call(this);o&&(H(this,oe)!==i||vt(this.options.enabled,H(this,oe))!==vt(r.enabled,H(this,oe))||f!==H(this,Cr))&&ne(this,fe,gl).call(this,f)}getOptimisticResult(t){const r=H(this,tt).getQueryCache().build(H(this,tt),t),i=this.createResult(r,t);return qg(this,i)&&(J(this,Qe,i),J(this,Ii,this.options),J(this,Qr,H(this,oe).state)),i}getCurrentResult(){return H(this,Qe)}trackResult(t,r){return new Proxy(t,{get:(i,o)=>(this.trackProp(o),r==null||r(o),Reflect.get(i,o))})}trackProp(t){H(this,Hi).add(t)}getCurrentQuery(){return H(this,oe)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=H(this,tt).defaultQueryOptions(t),i=H(this,tt).getQueryCache().build(H(this,tt),r);return i.fetch().then(()=>this.createResult(i,r))}fetch(t){return ne(this,fe,fs).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),H(this,Qe)))}createResult(t,r){var S;const i=H(this,oe),o=this.options,f=H(this,Qe),g=H(this,Qr),s=H(this,Ii),d=t!==i?t.state:H(this,Ks),{state:v}=t;let u={...v},p=!1,C;if(r._optimisticResults){const L=this.hasListeners(),k=!L&&th(t,r),D=L&&rh(t,i,r,o);(k||D)&&(u={...u,...qf(v.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:E,errorUpdatedAt:_,status:n}=u;C=u.data;let l=!1;if(r.placeholderData!==void 0&&C===void 0&&n==="pending"){let L;f!=null&&f.isPlaceholderData&&r.placeholderData===(s==null?void 0:s.placeholderData)?(L=f.data,l=!0):L=typeof r.placeholderData=="function"?r.placeholderData((S=H(this,Ni))==null?void 0:S.state.data,H(this,Ni)):r.placeholderData,L!==void 0&&(n="success",C=fl(f==null?void 0:f.data,L,r),p=!0)}if(r.select&&C!==void 0&&!l)if(f&&C===(g==null?void 0:g.data)&&r.select===H(this,qs))C=H(this,Fi);else try{J(this,qs,r.select),C=r.select(C),C=fl(f==null?void 0:f.data,C,r),J(this,Fi,C),J(this,Sr,null)}catch(L){J(this,Sr,L)}H(this,Sr)&&(E=H(this,Sr),C=H(this,Fi),_=Date.now(),n="error");const c=u.fetchStatus==="fetching",h=n==="pending",m=n==="error",w=h&&c,b=C!==void 0,y={status:n,fetchStatus:u.fetchStatus,isPending:h,isSuccess:n==="success",isError:m,isInitialLoading:w,isLoading:w,data:C,dataUpdatedAt:u.dataUpdatedAt,error:E,errorUpdatedAt:_,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:c,isRefetching:c&&!h,isLoadingError:m&&!b,isPaused:u.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:m&&b,isStale:Dc(t,r),refetch:this.refetch,promise:H(this,yr),isEnabled:vt(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const L=A=>{y.status==="error"?A.reject(y.error):y.data!==void 0&&A.resolve(y.data)},k=()=>{const A=J(this,yr,y.promise=_l());L(A)},D=H(this,yr);switch(D.status){case"pending":t.queryHash===i.queryHash&&L(D);break;case"fulfilled":(y.status==="error"||y.data!==D.value)&&k();break;case"rejected":(y.status!=="error"||y.error!==D.reason)&&k();break}}return y}updateResult(){const t=H(this,Qe),r=this.createResult(H(this,oe),this.options);if(J(this,Qr,H(this,oe).state),J(this,Ii,this.options),H(this,Qr).data!==void 0&&J(this,Ni,H(this,oe)),hl(r,t))return;J(this,Qe,r);const i=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,f=typeof o=="function"?o():o;if(f==="all"||!f&&!H(this,Hi).size)return!0;const g=new Set(f??H(this,Hi));return this.options.throwOnError&&g.add("error"),Object.keys(H(this,Qe)).some(s=>{const a=s;return H(this,Qe)[a]!==t[a]&&g.has(a)})};ne(this,fe,Gf).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ne(this,fe,ml).call(this)}},tt=new WeakMap,oe=new WeakMap,Ks=new WeakMap,Qe=new WeakMap,Qr=new WeakMap,Ii=new WeakMap,yr=new WeakMap,Sr=new WeakMap,qs=new WeakMap,Fi=new WeakMap,Ni=new WeakMap,Xr=new WeakMap,Yr=new WeakMap,Cr=new WeakMap,Hi=new WeakMap,fe=new WeakSet,fs=function(t){ne(this,fe,Cl).call(this);let r=H(this,oe).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(rt)),r},pl=function(){ne(this,fe,yl).call(this);const t=Tr(this.options.staleTime,H(this,oe));if(ni||H(this,Qe).isStale||!ul(t))return;const i=$f(H(this,Qe).dataUpdatedAt,t)+1;J(this,Xr,setTimeout(()=>{H(this,Qe).isStale||this.updateResult()},i))},vl=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(H(this,oe)):this.options.refetchInterval)??!1},gl=function(t){ne(this,fe,Sl).call(this),J(this,Cr,t),!(ni||vt(this.options.enabled,H(this,oe))===!1||!ul(H(this,Cr))||H(this,Cr)===0)&&J(this,Yr,setInterval(()=>{(this.options.refetchIntervalInBackground||kc.isFocused())&&ne(this,fe,fs).call(this)},H(this,Cr)))},ml=function(){ne(this,fe,pl).call(this),ne(this,fe,gl).call(this,ne(this,fe,vl).call(this))},yl=function(){H(this,Xr)&&(clearTimeout(H(this,Xr)),J(this,Xr,void 0))},Sl=function(){H(this,Yr)&&(clearInterval(H(this,Yr)),J(this,Yr,void 0))},Cl=function(){const t=H(this,tt).getQueryCache().build(H(this,tt),this.options);if(t===H(this,oe))return;const r=H(this,oe);J(this,oe,t),J(this,Ks,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Gf=function(t){He.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(H(this,Qe))}),H(this,tt).getQueryCache().notify({query:H(this,oe),type:"observerResultsUpdated"})})},xh);function Kg(e,t){return vt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function th(e,t){return Kg(e,t)||e.state.data!==void 0&&wl(e,t,t.refetchOnMount)}function wl(e,t,r){if(vt(t.enabled,e)!==!1&&Tr(t.staleTime,e)!=="static"){const i=typeof r=="function"?r(e):r;return i==="always"||i!==!1&&Dc(e,t)}return!1}function rh(e,t,r,i){return(e!==t||vt(i.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Dc(e,r)}function Dc(e,t){return vt(t.enabled,e)!==!1&&e.isStaleByTime(Tr(t.staleTime,e))}function qg(e,t){return!hl(e.getCurrentResult(),t)}var Qf=F.createContext(void 0),Gg=e=>{const t=F.useContext(Qf);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Qg=({client:e,children:t})=>(F.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),X.jsx(Qf.Provider,{value:e,children:t})),Xf=F.createContext(!1),Xg=()=>F.useContext(Xf);Xf.Provider;function Yg(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Jg=F.createContext(Yg()),Zg=()=>F.useContext(Jg),em=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},tm=e=>{F.useEffect(()=>{e.clearReset()},[e])},rm=({result:e,errorResetBoundary:t,throwOnError:r,query:i,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(o&&e.data===void 0||Mg(r,[e.error,i])),im=e=>{if(e.suspense){const t=i=>i==="static"?i:Math.max(i??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...i)=>t(r(...i)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},sm=(e,t)=>e.isLoading&&e.isFetching&&!t,nm=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,ih=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function om(e,t,r){var u,p,C,E,_;const i=Xg(),o=Zg(),f=Gg(),g=f.defaultQueryOptions(e);(p=(u=f.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||p.call(u,g),g._optimisticResults=i?"isRestoring":"optimistic",im(g),em(g,o),tm(o);const s=!f.getQueryCache().get(g.queryHash),[a]=F.useState(()=>new t(f,g)),d=a.getOptimisticResult(g),v=!i&&e.subscribed!==!1;if(F.useSyncExternalStore(F.useCallback(n=>{const l=v?a.subscribe(He.batchCalls(n)):rt;return a.updateResult(),l},[a,v]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),F.useEffect(()=>{a.setOptions(g)},[g,a]),nm(g,d))throw ih(g,a,o);if(rm({result:d,errorResetBoundary:o,throwOnError:g.throwOnError,query:f.getQueryCache().get(g.queryHash),suspense:g.suspense}))throw d.error;if((E=(C=f.getDefaultOptions().queries)==null?void 0:C._experimental_afterQuery)==null||E.call(C,g,d),g.experimental_prefetchInRender&&!ni&&sm(d,i)){const n=s?ih(g,a,o):(_=f.getQueryCache().get(g.queryHash))==null?void 0:_.promise;n==null||n.catch(rt).finally(()=>{a.updateResult()})}return g.notifyOnChangeProps?d:a.trackResult(d)}function Yf(e,t){return om(e,Vg)}const _s={},sh=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,nh=e=>"init"in e,ha=e=>!!e.write,oh=e=>"v"in e||"e"in e,xn=e=>{if("e"in e)throw e.e;if((_s?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},_o=new WeakMap,ah=e=>{var t;return po(e)&&!!((t=_o.get(e))!=null&&t[0])},am=e=>{const t=_o.get(e);t!=null&&t[0]&&(t[0]=!1,t[1].forEach(r=>r()))},Jf=(e,t)=>{let r=_o.get(e);if(!r){r=[!0,new Set],_o.set(e,r);const i=()=>{r[0]=!1};e.then(i,i)}r[1].add(t)},po=e=>typeof(e==null?void 0:e.then)=="function",Zf=(e,t,r)=>{r.p.has(e)||(r.p.add(e),t.then(()=>{r.p.delete(e)},()=>{r.p.delete(e)}))},da=(e,t,r)=>{const i=r(e),o="v"in i,f=i.v;if(po(t))for(const g of i.d.keys())Zf(e,t,r(g));i.v=t,delete i.e,(!o||!Object.is(f,i.v))&&(++i.n,po(f)&&am(f))},lh=(e,t,r)=>{var i;const o=new Set;for(const f of((i=r.get(e))==null?void 0:i.t)||[])r.has(f)&&o.add(f);for(const f of t.p)o.add(f);return o},lm=Symbol(),cm=(e=new WeakMap,t=new WeakMap,r=new WeakMap,i=new Set,o=new Set,f=new Set,g={},s=(p,...C)=>p.read(...C),a=(p,...C)=>p.write(...C),d=(p,C)=>{var E;return(E=p.unstable_onInit)==null?void 0:E.call(p,C)},v=(p,C)=>{var E;return(E=p.onMount)==null?void 0:E.call(p,C)},...u)=>{const p=u[0]||(x=>{if((_s?"production":void 0)!=="production"&&!x)throw new Error("Atom is undefined or null");let y=e.get(x);return y||(y={d:new Map,p:new Set,n:0},e.set(x,y),d==null||d(x,b)),y}),C=u[1]||(()=>{const x=[],y=S=>{try{S()}catch(L){x.push(L)}};do{g.f&&y(g.f);const S=new Set,L=S.add.bind(S);i.forEach(k=>{var D;return(D=t.get(k))==null?void 0:D.l.forEach(L)}),i.clear(),f.forEach(L),f.clear(),o.forEach(L),o.clear(),S.forEach(y),i.size&&E()}while(i.size||f.size||o.size);if(x.length)throw new AggregateError(x)}),E=u[2]||(()=>{const x=[],y=new WeakSet,S=new WeakSet,L=Array.from(i);for(;L.length;){const k=L[L.length-1],D=p(k);if(S.has(k)){L.pop();continue}if(y.has(k)){if(r.get(k)===D.n)x.push([k,D]);else if((_s?"production":void 0)!=="production"&&r.has(k))throw new Error("[Bug] invalidated atom exists");S.add(k),L.pop();continue}y.add(k);for(const A of lh(k,D,t))y.has(A)||L.push(A)}for(let k=x.length-1;k>=0;--k){const[D,A]=x[k];let B=!1;for(const N of A.d.keys())if(N!==D&&i.has(N)){B=!0;break}B&&(_(D),c(D)),r.delete(D)}}),_=u[3]||(x=>{var y;const S=p(x);if(oh(S)&&(t.has(x)&&r.get(x)!==S.n||Array.from(S.d).every(([I,R])=>_(I).n===R)))return S;S.d.clear();let L=!0;const k=()=>{t.has(x)&&(c(x),E(),C())},D=I=>{var R;if(sh(x,I)){const P=p(I);if(!oh(P))if(nh(I))da(I,I.init,p);else throw new Error("no atom init");return xn(P)}const T=_(I);try{return xn(T)}finally{S.d.set(I,T.n),ah(S.v)&&Zf(x,S.v,T),(R=t.get(I))==null||R.t.add(x),L||k()}};let A,B;const N={get signal(){return A||(A=new AbortController),A.signal},get setSelf(){return(_s?"production":void 0)!=="production"&&!ha(x)&&console.warn("setSelf function cannot be used with read-only atom"),!B&&ha(x)&&(B=(...I)=>{if((_s?"production":void 0)!=="production"&&L&&console.warn("setSelf function cannot be called in sync"),!L)try{return l(x,...I)}finally{E(),C()}}),B}},$=S.n;try{const I=s(x,D,N);return da(x,I,p),po(I)&&(Jf(I,()=>A==null?void 0:A.abort()),I.then(k,k)),S}catch(I){return delete S.v,S.e=I,++S.n,S}finally{L=!1,$!==S.n&&r.get(x)===$&&(r.set(x,S.n),i.add(x),(y=g.c)==null||y.call(g,x))}}),n=u[4]||(x=>{const y=[x];for(;y.length;){const S=y.pop(),L=p(S);for(const k of lh(S,L,t)){const D=p(k);r.set(k,D.n),y.push(k)}}}),l=u[5]||((x,...y)=>{let S=!0;const L=D=>xn(_(D)),k=(D,...A)=>{var B;const N=p(D);try{if(sh(x,D)){if(!nh(D))throw new Error("atom not writable");const $=N.n,I=A[0];da(D,I,p),c(D),$!==N.n&&(i.add(D),(B=g.c)==null||B.call(g,D),n(D));return}else return l(D,...A)}finally{S||(E(),C())}};try{return a(x,L,k,...y)}finally{S=!1}}),c=u[6]||(x=>{var y;const S=p(x),L=t.get(x);if(L&&!ah(S.v)){for(const[k,D]of S.d)if(!L.d.has(k)){const A=p(k);h(k).t.add(x),L.d.add(k),D!==A.n&&(i.add(k),(y=g.c)==null||y.call(g,k),n(k))}for(const k of L.d||[])if(!S.d.has(k)){L.d.delete(k);const D=m(k);D==null||D.t.delete(x)}}}),h=u[7]||(x=>{var y;const S=p(x);let L=t.get(x);if(!L){_(x);for(const k of S.d.keys())h(k).t.add(x);if(L={l:new Set,d:new Set(S.d.keys()),t:new Set},t.set(x,L),(y=g.m)==null||y.call(g,x),ha(x)){const k=()=>{let D=!0;const A=(...B)=>{try{return l(x,...B)}finally{D||(E(),C())}};try{const B=v(x,A);B&&(L.u=()=>{D=!0;try{B()}finally{D=!1}})}finally{D=!1}};o.add(k)}}return L}),m=u[8]||(x=>{var y;const S=p(x);let L=t.get(x);if(L&&!L.l.size&&!Array.from(L.t).some(k=>{var D;return(D=t.get(k))==null?void 0:D.d.has(x)})){L.u&&f.add(L.u),L=void 0,t.delete(x),(y=g.u)==null||y.call(g,x);for(const k of S.d.keys()){const D=m(k);D==null||D.t.delete(x)}return}return L}),w=[e,t,r,i,o,f,g,s,a,d,v,p,C,E,_,n,l,c,h,m],b={get:x=>xn(_(x)),set:(x,...y)=>{try{return l(x,...y)}finally{E(),C()}},sub:(x,y)=>{const L=h(x).l;return L.add(y),C(),()=>{L.delete(y),m(x),C()}}};return Object.defineProperty(b,lm,{value:w}),b},um=cm,ch=Jf,e_={};let hm=0;function dm(e,t){const r=`atom${++hm}`,i={toString(){return(e_?"production":void 0)!=="production"&&this.debugLabel?r+":"+this.debugLabel:r}};return i.init=e,i.read=fm,i.write=_m,i}function fm(e){return e(this)}function _m(e,t,r){return t(this,typeof r=="function"?r(e(this)):r)}function t_(){return um()}let as;function pm(){return as||(as=t_(),(e_?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=as),globalThis.__JOTAI_DEFAULT_STORE__!==as&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),as}const vm={},r_=F.createContext(void 0);function i_(e){return F.useContext(r_)||pm()}function gm({children:e,store:t}){const r=F.useRef(void 0);return!t&&!r.current&&(r.current=t_()),F.createElement(r_.Provider,{value:t||r.current},e)}const El=e=>typeof(e==null?void 0:e.then)=="function",bl=e=>{e.status||(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}))},mm=Dt.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(bl(e),e)}),fa=new WeakMap,uh=(e,t)=>{let r=fa.get(e);return r||(r=new Promise((i,o)=>{let f=e;const g=d=>v=>{f===d&&i(v)},s=d=>v=>{f===d&&o(v)},a=()=>{try{const d=t();El(d)?(fa.set(d,r),f=d,d.then(g(d),s(d)),ch(d,a)):i(d)}catch(d){o(d)}};e.then(g(e),s(e)),ch(e,a)}),fa.set(e,r)),r};function ym(e,t){const{delay:r,unstable_promiseStatus:i=!Dt.use}={},o=i_(),[[f,g,s],a]=F.useReducer(v=>{const u=o.get(e);return Object.is(v[0],u)&&v[1]===o&&v[2]===e?v:[u,o,e]},void 0,()=>[o.get(e),o,e]);let d=f;if((g!==o||s!==e)&&(a(),d=o.get(e)),F.useEffect(()=>{const v=o.sub(e,()=>{if(i)try{const u=o.get(e);El(u)&&bl(uh(u,()=>o.get(e)))}catch{}if(typeof r=="number"){setTimeout(a,r);return}a()});return a(),v},[o,e,r,i]),F.useDebugValue(d),El(d)){const v=uh(d,()=>o.get(e));return i&&bl(v),mm(v)}return d}function Sm(e,t){const r=i_();return F.useCallback((...o)=>{if((vm?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return r.set(e,...o)},[r,e])}function s_(e,t){return[ym(e),Sm(e)]}/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hh="popstate";function Cm(e={}){function t(i,o){let{pathname:f,search:g,hash:s}=i.location;return xl("",{pathname:f,search:g,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(i,o){return typeof o=="string"?o:zs(o)}return Em(t,r,null,e)}function be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function wm(){return Math.random().toString(36).substring(2,10)}function dh(e,t){return{usr:e.state,key:e.key,idx:t}}function xl(e,t,r=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Xi(t):t,state:r,key:t&&t.key||i||wm()}}function zs({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function Em(e,t,r,i={}){let{window:o=document.defaultView,v5Compat:f=!1}=i,g=o.history,s="POP",a=null,d=v();d==null&&(d=0,g.replaceState({...g.state,idx:d},""));function v(){return(g.state||{idx:null}).idx}function u(){s="POP";let n=v(),l=n==null?null:n-d;d=n,a&&a({action:s,location:_.location,delta:l})}function p(n,l){s="PUSH";let c=xl(_.location,n,l);d=v()+1;let h=dh(c,d),m=_.createHref(c);try{g.pushState(h,"",m)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;o.location.assign(m)}f&&a&&a({action:s,location:_.location,delta:1})}function C(n,l){s="REPLACE";let c=xl(_.location,n,l);d=v();let h=dh(c,d),m=_.createHref(c);g.replaceState(h,"",m),f&&a&&a({action:s,location:_.location,delta:0})}function E(n){return bm(n)}let _={get action(){return s},get location(){return e(o,g)},listen(n){if(a)throw new Error("A history only accepts one active listener");return o.addEventListener(hh,u),a=n,()=>{o.removeEventListener(hh,u),a=null}},createHref(n){return t(o,n)},createURL:E,encodeLocation(n){let l=E(n);return{pathname:l.pathname,search:l.search,hash:l.hash}},push:p,replace:C,go(n){return g.go(n)}};return _}function bm(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),be(r,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:zs(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function n_(e,t,r="/"){return xm(e,t,r,!1)}function xm(e,t,r,i){let o=typeof t=="string"?Xi(t):t,f=or(o.pathname||"/",r);if(f==null)return null;let g=o_(e);Lm(g);let s=null;for(let a=0;s==null&&a<g.length;++a){let d=Fm(f);s=Bm(g[a],d,i)}return s}function o_(e,t=[],r=[],i="",o=!1){let f=(g,s,a=o,d)=>{let v={relativePath:d===void 0?g.path||"":d,caseSensitive:g.caseSensitive===!0,childrenIndex:s,route:g};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(i)&&a)return;be(v.relativePath.startsWith(i),`Absolute route path "${v.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(i.length)}let u=er([i,v.relativePath]),p=r.concat(v);g.children&&g.children.length>0&&(be(g.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),o_(g.children,t,p,u,a)),!(g.path==null&&!g.index)&&t.push({path:u,score:Pm(u,g.index),routesMeta:p})};return e.forEach((g,s)=>{var a;if(g.path===""||!((a=g.path)!=null&&a.includes("?")))f(g,s);else for(let d of a_(g.path))f(g,s,!0,d)}),t}function a_(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,o=r.endsWith("?"),f=r.replace(/\?$/,"");if(i.length===0)return o?[f,""]:[f];let g=a_(i.join("/")),s=[];return s.push(...g.map(a=>a===""?f:[f,a].join("/"))),o&&s.push(...g),s.map(a=>e.startsWith("/")&&a===""?"/":a)}function Lm(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Om(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var Rm=/^:[\w-]+$/,km=3,Dm=2,Am=1,Mm=10,Tm=-2,fh=e=>e==="*";function Pm(e,t){let r=e.split("/"),i=r.length;return r.some(fh)&&(i+=Tm),t&&(i+=Dm),r.filter(o=>!fh(o)).reduce((o,f)=>o+(Rm.test(f)?km:f===""?Am:Mm),i)}function Om(e,t){return e.length===t.length&&e.slice(0,-1).every((i,o)=>i===t[o])?e[e.length-1]-t[t.length-1]:0}function Bm(e,t,r=!1){let{routesMeta:i}=e,o={},f="/",g=[];for(let s=0;s<i.length;++s){let a=i[s],d=s===i.length-1,v=f==="/"?t:t.slice(f.length)||"/",u=vo({path:a.relativePath,caseSensitive:a.caseSensitive,end:d},v),p=a.route;if(!u&&d&&r&&!i[i.length-1].route.index&&(u=vo({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},v)),!u)return null;Object.assign(o,u.params),g.push({params:o,pathname:er([f,u.pathname]),pathnameBase:Um(er([f,u.pathnameBase])),route:p}),u.pathnameBase!=="/"&&(f=er([f,u.pathnameBase]))}return g}function vo(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=Im(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let f=o[0],g=f.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:i.reduce((d,{paramName:v,isOptional:u},p)=>{if(v==="*"){let E=s[p]||"";g=f.slice(0,f.length-E.length).replace(/(.)\/+$/,"$1")}const C=s[p];return u&&!C?d[v]=void 0:d[v]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:f,pathnameBase:g,pattern:e}}function Im(e,t=!1,r=!0){jt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,s,a)=>(i.push({paramName:s,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),i]}function Fm(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return jt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function or(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function Nm(e,t="/"){let{pathname:r,search:i="",hash:o=""}=typeof e=="string"?Xi(e):e;return{pathname:r?r.startsWith("/")?r:Hm(r,t):t,search:Wm(i),hash:zm(o)}}function Hm(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function _a(e,t,r,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $m(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function l_(e){let t=$m(e);return t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase)}function c_(e,t,r,i=!1){let o;typeof e=="string"?o=Xi(e):(o={...e},be(!o.pathname||!o.pathname.includes("?"),_a("?","pathname","search",o)),be(!o.pathname||!o.pathname.includes("#"),_a("#","pathname","hash",o)),be(!o.search||!o.search.includes("#"),_a("#","search","hash",o)));let f=e===""||o.pathname==="",g=f?"/":o.pathname,s;if(g==null)s=r;else{let u=t.length-1;if(!i&&g.startsWith("..")){let p=g.split("/");for(;p[0]==="..";)p.shift(),u-=1;o.pathname=p.join("/")}s=u>=0?t[u]:"/"}let a=Nm(o,s),d=g&&g!=="/"&&g.endsWith("/"),v=(f||g===".")&&r.endsWith("/");return!a.pathname.endsWith("/")&&(d||v)&&(a.pathname+="/"),a}var er=e=>e.join("/").replace(/\/\/+/g,"/"),Um=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Wm=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zm=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function jm(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var u_=["POST","PUT","PATCH","DELETE"];new Set(u_);var Vm=["GET",...u_];new Set(Vm);var Yi=F.createContext(null);Yi.displayName="DataRouter";var Bo=F.createContext(null);Bo.displayName="DataRouterState";F.createContext(!1);var h_=F.createContext({isTransitioning:!1});h_.displayName="ViewTransition";var Km=F.createContext(new Map);Km.displayName="Fetchers";var qm=F.createContext(null);qm.displayName="Await";var Vt=F.createContext(null);Vt.displayName="Navigation";var en=F.createContext(null);en.displayName="Location";var Kt=F.createContext({outlet:null,matches:[],isDataRoute:!1});Kt.displayName="Route";var Ac=F.createContext(null);Ac.displayName="RouteError";function Gm(e,{relative:t}={}){be(tn(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=F.useContext(Vt),{hash:o,pathname:f,search:g}=rn(e,{relative:t}),s=f;return r!=="/"&&(s=f==="/"?r:er([r,f])),i.createHref({pathname:s,search:g,hash:o})}function tn(){return F.useContext(en)!=null}function Nr(){return be(tn(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(en).location}var d_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function f_(e){F.useContext(Vt).static||F.useLayoutEffect(e)}function Mc(){let{isDataRoute:e}=F.useContext(Kt);return e?l0():Qm()}function Qm(){be(tn(),"useNavigate() may be used only in the context of a <Router> component.");let e=F.useContext(Yi),{basename:t,navigator:r}=F.useContext(Vt),{matches:i}=F.useContext(Kt),{pathname:o}=Nr(),f=JSON.stringify(l_(i)),g=F.useRef(!1);return f_(()=>{g.current=!0}),F.useCallback((a,d={})=>{if(jt(g.current,d_),!g.current)return;if(typeof a=="number"){r.go(a);return}let v=c_(a,JSON.parse(f),o,d.relative==="path");e==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:er([t,v.pathname])),(d.replace?r.replace:r.push)(v,d.state,d)},[t,r,f,o,e])}F.createContext(null);function Xm(){let{matches:e}=F.useContext(Kt),t=e[e.length-1];return t?t.params:{}}function rn(e,{relative:t}={}){let{matches:r}=F.useContext(Kt),{pathname:i}=Nr(),o=JSON.stringify(l_(r));return F.useMemo(()=>c_(e,JSON.parse(o),i,t==="path"),[e,o,i,t])}function Ym(e,t){return __(e,t)}function __(e,t,r,i){var l;be(tn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=F.useContext(Vt),{matches:f}=F.useContext(Kt),g=f[f.length-1],s=g?g.params:{},a=g?g.pathname:"/",d=g?g.pathnameBase:"/",v=g&&g.route;{let c=v&&v.path||"";p_(a,!v||c.endsWith("*")||c.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${a}" (under <Route path="${c}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${c}"> to <Route path="${c==="/"?"*":`${c}/*`}">.`)}let u=Nr(),p;if(t){let c=typeof t=="string"?Xi(t):t;be(d==="/"||((l=c.pathname)==null?void 0:l.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${c.pathname}" was given in the \`location\` prop.`),p=c}else p=u;let C=p.pathname||"/",E=C;if(d!=="/"){let c=d.replace(/^\//,"").split("/");E="/"+C.replace(/^\//,"").split("/").slice(c.length).join("/")}let _=n_(e,{pathname:E});jt(v||_!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),jt(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let n=r0(_&&_.map(c=>Object.assign({},c,{params:Object.assign({},s,c.params),pathname:er([d,o.encodeLocation?o.encodeLocation(c.pathname).pathname:c.pathname]),pathnameBase:c.pathnameBase==="/"?d:er([d,o.encodeLocation?o.encodeLocation(c.pathnameBase).pathname:c.pathnameBase])})),f,r,i);return t&&n?F.createElement(en.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},n):n}function Jm(){let e=a0(),t=jm(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},f={padding:"2px 4px",backgroundColor:i},g=null;return console.error("Error handled by React Router default ErrorBoundary:",e),g=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:f},"ErrorBoundary")," or"," ",F.createElement("code",{style:f},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),r?F.createElement("pre",{style:o},r):null,g)}var Zm=F.createElement(Jm,null),e0=class extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?F.createElement(Kt.Provider,{value:this.props.routeContext},F.createElement(Ac.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function t0({routeContext:e,match:t,children:r}){let i=F.useContext(Yi);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),F.createElement(Kt.Provider,{value:e},r)}function r0(e,t=[],r=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,f=r==null?void 0:r.errors;if(f!=null){let a=o.findIndex(d=>d.route.id&&(f==null?void 0:f[d.route.id])!==void 0);be(a>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),o=o.slice(0,Math.min(o.length,a+1))}let g=!1,s=-1;if(r)for(let a=0;a<o.length;a++){let d=o[a];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(s=a),d.route.id){let{loaderData:v,errors:u}=r,p=d.route.loader&&!v.hasOwnProperty(d.route.id)&&(!u||u[d.route.id]===void 0);if(d.route.lazy||p){g=!0,s>=0?o=o.slice(0,s+1):o=[o[0]];break}}}return o.reduceRight((a,d,v)=>{let u,p=!1,C=null,E=null;r&&(u=f&&d.route.id?f[d.route.id]:void 0,C=d.route.errorElement||Zm,g&&(s<0&&v===0?(p_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,E=null):s===v&&(p=!0,E=d.route.hydrateFallbackElement||null)));let _=t.concat(o.slice(0,v+1)),n=()=>{let l;return u?l=C:p?l=E:d.route.Component?l=F.createElement(d.route.Component,null):d.route.element?l=d.route.element:l=a,F.createElement(t0,{match:d,routeContext:{outlet:a,matches:_,isDataRoute:r!=null},children:l})};return r&&(d.route.ErrorBoundary||d.route.errorElement||v===0)?F.createElement(e0,{location:r.location,revalidation:r.revalidation,component:C,error:u,children:n(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):n()},null)}function Tc(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function i0(e){let t=F.useContext(Yi);return be(t,Tc(e)),t}function s0(e){let t=F.useContext(Bo);return be(t,Tc(e)),t}function n0(e){let t=F.useContext(Kt);return be(t,Tc(e)),t}function Pc(e){let t=n0(e),r=t.matches[t.matches.length-1];return be(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function o0(){return Pc("useRouteId")}function a0(){var i;let e=F.useContext(Ac),t=s0("useRouteError"),r=Pc("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[r]}function l0(){let{router:e}=i0("useNavigate"),t=Pc("useNavigate"),r=F.useRef(!1);return f_(()=>{r.current=!0}),F.useCallback(async(o,f={})=>{jt(r.current,d_),r.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:t,...f}))},[e,t])}var _h={};function p_(e,t,r){!t&&!_h[e]&&(_h[e]=!0,jt(!1,r))}F.memo(c0);function c0({routes:e,future:t,state:r}){return __(e,void 0,r,t)}function Ll(e){be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function u0({basename:e="/",children:t=null,location:r,navigationType:i="POP",navigator:o,static:f=!1}){be(!tn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=e.replace(/^\/*/,"/"),s=F.useMemo(()=>({basename:g,navigator:o,static:f,future:{}}),[g,o,f]);typeof r=="string"&&(r=Xi(r));let{pathname:a="/",search:d="",hash:v="",state:u=null,key:p="default"}=r,C=F.useMemo(()=>{let E=or(a,g);return E==null?null:{location:{pathname:E,search:d,hash:v,state:u,key:p},navigationType:i}},[g,a,d,v,u,p,i]);return jt(C!=null,`<Router basename="${g}"> is not able to match the URL "${a}${d}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:F.createElement(Vt.Provider,{value:s},F.createElement(en.Provider,{children:t,value:C}))}function h0({children:e,location:t}){return Ym(Rl(e),t)}function Rl(e,t=[]){let r=[];return F.Children.forEach(e,(i,o)=>{if(!F.isValidElement(i))return;let f=[...t,o];if(i.type===F.Fragment){r.push.apply(r,Rl(i.props.children,f));return}be(i.type===Ll,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),be(!i.props.index||!i.props.children,"An index route cannot have child routes.");let g={id:i.props.id||f.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(g.children=Rl(i.props.children,f)),r.push(g)}),r}var $n="get",Un="application/x-www-form-urlencoded";function Io(e){return e!=null&&typeof e.tagName=="string"}function d0(e){return Io(e)&&e.tagName.toLowerCase()==="button"}function f0(e){return Io(e)&&e.tagName.toLowerCase()==="form"}function _0(e){return Io(e)&&e.tagName.toLowerCase()==="input"}function p0(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function v0(e,t){return e.button===0&&(!t||t==="_self")&&!p0(e)}var Ln=null;function g0(){if(Ln===null)try{new FormData(document.createElement("form"),0),Ln=!1}catch{Ln=!0}return Ln}var m0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pa(e){return e!=null&&!m0.has(e)?(jt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Un}"`),null):e}function y0(e,t){let r,i,o,f,g;if(f0(e)){let s=e.getAttribute("action");i=s?or(s,t):null,r=e.getAttribute("method")||$n,o=pa(e.getAttribute("enctype"))||Un,f=new FormData(e)}else if(d0(e)||_0(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||s.getAttribute("action");if(i=a?or(a,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||$n,o=pa(e.getAttribute("formenctype"))||pa(s.getAttribute("enctype"))||Un,f=new FormData(s,e),!g0()){let{name:d,type:v,value:u}=e;if(v==="image"){let p=d?`${d}.`:"";f.append(`${p}x`,"0"),f.append(`${p}y`,"0")}else d&&f.append(d,u)}}else{if(Io(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=$n,i=null,o=Un,g=e}return f&&o==="text/plain"&&(g=f,f=void 0),{action:i,method:r.toLowerCase(),encType:o,formData:f,body:g}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Oc(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function S0(e,t,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${r}`:t&&or(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function C0(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function w0(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function E0(e,t,r){let i=await Promise.all(e.map(async o=>{let f=t.routes[o.route.id];if(f){let g=await C0(f,r);return g.links?g.links():[]}return[]}));return R0(i.flat(1).filter(w0).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function ph(e,t,r,i,o,f){let g=(a,d)=>r[d]?a.route.id!==r[d].route.id:!0,s=(a,d)=>{var v;return r[d].pathname!==a.pathname||((v=r[d].route.path)==null?void 0:v.endsWith("*"))&&r[d].params["*"]!==a.params["*"]};return f==="assets"?t.filter((a,d)=>g(a,d)||s(a,d)):f==="data"?t.filter((a,d)=>{var u;let v=i.routes[a.route.id];if(!v||!v.hasLoader)return!1;if(g(a,d)||s(a,d))return!0;if(a.route.shouldRevalidate){let p=a.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((u=r[0])==null?void 0:u.params)||{},nextUrl:new URL(e,window.origin),nextParams:a.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function b0(e,t,{includeHydrateFallback:r}={}){return x0(e.map(i=>{let o=t.routes[i.route.id];if(!o)return[];let f=[o.module];return o.clientActionModule&&(f=f.concat(o.clientActionModule)),o.clientLoaderModule&&(f=f.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(f=f.concat(o.hydrateFallbackModule)),o.imports&&(f=f.concat(o.imports)),f}).flat(1))}function x0(e){return[...new Set(e)]}function L0(e){let t={},r=Object.keys(e).sort();for(let i of r)t[i]=e[i];return t}function R0(e,t){let r=new Set;return new Set(t),e.reduce((i,o)=>{let f=JSON.stringify(L0(o));return r.has(f)||(r.add(f),i.push({key:f,link:o})),i},[])}function v_(){let e=F.useContext(Yi);return Oc(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function k0(){let e=F.useContext(Bo);return Oc(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Bc=F.createContext(void 0);Bc.displayName="FrameworkContext";function g_(){let e=F.useContext(Bc);return Oc(e,"You must render this element inside a <HydratedRouter> element"),e}function D0(e,t){let r=F.useContext(Bc),[i,o]=F.useState(!1),[f,g]=F.useState(!1),{onFocus:s,onBlur:a,onMouseEnter:d,onMouseLeave:v,onTouchStart:u}=t,p=F.useRef(null);F.useEffect(()=>{if(e==="render"&&g(!0),e==="viewport"){let _=l=>{l.forEach(c=>{g(c.isIntersecting)})},n=new IntersectionObserver(_,{threshold:.5});return p.current&&n.observe(p.current),()=>{n.disconnect()}}},[e]),F.useEffect(()=>{if(i){let _=setTimeout(()=>{g(!0)},100);return()=>{clearTimeout(_)}}},[i]);let C=()=>{o(!0)},E=()=>{o(!1),g(!1)};return r?e!=="intent"?[f,p,{}]:[f,p,{onFocus:ls(s,C),onBlur:ls(a,E),onMouseEnter:ls(d,C),onMouseLeave:ls(v,E),onTouchStart:ls(u,C)}]:[!1,p,{}]}function ls(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function A0({page:e,...t}){let{router:r}=v_(),i=F.useMemo(()=>n_(r.routes,e,r.basename),[r.routes,e,r.basename]);return i?F.createElement(T0,{page:e,matches:i,...t}):null}function M0(e){let{manifest:t,routeModules:r}=g_(),[i,o]=F.useState([]);return F.useEffect(()=>{let f=!1;return E0(e,t,r).then(g=>{f||o(g)}),()=>{f=!0}},[e,t,r]),i}function T0({page:e,matches:t,...r}){let i=Nr(),{manifest:o,routeModules:f}=g_(),{basename:g}=v_(),{loaderData:s,matches:a}=k0(),d=F.useMemo(()=>ph(e,t,a,o,i,"data"),[e,t,a,o,i]),v=F.useMemo(()=>ph(e,t,a,o,i,"assets"),[e,t,a,o,i]),u=F.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let E=new Set,_=!1;if(t.forEach(l=>{var h;let c=o.routes[l.route.id];!c||!c.hasLoader||(!d.some(m=>m.route.id===l.route.id)&&l.route.id in s&&((h=f[l.route.id])!=null&&h.shouldRevalidate)||c.hasClientLoader?_=!0:E.add(l.route.id))}),E.size===0)return[];let n=S0(e,g,"data");return _&&E.size>0&&n.searchParams.set("_routes",t.filter(l=>E.has(l.route.id)).map(l=>l.route.id).join(",")),[n.pathname+n.search]},[g,s,i,o,d,t,e,f]),p=F.useMemo(()=>b0(v,o),[v,o]),C=M0(v);return F.createElement(F.Fragment,null,u.map(E=>F.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...r})),p.map(E=>F.createElement("link",{key:E,rel:"modulepreload",href:E,...r})),C.map(({key:E,link:_})=>F.createElement("link",{key:E,nonce:r.nonce,..._})))}function P0(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var m_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{m_&&(window.__reactRouterVersion="7.8.1")}catch{}function O0({basename:e,children:t,window:r}){let i=F.useRef();i.current==null&&(i.current=Cm({window:r,v5Compat:!0}));let o=i.current,[f,g]=F.useState({action:o.action,location:o.location}),s=F.useCallback(a=>{F.startTransition(()=>g(a))},[g]);return F.useLayoutEffect(()=>o.listen(s),[o,s]),F.createElement(u0,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:o})}var y_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,S_=F.forwardRef(function({onClick:t,discover:r="render",prefetch:i="none",relative:o,reloadDocument:f,replace:g,state:s,target:a,to:d,preventScrollReset:v,viewTransition:u,...p},C){let{basename:E}=F.useContext(Vt),_=typeof d=="string"&&y_.test(d),n,l=!1;if(typeof d=="string"&&_&&(n=d,m_))try{let S=new URL(window.location.href),L=d.startsWith("//")?new URL(S.protocol+d):new URL(d),k=or(L.pathname,E);L.origin===S.origin&&k!=null?d=k+L.search+L.hash:l=!0}catch{jt(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let c=Gm(d,{relative:o}),[h,m,w]=D0(i,p),b=N0(d,{replace:g,state:s,target:a,preventScrollReset:v,relative:o,viewTransition:u});function x(S){t&&t(S),S.defaultPrevented||b(S)}let y=F.createElement("a",{...p,...w,href:n||c,onClick:l||f?t:x,ref:P0(C,m),target:a,"data-discover":!_&&r==="render"?"true":void 0});return h&&!_?F.createElement(F.Fragment,null,y,F.createElement(A0,{page:c})):y});S_.displayName="Link";var B0=F.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:i="",end:o=!1,style:f,to:g,viewTransition:s,children:a,...d},v){let u=rn(g,{relative:d.relative}),p=Nr(),C=F.useContext(Bo),{navigator:E,basename:_}=F.useContext(Vt),n=C!=null&&z0(u)&&s===!0,l=E.encodeLocation?E.encodeLocation(u).pathname:u.pathname,c=p.pathname,h=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;r||(c=c.toLowerCase(),h=h?h.toLowerCase():null,l=l.toLowerCase()),h&&_&&(h=or(h,_)||h);const m=l!=="/"&&l.endsWith("/")?l.length-1:l.length;let w=c===l||!o&&c.startsWith(l)&&c.charAt(m)==="/",b=h!=null&&(h===l||!o&&h.startsWith(l)&&h.charAt(l.length)==="/"),x={isActive:w,isPending:b,isTransitioning:n},y=w?t:void 0,S;typeof i=="function"?S=i(x):S=[i,w?"active":null,b?"pending":null,n?"transitioning":null].filter(Boolean).join(" ");let L=typeof f=="function"?f(x):f;return F.createElement(S_,{...d,"aria-current":y,className:S,ref:v,style:L,to:g,viewTransition:s},typeof a=="function"?a(x):a)});B0.displayName="NavLink";var I0=F.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:i,replace:o,state:f,method:g=$n,action:s,onSubmit:a,relative:d,preventScrollReset:v,viewTransition:u,...p},C)=>{let E=U0(),_=W0(s,{relative:d}),n=g.toLowerCase()==="get"?"get":"post",l=typeof s=="string"&&y_.test(s),c=h=>{if(a&&a(h),h.defaultPrevented)return;h.preventDefault();let m=h.nativeEvent.submitter,w=(m==null?void 0:m.getAttribute("formmethod"))||g;E(m||h.currentTarget,{fetcherKey:t,method:w,navigate:r,replace:o,state:f,relative:d,preventScrollReset:v,viewTransition:u})};return F.createElement("form",{ref:C,method:n,action:_,onSubmit:i?a:c,...p,"data-discover":!l&&e==="render"?"true":void 0})});I0.displayName="Form";function F0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C_(e){let t=F.useContext(Yi);return be(t,F0(e)),t}function N0(e,{target:t,replace:r,state:i,preventScrollReset:o,relative:f,viewTransition:g}={}){let s=Mc(),a=Nr(),d=rn(e,{relative:f});return F.useCallback(v=>{if(v0(v,t)){v.preventDefault();let u=r!==void 0?r:zs(a)===zs(d);s(e,{replace:u,state:i,preventScrollReset:o,relative:f,viewTransition:g})}},[a,s,d,r,i,t,e,o,f,g])}var H0=0,$0=()=>`__${String(++H0)}__`;function U0(){let{router:e}=C_("useSubmit"),{basename:t}=F.useContext(Vt),r=o0();return F.useCallback(async(i,o={})=>{let{action:f,method:g,encType:s,formData:a,body:d}=y0(i,t);if(o.navigate===!1){let v=o.fetcherKey||$0();await e.fetch(v,r,o.action||f,{preventScrollReset:o.preventScrollReset,formData:a,body:d,formMethod:o.method||g,formEncType:o.encType||s,flushSync:o.flushSync})}else await e.navigate(o.action||f,{preventScrollReset:o.preventScrollReset,formData:a,body:d,formMethod:o.method||g,formEncType:o.encType||s,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,r])}function W0(e,{relative:t}={}){let{basename:r}=F.useContext(Vt),i=F.useContext(Kt);be(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),f={...rn(e||".",{relative:t})},g=Nr();if(e==null){f.search=g.search;let s=new URLSearchParams(f.search),a=s.getAll("index");if(a.some(v=>v==="")){s.delete("index"),a.filter(u=>u).forEach(u=>s.append("index",u));let v=s.toString();f.search=v?`?${v}`:""}}return(!e||e===".")&&o.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(f.pathname=f.pathname==="/"?r:er([r,f.pathname])),zs(f)}function z0(e,{relative:t}={}){let r=F.useContext(h_);be(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=C_("useViewTransitionState"),o=rn(e,{relative:t});if(!r.isTransitioning)return!1;let f=or(r.currentLocation.pathname,i)||r.currentLocation.pathname,g=or(r.nextLocation.pathname,i)||r.nextLocation.pathname;return vo(o.pathname,g)!=null||vo(o.pathname,f)!=null}function tr(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e==null||e(o),r===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function Ic(e,t=[]){let r=[];function i(f,g){const s=F.createContext(g),a=r.length;r=[...r,g];const d=u=>{var l;const{scope:p,children:C,...E}=u,_=((l=p==null?void 0:p[e])==null?void 0:l[a])||s,n=F.useMemo(()=>E,Object.values(E));return X.jsx(_.Provider,{value:n,children:C})};d.displayName=f+"Provider";function v(u,p){var _;const C=((_=p==null?void 0:p[e])==null?void 0:_[a])||s,E=F.useContext(C);if(E)return E;if(g!==void 0)return g;throw new Error(`\`${u}\` must be used within \`${f}\``)}return[d,v]}const o=()=>{const f=r.map(g=>F.createContext(g));return function(s){const a=(s==null?void 0:s[e])||f;return F.useMemo(()=>({[`__scope${e}`]:{...s,[e]:a}}),[s,a])}};return o.scopeName=e,[i,j0(o,...t)]}function j0(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const i=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(f){const g=i.reduce((s,{useScope:a,scopeName:d})=>{const u=a(f)[`__scope${d}`];return{...s,...u}},{});return F.useMemo(()=>({[`__scope${t.scopeName}`]:g}),[g])}};return r.scopeName=t.scopeName,r}function vh(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function w_(...e){return t=>{let r=!1;const i=e.map(o=>{const f=vh(o,t);return!r&&typeof f=="function"&&(r=!0),f});if(r)return()=>{for(let o=0;o<i.length;o++){const f=i[o];typeof f=="function"?f():vh(e[o],null)}}}}function go(...e){return F.useCallback(w_(...e),e)}function kl(e){const t=V0(e),r=F.forwardRef((i,o)=>{const{children:f,...g}=i,s=F.Children.toArray(f),a=s.find(q0);if(a){const d=a.props.children,v=s.map(u=>u===a?F.Children.count(d)>1?F.Children.only(null):F.isValidElement(d)?d.props.children:null:u);return X.jsx(t,{...g,ref:o,children:F.isValidElement(d)?F.cloneElement(d,void 0,v):null})}return X.jsx(t,{...g,ref:o,children:f})});return r.displayName=`${e}.Slot`,r}function V0(e){const t=F.forwardRef((r,i)=>{const{children:o,...f}=r;if(F.isValidElement(o)){const g=Q0(o),s=G0(f,o.props);return o.type!==F.Fragment&&(s.ref=i?w_(i,g):g),F.cloneElement(o,s)}return F.Children.count(o)>1?F.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var K0=Symbol("radix.slottable");function q0(e){return F.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===K0}function G0(e,t){const r={...t};for(const i in t){const o=e[i],f=t[i];/^on[A-Z]/.test(i)?o&&f?r[i]=(...s)=>{const a=f(...s);return o(...s),a}:o&&(r[i]=o):i==="style"?r[i]={...o,...f}:i==="className"&&(r[i]=[o,f].filter(Boolean).join(" "))}return{...e,...r}}function Q0(e){var i,o;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function X0(e){const t=e+"CollectionProvider",[r,i]=Ic(t),[o,f]=r(t,{collectionRef:{current:null},itemMap:new Map}),g=_=>{const{scope:n,children:l}=_,c=Dt.useRef(null),h=Dt.useRef(new Map).current;return X.jsx(o,{scope:n,itemMap:h,collectionRef:c,children:l})};g.displayName=t;const s=e+"CollectionSlot",a=kl(s),d=Dt.forwardRef((_,n)=>{const{scope:l,children:c}=_,h=f(s,l),m=go(n,h.collectionRef);return X.jsx(a,{ref:m,children:c})});d.displayName=s;const v=e+"CollectionItemSlot",u="data-radix-collection-item",p=kl(v),C=Dt.forwardRef((_,n)=>{const{scope:l,children:c,...h}=_,m=Dt.useRef(null),w=go(n,m),b=f(v,l);return Dt.useEffect(()=>(b.itemMap.set(m,{ref:m,...h}),()=>void b.itemMap.delete(m))),X.jsx(p,{[u]:"",ref:w,children:c})});C.displayName=v;function E(_){const n=f(e+"CollectionConsumer",_);return Dt.useCallback(()=>{const c=n.collectionRef.current;if(!c)return[];const h=Array.from(c.querySelectorAll(`[${u}]`));return Array.from(n.itemMap.values()).sort((b,x)=>h.indexOf(b.ref.current)-h.indexOf(x.ref.current))},[n.collectionRef,n.itemMap])}return[{Provider:g,Slot:d,ItemSlot:C},E,i]}var mo=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{},Y0=Ih[" useId ".trim().toString()]||(()=>{}),J0=0;function E_(e){const[t,r]=F.useState(Y0());return mo(()=>{r(i=>i??String(J0++))},[e]),t?`radix-${t}`:""}var Z0=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ji=Z0.reduce((e,t)=>{const r=kl(`Primitive.${t}`),i=F.forwardRef((o,f)=>{const{asChild:g,...s}=o,a=g?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),X.jsx(a,{...s,ref:f})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function ey(e){const t=F.useRef(e);return F.useEffect(()=>{t.current=e}),F.useMemo(()=>(...r)=>{var i;return(i=t.current)==null?void 0:i.call(t,...r)},[])}var ty=Ih[" useInsertionEffect ".trim().toString()]||mo;function b_({prop:e,defaultProp:t,onChange:r=()=>{},caller:i}){const[o,f,g]=ry({defaultProp:t,onChange:r}),s=e!==void 0,a=s?e:o;{const v=F.useRef(e!==void 0);F.useEffect(()=>{const u=v.current;u!==s&&console.warn(`${i} is changing from ${u?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=s},[s,i])}const d=F.useCallback(v=>{var u;if(s){const p=iy(v)?v(e):v;p!==e&&((u=g.current)==null||u.call(g,p))}else f(v)},[s,e,f,g]);return[a,d]}function ry({defaultProp:e,onChange:t}){const[r,i]=F.useState(e),o=F.useRef(r),f=F.useRef(t);return ty(()=>{f.current=t},[t]),F.useEffect(()=>{var g;o.current!==r&&((g=f.current)==null||g.call(f,r),o.current=r)},[r,o]),[r,i,f]}function iy(e){return typeof e=="function"}var sy=F.createContext(void 0);function x_(e){const t=F.useContext(sy);return e||t||"ltr"}var va="rovingFocusGroup.onEntryFocus",ny={bubbles:!1,cancelable:!0},sn="RovingFocusGroup",[Dl,L_,oy]=X0(sn),[ay,R_]=Ic(sn,[oy]),[ly,cy]=ay(sn),k_=F.forwardRef((e,t)=>X.jsx(Dl.Provider,{scope:e.__scopeRovingFocusGroup,children:X.jsx(Dl.Slot,{scope:e.__scopeRovingFocusGroup,children:X.jsx(uy,{...e,ref:t})})}));k_.displayName=sn;var uy=F.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:i,loop:o=!1,dir:f,currentTabStopId:g,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:a,onEntryFocus:d,preventScrollOnEntryFocus:v=!1,...u}=e,p=F.useRef(null),C=go(t,p),E=x_(f),[_,n]=b_({prop:g,defaultProp:s??null,onChange:a,caller:sn}),[l,c]=F.useState(!1),h=ey(d),m=L_(r),w=F.useRef(!1),[b,x]=F.useState(0);return F.useEffect(()=>{const y=p.current;if(y)return y.addEventListener(va,h),()=>y.removeEventListener(va,h)},[h]),X.jsx(ly,{scope:r,orientation:i,dir:E,loop:o,currentTabStopId:_,onItemFocus:F.useCallback(y=>n(y),[n]),onItemShiftTab:F.useCallback(()=>c(!0),[]),onFocusableItemAdd:F.useCallback(()=>x(y=>y+1),[]),onFocusableItemRemove:F.useCallback(()=>x(y=>y-1),[]),children:X.jsx(Ji.div,{tabIndex:l||b===0?-1:0,"data-orientation":i,...u,ref:C,style:{outline:"none",...e.style},onMouseDown:tr(e.onMouseDown,()=>{w.current=!0}),onFocus:tr(e.onFocus,y=>{const S=!w.current;if(y.target===y.currentTarget&&S&&!l){const L=new CustomEvent(va,ny);if(y.currentTarget.dispatchEvent(L),!L.defaultPrevented){const k=m().filter($=>$.focusable),D=k.find($=>$.active),A=k.find($=>$.id===_),N=[D,A,...k].filter(Boolean).map($=>$.ref.current);M_(N,v)}}w.current=!1}),onBlur:tr(e.onBlur,()=>c(!1))})})}),D_="RovingFocusGroupItem",A_=F.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:i=!0,active:o=!1,tabStopId:f,children:g,...s}=e,a=E_(),d=f||a,v=cy(D_,r),u=v.currentTabStopId===d,p=L_(r),{onFocusableItemAdd:C,onFocusableItemRemove:E,currentTabStopId:_}=v;return F.useEffect(()=>{if(i)return C(),()=>E()},[i,C,E]),X.jsx(Dl.ItemSlot,{scope:r,id:d,focusable:i,active:o,children:X.jsx(Ji.span,{tabIndex:u?0:-1,"data-orientation":v.orientation,...s,ref:t,onMouseDown:tr(e.onMouseDown,n=>{i?v.onItemFocus(d):n.preventDefault()}),onFocus:tr(e.onFocus,()=>v.onItemFocus(d)),onKeyDown:tr(e.onKeyDown,n=>{if(n.key==="Tab"&&n.shiftKey){v.onItemShiftTab();return}if(n.target!==n.currentTarget)return;const l=fy(n,v.orientation,v.dir);if(l!==void 0){if(n.metaKey||n.ctrlKey||n.altKey||n.shiftKey)return;n.preventDefault();let h=p().filter(m=>m.focusable).map(m=>m.ref.current);if(l==="last")h.reverse();else if(l==="prev"||l==="next"){l==="prev"&&h.reverse();const m=h.indexOf(n.currentTarget);h=v.loop?_y(h,m+1):h.slice(m+1)}setTimeout(()=>M_(h))}}),children:typeof g=="function"?g({isCurrentTabStop:u,hasTabStop:_!=null}):g})})});A_.displayName=D_;var hy={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function dy(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function fy(e,t,r){const i=dy(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return hy[i]}function M_(e,t=!1){const r=document.activeElement;for(const i of e)if(i===r||(i.focus({preventScroll:t}),document.activeElement!==r))return}function _y(e,t){return e.map((r,i)=>e[(t+i)%e.length])}var py=k_,vy=A_;function gy(e,t){return F.useReducer((r,i)=>t[r][i]??r,e)}var T_=e=>{const{present:t,children:r}=e,i=my(t),o=typeof r=="function"?r({present:i.isPresent}):F.Children.only(r),f=go(i.ref,yy(o));return typeof r=="function"||i.isPresent?F.cloneElement(o,{ref:f}):null};T_.displayName="Presence";function my(e){const[t,r]=F.useState(),i=F.useRef(null),o=F.useRef(e),f=F.useRef("none"),g=e?"mounted":"unmounted",[s,a]=gy(g,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return F.useEffect(()=>{const d=Rn(i.current);f.current=s==="mounted"?d:"none"},[s]),mo(()=>{const d=i.current,v=o.current;if(v!==e){const p=f.current,C=Rn(d);e?a("MOUNT"):C==="none"||(d==null?void 0:d.display)==="none"?a("UNMOUNT"):a(v&&p!==C?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,a]),mo(()=>{if(t){let d;const v=t.ownerDocument.defaultView??window,u=C=>{const _=Rn(i.current).includes(CSS.escape(C.animationName));if(C.target===t&&_&&(a("ANIMATION_END"),!o.current)){const n=t.style.animationFillMode;t.style.animationFillMode="forwards",d=v.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=n)})}},p=C=>{C.target===t&&(f.current=Rn(i.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{v.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else a("ANIMATION_END")},[t,a]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:F.useCallback(d=>{i.current=d?getComputedStyle(d):null,r(d)},[])}}function Rn(e){return(e==null?void 0:e.animationName)||"none"}function yy(e){var i,o;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Fo="Tabs",[Sy,By]=Ic(Fo,[R_]),P_=R_(),[Cy,Fc]=Sy(Fo),O_=F.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,onValueChange:o,defaultValue:f,orientation:g="horizontal",dir:s,activationMode:a="automatic",...d}=e,v=x_(s),[u,p]=b_({prop:i,onChange:o,defaultProp:f??"",caller:Fo});return X.jsx(Cy,{scope:r,baseId:E_(),value:u,onValueChange:p,orientation:g,dir:v,activationMode:a,children:X.jsx(Ji.div,{dir:v,"data-orientation":g,...d,ref:t})})});O_.displayName=Fo;var B_="TabsList",I_=F.forwardRef((e,t)=>{const{__scopeTabs:r,loop:i=!0,...o}=e,f=Fc(B_,r),g=P_(r);return X.jsx(py,{asChild:!0,...g,orientation:f.orientation,dir:f.dir,loop:i,children:X.jsx(Ji.div,{role:"tablist","aria-orientation":f.orientation,...o,ref:t})})});I_.displayName=B_;var F_="TabsTrigger",N_=F.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,disabled:o=!1,...f}=e,g=Fc(F_,r),s=P_(r),a=U_(g.baseId,i),d=W_(g.baseId,i),v=i===g.value;return X.jsx(vy,{asChild:!0,...s,focusable:!o,active:v,children:X.jsx(Ji.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":d,"data-state":v?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:a,...f,ref:t,onMouseDown:tr(e.onMouseDown,u=>{!o&&u.button===0&&u.ctrlKey===!1?g.onValueChange(i):u.preventDefault()}),onKeyDown:tr(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&g.onValueChange(i)}),onFocus:tr(e.onFocus,()=>{const u=g.activationMode!=="manual";!v&&!o&&u&&g.onValueChange(i)})})})});N_.displayName=F_;var H_="TabsContent",$_=F.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,forceMount:o,children:f,...g}=e,s=Fc(H_,r),a=U_(s.baseId,i),d=W_(s.baseId,i),v=i===s.value,u=F.useRef(v);return F.useEffect(()=>{const p=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(p)},[]),X.jsx(T_,{present:o||v,children:({present:p})=>X.jsx(Ji.div,{"data-state":v?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":a,hidden:!p,id:d,tabIndex:0,...g,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:p&&f})})});$_.displayName=H_;function U_(e,t){return`${e}-trigger-${t}`}function W_(e,t){return`${e}-content-${t}`}var wy=O_,z_=I_,j_=N_,V_=$_;function K_(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=K_(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function Nc(){for(var e,t,r=0,i="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=K_(e))&&(i&&(i+=" "),i+=t);return i}const Ey=wy,q_=F.forwardRef(({className:e,...t},r)=>X.jsx(z_,{ref:r,className:Nc("flex w-full justify-around border-t bg-white",e),...t}));q_.displayName=z_.displayName;const Al=F.forwardRef(({className:e,...t},r)=>X.jsx(j_,{ref:r,className:Nc("flex-1 py-2 text-sm font-medium data-[state=active]:border-b-2 data-[state=active]:border-blue-500",e),...t}));Al.displayName=j_.displayName;const Ml=F.forwardRef(({className:e,...t},r)=>X.jsx(V_,{ref:r,className:Nc("h-full w-full",e),...t}));Ml.displayName=V_.displayName;const G_=dm("");var Q_={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,()=>(()=>{var r={4567:function(g,s,a){var d=this&&this.__decorate||function(h,m,w,b){var x,y=arguments.length,S=y<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,w):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(h,m,w,b);else for(var L=h.length-1;L>=0;L--)(x=h[L])&&(S=(y<3?x(S):y>3?x(m,w,S):x(m,w))||S);return y>3&&S&&Object.defineProperty(m,w,S),S},v=this&&this.__param||function(h,m){return function(w,b){m(w,b,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const u=a(9042),p=a(6114),C=a(9924),E=a(844),_=a(5596),n=a(4725),l=a(3656);let c=s.AccessibilityManager=class extends E.Disposable{constructor(h,m){super(),this._terminal=h,this._renderService=m,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let w=0;w<this._terminal.rows;w++)this._rowElements[w]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[w]);if(this._topBoundaryFocusListener=w=>this._handleBoundaryFocus(w,0),this._bottomBoundaryFocusListener=w=>this._handleBoundaryFocus(w,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new C.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(w=>this._handleResize(w.rows))),this.register(this._terminal.onRender(w=>this._refreshRows(w.start,w.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(w=>this._handleChar(w))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(w=>this._handleTab(w))),this.register(this._terminal.onKey(w=>this._handleKey(w.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new _.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,E.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(h){for(let m=0;m<h;m++)this._handleChar(" ")}_handleChar(h){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==h&&(this._charsToAnnounce+=h):this._charsToAnnounce+=h,h===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)),p.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,p.isMac&&this._liveRegion.remove()}_handleKey(h){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(h)||this._charsToConsume.push(h)}_refreshRows(h,m){this._liveRegionDebouncer.refresh(h,m,this._terminal.rows)}_renderRows(h,m){const w=this._terminal.buffer,b=w.lines.length.toString();for(let x=h;x<=m;x++){const y=w.translateBufferLineToString(w.ydisp+x,!0),S=(w.ydisp+x+1).toString(),L=this._rowElements[x];L&&(y.length===0?L.innerText="":L.textContent=y,L.setAttribute("aria-posinset",S),L.setAttribute("aria-setsize",b))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(h,m){const w=h.target,b=this._rowElements[m===0?1:this._rowElements.length-2];if(w.getAttribute("aria-posinset")===(m===0?"1":`${this._terminal.buffer.lines.length}`)||h.relatedTarget!==b)return;let x,y;if(m===0?(x=w,y=this._rowElements.pop(),this._rowContainer.removeChild(y)):(x=this._rowElements.shift(),y=w,this._rowContainer.removeChild(x)),x.removeEventListener("focus",this._topBoundaryFocusListener),y.removeEventListener("focus",this._bottomBoundaryFocusListener),m===0){const S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else{const S=this._createAccessibilityTreeNode();this._rowElements.push(S),this._rowContainer.appendChild(S)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(m===0?-1:1),this._rowElements[m===0?1:this._rowElements.length-2].focus(),h.preventDefault(),h.stopImmediatePropagation()}_handleResize(h){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let m=this._rowContainer.children.length;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);for(;this._rowElements.length>h;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const h=document.createElement("div");return h.setAttribute("role","listitem"),h.tabIndex=-1,this._refreshRowDimensions(h),h}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let h=0;h<this._terminal.rows;h++)this._refreshRowDimensions(this._rowElements[h])}}_refreshRowDimensions(h){h.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=c=d([v(1,n.IRenderService)],c)},3614:(g,s)=>{function a(p){return p.replace(/\r?\n/g,"\r")}function d(p,C){return C?"\x1B[200~"+p+"\x1B[201~":p}function v(p,C,E,_){p=d(p=a(p),E.decPrivateModes.bracketedPasteMode&&_.rawOptions.ignoreBracketedPasteMode!==!0),E.triggerDataEvent(p,!0),C.value=""}function u(p,C,E){const _=E.getBoundingClientRect(),n=p.clientX-_.left-10,l=p.clientY-_.top-10;C.style.width="20px",C.style.height="20px",C.style.left=`${n}px`,C.style.top=`${l}px`,C.style.zIndex="1000",C.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=a,s.bracketTextForPaste=d,s.copyHandler=function(p,C){p.clipboardData&&p.clipboardData.setData("text/plain",C.selectionText),p.preventDefault()},s.handlePasteEvent=function(p,C,E,_){p.stopPropagation(),p.clipboardData&&v(p.clipboardData.getData("text/plain"),C,E,_)},s.paste=v,s.moveTextAreaUnderMouseCursor=u,s.rightClickHandler=function(p,C,E,_,n){u(p,C,E),n&&_.rightClickSelect(p),C.value=_.selectionText,C.select()}},7239:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const d=a(1505);s.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(v,u,p){this._css.set(v,u,p)}getCss(v,u){return this._css.get(v,u)}setColor(v,u,p){this._color.set(v,u,p)}getColor(v,u){return this._color.get(v,u)}clear(){this._color.clear(),this._css.clear()}}},3656:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,d,v,u){a.addEventListener(d,v,u);let p=!1;return{dispose:()=>{p||(p=!0,a.removeEventListener(d,v,u))}}}},6465:function(g,s,a){var d=this&&this.__decorate||function(n,l,c,h){var m,w=arguments.length,b=w<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(n,l,c,h);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(b=(w<3?m(b):w>3?m(l,c,b):m(l,c))||b);return w>3&&b&&Object.defineProperty(l,c,b),b},v=this&&this.__param||function(n,l){return function(c,h){l(c,h,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;const u=a(3656),p=a(8460),C=a(844),E=a(2585);let _=s.Linkifier2=class extends C.Disposable{get currentLink(){return this._currentLink}constructor(n){super(),this._bufferService=n,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,C.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,C.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(n){return this._linkProviders.push(n),{dispose:()=>{const l=this._linkProviders.indexOf(n);l!==-1&&this._linkProviders.splice(l,1)}}}attachToDom(n,l,c){this._element=n,this._mouseService=l,this._renderService=c,this.register((0,u.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,u.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(n){if(this._lastMouseEvent=n,!this._element||!this._mouseService)return;const l=this._positionFromMouseEvent(n,this._element,this._mouseService);if(!l)return;this._isMouseOut=!1;const c=n.composedPath();for(let h=0;h<c.length;h++){const m=c[h];if(m.classList.contains("xterm"))break;if(m.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._handleHover(l),this._lastBufferCell=l)}_handleHover(n){if(this._activeLine!==n.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(n,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,n)||(this._clearCurrentLink(),this._askForLink(n,!0))}_askForLink(n,l){var c,h;this._activeProviderReplies&&l||((c=this._activeProviderReplies)===null||c===void 0||c.forEach(w=>{w==null||w.forEach(b=>{b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=n.y);let m=!1;for(const[w,b]of this._linkProviders.entries())l?!((h=this._activeProviderReplies)===null||h===void 0)&&h.get(w)&&(m=this._checkLinkProviderResult(w,n,m)):b.provideLinks(n.y,x=>{var y,S;if(this._isMouseOut)return;const L=x==null?void 0:x.map(k=>({link:k}));(y=this._activeProviderReplies)===null||y===void 0||y.set(w,L),m=this._checkLinkProviderResult(w,n,m),((S=this._activeProviderReplies)===null||S===void 0?void 0:S.size)===this._linkProviders.length&&this._removeIntersectingLinks(n.y,this._activeProviderReplies)})}_removeIntersectingLinks(n,l){const c=new Set;for(let h=0;h<l.size;h++){const m=l.get(h);if(m)for(let w=0;w<m.length;w++){const b=m[w],x=b.link.range.start.y<n?0:b.link.range.start.x,y=b.link.range.end.y>n?this._bufferService.cols:b.link.range.end.x;for(let S=x;S<=y;S++){if(c.has(S)){m.splice(w--,1);break}c.add(S)}}}}_checkLinkProviderResult(n,l,c){var h;if(!this._activeProviderReplies)return c;const m=this._activeProviderReplies.get(n);let w=!1;for(let b=0;b<n;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(w=!0);if(!w&&m){const b=m.find(x=>this._linkAtPosition(x.link,l));b&&(c=!0,this._handleNewLink(b))}if(this._activeProviderReplies.size===this._linkProviders.length&&!c)for(let b=0;b<this._activeProviderReplies.size;b++){const x=(h=this._activeProviderReplies.get(b))===null||h===void 0?void 0:h.find(y=>this._linkAtPosition(y.link,l));if(x){c=!0,this._handleNewLink(x);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(n){if(!this._element||!this._mouseService||!this._currentLink)return;const l=this._positionFromMouseEvent(n,this._element,this._mouseService);l&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(n,this._currentLink.link.text)}_clearCurrentLink(n,l){this._element&&this._currentLink&&this._lastMouseEvent&&(!n||!l||this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,C.disposeArray)(this._linkCacheDisposables))}_handleNewLink(n){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._linkAtPosition(n.link,l)&&(this._currentLink=n,this._currentLink.state={decorations:{underline:n.link.decorations===void 0||n.link.decorations.underline,pointerCursor:n.link.decorations===void 0||n.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,n.link,this._lastMouseEvent),n.link.decorations={},Object.defineProperties(n.link.decorations,{pointerCursor:{get:()=>{var c,h;return(h=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||h===void 0?void 0:h.decorations.pointerCursor},set:c=>{var h,m;!((h=this._currentLink)===null||h===void 0)&&h.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&((m=this._element)===null||m===void 0||m.classList.toggle("xterm-cursor-pointer",c)))}},underline:{get:()=>{var c,h;return(h=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||h===void 0?void 0:h.decorations.underline},set:c=>{var h,m,w;!((h=this._currentLink)===null||h===void 0)&&h.state&&((w=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||w===void 0?void 0:w.decorations.underline)!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(n.link,c))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(c=>{if(!this._currentLink)return;const h=c.start===0?0:c.start+1+this._bufferService.buffer.ydisp,m=this._bufferService.buffer.ydisp+1+c.end;if(this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=m&&(this._clearCurrentLink(h,m),this._lastMouseEvent&&this._element)){const w=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);w&&this._askForLink(w,!1)}})))}_linkHover(n,l,c){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&n.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(c,l.text)}_fireUnderlineEvent(n,l){const c=n.range,h=this._bufferService.buffer.ydisp,m=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-h-1,c.end.x,c.end.y-h-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(m)}_linkLeave(n,l,c){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&n.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(c,l.text)}_linkAtPosition(n,l){const c=n.range.start.y*this._bufferService.cols+n.range.start.x,h=n.range.end.y*this._bufferService.cols+n.range.end.x,m=l.y*this._bufferService.cols+l.x;return c<=m&&m<=h}_positionFromMouseEvent(n,l,c){const h=c.getCoords(n,l,this._bufferService.cols,this._bufferService.rows);if(h)return{x:h[0],y:h[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(n,l,c,h,m){return{x1:n,y1:l,x2:c,y2:h,cols:this._bufferService.cols,fg:m}}};s.Linkifier2=_=d([v(0,E.IBufferService)],_)},9042:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(g,s,a){var d=this&&this.__decorate||function(_,n,l,c){var h,m=arguments.length,w=m<3?n:c===null?c=Object.getOwnPropertyDescriptor(n,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(_,n,l,c);else for(var b=_.length-1;b>=0;b--)(h=_[b])&&(w=(m<3?h(w):m>3?h(n,l,w):h(n,l))||w);return m>3&&w&&Object.defineProperty(n,l,w),w},v=this&&this.__param||function(_,n){return function(l,c){n(l,c,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const u=a(511),p=a(2585);let C=s.OscLinkProvider=class{constructor(_,n,l){this._bufferService=_,this._optionsService=n,this._oscLinkService=l}provideLinks(_,n){var l;const c=this._bufferService.buffer.lines.get(_-1);if(!c)return void n(void 0);const h=[],m=this._optionsService.rawOptions.linkHandler,w=new u.CellData,b=c.getTrimmedLength();let x=-1,y=-1,S=!1;for(let L=0;L<b;L++)if(y!==-1||c.hasContent(L)){if(c.loadCell(L,w),w.hasExtendedAttrs()&&w.extended.urlId){if(y===-1){y=L,x=w.extended.urlId;continue}S=w.extended.urlId!==x}else y!==-1&&(S=!0);if(S||y!==-1&&L===b-1){const k=(l=this._oscLinkService.getLinkData(x))===null||l===void 0?void 0:l.uri;if(k){const D={start:{x:y+1,y:_},end:{x:L+(S||L!==b-1?0:1),y:_}};let A=!1;if(!(m!=null&&m.allowNonHttpProtocols))try{const B=new URL(k);["http:","https:"].includes(B.protocol)||(A=!0)}catch{A=!0}A||h.push({text:k,range:D,activate:(B,N)=>m?m.activate(B,N,D):E(0,N),hover:(B,N)=>{var $;return($=m==null?void 0:m.hover)===null||$===void 0?void 0:$.call(m,B,N,D)},leave:(B,N)=>{var $;return($=m==null?void 0:m.leave)===null||$===void 0?void 0:$.call(m,B,N,D)}})}S=!1,w.hasExtendedAttrs()&&w.extended.urlId?(y=L,x=w.extended.urlId):(y=-1,x=-1)}}n(h)}};function E(_,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const l=window.open();if(l){try{l.opener=null}catch{}l.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=C=d([v(0,p.IBufferService),v(1,p.IOptionsService),v(2,p.IOscLinkService)],C)},6193:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(a,d){this._parentWindow=a,this._renderCallback=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,d,v){this._rowCount=v,a=a!==void 0?a:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const a=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;const d=a(844);class v extends d.Disposable{constructor(p){super(),this._parentWindow=p,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,d.toDisposable)(()=>{this.clearListener()}))}setListener(p){this._listener&&this.clearListener(),this._listener=p,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var p;this._outerListener&&((p=this._resolutionMediaMatchList)===null||p===void 0||p.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}s.ScreenDprMonitor=v},3236:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const d=a(3614),v=a(3656),u=a(6465),p=a(9042),C=a(3730),E=a(1680),_=a(3107),n=a(5744),l=a(2950),c=a(1296),h=a(428),m=a(4269),w=a(5114),b=a(8934),x=a(3230),y=a(9312),S=a(4725),L=a(6731),k=a(8055),D=a(8969),A=a(8460),B=a(844),N=a(6114),$=a(8437),I=a(2584),R=a(7399),T=a(5941),P=a(9074),O=a(2585),W=a(5435),V=a(4567),Q=typeof window<"u"?window.document:null;class q extends D.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(M={}){super(M),this.browser=N,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new B.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(u.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(C.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(O.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((U,j)=>this.refresh(U,j))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(U=>this._reportWindowsOptions(U))),this.register(this._inputHandler.onColor(U=>this._handleColorEvent(U))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(U=>this._afterResize(U.cols,U.rows))),this.register((0,B.toDisposable)(()=>{var U,j;this._customKeyEventHandler=void 0,(j=(U=this.element)===null||U===void 0?void 0:U.parentNode)===null||j===void 0||j.removeChild(this.element)}))}_handleColorEvent(M){if(this._themeService)for(const U of M){let j,z="";switch(U.index){case 256:j="foreground",z="10";break;case 257:j="background",z="11";break;case 258:j="cursor",z="12";break;default:j="ansi",z="4;"+U.index}switch(U.type){case 0:const te=k.color.toColorRGB(j==="ansi"?this._themeService.colors.ansi[U.index]:this._themeService.colors[j]);this.coreService.triggerDataEvent(`${I.C0.ESC}]${z};${(0,T.toRgbString)(te)}${I.C1_ESCAPED.ST}`);break;case 1:if(j==="ansi")this._themeService.modifyColors(G=>G.ansi[U.index]=k.rgba.toColor(...U.color));else{const G=j;this._themeService.modifyColors(ae=>ae[G]=k.rgba.toColor(...U.color))}break;case 2:this._themeService.restoreColor(U.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(M){M?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(M){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(I.C0.ESC+"[I"),this.updateCursorStyle(M),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var M;return(M=this.textarea)===null||M===void 0?void 0:M.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(I.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const M=this.buffer.ybase+this.buffer.y,U=this.buffer.lines.get(M);if(!U)return;const j=Math.min(this.buffer.x,this.cols-1),z=this._renderService.dimensions.css.cell.height,te=U.getWidth(j),G=this._renderService.dimensions.css.cell.width*te,ae=this.buffer.y*this._renderService.dimensions.css.cell.height,ke=j*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ke+"px",this.textarea.style.top=ae+"px",this.textarea.style.width=G+"px",this.textarea.style.height=z+"px",this.textarea.style.lineHeight=z+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",U=>{this.hasSelection()&&(0,d.copyHandler)(U,this._selectionService)}));const M=U=>(0,d.handlePasteEvent)(U,this.textarea,this.coreService,this.optionsService);this.register((0,v.addDisposableDomListener)(this.textarea,"paste",M)),this.register((0,v.addDisposableDomListener)(this.element,"paste",M)),N.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",U=>{U.button===2&&(0,d.rightClickHandler)(U,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",U=>{(0,d.rightClickHandler)(U,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),N.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",U=>{U.button===1&&(0,d.moveTextAreaUnderMouseCursor)(U,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",M=>this._keyUp(M),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",M=>this._keyDown(M),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",M=>this._keyPress(M),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",M=>this._compositionHelper.compositionupdate(M))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,v.addDisposableDomListener)(this.textarea,"input",M=>this._inputEvent(M),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(M){var U;if(!M)throw new Error("Terminal requires a parent element.");M.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=M.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),M.appendChild(this.element);const j=Q.createDocumentFragment();this._viewportElement=Q.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),j.appendChild(this._viewportElement),this._viewportScrollArea=Q.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Q.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Q.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),j.appendChild(this.screenElement),this.textarea=Q.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),N.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(w.CoreBrowserService,this.textarea,(U=this._document.defaultView)!==null&&U!==void 0?U:window),this._instantiationService.setService(S.ICoreBrowserService,this._coreBrowserService),this.register((0,v.addDisposableDomListener)(this.textarea,"focus",z=>this._handleTextAreaFocus(z))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(h.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(S.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(L.ThemeService),this._instantiationService.setService(S.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(m.CharacterJoinerService),this._instantiationService.setService(S.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(S.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(z=>this._onRender.fire(z))),this.onResize(z=>this._renderService.resize(z.cols,z.rows)),this._compositionView=Q.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(l.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(j);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(b.MouseService),this._instantiationService.setService(S.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(E.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(y.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(S.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(z=>this._renderService.handleSelectionChanged(z.start,z.end,z.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(z=>{this.textarea.value=z,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(z=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(_.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",z=>this._selectionService.handleMouseDown(z))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",z=>this._handleScreenReaderModeOptionChange(z))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",z=>{!this._overviewRulerRenderer&&z&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(c.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const M=this,U=this.element;function j(G){const ae=M._mouseService.getMouseReportCoords(G,M.screenElement);if(!ae)return!1;let ke,Ae;switch(G.overrideType||G.type){case"mousemove":Ae=32,G.buttons===void 0?(ke=3,G.button!==void 0&&(ke=G.button<3?G.button:3)):ke=1&G.buttons?0:4&G.buttons?1:2&G.buttons?2:3;break;case"mouseup":Ae=0,ke=G.button<3?G.button:3;break;case"mousedown":Ae=1,ke=G.button<3?G.button:3;break;case"wheel":if(M.viewport.getLinesScrolled(G)===0)return!1;Ae=G.deltaY<0?0:1,ke=4;break;default:return!1}return!(Ae===void 0||ke===void 0||ke>4)&&M.coreMouseService.triggerMouseEvent({col:ae.col,row:ae.row,x:ae.x,y:ae.y,button:ke,action:Ae,ctrl:G.ctrlKey,alt:G.altKey,shift:G.shiftKey})}const z={mouseup:null,wheel:null,mousedrag:null,mousemove:null},te={mouseup:G=>(j(G),G.buttons||(this._document.removeEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.removeEventListener("mousemove",z.mousedrag)),this.cancel(G)),wheel:G=>(j(G),this.cancel(G,!0)),mousedrag:G=>{G.buttons&&j(G)},mousemove:G=>{G.buttons||j(G)}};this.register(this.coreMouseService.onProtocolChange(G=>{G?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(G)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&G?z.mousemove||(U.addEventListener("mousemove",te.mousemove),z.mousemove=te.mousemove):(U.removeEventListener("mousemove",z.mousemove),z.mousemove=null),16&G?z.wheel||(U.addEventListener("wheel",te.wheel,{passive:!1}),z.wheel=te.wheel):(U.removeEventListener("wheel",z.wheel),z.wheel=null),2&G?z.mouseup||(U.addEventListener("mouseup",te.mouseup),z.mouseup=te.mouseup):(this._document.removeEventListener("mouseup",z.mouseup),U.removeEventListener("mouseup",z.mouseup),z.mouseup=null),4&G?z.mousedrag||(z.mousedrag=te.mousedrag):(this._document.removeEventListener("mousemove",z.mousedrag),z.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(U,"mousedown",G=>{if(G.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(G))return j(G),z.mouseup&&this._document.addEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.addEventListener("mousemove",z.mousedrag),this.cancel(G)})),this.register((0,v.addDisposableDomListener)(U,"wheel",G=>{if(!z.wheel){if(!this.buffer.hasScrollback){const ae=this.viewport.getLinesScrolled(G);if(ae===0)return;const ke=I.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(G.deltaY<0?"A":"B");let Ae="";for(let Et=0;Et<Math.abs(ae);Et++)Ae+=ke;return this.coreService.triggerDataEvent(Ae,!0),this.cancel(G,!0)}return this.viewport.handleWheel(G)?this.cancel(G):void 0}},{passive:!1})),this.register((0,v.addDisposableDomListener)(U,"touchstart",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(G),this.cancel(G)},{passive:!0})),this.register((0,v.addDisposableDomListener)(U,"touchmove",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(G)?void 0:this.cancel(G)},{passive:!1}))}refresh(M,U){var j;(j=this._renderService)===null||j===void 0||j.refreshRows(M,U)}updateCursorStyle(M){var U;!((U=this._selectionService)===null||U===void 0)&&U.shouldColumnSelect(M)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(M,U,j=0){var z;j===1?(super.scrollLines(M,U,j),this.refresh(0,this.rows-1)):(z=this.viewport)===null||z===void 0||z.scrollLines(M)}paste(M){(0,d.paste)(M,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(M){this._customKeyEventHandler=M}registerLinkProvider(M){return this.linkifier2.registerLinkProvider(M)}registerCharacterJoiner(M){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const U=this._characterJoinerService.register(M);return this.refresh(0,this.rows-1),U}deregisterCharacterJoiner(M){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(M)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(M){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+M)}registerDecoration(M){return this._decorationService.registerDecoration(M)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(M,U,j){this._selectionService.setSelection(M,U,j)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var M;(M=this._selectionService)===null||M===void 0||M.clearSelection()}selectAll(){var M;(M=this._selectionService)===null||M===void 0||M.selectAll()}selectLines(M,U){var j;(j=this._selectionService)===null||j===void 0||j.selectLines(M,U)}_keyDown(M){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1)return!1;const U=this.browser.isMac&&this.options.macOptionIsMeta&&M.altKey;if(!U&&!this._compositionHelper.keydown(M))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;U||M.key!=="Dead"&&M.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const j=(0,R.evaluateKeyboardEvent)(M,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(M),j.type===3||j.type===2){const z=this.rows-1;return this.scrollLines(j.type===2?-z:z),this.cancel(M,!0)}return j.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,M)||(j.cancel&&this.cancel(M,!0),!j.key||!!(M.key&&!M.ctrlKey&&!M.altKey&&!M.metaKey&&M.key.length===1&&M.key.charCodeAt(0)>=65&&M.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(j.key!==I.C0.ETX&&j.key!==I.C0.CR||(this.textarea.value=""),this._onKey.fire({key:j.key,domEvent:M}),this._showCursor(),this.coreService.triggerDataEvent(j.key,!0),!this.optionsService.rawOptions.screenReaderMode||M.altKey||M.ctrlKey?this.cancel(M,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(M,U){const j=M.isMac&&!this.options.macOptionIsMeta&&U.altKey&&!U.ctrlKey&&!U.metaKey||M.isWindows&&U.altKey&&U.ctrlKey&&!U.metaKey||M.isWindows&&U.getModifierState("AltGraph");return U.type==="keypress"?j:j&&(!U.keyCode||U.keyCode>47)}_keyUp(M){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1||(function(U){return U.keyCode===16||U.keyCode===17||U.keyCode===18}(M)||this.focus(),this.updateCursorStyle(M),this._keyPressHandled=!1)}_keyPress(M){let U;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1)return!1;if(this.cancel(M),M.charCode)U=M.charCode;else if(M.which===null||M.which===void 0)U=M.keyCode;else{if(M.which===0||M.charCode===0)return!1;U=M.which}return!(!U||(M.altKey||M.ctrlKey||M.metaKey)&&!this._isThirdLevelShift(this.browser,M)||(U=String.fromCharCode(U),this._onKey.fire({key:U,domEvent:M}),this._showCursor(),this.coreService.triggerDataEvent(U,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(M){if(M.data&&M.inputType==="insertText"&&(!M.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const U=M.data;return this.coreService.triggerDataEvent(U,!0),this.cancel(M),!0}return!1}resize(M,U){M!==this.cols||U!==this.rows?super.resize(M,U):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(M,U){var j,z;(j=this._charSizeService)===null||j===void 0||j.measure(),(z=this.viewport)===null||z===void 0||z.syncScrollArea(!0)}clear(){var M;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let U=1;U<this.rows;U++)this.buffer.lines.push(this.buffer.getBlankLine($.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(M=this.viewport)===null||M===void 0||M.reset(),this.refresh(0,this.rows-1)}}reset(){var M,U;this.options.rows=this.rows,this.options.cols=this.cols;const j=this._customKeyEventHandler;this._setup(),super.reset(),(M=this._selectionService)===null||M===void 0||M.reset(),this._decorationService.reset(),(U=this.viewport)===null||U===void 0||U.reset(),this._customKeyEventHandler=j,this.refresh(0,this.rows-1)}clearTextureAtlas(){var M;(M=this._renderService)===null||M===void 0||M.clearTextureAtlas()}_reportFocus(){var M;!((M=this.element)===null||M===void 0)&&M.classList.contains("focus")?this.coreService.triggerDataEvent(I.C0.ESC+"[I"):this.coreService.triggerDataEvent(I.C0.ESC+"[O")}_reportWindowsOptions(M){if(this._renderService)switch(M){case W.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const U=this._renderService.dimensions.css.canvas.width.toFixed(0),j=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${I.C0.ESC}[4;${j};${U}t`);break;case W.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const z=this._renderService.dimensions.css.cell.width.toFixed(0),te=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${I.C0.ESC}[6;${te};${z}t`)}}cancel(M,U){if(this.options.cancelEvents||U)return M.preventDefault(),M.stopPropagation(),!1}}s.Terminal=q},9924:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(a,d=1e3){this._renderCallback=a,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,d,v){this._rowCount=v,a=a!==void 0?a:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;const u=Date.now();if(u-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=u,this._innerRefresh();else if(!this._additionalRefreshRequested){const p=u-this._lastRefreshMs,C=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},C)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const a=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,d)}}},1680:function(g,s,a){var d=this&&this.__decorate||function(l,c,h,m){var w,b=arguments.length,x=b<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,h):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,c,h,m);else for(var y=l.length-1;y>=0;y--)(w=l[y])&&(x=(b<3?w(x):b>3?w(c,h,x):w(c,h))||x);return b>3&&x&&Object.defineProperty(c,h,x),x},v=this&&this.__param||function(l,c){return function(h,m){c(h,m,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const u=a(3656),p=a(4725),C=a(8460),E=a(844),_=a(2585);let n=s.Viewport=class extends E.Disposable{constructor(l,c,h,m,w,b,x,y){super(),this._viewportElement=l,this._scrollArea=c,this._bufferService=h,this._optionsService=m,this._charSizeService=w,this._renderService=b,this._coreBrowserService=x,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new C.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(S=>this._activeBuffer=S.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(S=>this._renderDimensions=S)),this._handleThemeChange(y.colors),this.register(y.onChangeColors(S=>this._handleThemeChange(S))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(l){this._viewportElement.style.backgroundColor=l.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(l){if(l)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const c=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==c&&(this._lastRecordedBufferHeight=c,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._refreshAnimationFrame=null}syncScrollArea(l=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(l);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(l)}_handleScroll(l){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const c=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const l=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(l*(this._smoothScrollState.target-this._smoothScrollState.origin)),l<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(l,c){const h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(c<0&&this._viewportElement.scrollTop!==0||c>0&&h<this._lastRecordedBufferHeight)||(l.cancelable&&l.preventDefault(),!1)}handleWheel(l){const c=this._getPixelsScrolled(l);return c!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+c:this._smoothScrollState.target+=c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=c,this._bubbleScroll(l,c))}scrollLines(l){if(l!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const c=l*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!1})}_getPixelsScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let c=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_LINE?c*=this._currentRowHeight:l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._currentRowHeight*this._bufferService.rows),c}getBufferElements(l,c){var h;let m,w="";const b=[],x=c??this._bufferService.buffer.lines.length,y=this._bufferService.buffer.lines;for(let S=l;S<x;S++){const L=y.get(S);if(!L)continue;const k=(h=y.get(S+1))===null||h===void 0?void 0:h.isWrapped;if(w+=L.translateToString(!k),!k||S===y.length-1){const D=document.createElement("div");D.textContent=w,b.push(D),w.length>0&&(m=D),w=""}}return{bufferElements:b,cursorElement:m}}getLinesScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let c=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(c/=this._currentRowHeight+0,this._wheelPartialScroll+=c,c=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._bufferService.rows),c}_applyScrollModifier(l,c){const h=this._optionsService.rawOptions.fastScrollModifier;return h==="alt"&&c.altKey||h==="ctrl"&&c.ctrlKey||h==="shift"&&c.shiftKey?l*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:l*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(l){this._lastTouchY=l.touches[0].pageY}handleTouchMove(l){const c=this._lastTouchY-l.touches[0].pageY;return this._lastTouchY=l.touches[0].pageY,c!==0&&(this._viewportElement.scrollTop+=c,this._bubbleScroll(l,c))}};s.Viewport=n=d([v(2,_.IBufferService),v(3,_.IOptionsService),v(4,p.ICharSizeService),v(5,p.IRenderService),v(6,p.ICoreBrowserService),v(7,p.IThemeService)],n)},3107:function(g,s,a){var d=this&&this.__decorate||function(n,l,c,h){var m,w=arguments.length,b=w<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(n,l,c,h);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(b=(w<3?m(b):w>3?m(l,c,b):m(l,c))||b);return w>3&&b&&Object.defineProperty(l,c,b),b},v=this&&this.__param||function(n,l){return function(c,h){l(c,h,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const u=a(3656),p=a(4725),C=a(844),E=a(2585);let _=s.BufferDecorationRenderer=class extends C.Disposable{constructor(n,l,c,h){super(),this._screenElement=n,this._bufferService=l,this._decorationService=c,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,u.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,C.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const n of this._decorationService.decorations)this._renderDecoration(n);this._dimensionsChanged=!1}_renderDecoration(n){this._refreshStyle(n),this._dimensionsChanged&&this._refreshXPosition(n)}_createElement(n){var l,c;const h=document.createElement("div");h.classList.add("xterm-decoration"),h.classList.toggle("xterm-decoration-top-layer",((l=n==null?void 0:n.options)===null||l===void 0?void 0:l.layer)==="top"),h.style.width=`${Math.round((n.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,h.style.height=(n.options.height||1)*this._renderService.dimensions.css.cell.height+"px",h.style.top=(n.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",h.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const m=(c=n.options.x)!==null&&c!==void 0?c:0;return m&&m>this._bufferService.cols&&(h.style.display="none"),this._refreshXPosition(n,h),h}_refreshStyle(n){const l=n.marker.line-this._bufferService.buffers.active.ydisp;if(l<0||l>=this._bufferService.rows)n.element&&(n.element.style.display="none",n.onRenderEmitter.fire(n.element));else{let c=this._decorationElements.get(n);c||(c=this._createElement(n),n.element=c,this._decorationElements.set(n,c),this._container.appendChild(c),n.onDispose(()=>{this._decorationElements.delete(n),c.remove()})),c.style.top=l*this._renderService.dimensions.css.cell.height+"px",c.style.display=this._altBufferIsActive?"none":"block",n.onRenderEmitter.fire(c)}}_refreshXPosition(n,l=n.element){var c;if(!l)return;const h=(c=n.options.x)!==null&&c!==void 0?c:0;(n.options.anchor||"left")==="right"?l.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":l.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(n){var l;(l=this._decorationElements.get(n))===null||l===void 0||l.remove(),this._decorationElements.delete(n),n.dispose()}};s.BufferDecorationRenderer=_=d([v(1,E.IBufferService),v(2,E.IDecorationService),v(3,p.IRenderService)],_)},5871:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(const d of this._zones)if(d.color===a.options.overviewRulerOptions.color&&d.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,a.marker.line))return;if(this._lineAdjacentToZone(d,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(d,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,d){return d>=a.startBufferLine&&d<=a.endBufferLine}_lineAdjacentToZone(a,d,v){return d>=a.startBufferLine-this._linePadding[v||"full"]&&d<=a.endBufferLine+this._linePadding[v||"full"]}_addLineToZone(a,d){a.startBufferLine=Math.min(a.startBufferLine,d),a.endBufferLine=Math.max(a.endBufferLine,d)}}},5744:function(g,s,a){var d=this&&this.__decorate||function(m,w,b,x){var y,S=arguments.length,L=S<3?w:x===null?x=Object.getOwnPropertyDescriptor(w,b):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(m,w,b,x);else for(var k=m.length-1;k>=0;k--)(y=m[k])&&(L=(S<3?y(L):S>3?y(w,b,L):y(w,b))||L);return S>3&&L&&Object.defineProperty(w,b,L),L},v=this&&this.__param||function(m,w){return function(b,x){w(b,x,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const u=a(5871),p=a(3656),C=a(4725),E=a(844),_=a(2585),n={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0};let h=s.OverviewRulerRenderer=class extends E.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(m,w,b,x,y,S,L){var k;super(),this._viewportElement=m,this._screenElement=w,this._bufferService=b,this._decorationService=x,this._renderService=y,this._optionsService=S,this._coreBrowseService=L,this._colorZoneStore=new u.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(k=this._viewportElement.parentElement)===null||k===void 0||k.insertBefore(this._canvas,this._viewportElement);const D=this._canvas.getContext("2d");if(!D)throw new Error("Ctx cannot be null");this._ctx=D,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,E.toDisposable)(()=>{var A;(A=this._canvas)===null||A===void 0||A.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,p.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const m=Math.floor(this._canvas.width/3),w=Math.ceil(this._canvas.width/3);l.full=this._canvas.width,l.left=m,l.center=w,l.right=m,this._refreshDrawHeightConstants(),c.full=0,c.left=0,c.center=l.left,c.right=l.left+l.center}_refreshDrawHeightConstants(){n.full=Math.round(2*this._coreBrowseService.dpr);const m=this._canvas.height/this._bufferService.buffer.lines.length,w=Math.round(Math.max(Math.min(m,12),6)*this._coreBrowseService.dpr);n.left=w,n.center=w,n.right=w}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const w of this._decorationService.decorations)this._colorZoneStore.addDecoration(w);this._ctx.lineWidth=1;const m=this._colorZoneStore.zones;for(const w of m)w.position!=="full"&&this._renderColorZone(w);for(const w of m)w.position==="full"&&this._renderColorZone(w);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(m){this._ctx.fillStyle=m.color,this._ctx.fillRect(c[m.position||"full"],Math.round((this._canvas.height-1)*(m.startBufferLine/this._bufferService.buffers.active.lines.length)-n[m.position||"full"]/2),l[m.position||"full"],Math.round((this._canvas.height-1)*((m.endBufferLine-m.startBufferLine)/this._bufferService.buffers.active.lines.length)+n[m.position||"full"]))}_queueRefresh(m,w){this._shouldUpdateDimensions=m||this._shouldUpdateDimensions,this._shouldUpdateAnchor=w||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=h=d([v(2,_.IBufferService),v(3,_.IDecorationService),v(4,C.IRenderService),v(5,_.IOptionsService),v(6,C.ICoreBrowserService)],h)},2950:function(g,s,a){var d=this&&this.__decorate||function(_,n,l,c){var h,m=arguments.length,w=m<3?n:c===null?c=Object.getOwnPropertyDescriptor(n,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(_,n,l,c);else for(var b=_.length-1;b>=0;b--)(h=_[b])&&(w=(m<3?h(w):m>3?h(n,l,w):h(n,l))||w);return m>3&&w&&Object.defineProperty(n,l,w),w},v=this&&this.__param||function(_,n){return function(l,c){n(l,c,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const u=a(4725),p=a(2585),C=a(2584);let E=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(_,n,l,c,h,m){this._textarea=_,this._compositionView=n,this._bufferService=l,this._optionsService=c,this._coreService=h,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(_){this._compositionView.textContent=_.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(_){if(this._isComposing||this._isSendingComposition){if(_.keyCode===229||_.keyCode===16||_.keyCode===17||_.keyCode===18)return!1;this._finalizeComposition(!1)}return _.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(_){if(this._compositionView.classList.remove("active"),this._isComposing=!1,_){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let l;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,l=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),l.length>0&&this._coreService.triggerDataEvent(l,!0)}},0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const _=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const n=this._textarea.value,l=n.replace(_,"");this._dataAlreadySent=l,n.length>_.length?this._coreService.triggerDataEvent(l,!0):n.length<_.length?this._coreService.triggerDataEvent(`${C.C0.DEL}`,!0):n.length===_.length&&n!==_&&this._coreService.triggerDataEvent(n,!0)}},0)}updateCompositionElements(_){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),l=this._renderService.dimensions.css.cell.height,c=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=c+"px",this._compositionView.style.height=l+"px",this._compositionView.style.lineHeight=l+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const m=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=c+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}_||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=E=d([v(2,p.IBufferService),v(3,p.IOptionsService),v(4,p.ICoreService),v(5,u.IRenderService)],E)},9806:(g,s)=>{function a(d,v,u){const p=u.getBoundingClientRect(),C=d.getComputedStyle(u),E=parseInt(C.getPropertyValue("padding-left")),_=parseInt(C.getPropertyValue("padding-top"));return[v.clientX-p.left-E,v.clientY-p.top-_]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=a,s.getCoords=function(d,v,u,p,C,E,_,n,l){if(!E)return;const c=a(d,v,u);return c?(c[0]=Math.ceil((c[0]+(l?_/2:0))/_),c[1]=Math.ceil(c[1]/n),c[0]=Math.min(Math.max(c[0],1),p+(l?1:0)),c[1]=Math.min(Math.max(c[1],1),C),c):void 0}},9504:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const d=a(2584);function v(n,l,c,h){const m=n-u(n,c),w=l-u(l,c),b=Math.abs(m-w)-function(x,y,S){let L=0;const k=x-u(x,S),D=y-u(y,S);for(let A=0;A<Math.abs(k-D);A++){const B=p(x,y)==="A"?-1:1,N=S.buffer.lines.get(k+B*A);N!=null&&N.isWrapped&&L++}return L}(n,l,c);return _(b,E(p(n,l),h))}function u(n,l){let c=0,h=l.buffer.lines.get(n),m=h==null?void 0:h.isWrapped;for(;m&&n>=0&&n<l.rows;)c++,h=l.buffer.lines.get(--n),m=h==null?void 0:h.isWrapped;return c}function p(n,l){return n>l?"A":"B"}function C(n,l,c,h,m,w){let b=n,x=l,y="";for(;b!==c||x!==h;)b+=m?1:-1,m&&b>w.cols-1?(y+=w.buffer.translateBufferLineToString(x,!1,n,b),b=0,n=0,x++):!m&&b<0&&(y+=w.buffer.translateBufferLineToString(x,!1,0,n+1),b=w.cols-1,n=b,x--);return y+w.buffer.translateBufferLineToString(x,!1,n,b)}function E(n,l){const c=l?"O":"[";return d.C0.ESC+c+n}function _(n,l){n=Math.floor(n);let c="";for(let h=0;h<n;h++)c+=l;return c}s.moveToCellSequence=function(n,l,c,h){const m=c.buffer.x,w=c.buffer.y;if(!c.buffer.hasScrollback)return function(y,S,L,k,D,A){return v(S,k,D,A).length===0?"":_(C(y,S,y,S-u(S,D),!1,D).length,E("D",A))}(m,w,0,l,c,h)+v(w,l,c,h)+function(y,S,L,k,D,A){let B;B=v(S,k,D,A).length>0?k-u(k,D):S;const N=k,$=function(I,R,T,P,O,W){let V;return V=v(T,P,O,W).length>0?P-u(P,O):R,I<T&&V<=P||I>=T&&V<P?"C":"D"}(y,S,L,k,D,A);return _(C(y,B,L,N,$==="C",D).length,E($,A))}(m,w,n,l,c,h);let b;if(w===l)return b=m>n?"D":"C",_(Math.abs(m-n),E(b,h));b=w>l?"D":"C";const x=Math.abs(w-l);return _(function(y,S){return S.cols-y}(w>l?n:m,c)+(x-1)*c.cols+1+((w>l?m:n)-1),E(b,h))}},1296:function(g,s,a){var d=this&&this.__decorate||function(D,A,B,N){var $,I=arguments.length,R=I<3?A:N===null?N=Object.getOwnPropertyDescriptor(A,B):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(D,A,B,N);else for(var T=D.length-1;T>=0;T--)($=D[T])&&(R=(I<3?$(R):I>3?$(A,B,R):$(A,B))||R);return I>3&&R&&Object.defineProperty(A,B,R),R},v=this&&this.__param||function(D,A){return function(B,N){A(B,N,D)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const u=a(3787),p=a(2550),C=a(2223),E=a(6171),_=a(4725),n=a(8055),l=a(8460),c=a(844),h=a(2585),m="xterm-dom-renderer-owner-",w="xterm-rows",b="xterm-fg-",x="xterm-bg-",y="xterm-focus",S="xterm-selection";let L=1,k=s.DomRenderer=class extends c.Disposable{constructor(D,A,B,N,$,I,R,T,P,O){super(),this._element=D,this._screenElement=A,this._viewportElement=B,this._linkifier2=N,this._charSizeService=I,this._optionsService=R,this._bufferService=T,this._coreBrowserService=P,this._themeService=O,this._terminalClass=L++,this._rowElements=[],this.onRequestRedraw=this.register(new l.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(w),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(S),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,E.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(W=>this._injectCss(W))),this._injectCss(this._themeService.colors),this._rowFactory=$.createInstance(u.DomRendererRowFactory,document),this._element.classList.add(m+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(W=>this._handleLinkHover(W))),this.register(this._linkifier2.onHideLinkUnderline(W=>this._handleLinkLeave(W))),this.register((0,c.toDisposable)(()=>{this._element.classList.remove(m+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const B of this._rowElements)B.style.width=`${this.dimensions.css.canvas.width}px`,B.style.height=`${this.dimensions.css.cell.height}px`,B.style.lineHeight=`${this.dimensions.css.cell.height}px`,B.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const A=`${this._terminalSelector} .${w} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=A,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let A=`${this._terminalSelector} .${w} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;A+=`${this._terminalSelector} .${w} .xterm-dim { color: ${n.color.multiplyOpacity(D.foreground,.5).css};}`,A+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,A+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",A+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,A+=`${this._terminalSelector} .${w}.${y} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${w}.${y} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,A+=`${this._terminalSelector} .${S} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${S} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${S} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[B,N]of D.ansi.entries())A+=`${this._terminalSelector} .${b}${B} { color: ${N.css}; }${this._terminalSelector} .${b}${B}.xterm-dim { color: ${n.color.multiplyOpacity(N,.5).css}; }${this._terminalSelector} .${x}${B} { background-color: ${N.css}; }`;A+=`${this._terminalSelector} .${b}${C.INVERTED_DEFAULT_COLOR} { color: ${n.color.opaque(D.background).css}; }${this._terminalSelector} .${b}${C.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${n.color.multiplyOpacity(n.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${x}${C.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=A}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,A){for(let B=this._rowElements.length;B<=A;B++){const N=document.createElement("div");this._rowContainer.appendChild(N),this._rowElements.push(N)}for(;this._rowElements.length>A;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,A){this._refreshRowElements(D,A),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(y)}handleFocus(){this._rowContainer.classList.add(y),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,A,B){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,A,B),this.renderRows(0,this._bufferService.rows-1),!D||!A)return;const N=D[1]-this._bufferService.buffer.ydisp,$=A[1]-this._bufferService.buffer.ydisp,I=Math.max(N,0),R=Math.min($,this._bufferService.rows-1);if(I>=this._bufferService.rows||R<0)return;const T=document.createDocumentFragment();if(B){const P=D[0]>A[0];T.appendChild(this._createSelectionElement(I,P?A[0]:D[0],P?D[0]:A[0],R-I+1))}else{const P=N===I?D[0]:0,O=I===$?A[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(I,P,O));const W=R-I-1;if(T.appendChild(this._createSelectionElement(I+1,0,this._bufferService.cols,W)),I!==R){const V=$===R?A[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(R,0,V))}}this._selectionContainer.appendChild(T)}_createSelectionElement(D,A,B,N=1){const $=document.createElement("div");return $.style.height=N*this.dimensions.css.cell.height+"px",$.style.top=D*this.dimensions.css.cell.height+"px",$.style.left=A*this.dimensions.css.cell.width+"px",$.style.width=this.dimensions.css.cell.width*(B-A)+"px",$}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,A){const B=this._bufferService.buffer,N=B.ybase+B.y,$=Math.min(B.x,this._bufferService.cols-1),I=this._optionsService.rawOptions.cursorBlink,R=this._optionsService.rawOptions.cursorStyle,T=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=D;P<=A;P++){const O=P+B.ydisp,W=this._rowElements[P],V=B.lines.get(O);if(!W||!V)break;W.replaceChildren(...this._rowFactory.createRow(V,O,O===N,R,T,$,I,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${m}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,A,B,N,$,I){B<0&&(D=0),N<0&&(A=0);const R=this._bufferService.rows-1;B=Math.max(Math.min(B,R),0),N=Math.max(Math.min(N,R),0),$=Math.min($,this._bufferService.cols);const T=this._bufferService.buffer,P=T.ybase+T.y,O=Math.min(T.x,$-1),W=this._optionsService.rawOptions.cursorBlink,V=this._optionsService.rawOptions.cursorStyle,Q=this._optionsService.rawOptions.cursorInactiveStyle;for(let q=B;q<=N;++q){const Z=q+T.ydisp,M=this._rowElements[q],U=T.lines.get(Z);if(!M||!U)break;M.replaceChildren(...this._rowFactory.createRow(U,Z,Z===P,V,Q,O,W,this.dimensions.css.cell.width,this._widthCache,I?q===B?D:0:-1,I?(q===N?A:$)-1:-1))}}};s.DomRenderer=k=d([v(4,h.IInstantiationService),v(5,_.ICharSizeService),v(6,h.IOptionsService),v(7,h.IBufferService),v(8,_.ICoreBrowserService),v(9,_.IThemeService)],k)},3787:function(g,s,a){var d=this&&this.__decorate||function(b,x,y,S){var L,k=arguments.length,D=k<3?x:S===null?S=Object.getOwnPropertyDescriptor(x,y):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(b,x,y,S);else for(var A=b.length-1;A>=0;A--)(L=b[A])&&(D=(k<3?L(D):k>3?L(x,y,D):L(x,y))||D);return k>3&&D&&Object.defineProperty(x,y,D),D},v=this&&this.__param||function(b,x){return function(y,S){x(y,S,b)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const u=a(2223),p=a(643),C=a(511),E=a(2585),_=a(8055),n=a(4725),l=a(4269),c=a(6171),h=a(3734);let m=s.DomRendererRowFactory=class{constructor(b,x,y,S,L,k,D){this._document=b,this._characterJoinerService=x,this._optionsService=y,this._coreBrowserService=S,this._coreService=L,this._decorationService=k,this._themeService=D,this._workCell=new C.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(b,x,y){this._selectionStart=b,this._selectionEnd=x,this._columnSelectMode=y}createRow(b,x,y,S,L,k,D,A,B,N,$){const I=[],R=this._characterJoinerService.getJoinedCharacters(x),T=this._themeService.colors;let P,O=b.getNoBgTrimmedLength();y&&O<k+1&&(O=k+1);let W=0,V="",Q=0,q=0,Z=0,M=!1,U=0,j=!1,z=0;const te=[],G=N!==-1&&$!==-1;for(let ae=0;ae<O;ae++){b.loadCell(ae,this._workCell);let ke=this._workCell.getWidth();if(ke===0)continue;let Ae=!1,Et=ae,re=this._workCell;if(R.length>0&&ae===R[0][0]){Ae=!0;const pe=R.shift();re=new l.JoinedCellData(this._workCell,b.translateToString(!0,pe[0],pe[1]),pe[1]-pe[0]),Et=pe[1]-1,ke=re.getWidth()}const he=this._isCellInSelection(ae,x),le=y&&ae===k,ue=G&&ae>=N&&ae<=$;let ie=!1;this._decorationService.forEachDecorationAtCell(ae,x,void 0,pe=>{ie=!0});let de=re.getChars()||p.WHITESPACE_CELL_CHAR;if(de===" "&&(re.isUnderline()||re.isOverline())&&(de=""),z=ke*A-B.get(de,re.isBold(),re.isItalic()),P){if(W&&(he&&j||!he&&!j&&re.bg===Q)&&(he&&j&&T.selectionForeground||re.fg===q)&&re.extended.ext===Z&&ue===M&&z===U&&!le&&!Ae&&!ie){V+=de,W++;continue}W&&(P.textContent=V),P=this._document.createElement("span"),W=0,V=""}else P=this._document.createElement("span");if(Q=re.bg,q=re.fg,Z=re.extended.ext,M=ue,U=z,j=he,Ae&&k>=ae&&k<=Et&&(k=ae),!this._coreService.isCursorHidden&&le){if(te.push("xterm-cursor"),this._coreBrowserService.isFocused)D&&te.push("xterm-cursor-blink"),te.push(S==="bar"?"xterm-cursor-bar":S==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(L)switch(L){case"outline":te.push("xterm-cursor-outline");break;case"block":te.push("xterm-cursor-block");break;case"bar":te.push("xterm-cursor-bar");break;case"underline":te.push("xterm-cursor-underline")}}if(re.isBold()&&te.push("xterm-bold"),re.isItalic()&&te.push("xterm-italic"),re.isDim()&&te.push("xterm-dim"),V=re.isInvisible()?p.WHITESPACE_CELL_CHAR:re.getChars()||p.WHITESPACE_CELL_CHAR,re.isUnderline()&&(te.push(`xterm-underline-${re.extended.underlineStyle}`),V===" "&&(V=""),!re.isUnderlineColorDefault()))if(re.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(re.getUnderlineColor()).join(",")})`;else{let pe=re.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&re.isBold()&&pe<8&&(pe+=8),P.style.textDecorationColor=T.ansi[pe].css}re.isOverline()&&(te.push("xterm-overline"),V===" "&&(V="")),re.isStrikethrough()&&te.push("xterm-strikethrough"),ue&&(P.style.textDecoration="underline");let ye=re.getFgColor(),Te=re.getFgColorMode(),We=re.getBgColor(),bt=re.getBgColorMode();const qe=!!re.isInverse();if(qe){const pe=ye;ye=We,We=pe;const nn=Te;Te=bt,bt=nn}let Se,et,_t,Bt=!1;switch(this._decorationService.forEachDecorationAtCell(ae,x,void 0,pe=>{pe.options.layer!=="top"&&Bt||(pe.backgroundColorRGB&&(bt=50331648,We=pe.backgroundColorRGB.rgba>>8&16777215,Se=pe.backgroundColorRGB),pe.foregroundColorRGB&&(Te=50331648,ye=pe.foregroundColorRGB.rgba>>8&16777215,et=pe.foregroundColorRGB),Bt=pe.options.layer==="top")}),!Bt&&he&&(Se=this._coreBrowserService.isFocused?T.selectionBackgroundOpaque:T.selectionInactiveBackgroundOpaque,We=Se.rgba>>8&16777215,bt=50331648,Bt=!0,T.selectionForeground&&(Te=50331648,ye=T.selectionForeground.rgba>>8&16777215,et=T.selectionForeground)),Bt&&te.push("xterm-decoration-top"),bt){case 16777216:case 33554432:_t=T.ansi[We],te.push(`xterm-bg-${We}`);break;case 50331648:_t=_.rgba.toColor(We>>16,We>>8&255,255&We),this._addStyle(P,`background-color:#${w((We>>>0).toString(16),"0",6)}`);break;default:qe?(_t=T.foreground,te.push(`xterm-bg-${u.INVERTED_DEFAULT_COLOR}`)):_t=T.background}switch(Se||re.isDim()&&(Se=_.color.multiplyOpacity(_t,.5)),Te){case 16777216:case 33554432:re.isBold()&&ye<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ye+=8),this._applyMinimumContrast(P,_t,T.ansi[ye],re,Se,void 0)||te.push(`xterm-fg-${ye}`);break;case 50331648:const pe=_.rgba.toColor(ye>>16&255,ye>>8&255,255&ye);this._applyMinimumContrast(P,_t,pe,re,Se,et)||this._addStyle(P,`color:#${w(ye.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,_t,T.foreground,re,Se,void 0)||qe&&te.push(`xterm-fg-${u.INVERTED_DEFAULT_COLOR}`)}te.length&&(P.className=te.join(" "),te.length=0),le||Ae||ie?P.textContent=V:W++,z!==this.defaultSpacing&&(P.style.letterSpacing=`${z}px`),I.push(P),ae=Et}return P&&W&&(P.textContent=V),I}_applyMinimumContrast(b,x,y,S,L,k){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,c.excludeFromContrastRatioDemands)(S.getCode()))return!1;const D=this._getContrastCache(S);let A;if(L||k||(A=D.getColor(x.rgba,y.rgba)),A===void 0){const B=this._optionsService.rawOptions.minimumContrastRatio/(S.isDim()?2:1);A=_.color.ensureContrastRatio(L||x,k||y,B),D.setColor((L||x).rgba,(k||y).rgba,A??null)}return!!A&&(this._addStyle(b,`color:${A.css}`),!0)}_getContrastCache(b){return b.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(b,x){b.setAttribute("style",`${b.getAttribute("style")||""}${x};`)}_isCellInSelection(b,x){const y=this._selectionStart,S=this._selectionEnd;return!(!y||!S)&&(this._columnSelectMode?y[0]<=S[0]?b>=y[0]&&x>=y[1]&&b<S[0]&&x<=S[1]:b<y[0]&&x>=y[1]&&b>=S[0]&&x<=S[1]:x>y[1]&&x<S[1]||y[1]===S[1]&&x===y[1]&&b>=y[0]&&b<S[0]||y[1]<S[1]&&x===S[1]&&b<S[0]||y[1]<S[1]&&x===y[1]&&b>=y[0])}};function w(b,x,y){for(;b.length<y;)b=x+b;return b}s.DomRendererRowFactory=m=d([v(1,n.ICharacterJoinerService),v(2,E.IOptionsService),v(3,n.ICoreBrowserService),v(4,E.ICoreService),v(5,E.IDecorationService),v(6,n.IThemeService)],m)},2550:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const d=a.createElement("span"),v=a.createElement("span");v.style.fontWeight="bold";const u=a.createElement("span");u.style.fontStyle="italic";const p=a.createElement("span");p.style.fontWeight="bold",p.style.fontStyle="italic",this._measureElements=[d,v,u,p],this._container.appendChild(d),this._container.appendChild(v),this._container.appendChild(u),this._container.appendChild(p),a.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,d,v,u){a===this._font&&d===this._fontSize&&v===this._weight&&u===this._weightBold||(this._font=a,this._fontSize=d,this._weight=v,this._weightBold=u,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${v}`,this._measureElements[1].style.fontWeight=`${u}`,this._measureElements[2].style.fontWeight=`${v}`,this._measureElements[3].style.fontWeight=`${u}`,this.clear())}get(a,d,v){let u=0;if(!d&&!v&&a.length===1&&(u=a.charCodeAt(0))<256)return this._flat[u]!==-9999?this._flat[u]:this._flat[u]=this._measure(a,0);let p=a;d&&(p+="B"),v&&(p+="I");let C=this._holey.get(p);if(C===void 0){let E=0;d&&(E|=1),v&&(E|=2),C=this._measure(a,E),this._holey.set(p,C)}return C}_measure(a,d){const v=this._measureElements[d];return v.textContent=a.repeat(32),v.offsetWidth/32}}},2223:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const d=a(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(g,s)=>{function a(d){return 57508<=d&&d<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},s.excludeFromContrastRatioDemands=function(d){return a(d)||function(v){return 9472<=v&&v<=9631}(d)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const a=this.selectionStart,d=this.selectionEnd;return!(!a||!d)&&(a[1]>d[1]||a[1]===d[1]&&a[0]>d[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(g,s,a){var d=this&&this.__decorate||function(n,l,c,h){var m,w=arguments.length,b=w<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(n,l,c,h);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(b=(w<3?m(b):w>3?m(l,c,b):m(l,c))||b);return w>3&&b&&Object.defineProperty(l,c,b),b},v=this&&this.__param||function(n,l){return function(c,h){l(c,h,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const u=a(2585),p=a(8460),C=a(844);let E=s.CharSizeService=class extends C.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(n,l,c){super(),this._optionsService=c,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new _(n,l,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const n=this._measureStrategy.measure();n.width===this.width&&n.height===this.height||(this.width=n.width,this.height=n.height,this._onCharSizeChange.fire())}};s.CharSizeService=E=d([v(2,u.IOptionsService)],E);class _{constructor(l,c,h){this._document=l,this._parentElement=c,this._optionsService=h,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const l={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return l.width!==0&&l.height!==0&&(this._result.width=l.width/32,this._result.height=Math.ceil(l.height)),this._result}}},4269:function(g,s,a){var d=this&&this.__decorate||function(l,c,h,m){var w,b=arguments.length,x=b<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,h):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,c,h,m);else for(var y=l.length-1;y>=0;y--)(w=l[y])&&(x=(b<3?w(x):b>3?w(c,h,x):w(c,h))||x);return b>3&&x&&Object.defineProperty(c,h,x),x},v=this&&this.__param||function(l,c){return function(h,m){c(h,m,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const u=a(3734),p=a(643),C=a(511),E=a(2585);class _ extends u.AttributeData{constructor(c,h,m){super(),this.content=0,this.combinedData="",this.fg=c.fg,this.bg=c.bg,this.combinedData=h,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(c){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=_;let n=s.CharacterJoinerService=class X_{constructor(c){this._bufferService=c,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new C.CellData}register(c){const h={id:this._nextCharacterJoinerId++,handler:c};return this._characterJoiners.push(h),h.id}deregister(c){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===c)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(c){if(this._characterJoiners.length===0)return[];const h=this._bufferService.buffer.lines.get(c);if(!h||h.length===0)return[];const m=[],w=h.translateToString(!0);let b=0,x=0,y=0,S=h.getFg(0),L=h.getBg(0);for(let k=0;k<h.getTrimmedLength();k++)if(h.loadCell(k,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==S||this._workCell.bg!==L){if(k-b>1){const D=this._getJoinedRanges(w,y,x,h,b);for(let A=0;A<D.length;A++)m.push(D[A])}b=k,y=x,S=this._workCell.fg,L=this._workCell.bg}x+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1){const k=this._getJoinedRanges(w,y,x,h,b);for(let D=0;D<k.length;D++)m.push(k[D])}return m}_getJoinedRanges(c,h,m,w,b){const x=c.substring(h,m);let y=[];try{y=this._characterJoiners[0].handler(x)}catch(S){console.error(S)}for(let S=1;S<this._characterJoiners.length;S++)try{const L=this._characterJoiners[S].handler(x);for(let k=0;k<L.length;k++)X_._mergeRanges(y,L[k])}catch(L){console.error(L)}return this._stringRangesToCellRanges(y,w,b),y}_stringRangesToCellRanges(c,h,m){let w=0,b=!1,x=0,y=c[w];if(y){for(let S=m;S<this._bufferService.cols;S++){const L=h.getWidth(S),k=h.getString(S).length||p.WHITESPACE_CELL_CHAR.length;if(L!==0){if(!b&&y[0]<=x&&(y[0]=S,b=!0),y[1]<=x){if(y[1]=S,y=c[++w],!y)break;y[0]<=x?(y[0]=S,b=!0):b=!1}x+=k}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(c,h){let m=!1;for(let w=0;w<c.length;w++){const b=c[w];if(m){if(h[1]<=b[0])return c[w-1][1]=h[1],c;if(h[1]<=b[1])return c[w-1][1]=Math.max(h[1],b[1]),c.splice(w,1),c;c.splice(w,1),w--}else{if(h[1]<=b[0])return c.splice(w,0,h),c;if(h[1]<=b[1])return b[0]=Math.min(h[0],b[0]),c;h[0]<b[1]&&(b[0]=Math.min(h[0],b[0]),m=!0)}}return m?c[c.length-1][1]=h[1]:c.push(h),c}};s.CharacterJoinerService=n=d([v(0,E.IBufferService)],n)},5114:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0,s.CoreBrowserService=class{constructor(a,d){this._textarea=a,this.window=d,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(g,s,a){var d=this&&this.__decorate||function(E,_,n,l){var c,h=arguments.length,m=h<3?_:l===null?l=Object.getOwnPropertyDescriptor(_,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(E,_,n,l);else for(var w=E.length-1;w>=0;w--)(c=E[w])&&(m=(h<3?c(m):h>3?c(_,n,m):c(_,n))||m);return h>3&&m&&Object.defineProperty(_,n,m),m},v=this&&this.__param||function(E,_){return function(n,l){_(n,l,E)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const u=a(4725),p=a(9806);let C=s.MouseService=class{constructor(E,_){this._renderService=E,this._charSizeService=_}getCoords(E,_,n,l,c){return(0,p.getCoords)(window,E,_,n,l,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,c)}getMouseReportCoords(E,_){const n=(0,p.getCoordsRelativeToElement)(window,E,_);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};s.MouseService=C=d([v(0,u.IRenderService),v(1,u.ICharSizeService)],C)},3230:function(g,s,a){var d=this&&this.__decorate||function(m,w,b,x){var y,S=arguments.length,L=S<3?w:x===null?x=Object.getOwnPropertyDescriptor(w,b):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(m,w,b,x);else for(var k=m.length-1;k>=0;k--)(y=m[k])&&(L=(S<3?y(L):S>3?y(w,b,L):y(w,b))||L);return S>3&&L&&Object.defineProperty(w,b,L),L},v=this&&this.__param||function(m,w){return function(b,x){w(b,x,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const u=a(3656),p=a(6193),C=a(5596),E=a(4725),_=a(8460),n=a(844),l=a(7226),c=a(2585);let h=s.RenderService=class extends n.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(m,w,b,x,y,S,L,k){if(super(),this._rowCount=m,this._charSizeService=x,this._renderer=this.register(new n.MutableDisposable),this._pausedResizeTask=new l.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new _.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new _.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new _.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new _.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new p.RenderDebouncer(L.window,(D,A)=>this._renderRows(D,A)),this.register(this._renderDebouncer),this._screenDprMonitor=new C.ScreenDprMonitor(L.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(S.onResize(()=>this._fullRefresh())),this.register(S.buffers.onBufferActivate(()=>{var D;return(D=this._renderer.value)===null||D===void 0?void 0:D.clear()})),this.register(b.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(y.onDecorationRegistered(()=>this._fullRefresh())),this.register(y.onDecorationRemoved(()=>this._fullRefresh())),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(S.cols,S.rows),this._fullRefresh()})),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(S.buffer.y,S.buffer.y,!0))),this.register((0,u.addDisposableDomListener)(L.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(k.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in L.window){const D=new L.window.IntersectionObserver(A=>this._handleIntersectionChange(A[A.length-1]),{threshold:0});D.observe(w),this.register({dispose:()=>D.disconnect()})}}_handleIntersectionChange(m){this._isPaused=m.isIntersecting===void 0?m.intersectionRatio===0:!m.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(m,w,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(m,w,this._rowCount))}_renderRows(m,w){this._renderer.value&&(m=Math.min(m,this._rowCount-1),w=Math.min(w,this._rowCount-1),this._renderer.value.renderRows(m,w),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:m,end:w}),this._onRender.fire({start:m,end:w}),this._isNextRenderRedrawOnly=!0)}resize(m,w){this._rowCount=w,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(m){this._renderer.value=m,this._renderer.value.onRequestRedraw(w=>this.refreshRows(w.start,w.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(m){return this._renderDebouncer.addRefreshCallback(m)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var m,w;this._renderer.value&&((w=(m=this._renderer.value).clearTextureAtlas)===null||w===void 0||w.call(m),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(m,w){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(m,w)):this._renderer.value.handleResize(m,w),this._fullRefresh())}handleCharSizeChanged(){var m;(m=this._renderer.value)===null||m===void 0||m.handleCharSizeChanged()}handleBlur(){var m;(m=this._renderer.value)===null||m===void 0||m.handleBlur()}handleFocus(){var m;(m=this._renderer.value)===null||m===void 0||m.handleFocus()}handleSelectionChanged(m,w,b){var x;this._selectionState.start=m,this._selectionState.end=w,this._selectionState.columnSelectMode=b,(x=this._renderer.value)===null||x===void 0||x.handleSelectionChanged(m,w,b)}handleCursorMove(){var m;(m=this._renderer.value)===null||m===void 0||m.handleCursorMove()}clear(){var m;(m=this._renderer.value)===null||m===void 0||m.clear()}};s.RenderService=h=d([v(2,c.IOptionsService),v(3,E.ICharSizeService),v(4,c.IDecorationService),v(5,c.IBufferService),v(6,E.ICoreBrowserService),v(7,E.IThemeService)],h)},9312:function(g,s,a){var d=this&&this.__decorate||function(y,S,L,k){var D,A=arguments.length,B=A<3?S:k===null?k=Object.getOwnPropertyDescriptor(S,L):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(y,S,L,k);else for(var N=y.length-1;N>=0;N--)(D=y[N])&&(B=(A<3?D(B):A>3?D(S,L,B):D(S,L))||B);return A>3&&B&&Object.defineProperty(S,L,B),B},v=this&&this.__param||function(y,S){return function(L,k){S(L,k,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const u=a(9806),p=a(9504),C=a(456),E=a(4725),_=a(8460),n=a(844),l=a(6114),c=a(4841),h=a(511),m=a(2585),w="",b=new RegExp(w,"g");let x=s.SelectionService=class extends n.Disposable{constructor(y,S,L,k,D,A,B,N,$){super(),this._element=y,this._screenElement=S,this._linkifier=L,this._bufferService=k,this._coreService=D,this._mouseService=A,this._optionsService=B,this._renderService=N,this._coreBrowserService=$,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new _.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new _.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new _.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new _.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=I=>this._handleMouseMove(I),this._mouseUpListener=I=>this._handleMouseUp(I),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(I=>this._handleTrim(I)),this.register(this._bufferService.buffers.onBufferActivate(I=>this._handleBufferActivate(I))),this.enable(),this._model=new C.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const y=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!(!y||!S||y[0]===S[0]&&y[1]===S[1])}get selectionText(){const y=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;if(!y||!S)return"";const L=this._bufferService.buffer,k=[];if(this._activeSelectionMode===3){if(y[0]===S[0])return"";const D=y[0]<S[0]?y[0]:S[0],A=y[0]<S[0]?S[0]:y[0];for(let B=y[1];B<=S[1];B++){const N=L.translateBufferLineToString(B,!0,D,A);k.push(N)}}else{const D=y[1]===S[1]?S[0]:void 0;k.push(L.translateBufferLineToString(y[1],!0,y[0],D));for(let A=y[1]+1;A<=S[1]-1;A++){const B=L.lines.get(A),N=L.translateBufferLineToString(A,!0);B!=null&&B.isWrapped?k[k.length-1]+=N:k.push(N)}if(y[1]!==S[1]){const A=L.lines.get(S[1]),B=L.translateBufferLineToString(S[1],!0,0,S[0]);A&&A.isWrapped?k[k.length-1]+=B:k.push(B)}}return k.map(D=>D.replace(b," ")).join(l.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(y){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),l.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(y){const S=this._getMouseBufferCoords(y),L=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!!(L&&k&&S)&&this._areCoordsInSelection(S,L,k)}isCellInSelection(y,S){const L=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!(!L||!k)&&this._areCoordsInSelection([y,S],L,k)}_areCoordsInSelection(y,S,L){return y[1]>S[1]&&y[1]<L[1]||S[1]===L[1]&&y[1]===S[1]&&y[0]>=S[0]&&y[0]<L[0]||S[1]<L[1]&&y[1]===L[1]&&y[0]<L[0]||S[1]<L[1]&&y[1]===S[1]&&y[0]>=S[0]}_selectWordAtCursor(y,S){var L,k;const D=(k=(L=this._linkifier.currentLink)===null||L===void 0?void 0:L.link)===null||k===void 0?void 0:k.range;if(D)return this._model.selectionStart=[D.start.x-1,D.start.y-1],this._model.selectionStartLength=(0,c.getRangeLength)(D,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const A=this._getMouseBufferCoords(y);return!!A&&(this._selectWordAt(A,S),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(y,S){this._model.clearSelection(),y=Math.max(y,0),S=Math.min(S,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,S],this.refresh(),this._onSelectionChange.fire()}_handleTrim(y){this._model.handleTrim(y)&&this.refresh()}_getMouseBufferCoords(y){const S=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(S)return S[0]--,S[1]--,S[1]+=this._bufferService.buffer.ydisp,S}_getMouseEventScrollAmount(y){let S=(0,u.getCoordsRelativeToElement)(this._coreBrowserService.window,y,this._screenElement)[1];const L=this._renderService.dimensions.css.canvas.height;return S>=0&&S<=L?0:(S>L&&(S-=L),S=Math.min(Math.max(S,-50),50),S/=50,S/Math.abs(S)+Math.round(14*S))}shouldForceSelection(y){return l.isMac?y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:y.shiftKey}handleMouseDown(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._handleIncrementalClick(y):y.detail===1?this._handleSingleClick(y):y.detail===2?this._handleDoubleClick(y):y.detail===3&&this._handleTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))}_handleSingleClick(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const S=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);S&&S.length!==this._model.selectionStart[0]&&S.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(y){const S=this._getMouseBufferCoords(y);S&&(this._activeSelectionMode=2,this._selectLineAt(S[1]))}shouldColumnSelect(y){return y.altKey&&!(l.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(y){if(y.stopImmediatePropagation(),!this._model.selectionStart)return;const S=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const L=this._bufferService.buffer;if(this._model.selectionEnd[1]<L.lines.length){const k=L.lines.get(this._model.selectionEnd[1]);k&&k.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}S&&S[0]===this._model.selectionEnd[0]&&S[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}}_handleMouseUp(y){const S=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&S<500&&y.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const L=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(L&&L[0]!==void 0&&L[1]!==void 0){const k=(0,p.moveToCellSequence)(L[0]-1,L[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(k,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const y=this._model.finalSelectionStart,S=this._model.finalSelectionEnd,L=!(!y||!S||y[0]===S[0]&&y[1]===S[1]);L?y&&S&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&S[0]===this._oldSelectionEnd[0]&&S[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,S,L)):this._oldHasSelection&&this._fireOnSelectionChange(y,S,L)}_fireOnSelectionChange(y,S,L){this._oldSelectionStart=y,this._oldSelectionEnd=S,this._oldHasSelection=L,this._onSelectionChange.fire()}_handleBufferActivate(y){this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(S=>this._handleTrim(S))}_convertViewportColToCharacterIndex(y,S){let L=S;for(let k=0;S>=k;k++){const D=y.loadCell(k,this._workCell).getChars().length;this._workCell.getWidth()===0?L--:D>1&&S!==k&&(L+=D-1)}return L}setSelection(y,S,L){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,S],this._model.selectionStartLength=L,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(y,S,L=!0,k=!0){if(y[0]>=this._bufferService.cols)return;const D=this._bufferService.buffer,A=D.lines.get(y[1]);if(!A)return;const B=D.translateBufferLineToString(y[1],!1);let N=this._convertViewportColToCharacterIndex(A,y[0]),$=N;const I=y[0]-N;let R=0,T=0,P=0,O=0;if(B.charAt(N)===" "){for(;N>0&&B.charAt(N-1)===" ";)N--;for(;$<B.length&&B.charAt($+1)===" ";)$++}else{let Q=y[0],q=y[0];A.getWidth(Q)===0&&(R++,Q--),A.getWidth(q)===2&&(T++,q++);const Z=A.getString(q).length;for(Z>1&&(O+=Z-1,$+=Z-1);Q>0&&N>0&&!this._isCharWordSeparator(A.loadCell(Q-1,this._workCell));){A.loadCell(Q-1,this._workCell);const M=this._workCell.getChars().length;this._workCell.getWidth()===0?(R++,Q--):M>1&&(P+=M-1,N-=M-1),N--,Q--}for(;q<A.length&&$+1<B.length&&!this._isCharWordSeparator(A.loadCell(q+1,this._workCell));){A.loadCell(q+1,this._workCell);const M=this._workCell.getChars().length;this._workCell.getWidth()===2?(T++,q++):M>1&&(O+=M-1,$+=M-1),$++,q++}}$++;let W=N+I-R+P,V=Math.min(this._bufferService.cols,$-N+R+T-P-O);if(S||B.slice(N,$).trim()!==""){if(L&&W===0&&A.getCodePoint(0)!==32){const Q=D.lines.get(y[1]-1);if(Q&&A.isWrapped&&Q.getCodePoint(this._bufferService.cols-1)!==32){const q=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if(q){const Z=this._bufferService.cols-q.start;W-=Z,V+=Z}}}if(k&&W+V===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const Q=D.lines.get(y[1]+1);if(Q!=null&&Q.isWrapped&&Q.getCodePoint(0)!==32){const q=this._getWordAt([0,y[1]+1],!1,!1,!0);q&&(V+=q.length)}}return{start:W,length:V}}}_selectWordAt(y,S){const L=this._getWordAt(y,S);if(L){for(;L.start<0;)L.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[L.start,y[1]],this._model.selectionStartLength=L.length}}_selectToWordAt(y){const S=this._getWordAt(y,!0);if(S){let L=y[1];for(;S.start<0;)S.start+=this._bufferService.cols,L--;if(!this._model.areSelectionValuesReversed())for(;S.start+S.length>this._bufferService.cols;)S.length-=this._bufferService.cols,L++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?S.start:S.start+S.length,L]}}_isCharWordSeparator(y){return y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(y.getChars())>=0}_selectLineAt(y){const S=this._bufferService.buffer.getWrappedRangeForLine(y),L={start:{x:0,y:S.first},end:{x:this._bufferService.cols-1,y:S.last}};this._model.selectionStart=[0,S.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,c.getRangeLength)(L,this._bufferService.cols)}};s.SelectionService=x=d([v(3,m.IBufferService),v(4,m.ICoreService),v(5,E.IMouseService),v(6,m.IOptionsService),v(7,E.IRenderService),v(8,E.ICoreBrowserService)],x)},4725:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const d=a(8343);s.ICharSizeService=(0,d.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),s.IMouseService=(0,d.createDecorator)("MouseService"),s.IRenderService=(0,d.createDecorator)("RenderService"),s.ISelectionService=(0,d.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,d.createDecorator)("ThemeService")},6731:function(g,s,a){var d=this&&this.__decorate||function(x,y,S,L){var k,D=arguments.length,A=D<3?y:L===null?L=Object.getOwnPropertyDescriptor(y,S):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(x,y,S,L);else for(var B=x.length-1;B>=0;B--)(k=x[B])&&(A=(D<3?k(A):D>3?k(y,S,A):k(y,S))||A);return D>3&&A&&Object.defineProperty(y,S,A),A},v=this&&this.__param||function(x,y){return function(S,L){y(S,L,x)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const u=a(7239),p=a(8055),C=a(8460),E=a(844),_=a(2585),n=p.css.toColor("#ffffff"),l=p.css.toColor("#000000"),c=p.css.toColor("#ffffff"),h=p.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const x=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],y=[0,95,135,175,215,255];for(let S=0;S<216;S++){const L=y[S/36%6|0],k=y[S/6%6|0],D=y[S%6];x.push({css:p.channels.toCss(L,k,D),rgba:p.channels.toRgba(L,k,D)})}for(let S=0;S<24;S++){const L=8+10*S;x.push({css:p.channels.toCss(L,L,L),rgba:p.channels.toRgba(L,L,L)})}return x})());let w=s.ThemeService=class extends E.Disposable{get colors(){return this._colors}constructor(x){super(),this._optionsService=x,this._contrastCache=new u.ColorContrastCache,this._halfContrastCache=new u.ColorContrastCache,this._onChangeColors=this.register(new C.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:l,cursor:c,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:p.color.blend(l,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:p.color.blend(l,m),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(x={}){const y=this._colors;if(y.foreground=b(x.foreground,n),y.background=b(x.background,l),y.cursor=b(x.cursor,c),y.cursorAccent=b(x.cursorAccent,h),y.selectionBackgroundTransparent=b(x.selectionBackground,m),y.selectionBackgroundOpaque=p.color.blend(y.background,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundTransparent=b(x.selectionInactiveBackground,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundOpaque=p.color.blend(y.background,y.selectionInactiveBackgroundTransparent),y.selectionForeground=x.selectionForeground?b(x.selectionForeground,p.NULL_COLOR):void 0,y.selectionForeground===p.NULL_COLOR&&(y.selectionForeground=void 0),p.color.isOpaque(y.selectionBackgroundTransparent)&&(y.selectionBackgroundTransparent=p.color.opacity(y.selectionBackgroundTransparent,.3)),p.color.isOpaque(y.selectionInactiveBackgroundTransparent)&&(y.selectionInactiveBackgroundTransparent=p.color.opacity(y.selectionInactiveBackgroundTransparent,.3)),y.ansi=s.DEFAULT_ANSI_COLORS.slice(),y.ansi[0]=b(x.black,s.DEFAULT_ANSI_COLORS[0]),y.ansi[1]=b(x.red,s.DEFAULT_ANSI_COLORS[1]),y.ansi[2]=b(x.green,s.DEFAULT_ANSI_COLORS[2]),y.ansi[3]=b(x.yellow,s.DEFAULT_ANSI_COLORS[3]),y.ansi[4]=b(x.blue,s.DEFAULT_ANSI_COLORS[4]),y.ansi[5]=b(x.magenta,s.DEFAULT_ANSI_COLORS[5]),y.ansi[6]=b(x.cyan,s.DEFAULT_ANSI_COLORS[6]),y.ansi[7]=b(x.white,s.DEFAULT_ANSI_COLORS[7]),y.ansi[8]=b(x.brightBlack,s.DEFAULT_ANSI_COLORS[8]),y.ansi[9]=b(x.brightRed,s.DEFAULT_ANSI_COLORS[9]),y.ansi[10]=b(x.brightGreen,s.DEFAULT_ANSI_COLORS[10]),y.ansi[11]=b(x.brightYellow,s.DEFAULT_ANSI_COLORS[11]),y.ansi[12]=b(x.brightBlue,s.DEFAULT_ANSI_COLORS[12]),y.ansi[13]=b(x.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),y.ansi[14]=b(x.brightCyan,s.DEFAULT_ANSI_COLORS[14]),y.ansi[15]=b(x.brightWhite,s.DEFAULT_ANSI_COLORS[15]),x.extendedAnsi){const S=Math.min(y.ansi.length-16,x.extendedAnsi.length);for(let L=0;L<S;L++)y.ansi[L+16]=b(x.extendedAnsi[L],s.DEFAULT_ANSI_COLORS[L+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(x){this._restoreColor(x),this._onChangeColors.fire(this.colors)}_restoreColor(x){if(x!==void 0)switch(x){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[x]=this._restoreColors.ansi[x]}else for(let y=0;y<this._restoreColors.ansi.length;++y)this._colors.ansi[y]=this._restoreColors.ansi[y]}modifyColors(x){x(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function b(x,y){if(x!==void 0)try{return p.css.toColor(x)}catch{}return y}s.ThemeService=w=d([v(0,_.IOptionsService)],w)},6349:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const d=a(8460),v=a(844);class u extends v.Disposable{constructor(C){super(),this._maxLength=C,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(C){if(this._maxLength===C)return;const E=new Array(C);for(let _=0;_<Math.min(C,this.length);_++)E[_]=this._array[this._getCyclicIndex(_)];this._array=E,this._maxLength=C,this._startIndex=0}get length(){return this._length}set length(C){if(C>this._length)for(let E=this._length;E<C;E++)this._array[E]=void 0;this._length=C}get(C){return this._array[this._getCyclicIndex(C)]}set(C,E){this._array[this._getCyclicIndex(C)]=E}push(C){this._array[this._getCyclicIndex(this._length)]=C,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(C,E,..._){if(E){for(let n=C;n<this._length-E;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+E)];this._length-=E,this.onDeleteEmitter.fire({index:C,amount:E})}for(let n=this._length-1;n>=C;n--)this._array[this._getCyclicIndex(n+_.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<_.length;n++)this._array[this._getCyclicIndex(C+n)]=_[n];if(_.length&&this.onInsertEmitter.fire({index:C,amount:_.length}),this._length+_.length>this._maxLength){const n=this._length+_.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=_.length}trimStart(C){C>this._length&&(C=this._length),this._startIndex+=C,this._length-=C,this.onTrimEmitter.fire(C)}shiftElements(C,E,_){if(!(E<=0)){if(C<0||C>=this._length)throw new Error("start argument out of range");if(C+_<0)throw new Error("Cannot shift elements in list beyond index 0");if(_>0){for(let l=E-1;l>=0;l--)this.set(C+l+_,this.get(C+l));const n=C+E+_-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<E;n++)this.set(C+n+_,this.get(C+n))}}_getCyclicIndex(C){return(this._startIndex+C)%this._maxLength}}s.CircularList=u},1439:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function a(d,v=5){if(typeof d!="object")return d;const u=Array.isArray(d)?[]:{};for(const p in d)u[p]=v<=1?d[p]:d[p]&&a(d[p],v-1);return u}},8055:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;const d=a(6114);let v=0,u=0,p=0,C=0;var E,_,n,l,c;function h(w){const b=w.toString(16);return b.length<2?"0"+b:b}function m(w,b){return w<b?(b+.05)/(w+.05):(w+.05)/(b+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(w){w.toCss=function(b,x,y,S){return S!==void 0?`#${h(b)}${h(x)}${h(y)}${h(S)}`:`#${h(b)}${h(x)}${h(y)}`},w.toRgba=function(b,x,y,S=255){return(b<<24|x<<16|y<<8|S)>>>0}}(E||(s.channels=E={})),function(w){function b(x,y){return C=Math.round(255*y),[v,u,p]=c.toChannels(x.rgba),{css:E.toCss(v,u,p,C),rgba:E.toRgba(v,u,p,C)}}w.blend=function(x,y){if(C=(255&y.rgba)/255,C===1)return{css:y.css,rgba:y.rgba};const S=y.rgba>>24&255,L=y.rgba>>16&255,k=y.rgba>>8&255,D=x.rgba>>24&255,A=x.rgba>>16&255,B=x.rgba>>8&255;return v=D+Math.round((S-D)*C),u=A+Math.round((L-A)*C),p=B+Math.round((k-B)*C),{css:E.toCss(v,u,p),rgba:E.toRgba(v,u,p)}},w.isOpaque=function(x){return(255&x.rgba)==255},w.ensureContrastRatio=function(x,y,S){const L=c.ensureContrastRatio(x.rgba,y.rgba,S);if(L)return c.toColor(L>>24&255,L>>16&255,L>>8&255)},w.opaque=function(x){const y=(255|x.rgba)>>>0;return[v,u,p]=c.toChannels(y),{css:E.toCss(v,u,p),rgba:y}},w.opacity=b,w.multiplyOpacity=function(x,y){return C=255&x.rgba,b(x,C*y/255)},w.toColorRGB=function(x){return[x.rgba>>24&255,x.rgba>>16&255,x.rgba>>8&255]}}(_||(s.color=_={})),function(w){let b,x;if(!d.isNode){const y=document.createElement("canvas");y.width=1,y.height=1;const S=y.getContext("2d",{willReadFrequently:!0});S&&(b=S,b.globalCompositeOperation="copy",x=b.createLinearGradient(0,0,1,1))}w.toColor=function(y){if(y.match(/#[\da-f]{3,8}/i))switch(y.length){case 4:return v=parseInt(y.slice(1,2).repeat(2),16),u=parseInt(y.slice(2,3).repeat(2),16),p=parseInt(y.slice(3,4).repeat(2),16),c.toColor(v,u,p);case 5:return v=parseInt(y.slice(1,2).repeat(2),16),u=parseInt(y.slice(2,3).repeat(2),16),p=parseInt(y.slice(3,4).repeat(2),16),C=parseInt(y.slice(4,5).repeat(2),16),c.toColor(v,u,p,C);case 7:return{css:y,rgba:(parseInt(y.slice(1),16)<<8|255)>>>0};case 9:return{css:y,rgba:parseInt(y.slice(1),16)>>>0}}const S=y.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(S)return v=parseInt(S[1]),u=parseInt(S[2]),p=parseInt(S[3]),C=Math.round(255*(S[5]===void 0?1:parseFloat(S[5]))),c.toColor(v,u,p,C);if(!b||!x)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=x,b.fillStyle=y,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[v,u,p,C]=b.getImageData(0,0,1,1).data,C!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:E.toRgba(v,u,p,C),css:y}}}(n||(s.css=n={})),function(w){function b(x,y,S){const L=x/255,k=y/255,D=S/255;return .2126*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.7152*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))}w.relativeLuminance=function(x){return b(x>>16&255,x>>8&255,255&x)},w.relativeLuminance2=b}(l||(s.rgb=l={})),function(w){function b(y,S,L){const k=y>>24&255,D=y>>16&255,A=y>>8&255;let B=S>>24&255,N=S>>16&255,$=S>>8&255,I=m(l.relativeLuminance2(B,N,$),l.relativeLuminance2(k,D,A));for(;I<L&&(B>0||N>0||$>0);)B-=Math.max(0,Math.ceil(.1*B)),N-=Math.max(0,Math.ceil(.1*N)),$-=Math.max(0,Math.ceil(.1*$)),I=m(l.relativeLuminance2(B,N,$),l.relativeLuminance2(k,D,A));return(B<<24|N<<16|$<<8|255)>>>0}function x(y,S,L){const k=y>>24&255,D=y>>16&255,A=y>>8&255;let B=S>>24&255,N=S>>16&255,$=S>>8&255,I=m(l.relativeLuminance2(B,N,$),l.relativeLuminance2(k,D,A));for(;I<L&&(B<255||N<255||$<255);)B=Math.min(255,B+Math.ceil(.1*(255-B))),N=Math.min(255,N+Math.ceil(.1*(255-N))),$=Math.min(255,$+Math.ceil(.1*(255-$))),I=m(l.relativeLuminance2(B,N,$),l.relativeLuminance2(k,D,A));return(B<<24|N<<16|$<<8|255)>>>0}w.ensureContrastRatio=function(y,S,L){const k=l.relativeLuminance(y>>8),D=l.relativeLuminance(S>>8);if(m(k,D)<L){if(D<k){const N=b(y,S,L),$=m(k,l.relativeLuminance(N>>8));if($<L){const I=x(y,S,L);return $>m(k,l.relativeLuminance(I>>8))?N:I}return N}const A=x(y,S,L),B=m(k,l.relativeLuminance(A>>8));if(B<L){const N=b(y,S,L);return B>m(k,l.relativeLuminance(N>>8))?A:N}return A}},w.reduceLuminance=b,w.increaseLuminance=x,w.toChannels=function(y){return[y>>24&255,y>>16&255,y>>8&255,255&y]},w.toColor=function(y,S,L,k){return{css:E.toCss(y,S,L,k),rgba:E.toRgba(y,S,L,k)}}}(c||(s.rgba=c={})),s.toPaddedHex=h,s.contrastRatio=m},8969:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const d=a(844),v=a(2585),u=a(4348),p=a(7866),C=a(744),E=a(7302),_=a(6975),n=a(8460),l=a(1753),c=a(1480),h=a(7994),m=a(9282),w=a(5435),b=a(5981),x=a(2660);let y=!1;class S extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event(k=>{var D;(D=this._onScrollApi)===null||D===void 0||D.fire(k.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(k){for(const D in k)this.optionsService.options[D]=k[D]}constructor(k){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new u.InstantiationService,this.optionsService=this.register(new E.OptionsService(k)),this._instantiationService.setService(v.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(C.BufferService)),this._instantiationService.setService(v.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(v.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(_.CoreService)),this._instantiationService.setService(v.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(l.CoreMouseService)),this._instantiationService.setService(v.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(c.UnicodeService)),this._instantiationService.setService(v.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(v.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(x.OscLinkService),this._instantiationService.setService(v.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new w.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new b.WriteBuffer((D,A)=>this._inputHandler.parse(D,A))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(k,D){this._writeBuffer.write(k,D)}writeSync(k,D){this._logService.logLevel<=v.LogLevelEnum.WARN&&!y&&(this._logService.warn("writeSync is unreliable and will be removed soon."),y=!0),this._writeBuffer.writeSync(k,D)}resize(k,D){isNaN(k)||isNaN(D)||(k=Math.max(k,C.MINIMUM_COLS),D=Math.max(D,C.MINIMUM_ROWS),this._bufferService.resize(k,D))}scroll(k,D=!1){this._bufferService.scroll(k,D)}scrollLines(k,D,A){this._bufferService.scrollLines(k,D,A)}scrollPages(k){this.scrollLines(k*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(k){const D=k-this._bufferService.buffer.ydisp;D!==0&&this.scrollLines(D)}registerEscHandler(k,D){return this._inputHandler.registerEscHandler(k,D)}registerDcsHandler(k,D){return this._inputHandler.registerDcsHandler(k,D)}registerCsiHandler(k,D){return this._inputHandler.registerCsiHandler(k,D)}registerOscHandler(k,D){return this._inputHandler.registerOscHandler(k,D)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let k=!1;const D=this.optionsService.rawOptions.windowsPty;D&&D.buildNumber!==void 0&&D.buildNumber!==void 0?k=D.backend==="conpty"&&D.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(k=!0),k?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const k=[];k.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),k.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)(()=>{for(const D of k)D.dispose()})}}}s.CoreTerminal=S},8460:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===a)return void this._listeners.splice(d,1)}}})),this._event}fire(a,d){const v=[];for(let u=0;u<this._listeners.length;u++)v.push(this._listeners[u]);for(let u=0;u<v.length;u++)v[u].call(void 0,a,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(a,d){return a(v=>d.fire(v))}},5435:function(g,s,a){var d=this&&this.__decorate||function(I,R,T,P){var O,W=arguments.length,V=W<3?R:P===null?P=Object.getOwnPropertyDescriptor(R,T):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(I,R,T,P);else for(var Q=I.length-1;Q>=0;Q--)(O=I[Q])&&(V=(W<3?O(V):W>3?O(R,T,V):O(R,T))||V);return W>3&&V&&Object.defineProperty(R,T,V),V},v=this&&this.__param||function(I,R){return function(T,P){R(T,P,I)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const u=a(2584),p=a(7116),C=a(2015),E=a(844),_=a(482),n=a(8437),l=a(8460),c=a(643),h=a(511),m=a(3734),w=a(2585),b=a(6242),x=a(6351),y=a(5941),S={"(":0,")":1,"*":2,"+":3,"-":1,".":2},L=131072;function k(I,R){if(I>24)return R.setWinLines||!1;switch(I){case 1:return!!R.restoreWin;case 2:return!!R.minimizeWin;case 3:return!!R.setWinPosition;case 4:return!!R.setWinSizePixels;case 5:return!!R.raiseWin;case 6:return!!R.lowerWin;case 7:return!!R.refreshWin;case 8:return!!R.setWinSizeChars;case 9:return!!R.maximizeWin;case 10:return!!R.fullscreenWin;case 11:return!!R.getWinState;case 13:return!!R.getWinPosition;case 14:return!!R.getWinSizePixels;case 15:return!!R.getScreenSizePixels;case 16:return!!R.getCellSizePixels;case 18:return!!R.getWinSizeChars;case 19:return!!R.getScreenSizeChars;case 20:return!!R.getIconTitle;case 21:return!!R.getWinTitle;case 22:return!!R.pushTitle;case 23:return!!R.popTitle;case 24:return!!R.setWinLines}return!1}var D;(function(I){I[I.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",I[I.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(s.WindowsOptionsReportType=D={}));let A=0;class B extends E.Disposable{getAttrData(){return this._curAttrData}constructor(R,T,P,O,W,V,Q,q,Z=new C.EscapeSequenceParser){super(),this._bufferService=R,this._charsetService=T,this._coreService=P,this._logService=O,this._optionsService=W,this._oscLinkService=V,this._coreMouseService=Q,this._unicodeService=q,this._parser=Z,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new _.StringToUtf32,this._utf8Decoder=new _.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new l.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new l.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new l.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new l.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new l.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new l.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new l.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new l.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new l.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new l.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new l.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new N(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(M=>this._activeBuffer=M.activeBuffer)),this._parser.setCsiHandlerFallback((M,U)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(M),params:U.toArray()})}),this._parser.setEscHandlerFallback(M=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(M)})}),this._parser.setExecuteHandlerFallback(M=>{this._logService.debug("Unknown EXECUTE code: ",{code:M})}),this._parser.setOscHandlerFallback((M,U,j)=>{this._logService.debug("Unknown OSC code: ",{identifier:M,action:U,data:j})}),this._parser.setDcsHandlerFallback((M,U,j)=>{U==="HOOK"&&(j=j.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(M),action:U,payload:j})}),this._parser.setPrintHandler((M,U,j)=>this.print(M,U,j)),this._parser.registerCsiHandler({final:"@"},M=>this.insertChars(M)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},M=>this.scrollLeft(M)),this._parser.registerCsiHandler({final:"A"},M=>this.cursorUp(M)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},M=>this.scrollRight(M)),this._parser.registerCsiHandler({final:"B"},M=>this.cursorDown(M)),this._parser.registerCsiHandler({final:"C"},M=>this.cursorForward(M)),this._parser.registerCsiHandler({final:"D"},M=>this.cursorBackward(M)),this._parser.registerCsiHandler({final:"E"},M=>this.cursorNextLine(M)),this._parser.registerCsiHandler({final:"F"},M=>this.cursorPrecedingLine(M)),this._parser.registerCsiHandler({final:"G"},M=>this.cursorCharAbsolute(M)),this._parser.registerCsiHandler({final:"H"},M=>this.cursorPosition(M)),this._parser.registerCsiHandler({final:"I"},M=>this.cursorForwardTab(M)),this._parser.registerCsiHandler({final:"J"},M=>this.eraseInDisplay(M,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},M=>this.eraseInDisplay(M,!0)),this._parser.registerCsiHandler({final:"K"},M=>this.eraseInLine(M,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},M=>this.eraseInLine(M,!0)),this._parser.registerCsiHandler({final:"L"},M=>this.insertLines(M)),this._parser.registerCsiHandler({final:"M"},M=>this.deleteLines(M)),this._parser.registerCsiHandler({final:"P"},M=>this.deleteChars(M)),this._parser.registerCsiHandler({final:"S"},M=>this.scrollUp(M)),this._parser.registerCsiHandler({final:"T"},M=>this.scrollDown(M)),this._parser.registerCsiHandler({final:"X"},M=>this.eraseChars(M)),this._parser.registerCsiHandler({final:"Z"},M=>this.cursorBackwardTab(M)),this._parser.registerCsiHandler({final:"`"},M=>this.charPosAbsolute(M)),this._parser.registerCsiHandler({final:"a"},M=>this.hPositionRelative(M)),this._parser.registerCsiHandler({final:"b"},M=>this.repeatPrecedingCharacter(M)),this._parser.registerCsiHandler({final:"c"},M=>this.sendDeviceAttributesPrimary(M)),this._parser.registerCsiHandler({prefix:">",final:"c"},M=>this.sendDeviceAttributesSecondary(M)),this._parser.registerCsiHandler({final:"d"},M=>this.linePosAbsolute(M)),this._parser.registerCsiHandler({final:"e"},M=>this.vPositionRelative(M)),this._parser.registerCsiHandler({final:"f"},M=>this.hVPosition(M)),this._parser.registerCsiHandler({final:"g"},M=>this.tabClear(M)),this._parser.registerCsiHandler({final:"h"},M=>this.setMode(M)),this._parser.registerCsiHandler({prefix:"?",final:"h"},M=>this.setModePrivate(M)),this._parser.registerCsiHandler({final:"l"},M=>this.resetMode(M)),this._parser.registerCsiHandler({prefix:"?",final:"l"},M=>this.resetModePrivate(M)),this._parser.registerCsiHandler({final:"m"},M=>this.charAttributes(M)),this._parser.registerCsiHandler({final:"n"},M=>this.deviceStatus(M)),this._parser.registerCsiHandler({prefix:"?",final:"n"},M=>this.deviceStatusPrivate(M)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},M=>this.softReset(M)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},M=>this.setCursorStyle(M)),this._parser.registerCsiHandler({final:"r"},M=>this.setScrollRegion(M)),this._parser.registerCsiHandler({final:"s"},M=>this.saveCursor(M)),this._parser.registerCsiHandler({final:"t"},M=>this.windowOptions(M)),this._parser.registerCsiHandler({final:"u"},M=>this.restoreCursor(M)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},M=>this.insertColumns(M)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},M=>this.deleteColumns(M)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},M=>this.selectProtected(M)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},M=>this.requestMode(M,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},M=>this.requestMode(M,!1)),this._parser.setExecuteHandler(u.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(u.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(u.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(u.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(u.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(u.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(u.C1.IND,()=>this.index()),this._parser.setExecuteHandler(u.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(u.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new b.OscHandler(M=>(this.setTitle(M),this.setIconName(M),!0))),this._parser.registerOscHandler(1,new b.OscHandler(M=>this.setIconName(M))),this._parser.registerOscHandler(2,new b.OscHandler(M=>this.setTitle(M))),this._parser.registerOscHandler(4,new b.OscHandler(M=>this.setOrReportIndexedColor(M))),this._parser.registerOscHandler(8,new b.OscHandler(M=>this.setHyperlink(M))),this._parser.registerOscHandler(10,new b.OscHandler(M=>this.setOrReportFgColor(M))),this._parser.registerOscHandler(11,new b.OscHandler(M=>this.setOrReportBgColor(M))),this._parser.registerOscHandler(12,new b.OscHandler(M=>this.setOrReportCursorColor(M))),this._parser.registerOscHandler(104,new b.OscHandler(M=>this.restoreIndexedColor(M))),this._parser.registerOscHandler(110,new b.OscHandler(M=>this.restoreFgColor(M))),this._parser.registerOscHandler(111,new b.OscHandler(M=>this.restoreBgColor(M))),this._parser.registerOscHandler(112,new b.OscHandler(M=>this.restoreCursorColor(M))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const M in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:M},()=>this.selectCharset("("+M)),this._parser.registerEscHandler({intermediates:")",final:M},()=>this.selectCharset(")"+M)),this._parser.registerEscHandler({intermediates:"*",final:M},()=>this.selectCharset("*"+M)),this._parser.registerEscHandler({intermediates:"+",final:M},()=>this.selectCharset("+"+M)),this._parser.registerEscHandler({intermediates:"-",final:M},()=>this.selectCharset("-"+M)),this._parser.registerEscHandler({intermediates:".",final:M},()=>this.selectCharset("."+M)),this._parser.registerEscHandler({intermediates:"/",final:M},()=>this.selectCharset("/"+M));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(M=>(this._logService.error("Parsing error: ",M),M)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new x.DcsHandler((M,U)=>this.requestStatusString(M,U)))}_preserveStack(R,T,P,O){this._parseStack.paused=!0,this._parseStack.cursorStartX=R,this._parseStack.cursorStartY=T,this._parseStack.decodedLength=P,this._parseStack.position=O}_logSlowResolvingAsync(R){this._logService.logLevel<=w.LogLevelEnum.WARN&&Promise.race([R,new Promise((T,P)=>setTimeout(()=>P("#SLOW_TIMEOUT"),5e3))]).catch(T=>{if(T!=="#SLOW_TIMEOUT")throw T;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(R,T){let P,O=this._activeBuffer.x,W=this._activeBuffer.y,V=0;const Q=this._parseStack.paused;if(Q){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,T))return this._logSlowResolvingAsync(P),P;O=this._parseStack.cursorStartX,W=this._parseStack.cursorStartY,this._parseStack.paused=!1,R.length>L&&(V=this._parseStack.position+L)}if(this._logService.logLevel<=w.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof R=="string"?` "${R}"`:` "${Array.prototype.map.call(R,q=>String.fromCharCode(q)).join("")}"`),typeof R=="string"?R.split("").map(q=>q.charCodeAt(0)):R),this._parseBuffer.length<R.length&&this._parseBuffer.length<L&&(this._parseBuffer=new Uint32Array(Math.min(R.length,L))),Q||this._dirtyRowTracker.clearRange(),R.length>L)for(let q=V;q<R.length;q+=L){const Z=q+L<R.length?q+L:R.length,M=typeof R=="string"?this._stringDecoder.decode(R.substring(q,Z),this._parseBuffer):this._utf8Decoder.decode(R.subarray(q,Z),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,M))return this._preserveStack(O,W,M,q),this._logSlowResolvingAsync(P),P}else if(!Q){const q=typeof R=="string"?this._stringDecoder.decode(R,this._parseBuffer):this._utf8Decoder.decode(R,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,q))return this._preserveStack(O,W,q,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===O&&this._activeBuffer.y===W||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(R,T,P){let O,W;const V=this._charsetService.charset,Q=this._optionsService.rawOptions.screenReaderMode,q=this._bufferService.cols,Z=this._coreService.decPrivateModes.wraparound,M=this._coreService.modes.insertMode,U=this._curAttrData;let j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-T>0&&j.getWidth(this._activeBuffer.x-1)===2&&j.setCellFromCodePoint(this._activeBuffer.x-1,0,1,U.fg,U.bg,U.extended);for(let z=T;z<P;++z){if(O=R[z],W=this._unicodeService.wcwidth(O),O<127&&V){const te=V[String.fromCharCode(O)];te&&(O=te.charCodeAt(0))}if(Q&&this._onA11yChar.fire((0,_.stringFromCodePoint)(O)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),W||!this._activeBuffer.x){if(this._activeBuffer.x+W-1>=q){if(Z){for(;this._activeBuffer.x<q;)j.setCellFromCodePoint(this._activeBuffer.x++,0,1,U.fg,U.bg,U.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=q-1,W===2)continue}if(M&&(j.insertCells(this._activeBuffer.x,W,this._activeBuffer.getNullCell(U),U),j.getWidth(q-1)===2&&j.setCellFromCodePoint(q-1,c.NULL_CELL_CODE,c.NULL_CELL_WIDTH,U.fg,U.bg,U.extended)),j.setCellFromCodePoint(this._activeBuffer.x++,O,W,U.fg,U.bg,U.extended),W>0)for(;--W;)j.setCellFromCodePoint(this._activeBuffer.x++,0,0,U.fg,U.bg,U.extended)}else j.getWidth(this._activeBuffer.x-1)?j.addCodepointToCell(this._activeBuffer.x-1,O):j.addCodepointToCell(this._activeBuffer.x-2,O)}P-T>0&&(j.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<q&&P-T>0&&j.getWidth(this._activeBuffer.x)===0&&!j.hasContent(this._activeBuffer.x)&&j.setCellFromCodePoint(this._activeBuffer.x,0,1,U.fg,U.bg,U.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(R,T){return R.final!=="t"||R.prefix||R.intermediates?this._parser.registerCsiHandler(R,T):this._parser.registerCsiHandler(R,P=>!k(P.params[0],this._optionsService.rawOptions.windowOptions)||T(P))}registerDcsHandler(R,T){return this._parser.registerDcsHandler(R,new x.DcsHandler(T))}registerEscHandler(R,T){return this._parser.registerEscHandler(R,T)}registerOscHandler(R,T){return this._parser.registerOscHandler(R,new b.OscHandler(T))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var R;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||R===void 0)&&R.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);T.hasWidth(this._activeBuffer.x)&&!T.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const R=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-R),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(R=this._bufferService.cols-1){this._activeBuffer.x=Math.min(R,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(R,T){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=R,this._activeBuffer.y=this._activeBuffer.scrollTop+T):(this._activeBuffer.x=R,this._activeBuffer.y=T),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(R,T){this._restrictCursor(),this._setCursor(this._activeBuffer.x+R,this._activeBuffer.y+T)}cursorUp(R){const T=this._activeBuffer.y-this._activeBuffer.scrollTop;return T>=0?this._moveCursor(0,-Math.min(T,R.params[0]||1)):this._moveCursor(0,-(R.params[0]||1)),!0}cursorDown(R){const T=this._activeBuffer.scrollBottom-this._activeBuffer.y;return T>=0?this._moveCursor(0,Math.min(T,R.params[0]||1)):this._moveCursor(0,R.params[0]||1),!0}cursorForward(R){return this._moveCursor(R.params[0]||1,0),!0}cursorBackward(R){return this._moveCursor(-(R.params[0]||1),0),!0}cursorNextLine(R){return this.cursorDown(R),this._activeBuffer.x=0,!0}cursorPrecedingLine(R){return this.cursorUp(R),this._activeBuffer.x=0,!0}cursorCharAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(R){return this._setCursor(R.length>=2?(R.params[1]||1)-1:0,(R.params[0]||1)-1),!0}charPosAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(R){return this._moveCursor(R.params[0]||1,0),!0}linePosAbsolute(R){return this._setCursor(this._activeBuffer.x,(R.params[0]||1)-1),!0}vPositionRelative(R){return this._moveCursor(0,R.params[0]||1),!0}hVPosition(R){return this.cursorPosition(R),!0}tabClear(R){const T=R.params[0];return T===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:T===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=R.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=R.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(R){const T=R.params[0];return T===1&&(this._curAttrData.bg|=536870912),T!==2&&T!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(R,T,P,O=!1,W=!1){const V=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);V.replaceCells(T,P,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),W),O&&(V.isWrapped=!1)}_resetBufferLine(R,T=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),T),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+R),P.isWrapped=!1)}eraseInDisplay(R,T=!1){let P;switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);P<this._bufferService.rows;P++)this._resetBufferLine(P,T);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,T),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,T);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,T);this._dirtyRowTracker.markDirty(0);break;case 3:const O=this._activeBuffer.lines.length-this._bufferService.rows;O>0&&(this._activeBuffer.lines.trimStart(O),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-O,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-O,0),this._onScroll.fire(0))}return!0}eraseInLine(R,T=!1){switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,T);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,T)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(R){this._restrictCursor();let T=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-O+1;for(;T--;)this._activeBuffer.lines.splice(W-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(R){this._restrictCursor();let T=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let O;for(O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,O=this._bufferService.rows-1+this._activeBuffer.ybase-O;T--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(R){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.insertCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(R){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.deleteCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(R){let T=R.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(R){let T=R.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=R.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);O.deleteCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=R.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);O.insertCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=R.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);O.insertCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=R.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);O.deleteCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(R){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(R.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(R){if(!this._parser.precedingCodepoint)return!0;const T=R.params[0]||1,P=new Uint32Array(T);for(let O=0;O<T;++O)P[O]=this._parser.precedingCodepoint;return this.print(P,0,P.length),!0}sendDeviceAttributesPrimary(R){return R.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(R){return R.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(R.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0}_is(R){return(this._optionsService.rawOptions.termName+"").indexOf(R)===0}setMode(R){for(let T=0;T<R.length;T++)switch(R.params[T]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(R){for(let T=0;T<R.length;T++)switch(R.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(R){for(let T=0;T<R.length;T++)switch(R.params[T]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(R){for(let T=0;T<R.length;T++)switch(R.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),R.params[T]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(R,T){const P=this._coreService.decPrivateModes,{activeProtocol:O,activeEncoding:W}=this._coreMouseService,V=this._coreService,{buffers:Q,cols:q}=this._bufferService,{active:Z,alt:M}=Q,U=this._optionsService.rawOptions,j=ae=>ae?1:2,z=R.params[0];return te=z,G=T?z===2?4:z===4?j(V.modes.insertMode):z===12?3:z===20?j(U.convertEol):0:z===1?j(P.applicationCursorKeys):z===3?U.windowOptions.setWinLines?q===80?2:q===132?1:0:0:z===6?j(P.origin):z===7?j(P.wraparound):z===8?3:z===9?j(O==="X10"):z===12?j(U.cursorBlink):z===25?j(!V.isCursorHidden):z===45?j(P.reverseWraparound):z===66?j(P.applicationKeypad):z===67?4:z===1e3?j(O==="VT200"):z===1002?j(O==="DRAG"):z===1003?j(O==="ANY"):z===1004?j(P.sendFocus):z===1005?4:z===1006?j(W==="SGR"):z===1015?4:z===1016?j(W==="SGR_PIXELS"):z===1048?1:z===47||z===1047||z===1049?j(Z===M):z===2004?j(P.bracketedPasteMode):0,V.triggerDataEvent(`${u.C0.ESC}[${T?"":"?"}${te};${G}$y`),!0;var te,G}_updateAttrColor(R,T,P,O,W){return T===2?(R|=50331648,R&=-16777216,R|=m.AttributeData.fromColorRGB([P,O,W])):T===5&&(R&=-50331904,R|=33554432|255&P),R}_extractColor(R,T,P){const O=[0,0,-1,0,0,0];let W=0,V=0;do{if(O[V+W]=R.params[T+V],R.hasSubParams(T+V)){const Q=R.getSubParams(T+V);let q=0;do O[1]===5&&(W=1),O[V+q+1+W]=Q[q];while(++q<Q.length&&q+V+1+W<O.length);break}if(O[1]===5&&V+W>=2||O[1]===2&&V+W>=5)break;O[1]&&(W=1)}while(++V+T<R.length&&V+W<O.length);for(let Q=2;Q<O.length;++Q)O[Q]===-1&&(O[Q]=0);switch(O[0]){case 38:P.fg=this._updateAttrColor(P.fg,O[1],O[3],O[4],O[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,O[1],O[3],O[4],O[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,O[1],O[3],O[4],O[5])}return V}_processUnderline(R,T){T.extended=T.extended.clone(),(!~R||R>5)&&(R=1),T.extended.underlineStyle=R,T.fg|=268435456,R===0&&(T.fg&=-268435457),T.updateExtended()}_processSGR0(R){R.fg=n.DEFAULT_ATTR_DATA.fg,R.bg=n.DEFAULT_ATTR_DATA.bg,R.extended=R.extended.clone(),R.extended.underlineStyle=0,R.extended.underlineColor&=-67108864,R.updateExtended()}charAttributes(R){if(R.length===1&&R.params[0]===0)return this._processSGR0(this._curAttrData),!0;const T=R.length;let P;const O=this._curAttrData;for(let W=0;W<T;W++)P=R.params[W],P>=30&&P<=37?(O.fg&=-50331904,O.fg|=16777216|P-30):P>=40&&P<=47?(O.bg&=-50331904,O.bg|=16777216|P-40):P>=90&&P<=97?(O.fg&=-50331904,O.fg|=16777224|P-90):P>=100&&P<=107?(O.bg&=-50331904,O.bg|=16777224|P-100):P===0?this._processSGR0(O):P===1?O.fg|=134217728:P===3?O.bg|=67108864:P===4?(O.fg|=268435456,this._processUnderline(R.hasSubParams(W)?R.getSubParams(W)[0]:1,O)):P===5?O.fg|=536870912:P===7?O.fg|=67108864:P===8?O.fg|=1073741824:P===9?O.fg|=2147483648:P===2?O.bg|=134217728:P===21?this._processUnderline(2,O):P===22?(O.fg&=-134217729,O.bg&=-134217729):P===23?O.bg&=-67108865:P===24?(O.fg&=-268435457,this._processUnderline(0,O)):P===25?O.fg&=-536870913:P===27?O.fg&=-67108865:P===28?O.fg&=-1073741825:P===29?O.fg&=2147483647:P===39?(O.fg&=-67108864,O.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):P===49?(O.bg&=-67108864,O.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?W+=this._extractColor(R,W,O):P===53?O.bg|=1073741824:P===55?O.bg&=-1073741825:P===59?(O.extended=O.extended.clone(),O.extended.underlineColor=-1,O.updateExtended()):P===100?(O.fg&=-67108864,O.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,O.bg&=-67108864,O.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(R){switch(R.params[0]){case 5:this._coreService.triggerDataEvent(`${u.C0.ESC}[0n`);break;case 6:const T=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[${T};${P}R`)}return!0}deviceStatusPrivate(R){if(R.params[0]===6){const T=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[?${T};${P}R`)}return!0}softReset(R){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(R){const T=R.params[0]||1;switch(T){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=T%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(R){const T=R.params[0]||1;let P;return(R.length<2||(P=R.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>T&&(this._activeBuffer.scrollTop=T-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(R){if(!k(R.params[0],this._optionsService.rawOptions.windowOptions))return!0;const T=R.length>1?R.params[1]:0;switch(R.params[0]){case 14:T!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${u.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:T!==0&&T!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),T!==0&&T!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:T!==0&&T!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),T!==0&&T!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(R){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(R){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(R){return this._windowTitle=R,this._onTitleChange.fire(R),!0}setIconName(R){return this._iconName=R,!0}setOrReportIndexedColor(R){const T=[],P=R.split(";");for(;P.length>1;){const O=P.shift(),W=P.shift();if(/^\d+$/.exec(O)){const V=parseInt(O);if($(V))if(W==="?")T.push({type:0,index:V});else{const Q=(0,y.parseColor)(W);Q&&T.push({type:1,index:V,color:Q})}}}return T.length&&this._onColor.fire(T),!0}setHyperlink(R){const T=R.split(";");return!(T.length<2)&&(T[1]?this._createHyperlink(T[0],T[1]):!T[0]&&this._finishHyperlink())}_createHyperlink(R,T){this._getCurrentLinkId()&&this._finishHyperlink();const P=R.split(":");let O;const W=P.findIndex(V=>V.startsWith("id="));return W!==-1&&(O=P[W].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:O,uri:T}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(R,T){const P=R.split(";");for(let O=0;O<P.length&&!(T>=this._specialColors.length);++O,++T)if(P[O]==="?")this._onColor.fire([{type:0,index:this._specialColors[T]}]);else{const W=(0,y.parseColor)(P[O]);W&&this._onColor.fire([{type:1,index:this._specialColors[T],color:W}])}return!0}setOrReportFgColor(R){return this._setOrReportSpecialColor(R,0)}setOrReportBgColor(R){return this._setOrReportSpecialColor(R,1)}setOrReportCursorColor(R){return this._setOrReportSpecialColor(R,2)}restoreIndexedColor(R){if(!R)return this._onColor.fire([{type:2}]),!0;const T=[],P=R.split(";");for(let O=0;O<P.length;++O)if(/^\d+$/.exec(P[O])){const W=parseInt(P[O]);$(W)&&T.push({type:2,index:W})}return T.length&&this._onColor.fire(T),!0}restoreFgColor(R){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(R){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(R){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(R){return R.length!==2?(this.selectDefaultCharset(),!0):(R[0]==="/"||this._charsetService.setgCharset(S[R[0]],p.CHARSETS[R[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const R=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,R,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(R){return this._charsetService.setgLevel(R),!0}screenAlignmentPattern(){const R=new h.CellData;R.content=4194373,R.fg=this._curAttrData.fg,R.bg=this._curAttrData.bg,this._setCursor(0,0);for(let T=0;T<this._bufferService.rows;++T){const P=this._activeBuffer.ybase+this._activeBuffer.y+T,O=this._activeBuffer.lines.get(P);O&&(O.fill(R),O.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(R,T){const P=this._bufferService.buffer,O=this._optionsService.rawOptions;return(W=>(this._coreService.triggerDataEvent(`${u.C0.ESC}${W}${u.C0.ESC}\\`),!0))(R==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:R==='"p'?'P1$r61;1"p':R==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:R==="m"?"P1$r0m":R===" q"?`P1$r${{block:2,underline:4,bar:6}[O.cursorStyle]-(O.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(R,T){this._dirtyRowTracker.markRangeDirty(R,T)}}s.InputHandler=B;let N=class{constructor(I){this._bufferService=I,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(I){I<this.start?this.start=I:I>this.end&&(this.end=I)}markRangeDirty(I,R){I>R&&(A=I,I=R,R=A),I<this.start&&(this.start=I),R>this.end&&(this.end=R)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function $(I){return 0<=I&&I<256}N=d([v(0,w.IBufferService)],N)},844:(g,s)=>{function a(d){for(const v of d)v.dispose();d.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const v=this._disposables.indexOf(d);v!==-1&&this._disposables.splice(v,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var v;this._isDisposed||d===this._value||((v=this._value)===null||v===void 0||v.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},s.toDisposable=function(d){return{dispose:d}},s.disposeArray=a,s.getDisposeArrayDisposable=function(d){return{dispose:()=>a(d)}}},1505:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(v,u,p){this._data[v]||(this._data[v]={}),this._data[v][u]=p}get(v,u){return this._data[v]?this._data[v][u]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(d,v,u,p,C){this._data.get(d,v)||this._data.set(d,v,new a),this._data.get(d,v).set(u,p,C)}get(d,v,u,p){var C;return(C=this._data.get(d,v))===null||C===void 0?void 0:C.get(u,p)}clear(){this._data.clear()}}},6114:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";const a=s.isNode?"node":navigator.userAgent,d=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;const v=a.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),s.isIpad=d==="iPad",s.isIphone=d==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),s.isLinux=d.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},6106:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let a=0;s.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(a=this._search(this._getKey(d)),this._array.splice(a,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;const v=this._getKey(d);if(v===void 0||(a=this._search(v),a===-1)||this._getKey(this._array[a])!==v)return!1;do if(this._array[a]===d)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===v);return!1}*getKeyIterator(d){if(this._array.length!==0&&(a=this._search(d),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===d))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===d)}forEachByKey(d,v){if(this._array.length!==0&&(a=this._search(d),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===d))do v(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===d)}values(){return[...this._array].values()}_search(d){let v=0,u=this._array.length-1;for(;u>=v;){let p=v+u>>1;const C=this._getKey(this._array[p]);if(C>d)u=p-1;else{if(!(C<d)){for(;p>0&&this._getKey(this._array[p-1])===d;)p--;return p}v=p+1}}return v}}},7226:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const d=a(6114);class v{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let E=0,_=0,n=C.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(E=Date.now(),this._tasks[this._i]()||this._i++,E=Math.max(1,Date.now()-E),_=Math.max(E,_),l=C.timeRemaining(),1.5*_>l)return n-E<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-E))}ms`),void this._start();n=l}this.clear()}}class u extends v{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const E=Date.now()+C;return{timeRemaining:()=>Math.max(0,E-Date.now())}}}s.PriorityTaskQueue=u,s.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:u,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const d=a(643);s.updateWindowsModeWrappedState=function(v){const u=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),p=u==null?void 0:u.get(v.cols-1),C=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);C&&p&&(C.isWrapped=p[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&p[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){const u=new a;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=a;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}constructor(u=0,p=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=p}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=d},9092:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const d=a(6349),v=a(7226),u=a(3734),p=a(8437),C=a(4634),E=a(511),_=a(643),n=a(4863),l=a(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(c,h,m){this._hasScrollback=c,this._optionsService=h,this._bufferService=m,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=l.DEFAULT_CHARSET,this.markers=[],this._nullCell=E.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),this._whitespaceCell=E.CellData.fromCharData([0,_.WHITESPACE_CELL_CHAR,_.WHITESPACE_CELL_WIDTH,_.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new v.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(c){return c?(this._nullCell.fg=c.fg,this._nullCell.bg=c.bg,this._nullCell.extended=c.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell}getWhitespaceCell(c){return c?(this._whitespaceCell.fg=c.fg,this._whitespaceCell.bg=c.bg,this._whitespaceCell.extended=c.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell}getBlankLine(c,h){return new p.BufferLine(this._bufferService.cols,this.getNullCell(c),h)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const c=this.ybase+this.y-this.ydisp;return c>=0&&c<this._rows}_getCorrectBufferLength(c){if(!this._hasScrollback)return c;const h=c+this._optionsService.rawOptions.scrollback;return h>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:h}fillViewportRows(c){if(this.lines.length===0){c===void 0&&(c=p.DEFAULT_ATTR_DATA);let h=this._rows;for(;h--;)this.lines.push(this.getBlankLine(c))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(c,h){const m=this.getNullCell(p.DEFAULT_ATTR_DATA);let w=0;const b=this._getCorrectBufferLength(h);if(b>this.lines.maxLength&&(this.lines.maxLength=b),this.lines.length>0){if(this._cols<c)for(let y=0;y<this.lines.length;y++)w+=+this.lines.get(y).resize(c,m);let x=0;if(this._rows<h)for(let y=this._rows;y<h;y++)this.lines.length<h+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(c,m)):this.ybase>0&&this.lines.length<=this.ybase+this.y+x+1?(this.ybase--,x++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(c,m)));else for(let y=this._rows;y>h;y--)this.lines.length>h+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(b<this.lines.maxLength){const y=this.lines.length-b;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=b}this.x=Math.min(this.x,c-1),this.y=Math.min(this.y,h-1),x&&(this.y+=x),this.savedX=Math.min(this.savedX,c-1),this.scrollTop=0}if(this.scrollBottom=h-1,this._isReflowEnabled&&(this._reflow(c,h),this._cols>c))for(let x=0;x<this.lines.length;x++)w+=+this.lines.get(x).resize(c,m);this._cols=c,this._rows=h,this._memoryCleanupQueue.clear(),w>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let c=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,c=!1);let h=0;for(;this._memoryCleanupPosition<this.lines.length;)if(h+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),h>100)return!0;return c}get _isReflowEnabled(){const c=this._optionsService.rawOptions.windowsPty;return c&&c.buildNumber?this._hasScrollback&&c.backend==="conpty"&&c.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(c,h){this._cols!==c&&(c>this._cols?this._reflowLarger(c,h):this._reflowSmaller(c,h))}_reflowLarger(c,h){const m=(0,C.reflowLargerGetLinesToRemove)(this.lines,this._cols,c,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(m.length>0){const w=(0,C.reflowLargerCreateNewLayout)(this.lines,m);(0,C.reflowLargerApplyNewLayout)(this.lines,w.layout),this._reflowLargerAdjustViewport(c,h,w.countRemoved)}}_reflowLargerAdjustViewport(c,h,m){const w=this.getNullCell(p.DEFAULT_ATTR_DATA);let b=m;for(;b-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<h&&this.lines.push(new p.BufferLine(c,w))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-m,0)}_reflowSmaller(c,h){const m=this.getNullCell(p.DEFAULT_ATTR_DATA),w=[];let b=0;for(let x=this.lines.length-1;x>=0;x--){let y=this.lines.get(x);if(!y||!y.isWrapped&&y.getTrimmedLength()<=c)continue;const S=[y];for(;y.isWrapped&&x>0;)y=this.lines.get(--x),S.unshift(y);const L=this.ybase+this.y;if(L>=x&&L<x+S.length)continue;const k=S[S.length-1].getTrimmedLength(),D=(0,C.reflowSmallerGetNewLineLengths)(S,this._cols,c),A=D.length-S.length;let B;B=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const N=[];for(let O=0;O<A;O++){const W=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);N.push(W)}N.length>0&&(w.push({start:x+S.length+b,newLines:N}),b+=N.length),S.push(...N);let $=D.length-1,I=D[$];I===0&&($--,I=D[$]);let R=S.length-A-1,T=k;for(;R>=0;){const O=Math.min(T,I);if(S[$]===void 0)break;if(S[$].copyCellsFrom(S[R],T-O,I-O,O,!0),I-=O,I===0&&($--,I=D[$]),T-=O,T===0){R--;const W=Math.max(R,0);T=(0,C.getWrappedLineTrimmedLength)(S,W,this._cols)}}for(let O=0;O<S.length;O++)D[O]<c&&S[O].setCell(D[O],m);let P=A-B;for(;P-- >0;)this.ybase===0?this.y<h-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+b)-h&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+h-1)}if(w.length>0){const x=[],y=[];for(let $=0;$<this.lines.length;$++)y.push(this.lines.get($));const S=this.lines.length;let L=S-1,k=0,D=w[k];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+b);let A=0;for(let $=Math.min(this.lines.maxLength-1,S+b-1);$>=0;$--)if(D&&D.start>L+A){for(let I=D.newLines.length-1;I>=0;I--)this.lines.set($--,D.newLines[I]);$++,x.push({index:L+1,amount:D.newLines.length}),A+=D.newLines.length,D=w[++k]}else this.lines.set($,y[L--]);let B=0;for(let $=x.length-1;$>=0;$--)x[$].index+=B,this.lines.onInsertEmitter.fire(x[$]),B+=x[$].amount;const N=Math.max(0,S+b-this.lines.maxLength);N>0&&this.lines.onTrimEmitter.fire(N)}}translateBufferLineToString(c,h,m=0,w){const b=this.lines.get(c);return b?b.translateToString(h,m,w):""}getWrappedRangeForLine(c){let h=c,m=c;for(;h>0&&this.lines.get(h).isWrapped;)h--;for(;m+1<this.lines.length&&this.lines.get(m+1).isWrapped;)m++;return{first:h,last:m}}setupTabStops(c){for(c!=null?this.tabs[c]||(c=this.prevStop(c)):(this.tabs={},c=0);c<this._cols;c+=this._optionsService.rawOptions.tabStopWidth)this.tabs[c]=!0}prevStop(c){for(c==null&&(c=this.x);!this.tabs[--c]&&c>0;);return c>=this._cols?this._cols-1:c<0?0:c}nextStop(c){for(c==null&&(c=this.x);!this.tabs[++c]&&c<this._cols;);return c>=this._cols?this._cols-1:c<0?0:c}clearMarkers(c){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].line===c&&(this.markers[h].dispose(),this.markers.splice(h--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].dispose(),this.markers.splice(c--,1);this._isClearing=!1}addMarker(c){const h=new n.Marker(c);return this.markers.push(h),h.register(this.lines.onTrim(m=>{h.line-=m,h.line<0&&h.dispose()})),h.register(this.lines.onInsert(m=>{h.line>=m.index&&(h.line+=m.amount)})),h.register(this.lines.onDelete(m=>{h.line>=m.index&&h.line<m.index+m.amount&&h.dispose(),h.line>m.index&&(h.line-=m.amount)})),h.register(h.onDispose(()=>this._removeMarker(h))),h}_removeMarker(c){this._isClearing||this.markers.splice(this.markers.indexOf(c),1)}}},8437:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const d=a(3734),v=a(511),u=a(643),p=a(482);s.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let C=0;class E{constructor(n,l,c=!1){this.isWrapped=c,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const h=l||v.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let m=0;m<n;++m)this.setCell(m,h);this.length=n}get(n){const l=this._data[3*n+0],c=2097151&l;return[this._data[3*n+1],2097152&l?this._combined[n]:c?(0,p.stringFromCodePoint)(c):"",l>>22,2097152&l?this._combined[n].charCodeAt(this._combined[n].length-1):c]}set(n,l){this._data[3*n+1]=l[u.CHAR_DATA_ATTR_INDEX],l[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=l[1],this._data[3*n+0]=2097152|n|l[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=l[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|l[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const l=this._data[3*n+0];return 2097152&l?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&l}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const l=this._data[3*n+0];return 2097152&l?this._combined[n]:2097151&l?(0,p.stringFromCodePoint)(2097151&l):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,l){return C=3*n,l.content=this._data[C+0],l.fg=this._data[C+1],l.bg=this._data[C+2],2097152&l.content&&(l.combinedData=this._combined[n]),268435456&l.bg&&(l.extended=this._extendedAttrs[n]),l}setCell(n,l){2097152&l.content&&(this._combined[n]=l.combinedData),268435456&l.bg&&(this._extendedAttrs[n]=l.extended),this._data[3*n+0]=l.content,this._data[3*n+1]=l.fg,this._data[3*n+2]=l.bg}setCellFromCodePoint(n,l,c,h,m,w){268435456&m&&(this._extendedAttrs[n]=w),this._data[3*n+0]=l|c<<22,this._data[3*n+1]=h,this._data[3*n+2]=m}addCodepointToCell(n,l){let c=this._data[3*n+0];2097152&c?this._combined[n]+=(0,p.stringFromCodePoint)(l):(2097151&c?(this._combined[n]=(0,p.stringFromCodePoint)(2097151&c)+(0,p.stringFromCodePoint)(l),c&=-2097152,c|=2097152):c=l|4194304,this._data[3*n+0]=c)}insertCells(n,l,c,h){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs),l<this.length-n){const m=new v.CellData;for(let w=this.length-n-l-1;w>=0;--w)this.setCell(n+l+w,this.loadCell(n+w,m));for(let w=0;w<l;++w)this.setCell(n+w,c)}else for(let m=n;m<this.length;++m)this.setCell(m,c);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs)}deleteCells(n,l,c,h){if(n%=this.length,l<this.length-n){const m=new v.CellData;for(let w=0;w<this.length-n-l;++w)this.setCell(n+w,this.loadCell(n+l+w,m));for(let w=this.length-l;w<this.length;++w)this.setCell(w,c)}else for(let m=n;m<this.length;++m)this.setCell(m,c);n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodePoint(n,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs)}replaceCells(n,l,c,h,m=!1){if(m)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodePoint(n-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs),l<this.length&&this.getWidth(l-1)===2&&!this.isProtected(l)&&this.setCellFromCodePoint(l,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs);n<l&&n<this.length;)this.isProtected(n)||this.setCell(n,c),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs),l<this.length&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs);n<l&&n<this.length;)this.setCell(n++,c)}resize(n,l){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const c=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*c)this._data=new Uint32Array(this._data.buffer,0,c);else{const h=new Uint32Array(c);h.set(this._data),this._data=h}for(let h=this.length;h<n;++h)this.setCell(h,l)}else{this._data=this._data.subarray(0,c);const h=Object.keys(this._combined);for(let w=0;w<h.length;w++){const b=parseInt(h[w],10);b>=n&&delete this._combined[b]}const m=Object.keys(this._extendedAttrs);for(let w=0;w<m.length;w++){const b=parseInt(m[w],10);b>=n&&delete this._extendedAttrs[b]}}return this.length=n,4*c*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,l=!1){if(l)for(let c=0;c<this.length;++c)this.isProtected(c)||this.setCell(c,n);else{this._combined={},this._extendedAttrs={};for(let c=0;c<this.length;++c)this.setCell(c,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const l in n._combined)this._combined[l]=n._combined[l];this._extendedAttrs={};for(const l in n._extendedAttrs)this._extendedAttrs[l]=n._extendedAttrs[l];this.isWrapped=n.isWrapped}clone(){const n=new E(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const l in this._combined)n._combined[l]=this._combined[l];for(const l in this._extendedAttrs)n._extendedAttrs[l]=this._extendedAttrs[l];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,l,c,h,m){const w=n._data;if(m)for(let x=h-1;x>=0;x--){for(let y=0;y<3;y++)this._data[3*(c+x)+y]=w[3*(l+x)+y];268435456&w[3*(l+x)+2]&&(this._extendedAttrs[c+x]=n._extendedAttrs[l+x])}else for(let x=0;x<h;x++){for(let y=0;y<3;y++)this._data[3*(c+x)+y]=w[3*(l+x)+y];268435456&w[3*(l+x)+2]&&(this._extendedAttrs[c+x]=n._extendedAttrs[l+x])}const b=Object.keys(n._combined);for(let x=0;x<b.length;x++){const y=parseInt(b[x],10);y>=l&&(this._combined[y-l+c]=n._combined[y])}}translateToString(n=!1,l=0,c=this.length){n&&(c=Math.min(c,this.getTrimmedLength()));let h="";for(;l<c;){const m=this._data[3*l+0],w=2097151&m;h+=2097152&m?this._combined[l]:w?(0,p.stringFromCodePoint)(w):u.WHITESPACE_CELL_CHAR,l+=m>>22||1}return h}}s.BufferLine=E},4841:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(a,d){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return d*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(g,s)=>{function a(d,v,u){if(v===d.length-1)return d[v].getTrimmedLength();const p=!d[v].hasContent(u-1)&&d[v].getWidth(u-1)===1,C=d[v+1].getWidth(0)===2;return p&&C?u-1:u}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(d,v,u,p,C){const E=[];for(let _=0;_<d.length-1;_++){let n=_,l=d.get(++n);if(!l.isWrapped)continue;const c=[d.get(_)];for(;n<d.length&&l.isWrapped;)c.push(l),l=d.get(++n);if(p>=_&&p<n){_+=c.length-1;continue}let h=0,m=a(c,h,v),w=1,b=0;for(;w<c.length;){const y=a(c,w,v),S=y-b,L=u-m,k=Math.min(S,L);c[h].copyCellsFrom(c[w],b,m,k,!1),m+=k,m===u&&(h++,m=0),b+=k,b===y&&(w++,b=0),m===0&&h!==0&&c[h-1].getWidth(u-1)===2&&(c[h].copyCellsFrom(c[h-1],u-1,m++,1,!1),c[h-1].setCell(u-1,C))}c[h].replaceCells(m,u,C);let x=0;for(let y=c.length-1;y>0&&(y>h||c[y].getTrimmedLength()===0);y--)x++;x>0&&(E.push(_+c.length-x),E.push(x)),_+=c.length-1}return E},s.reflowLargerCreateNewLayout=function(d,v){const u=[];let p=0,C=v[p],E=0;for(let _=0;_<d.length;_++)if(C===_){const n=v[++p];d.onDeleteEmitter.fire({index:_-E,amount:n}),_+=n-1,E+=n,C=v[++p]}else u.push(_);return{layout:u,countRemoved:E}},s.reflowLargerApplyNewLayout=function(d,v){const u=[];for(let p=0;p<v.length;p++)u.push(d.get(v[p]));for(let p=0;p<u.length;p++)d.set(p,u[p]);d.length=v.length},s.reflowSmallerGetNewLineLengths=function(d,v,u){const p=[],C=d.map((l,c)=>a(d,c,v)).reduce((l,c)=>l+c);let E=0,_=0,n=0;for(;n<C;){if(C-n<u){p.push(C-n);break}E+=u;const l=a(d,_,v);E>l&&(E-=l,_++);const c=d[_].getWidth(E-1)===2;c&&E--;const h=c?u-1:u;p.push(h),n+=h}return p},s.getWrappedLineTrimmedLength=a},5295:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const d=a(8460),v=a(844),u=a(9092);class p extends v.Disposable{constructor(E,_){super(),this._optionsService=E,this._bufferService=_,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(E){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(E),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(E,_){this._normal.resize(E,_),this._alt.resize(E,_),this.setupTabStops(E)}setupTabStops(E){this._normal.setupTabStops(E),this._alt.setupTabStops(E)}}s.BufferSet=p},511:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const d=a(482),v=a(643),u=a(3734);class p extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(E){const _=new p;return _.setFromCharData(E),_}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(E){this.fg=E[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let _=!1;if(E[v.CHAR_DATA_CHAR_INDEX].length>2)_=!0;else if(E[v.CHAR_DATA_CHAR_INDEX].length===2){const n=E[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const l=E[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(n-55296)+l-56320+65536|E[v.CHAR_DATA_WIDTH_INDEX]<<22:_=!0}else _=!0}else this.content=E[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|E[v.CHAR_DATA_WIDTH_INDEX]<<22;_&&(this.combinedData=E[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|E[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=p},643:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const d=a(8460),v=a(844);class u{get id(){return this._id}constructor(C){this.line=C,this.isDisposed=!1,this._disposables=[],this._id=u._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,v.disposeArray)(this._disposables),this._disposables.length=0)}register(C){return this._disposables.push(C),C}}s.Marker=u,u._nextId=1},7116:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},s.CHARSETS.A={"#":""},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},s.CHARSETS.C=s.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},s.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},s.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.E=s.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},s.CHARSETS.H=s.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(g,s)=>{var a,d,v;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL=""}(a||(s.C0=a={})),function(u){u.PAD="",u.HOP="",u.BPH="",u.NBH="",u.IND="",u.NEL="",u.SSA="",u.ESA="",u.HTS="",u.HTJ="",u.VTS="",u.PLD="",u.PLU="",u.RI="",u.SS2="",u.SS3="",u.DCS="",u.PU1="",u.PU2="",u.STS="",u.CCH="",u.MW="",u.SPA="",u.EPA="",u.SOS="",u.SGCI="",u.SCI="",u.CSI="",u.ST="",u.OSC="",u.PM="",u.APC=""}(d||(s.C1=d={})),function(u){u.ST=`${a.ESC}\\`}(v||(s.C1_ESCAPED=v={}))},7399:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const d=a(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(u,p,C,E){const _={type:0,cancel:!1,key:void 0},n=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:u.key==="UIKeyInputUpArrow"?_.key=p?d.C0.ESC+"OA":d.C0.ESC+"[A":u.key==="UIKeyInputLeftArrow"?_.key=p?d.C0.ESC+"OD":d.C0.ESC+"[D":u.key==="UIKeyInputRightArrow"?_.key=p?d.C0.ESC+"OC":d.C0.ESC+"[C":u.key==="UIKeyInputDownArrow"&&(_.key=p?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:if(u.altKey){_.key=d.C0.ESC+d.C0.DEL;break}_.key=d.C0.DEL;break;case 9:if(u.shiftKey){_.key=d.C0.ESC+"[Z";break}_.key=d.C0.HT,_.cancel=!0;break;case 13:_.key=u.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,_.cancel=!0;break;case 27:_.key=d.C0.ESC,u.altKey&&(_.key=d.C0.ESC+d.C0.ESC),_.cancel=!0;break;case 37:if(u.metaKey)break;n?(_.key=d.C0.ESC+"[1;"+(n+1)+"D",_.key===d.C0.ESC+"[1;3D"&&(_.key=d.C0.ESC+(C?"b":"[1;5D"))):_.key=p?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(u.metaKey)break;n?(_.key=d.C0.ESC+"[1;"+(n+1)+"C",_.key===d.C0.ESC+"[1;3C"&&(_.key=d.C0.ESC+(C?"f":"[1;5C"))):_.key=p?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(u.metaKey)break;n?(_.key=d.C0.ESC+"[1;"+(n+1)+"A",C||_.key!==d.C0.ESC+"[1;3A"||(_.key=d.C0.ESC+"[1;5A")):_.key=p?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(u.metaKey)break;n?(_.key=d.C0.ESC+"[1;"+(n+1)+"B",C||_.key!==d.C0.ESC+"[1;3B"||(_.key=d.C0.ESC+"[1;5B")):_.key=p?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(_.key=d.C0.ESC+"[2~");break;case 46:_.key=n?d.C0.ESC+"[3;"+(n+1)+"~":d.C0.ESC+"[3~";break;case 36:_.key=n?d.C0.ESC+"[1;"+(n+1)+"H":p?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:_.key=n?d.C0.ESC+"[1;"+(n+1)+"F":p?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:u.shiftKey?_.type=2:u.ctrlKey?_.key=d.C0.ESC+"[5;"+(n+1)+"~":_.key=d.C0.ESC+"[5~";break;case 34:u.shiftKey?_.type=3:u.ctrlKey?_.key=d.C0.ESC+"[6;"+(n+1)+"~":_.key=d.C0.ESC+"[6~";break;case 112:_.key=n?d.C0.ESC+"[1;"+(n+1)+"P":d.C0.ESC+"OP";break;case 113:_.key=n?d.C0.ESC+"[1;"+(n+1)+"Q":d.C0.ESC+"OQ";break;case 114:_.key=n?d.C0.ESC+"[1;"+(n+1)+"R":d.C0.ESC+"OR";break;case 115:_.key=n?d.C0.ESC+"[1;"+(n+1)+"S":d.C0.ESC+"OS";break;case 116:_.key=n?d.C0.ESC+"[15;"+(n+1)+"~":d.C0.ESC+"[15~";break;case 117:_.key=n?d.C0.ESC+"[17;"+(n+1)+"~":d.C0.ESC+"[17~";break;case 118:_.key=n?d.C0.ESC+"[18;"+(n+1)+"~":d.C0.ESC+"[18~";break;case 119:_.key=n?d.C0.ESC+"[19;"+(n+1)+"~":d.C0.ESC+"[19~";break;case 120:_.key=n?d.C0.ESC+"[20;"+(n+1)+"~":d.C0.ESC+"[20~";break;case 121:_.key=n?d.C0.ESC+"[21;"+(n+1)+"~":d.C0.ESC+"[21~";break;case 122:_.key=n?d.C0.ESC+"[23;"+(n+1)+"~":d.C0.ESC+"[23~";break;case 123:_.key=n?d.C0.ESC+"[24;"+(n+1)+"~":d.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(C&&!E||!u.altKey||u.metaKey)!C||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&u.key.length===1?_.key=u.key:u.key&&u.ctrlKey&&(u.key==="_"&&(_.key=d.C0.US),u.key==="@"&&(_.key=d.C0.NUL)):u.keyCode===65&&(_.type=1);else{const l=v[u.keyCode],c=l==null?void 0:l[u.shiftKey?1:0];if(c)_.key=d.C0.ESC+c;else if(u.keyCode>=65&&u.keyCode<=90){const h=u.ctrlKey?u.keyCode-64:u.keyCode+32;let m=String.fromCharCode(h);u.shiftKey&&(m=m.toUpperCase()),_.key=d.C0.ESC+m}else if(u.keyCode===32)_.key=d.C0.ESC+(u.ctrlKey?d.C0.NUL:" ");else if(u.key==="Dead"&&u.code.startsWith("Key")){let h=u.code.slice(3,4);u.shiftKey||(h=h.toLowerCase()),_.key=d.C0.ESC+h,_.cancel=!0}}else u.keyCode>=65&&u.keyCode<=90?_.key=String.fromCharCode(u.keyCode-64):u.keyCode===32?_.key=d.C0.NUL:u.keyCode>=51&&u.keyCode<=55?_.key=String.fromCharCode(u.keyCode-51+27):u.keyCode===56?_.key=d.C0.DEL:u.keyCode===219?_.key=d.C0.ESC:u.keyCode===220?_.key=d.C0.FS:u.keyCode===221&&(_.key=d.C0.GS)}return _}},482:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,d=0,v=a.length){let u="";for(let p=d;p<v;++p){let C=a[p];C>65535?(C-=65536,u+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):u+=String.fromCharCode(C)}return u},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,d){const v=a.length;if(!v)return 0;let u=0,p=0;if(this._interim){const C=a.charCodeAt(p++);56320<=C&&C<=57343?d[u++]=1024*(this._interim-55296)+C-56320+65536:(d[u++]=this._interim,d[u++]=C),this._interim=0}for(let C=p;C<v;++C){const E=a.charCodeAt(C);if(55296<=E&&E<=56319){if(++C>=v)return this._interim=E,u;const _=a.charCodeAt(C);56320<=_&&_<=57343?d[u++]=1024*(E-55296)+_-56320+65536:(d[u++]=E,d[u++]=_)}else E!==65279&&(d[u++]=E)}return u}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,d){const v=a.length;if(!v)return 0;let u,p,C,E,_=0,n=0,l=0;if(this.interim[0]){let m=!1,w=this.interim[0];w&=(224&w)==192?31:(240&w)==224?15:7;let b,x=0;for(;(b=63&this.interim[++x])&&x<4;)w<<=6,w|=b;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,S=y-x;for(;l<S;){if(l>=v)return 0;if(b=a[l++],(192&b)!=128){l--,m=!0;break}this.interim[x++]=b,w<<=6,w|=63&b}m||(y===2?w<128?l--:d[_++]=w:y===3?w<2048||w>=55296&&w<=57343||w===65279||(d[_++]=w):w<65536||w>1114111||(d[_++]=w)),this.interim.fill(0)}const c=v-4;let h=l;for(;h<v;){for(;!(!(h<c)||128&(u=a[h])||128&(p=a[h+1])||128&(C=a[h+2])||128&(E=a[h+3]));)d[_++]=u,d[_++]=p,d[_++]=C,d[_++]=E,h+=4;if(u=a[h++],u<128)d[_++]=u;else if((224&u)==192){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(n=(31&u)<<6|63&p,n<128){h--;continue}d[_++]=n}else if((240&u)==224){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,_;if(C=a[h++],(192&C)!=128){h--;continue}if(n=(15&u)<<12|(63&p)<<6|63&C,n<2048||n>=55296&&n<=57343||n===65279)continue;d[_++]=n}else if((248&u)==240){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,_;if(C=a[h++],(192&C)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,this.interim[2]=C,_;if(E=a[h++],(192&E)!=128){h--;continue}if(n=(7&u)<<18|(63&p)<<12|(63&C)<<6|63&E,n<65536||n>1114111)continue;d[_++]=n}}return _}}},225:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let v;s.UnicodeV6=class{constructor(){if(this.version="6",!v){v=new Uint8Array(65536),v.fill(1),v[0]=0,v.fill(0,1,32),v.fill(0,127,160),v.fill(2,4352,4448),v[9001]=2,v[9002]=2,v.fill(2,11904,42192),v[12351]=1,v.fill(2,44032,55204),v.fill(2,63744,64256),v.fill(2,65040,65050),v.fill(2,65072,65136),v.fill(2,65280,65377),v.fill(2,65504,65511);for(let u=0;u<a.length;++u)v.fill(0,a[u][0],a[u][1]+1)}}wcwidth(u){return u<32?0:u<127?1:u<65536?v[u]:function(p,C){let E,_=0,n=C.length-1;if(p<C[0][0]||p>C[n][1])return!1;for(;n>=_;)if(E=_+n>>1,p>C[E][1])_=E+1;else{if(!(p<C[E][0]))return!0;n=E-1}return!1}(u,d)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1}}},5981:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const d=a(8460),v=a(844);class u extends v.Disposable{constructor(C){super(),this._action=C,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(C,E){if(E!==void 0&&this._syncCalls>E)return void(this._syncCalls=0);if(this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let _;for(this._isSyncWriting=!0;_=this._writeBuffer.shift();){this._action(_);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(C,E){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(E),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(E)}_innerWrite(C=0,E=!0){const _=C||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],l=this._action(n,E);if(l){const h=m=>Date.now()-_>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(_,m);return void l.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(h)}const c=this._callbacks[this._bufferOffset];if(c&&c(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-_>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=u},5941:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function v(u,p){const C=u.toString(16),E=C.length<2?"0"+C:C;switch(p){case 4:return C[0];case 8:return E;case 12:return(E+E).slice(0,3);default:return E+E}}s.parseColor=function(u){if(!u)return;let p=u.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);const C=a.exec(p);if(C){const E=C[1]?15:C[4]?255:C[7]?4095:65535;return[Math.round(parseInt(C[1]||C[4]||C[7]||C[10],16)/E*255),Math.round(parseInt(C[2]||C[5]||C[8]||C[11],16)/E*255),Math.round(parseInt(C[3]||C[6]||C[9]||C[12],16)/E*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),d.exec(p)&&[3,6,9,12].includes(p.length))){const C=p.length/3,E=[0,0,0];for(let _=0;_<3;++_){const n=parseInt(p.slice(C*_,C*_+C),16);E[_]=C===1?n<<4:C===2?n:C===3?n>>4:n>>8}return E}},s.toRgbString=function(u,p=16){const[C,E,_]=u;return`rgb:${v(C,p)}/${v(E,p)}/${v(_,p)}`}},5770:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const d=a(482),v=a(8742),u=a(5770),p=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(E,_){this._handlers[E]===void 0&&(this._handlers[E]=[]);const n=this._handlers[E];return n.push(_),{dispose:()=>{const l=n.indexOf(_);l!==-1&&n.splice(l,1)}}}clearHandler(E){this._handlers[E]&&delete this._handlers[E]}setHandlerFallback(E){this._handlerFb=E}reset(){if(this._active.length)for(let E=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;E>=0;--E)this._active[E].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(E,_){if(this.reset(),this._ident=E,this._active=this._handlers[E]||p,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(_);else this._handlerFb(this._ident,"HOOK",_)}put(E,_,n){if(this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].put(E,_,n);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(E,_,n))}unhook(E,_=!0){if(this._active.length){let n=!1,l=this._active.length-1,c=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,n=_,c=this._stack.fallThrough,this._stack.paused=!1),!c&&n===!1){for(;l>=0&&(n=this._active[l].unhook(E),n!==!0);l--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,n;l--}for(;l>=0;l--)if(n=this._active[l].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",E);this._active=p,this._ident=0}};const C=new v.Params;C.addParam(0),s.DcsHandler=class{constructor(E){this._handler=E,this._data="",this._params=C,this._hitLimit=!1}hook(E){this._params=E.length>1||E.params[0]?E.clone():C,this._data="",this._hitLimit=!1}put(E,_,n){this._hitLimit||(this._data+=(0,d.utf32ToString)(E,_,n),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(E){let _=!1;if(this._hitLimit)_=!1;else if(E&&(_=this._handler(this._data,this._params),_ instanceof Promise))return _.then(n=>(this._params=C,this._data="",this._hitLimit=!1,n));return this._params=C,this._data="",this._hitLimit=!1,_}}},2015:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const d=a(844),v=a(8742),u=a(6242),p=a(6351);class C{constructor(l){this.table=new Uint8Array(l)}setDefault(l,c){this.table.fill(l<<4|c)}add(l,c,h,m){this.table[c<<8|l]=h<<4|m}addMany(l,c,h,m){for(let w=0;w<l.length;w++)this.table[c<<8|l[w]]=h<<4|m}}s.TransitionTable=C;const E=160;s.VT500_TRANSITION_TABLE=function(){const n=new C(4095),l=Array.apply(null,Array(256)).map((x,y)=>y),c=(x,y)=>l.slice(x,y),h=c(32,127),m=c(0,24);m.push(25),m.push.apply(m,c(28,32));const w=c(0,14);let b;for(b in n.setDefault(1,0),n.addMany(h,0,2,0),w)n.addMany([24,26,153,154],b,3,0),n.addMany(c(128,144),b,3,0),n.addMany(c(144,152),b,3,0),n.add(156,b,0,0),n.add(27,b,11,1),n.add(157,b,4,8),n.addMany([152,158,159],b,0,7),n.add(155,b,11,3),n.add(144,b,11,9);return n.addMany(m,0,3,0),n.addMany(m,1,3,1),n.add(127,1,0,1),n.addMany(m,8,0,8),n.addMany(m,3,3,3),n.add(127,3,0,3),n.addMany(m,4,3,4),n.add(127,4,0,4),n.addMany(m,6,3,6),n.addMany(m,5,3,5),n.add(127,5,0,5),n.addMany(m,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(h,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(c(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(h,7,0,7),n.addMany(m,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(c(64,127),3,7,0),n.addMany(c(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(c(48,60),4,8,4),n.addMany(c(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(c(32,64),6,0,6),n.add(127,6,0,6),n.addMany(c(64,127),6,0,0),n.addMany(c(32,48),3,9,5),n.addMany(c(32,48),5,9,5),n.addMany(c(48,64),5,0,6),n.addMany(c(64,127),5,7,0),n.addMany(c(32,48),4,9,5),n.addMany(c(32,48),1,9,2),n.addMany(c(32,48),2,9,2),n.addMany(c(48,127),2,10,0),n.addMany(c(48,80),1,10,0),n.addMany(c(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(c(96,127),1,10,0),n.add(80,1,11,9),n.addMany(m,9,0,9),n.add(127,9,0,9),n.addMany(c(28,32),9,0,9),n.addMany(c(32,48),9,9,12),n.addMany(c(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(m,11,0,11),n.addMany(c(32,128),11,0,11),n.addMany(c(28,32),11,0,11),n.addMany(m,10,0,10),n.add(127,10,0,10),n.addMany(c(28,32),10,0,10),n.addMany(c(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(c(32,48),10,9,12),n.addMany(m,12,0,12),n.add(127,12,0,12),n.addMany(c(28,32),12,0,12),n.addMany(c(32,48),12,9,12),n.addMany(c(48,64),12,0,11),n.addMany(c(64,127),12,12,13),n.addMany(c(64,127),10,12,13),n.addMany(c(64,127),9,12,13),n.addMany(m,13,13,13),n.addMany(h,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(E,0,2,0),n.add(E,8,5,8),n.add(E,6,0,6),n.add(E,11,0,11),n.add(E,13,13,13),n}();class _ extends d.Disposable{constructor(l=s.VT500_TRANSITION_TABLE){super(),this._transitions=l,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new v.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(c,h,m)=>{},this._executeHandlerFb=c=>{},this._csiHandlerFb=(c,h)=>{},this._escHandlerFb=c=>{},this._errorHandlerFb=c=>c,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new u.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(l,c=[64,126]){let h=0;if(l.prefix){if(l.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=l.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(l.intermediates){if(l.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let w=0;w<l.intermediates.length;++w){const b=l.intermediates.charCodeAt(w);if(32>b||b>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=b}}if(l.final.length!==1)throw new Error("final must be a single byte");const m=l.final.charCodeAt(0);if(c[0]>m||m>c[1])throw new Error(`final must be in range ${c[0]} .. ${c[1]}`);return h<<=8,h|=m,h}identToString(l){const c=[];for(;l;)c.push(String.fromCharCode(255&l)),l>>=8;return c.reverse().join("")}setPrintHandler(l){this._printHandler=l}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(l,c){const h=this._identifier(l,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);const m=this._escHandlers[h];return m.push(c),{dispose:()=>{const w=m.indexOf(c);w!==-1&&m.splice(w,1)}}}clearEscHandler(l){this._escHandlers[this._identifier(l,[48,126])]&&delete this._escHandlers[this._identifier(l,[48,126])]}setEscHandlerFallback(l){this._escHandlerFb=l}setExecuteHandler(l,c){this._executeHandlers[l.charCodeAt(0)]=c}clearExecuteHandler(l){this._executeHandlers[l.charCodeAt(0)]&&delete this._executeHandlers[l.charCodeAt(0)]}setExecuteHandlerFallback(l){this._executeHandlerFb=l}registerCsiHandler(l,c){const h=this._identifier(l);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);const m=this._csiHandlers[h];return m.push(c),{dispose:()=>{const w=m.indexOf(c);w!==-1&&m.splice(w,1)}}}clearCsiHandler(l){this._csiHandlers[this._identifier(l)]&&delete this._csiHandlers[this._identifier(l)]}setCsiHandlerFallback(l){this._csiHandlerFb=l}registerDcsHandler(l,c){return this._dcsParser.registerHandler(this._identifier(l),c)}clearDcsHandler(l){this._dcsParser.clearHandler(this._identifier(l))}setDcsHandlerFallback(l){this._dcsParser.setHandlerFallback(l)}registerOscHandler(l,c){return this._oscParser.registerHandler(l,c)}clearOscHandler(l){this._oscParser.clearHandler(l)}setOscHandlerFallback(l){this._oscParser.setHandlerFallback(l)}setErrorHandler(l){this._errorHandler=l}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(l,c,h,m,w){this._parseStack.state=l,this._parseStack.handlers=c,this._parseStack.handlerPos=h,this._parseStack.transition=m,this._parseStack.chunkPos=w}parse(l,c,h){let m,w=0,b=0,x=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,x=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const y=this._parseStack.handlers;let S=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&S>-1){for(;S>=0&&(m=y[S](this._params),m!==!0);S--)if(m instanceof Promise)return this._parseStack.handlerPos=S,m}this._parseStack.handlers=[];break;case 4:if(h===!1&&S>-1){for(;S>=0&&(m=y[S](),m!==!0);S--)if(m instanceof Promise)return this._parseStack.handlerPos=S,m}this._parseStack.handlers=[];break;case 6:if(w=l[this._parseStack.chunkPos],m=this._dcsParser.unhook(w!==24&&w!==26,h),m)return m;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(w=l[this._parseStack.chunkPos],m=this._oscParser.end(w!==24&&w!==26,h),m)return m;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,x=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let y=x;y<c;++y){switch(w=l[y],b=this._transitions.table[this.currentState<<8|(w<160?w:E)],b>>4){case 2:for(let A=y+1;;++A){if(A>=c||(w=l[A])<32||w>126&&w<E){this._printHandler(l,y,A),y=A-1;break}if(++A>=c||(w=l[A])<32||w>126&&w<E){this._printHandler(l,y,A),y=A-1;break}if(++A>=c||(w=l[A])<32||w>126&&w<E){this._printHandler(l,y,A),y=A-1;break}if(++A>=c||(w=l[A])<32||w>126&&w<E){this._printHandler(l,y,A),y=A-1;break}}break;case 3:this._executeHandlers[w]?this._executeHandlers[w]():this._executeHandlerFb(w),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:y,code:w,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const S=this._csiHandlers[this._collect<<8|w];let L=S?S.length-1:-1;for(;L>=0&&(m=S[L](this._params),m!==!0);L--)if(m instanceof Promise)return this._preserveStack(3,S,L,b,y),m;L<0&&this._csiHandlerFb(this._collect<<8|w,this._params),this.precedingCodepoint=0;break;case 8:do switch(w){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(w-48)}while(++y<c&&(w=l[y])>47&&w<60);y--;break;case 9:this._collect<<=8,this._collect|=w;break;case 10:const k=this._escHandlers[this._collect<<8|w];let D=k?k.length-1:-1;for(;D>=0&&(m=k[D](),m!==!0);D--)if(m instanceof Promise)return this._preserveStack(4,k,D,b,y),m;D<0&&this._escHandlerFb(this._collect<<8|w),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|w,this._params);break;case 13:for(let A=y+1;;++A)if(A>=c||(w=l[A])===24||w===26||w===27||w>127&&w<E){this._dcsParser.put(l,y,A),y=A-1;break}break;case 14:if(m=this._dcsParser.unhook(w!==24&&w!==26),m)return this._preserveStack(6,[],0,b,y),m;w===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let A=y+1;;A++)if(A>=c||(w=l[A])<32||w>127&&w<E){this._oscParser.put(l,y,A),y=A-1;break}break;case 6:if(m=this._oscParser.end(w!==24&&w!==26),m)return this._preserveStack(5,[],0,b,y),m;w===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&b}}}s.EscapeSequenceParser=_},6242:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const d=a(5770),v=a(482),u=[];s.OscParser=class{constructor(){this._state=0,this._active=u,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,C){this._handlers[p]===void 0&&(this._handlers[p]=[]);const E=this._handlers[p];return E.push(C),{dispose:()=>{const _=E.indexOf(C);_!==-1&&E.splice(_,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=u,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||u,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,C,E){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(p,C,E);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(p,C,E))}start(){this.reset(),this._state=1}put(p,C,E){if(this._state!==3){if(this._state===1)for(;C<E;){const _=p[C++];if(_===59){this._state=2,this._start();break}if(_<48||57<_)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+_-48}this._state===2&&E-C>0&&this._put(p,C,E)}}end(p,C=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let E=!1,_=this._active.length-1,n=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,E=C,n=this._stack.fallThrough,this._stack.paused=!1),!n&&E===!1){for(;_>=0&&(E=this._active[_].end(p),E!==!0);_--)if(E instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,E;_--}for(;_>=0;_--)if(E=this._active[_].end(!1),E instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,E}else this._handlerFb(this._id,"END",p);this._active=u,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,C,E){this._hitLimit||(this._data+=(0,v.utf32ToString)(p,C,E),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let C=!1;if(this._hitLimit)C=!1;else if(p&&(C=this._handler(this._data),C instanceof Promise))return C.then(E=>(this._data="",this._hitLimit=!1,E));return this._data="",this._hitLimit=!1,C}}},8742:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const a=2147483647;class d{static fromArray(u){const p=new d;if(!u.length)return p;for(let C=Array.isArray(u[0])?1:0;C<u.length;++C){const E=u[C];if(Array.isArray(E))for(let _=0;_<E.length;++_)p.addSubParam(E[_]);else p.addParam(E)}return p}constructor(u=32,p=32){if(this.maxLength=u,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const u=new d(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u}toArray(){const u=[];for(let p=0;p<this.length;++p){u.push(this.params[p]);const C=this._subParamsIdx[p]>>8,E=255&this._subParamsIdx[p];E-C>0&&u.push(Array.prototype.slice.call(this._subParams,C,E))}return u}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>a?a:u}}addSubParam(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>a?a:u,this._subParamsIdx[this.length-1]++}}hasSubParams(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0}getSubParams(u){const p=this._subParamsIdx[u]>>8,C=255&this._subParamsIdx[u];return C-p>0?this._subParams.subarray(p,C):null}getSubParamsAll(){const u={};for(let p=0;p<this.length;++p){const C=this._subParamsIdx[p]>>8,E=255&this._subParamsIdx[p];E-C>0&&(u[p]=this._subParams.slice(C,E))}return u}addDigit(u){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const C=this._digitIsSub?this._subParams:this.params,E=C[p-1];C[p-1]=~E?Math.min(10*E+u,a):u}}s.Params=d},5741:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,d){const v={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(v),d.dispose=()=>this._wrappedAddonDispose(v),d.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let d=-1;for(let v=0;v<this._addons.length;v++)if(this._addons[v]===a){d=v;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(d,1)}}},8771:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const d=a(3785),v=a(511);s.BufferApiView=class{constructor(u,p){this._buffer=u,this.type=p}init(u){return this._buffer=u,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(u){const p=this._buffer.lines.get(u);if(p)return new d.BufferLineApiView(p)}getNullCell(){return new v.CellData}}},3785:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const d=a(511);s.BufferLineApiView=class{constructor(v){this._line=v}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(v,u){if(!(v<0||v>=this._line.length))return u?(this._line.loadCell(v,u),u):this._line.loadCell(v,new d.CellData)}translateToString(v,u,p){return this._line.translateToString(v,u,p)}}},8285:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const d=a(8771),v=a(8460),u=a(844);class p extends u.Disposable{constructor(E){super(),this._core=E,this._onBufferChange=this.register(new v.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=p},7975:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,d){return this._core.registerCsiHandler(a,v=>d(v.toArray()))}addCsiHandler(a,d){return this.registerCsiHandler(a,d)}registerDcsHandler(a,d){return this._core.registerDcsHandler(a,(v,u)=>d(v,u.toArray()))}addDcsHandler(a,d){return this.registerDcsHandler(a,d)}registerEscHandler(a,d){return this._core.registerEscHandler(a,d)}addEscHandler(a,d){return this.registerEscHandler(a,d)}registerOscHandler(a,d){return this._core.registerOscHandler(a,d)}addOscHandler(a,d){return this.registerOscHandler(a,d)}}},7090:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(g,s,a){var d=this&&this.__decorate||function(n,l,c,h){var m,w=arguments.length,b=w<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(n,l,c,h);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(b=(w<3?m(b):w>3?m(l,c,b):m(l,c))||b);return w>3&&b&&Object.defineProperty(l,c,b),b},v=this&&this.__param||function(n,l){return function(c,h){l(c,h,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const u=a(8460),p=a(844),C=a(5295),E=a(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let _=s.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new C.BufferSet(n,this))}resize(n,l){this.cols=n,this.rows=l,this.buffers.resize(n,l),this._onResize.fire({cols:n,rows:l})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,l=!1){const c=this.buffer;let h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===n.fg&&h.getBg(0)===n.bg||(h=c.getBlankLine(n,l),this._cachedBlankLine=h),h.isWrapped=l;const m=c.ybase+c.scrollTop,w=c.ybase+c.scrollBottom;if(c.scrollTop===0){const b=c.lines.isFull;w===c.lines.length-1?b?c.lines.recycle().copyFrom(h):c.lines.push(h.clone()):c.lines.splice(w+1,0,h.clone()),b?this.isUserScrolling&&(c.ydisp=Math.max(c.ydisp-1,0)):(c.ybase++,this.isUserScrolling||c.ydisp++)}else{const b=w-m+1;c.lines.shiftElements(m+1,b-1,-1),c.lines.set(w,h.clone())}this.isUserScrolling||(c.ydisp=c.ybase),this._onScroll.fire(c.ydisp)}scrollLines(n,l,c){const h=this.buffer;if(n<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else n+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);const m=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+n,h.ybase),0),m!==h.ydisp&&(l||this._onScroll.fire(h.ydisp))}};s.BufferService=_=d([v(0,E.IOptionsService)],_)},7994:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,d){this._charsets[a]=d,this.glevel===a&&(this.charset=d)}}},1753:function(g,s,a){var d=this&&this.__decorate||function(h,m,w,b){var x,y=arguments.length,S=y<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,w):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(h,m,w,b);else for(var L=h.length-1;L>=0;L--)(x=h[L])&&(S=(y<3?x(S):y>3?x(m,w,S):x(m,w))||S);return y>3&&S&&Object.defineProperty(m,w,S),S},v=this&&this.__param||function(h,m){return function(w,b){m(w,b,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const u=a(2585),p=a(8460),C=a(844),E={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function _(h,m){let w=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(w|=64,w|=h.action):(w|=3&h.button,4&h.button&&(w|=64),8&h.button&&(w|=128),h.action===32?w|=32:h.action!==0||m||(w|=3)),w}const n=String.fromCharCode,l={DEFAULT:h=>{const m=[_(h,!1)+32,h.col+32,h.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${n(m[0])}${n(m[1])}${n(m[2])}`},SGR:h=>{const m=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${_(h,!0)};${h.col};${h.row}${m}`},SGR_PIXELS:h=>{const m=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${_(h,!0)};${h.x};${h.y}${m}`}};let c=s.CoreMouseService=class extends C.Disposable{constructor(h,m){super(),this._bufferService=h,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const w of Object.keys(E))this.addProtocol(w,E[w]);for(const w of Object.keys(l))this.addEncoding(w,l[w]);this.reset()}addProtocol(h,m){this._protocols[h]=m}addEncoding(h,m){this._encodings[h]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;const m=this._encodings[this._activeEncoding](h);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,m,w){if(w){if(h.x!==m.x||h.y!==m.y)return!1}else if(h.col!==m.col||h.row!==m.row)return!1;return h.button===m.button&&h.action===m.action&&h.ctrl===m.ctrl&&h.alt===m.alt&&h.shift===m.shift}};s.CoreMouseService=c=d([v(0,u.IBufferService),v(1,u.ICoreService)],c)},6975:function(g,s,a){var d=this&&this.__decorate||function(c,h,m,w){var b,x=arguments.length,y=x<3?h:w===null?w=Object.getOwnPropertyDescriptor(h,m):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(c,h,m,w);else for(var S=c.length-1;S>=0;S--)(b=c[S])&&(y=(x<3?b(y):x>3?b(h,m,y):b(h,m))||y);return x>3&&y&&Object.defineProperty(h,m,y),y},v=this&&this.__param||function(c,h){return function(m,w){h(m,w,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const u=a(1439),p=a(8460),C=a(844),E=a(2585),_=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let l=s.CoreService=class extends C.Disposable{constructor(c,h,m){super(),this._bufferService=c,this._logService=h,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,u.clone)(_),this.decPrivateModes=(0,u.clone)(n)}reset(){this.modes=(0,u.clone)(_),this.decPrivateModes=(0,u.clone)(n)}triggerDataEvent(c,h=!1){if(this._optionsService.rawOptions.disableStdin)return;const m=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${c}"`,()=>c.split("").map(w=>w.charCodeAt(0))),this._onData.fire(c)}triggerBinaryEvent(c){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${c}"`,()=>c.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(c))}};s.CoreService=l=d([v(0,E.IBufferService),v(1,E.ILogService),v(2,E.IOptionsService)],l)},9074:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const d=a(8055),v=a(8460),u=a(844),p=a(6106);let C=0,E=0;class _ extends u.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(c=>c==null?void 0:c.marker.line),this._onDecorationRegistered=this.register(new v.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new v.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,u.toDisposable)(()=>this.reset()))}registerDecoration(c){if(c.marker.isDisposed)return;const h=new n(c);if(h){const m=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),m.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(const c of this._decorations.values())c.dispose();this._decorations.clear()}*getDecorationsAtCell(c,h,m){var w,b,x;let y=0,S=0;for(const L of this._decorations.getKeyIterator(h))y=(w=L.options.x)!==null&&w!==void 0?w:0,S=y+((b=L.options.width)!==null&&b!==void 0?b:1),c>=y&&c<S&&(!m||((x=L.options.layer)!==null&&x!==void 0?x:"bottom")===m)&&(yield L)}forEachDecorationAtCell(c,h,m,w){this._decorations.forEachByKey(h,b=>{var x,y,S;C=(x=b.options.x)!==null&&x!==void 0?x:0,E=C+((y=b.options.width)!==null&&y!==void 0?y:1),c>=C&&c<E&&(!m||((S=b.options.layer)!==null&&S!==void 0?S:"bottom")===m)&&w(b)})}}s.DecorationService=_;class n extends u.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(c){super(),this.options=c,this.onRenderEmitter=this.register(new v.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=c.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const d=a(2585),v=a(8343);class u{constructor(...C){this._entries=new Map;for(const[E,_]of C)this.set(E,_)}set(C,E){const _=this._entries.get(C);return this._entries.set(C,E),_}forEach(C){for(const[E,_]of this._entries.entries())C(E,_)}has(C){return this._entries.has(C)}get(C){return this._entries.get(C)}}s.ServiceCollection=u,s.InstantiationService=class{constructor(){this._services=new u,this._services.set(d.IInstantiationService,this)}setService(p,C){this._services.set(p,C)}getService(p){return this._services.get(p)}createInstance(p,...C){const E=(0,v.getServiceDependencies)(p).sort((l,c)=>l.index-c.index),_=[];for(const l of E){const c=this._services.get(l.id);if(!c)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${l.id}.`);_.push(c)}const n=E.length>0?E[0].index:C.length;if(C.length!==n)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${n+1} conflicts with ${C.length} static arguments`);return new p(...C,..._)}}},7866:function(g,s,a){var d=this&&this.__decorate||function(n,l,c,h){var m,w=arguments.length,b=w<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(n,l,c,h);else for(var x=n.length-1;x>=0;x--)(m=n[x])&&(b=(w<3?m(b):w>3?m(l,c,b):m(l,c))||b);return w>3&&b&&Object.defineProperty(l,c,b),b},v=this&&this.__param||function(n,l){return function(c,h){l(c,h,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const u=a(844),p=a(2585),C={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let E,_=s.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),E=this}_updateLogLevel(){this._logLevel=C[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let l=0;l<n.length;l++)typeof n[l]=="function"&&(n[l]=n[l]())}_log(n,l,c){this._evalLazyOptionalParams(c),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+l,...c)}trace(n,...l){var c,h;this._logLevel<=p.LogLevelEnum.TRACE&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.trace.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,n,l)}debug(n,...l){var c,h;this._logLevel<=p.LogLevelEnum.DEBUG&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.debug.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,n,l)}info(n,...l){var c,h;this._logLevel<=p.LogLevelEnum.INFO&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.info.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.info,n,l)}warn(n,...l){var c,h;this._logLevel<=p.LogLevelEnum.WARN&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.warn.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.warn,n,l)}error(n,...l){var c,h;this._logLevel<=p.LogLevelEnum.ERROR&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.error.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.error,n,l)}};s.LogService=_=d([v(0,p.IOptionsService)],_),s.setTraceLogger=function(n){E=n},s.traceCall=function(n,l,c){if(typeof c.value!="function")throw new Error("not supported");const h=c.value;c.value=function(...m){if(E.logLevel!==p.LogLevelEnum.TRACE)return h.apply(this,m);E.trace(`GlyphRenderer#${h.name}(${m.map(b=>JSON.stringify(b)).join(", ")})`);const w=h.apply(this,m);return E.trace(`GlyphRenderer#${h.name} return`,w),w}}},7302:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const d=a(8460),v=a(844),u=a(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const p=["normal","bold","100","200","300","400","500","600","700","800","900"];class C extends v.Disposable{constructor(_){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n=Object.assign({},s.DEFAULT_OPTIONS);for(const l in _)if(l in n)try{const c=_[l];n[l]=this._sanitizeAndValidateOption(l,c)}catch(c){console.error(c)}this.rawOptions=n,this.options=Object.assign({},n),this._setupOptions()}onSpecificOptionChange(_,n){return this.onOptionChange(l=>{l===_&&n(this.rawOptions[_])})}onMultipleOptionChange(_,n){return this.onOptionChange(l=>{_.indexOf(l)!==-1&&n()})}_setupOptions(){const _=l=>{if(!(l in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);return this.rawOptions[l]},n=(l,c)=>{if(!(l in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);c=this._sanitizeAndValidateOption(l,c),this.rawOptions[l]!==c&&(this.rawOptions[l]=c,this._onOptionChange.fire(l))};for(const l in this.rawOptions){const c={get:_.bind(this,l),set:n.bind(this,l)};Object.defineProperty(this.options,l,c)}}_sanitizeAndValidateOption(_,n){switch(_){case"cursorStyle":if(n||(n=s.DEFAULT_OPTIONS[_]),!function(l){return l==="block"||l==="underline"||l==="bar"}(n))throw new Error(`"${n}" is not a valid value for ${_}`);break;case"wordSeparator":n||(n=s.DEFAULT_OPTIONS[_]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=p.includes(n)?n:s.DEFAULT_OPTIONS[_];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${_} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${_} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${_} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${_} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}s.OptionsService=C},2660:function(g,s,a){var d=this&&this.__decorate||function(C,E,_,n){var l,c=arguments.length,h=c<3?E:n===null?n=Object.getOwnPropertyDescriptor(E,_):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(C,E,_,n);else for(var m=C.length-1;m>=0;m--)(l=C[m])&&(h=(c<3?l(h):c>3?l(E,_,h):l(E,_))||h);return c>3&&h&&Object.defineProperty(E,_,h),h},v=this&&this.__param||function(C,E){return function(_,n){E(_,n,C)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const u=a(2585);let p=s.OscLinkService=class{constructor(C){this._bufferService=C,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(C){const E=this._bufferService.buffer;if(C.id===void 0){const m=E.addMarker(E.ybase+E.y),w={data:C,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(w,m)),this._dataByLinkId.set(w.id,w),w.id}const _=C,n=this._getEntryIdKey(_),l=this._entriesWithId.get(n);if(l)return this.addLineToLink(l.id,E.ybase+E.y),l.id;const c=E.addMarker(E.ybase+E.y),h={id:this._nextId++,key:this._getEntryIdKey(_),data:_,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(h,c)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(C,E){const _=this._dataByLinkId.get(C);if(_&&_.lines.every(n=>n.line!==E)){const n=this._bufferService.buffer.addMarker(E);_.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(_,n))}}getLinkData(C){var E;return(E=this._dataByLinkId.get(C))===null||E===void 0?void 0:E.data}_getEntryIdKey(C){return`${C.id};;${C.uri}`}_removeMarkerFromLink(C,E){const _=C.lines.indexOf(E);_!==-1&&(C.lines.splice(_,1),C.lines.length===0&&(C.data.id!==void 0&&this._entriesWithId.delete(C.key),this._dataByLinkId.delete(C.id)))}};s.OscLinkService=p=d([v(0,u.IBufferService)],p)},8343:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const a="di$target",d="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(v){return v[d]||[]},s.createDecorator=function(v){if(s.serviceRegistry.has(v))return s.serviceRegistry.get(v);const u=function(p,C,E){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(_,n,l){n[a]===n?n[d].push({id:_,index:l}):(n[d]=[{id:_,index:l}],n[a]=n)})(u,p,E)};return u.toString=()=>v,s.serviceRegistry.set(v,u),u}},2585:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const d=a(8343);var v;s.IBufferService=(0,d.createDecorator)("BufferService"),s.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),s.ICoreService=(0,d.createDecorator)("CoreService"),s.ICharsetService=(0,d.createDecorator)("CharsetService"),s.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(v||(s.LogLevelEnum=v={})),s.ILogService=(0,d.createDecorator)("LogService"),s.IOptionsService=(0,d.createDecorator)("OptionsService"),s.IOscLinkService=(0,d.createDecorator)("OscLinkService"),s.IUnicodeService=(0,d.createDecorator)("UnicodeService"),s.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const d=a(8460),v=a(225);s.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;const u=new v.UnicodeV6;this.register(u),this._active=u.version,this._activeProvider=u}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(u){if(!this._providers[u])throw new Error(`unknown Unicode version "${u}"`);this._active=u,this._activeProvider=this._providers[u],this._onChange.fire(u)}register(u){this._providers[u.version]=u}wcwidth(u){return this._activeProvider.wcwidth(u)}getStringCellWidth(u){let p=0;const C=u.length;for(let E=0;E<C;++E){let _=u.charCodeAt(E);if(55296<=_&&_<=56319){if(++E>=C)return p+this.wcwidth(_);const n=u.charCodeAt(E);56320<=n&&n<=57343?_=1024*(_-55296)+n-56320+65536:p+=this.wcwidth(n)}p+=this.wcwidth(_)}return p}}}},i={};function o(g){var s=i[g];if(s!==void 0)return s.exports;var a=i[g]={exports:{}};return r[g].call(a.exports,a,a.exports,o),a.exports}var f={};return(()=>{var g=f;Object.defineProperty(g,"__esModule",{value:!0}),g.Terminal=void 0;const s=o(9042),a=o(3236),d=o(844),v=o(5741),u=o(8285),p=o(7975),C=o(7090),E=["cols","rows"];class _ extends d.Disposable{constructor(l){super(),this._core=this.register(new a.Terminal(l)),this._addonManager=this.register(new v.AddonManager),this._publicOptions=Object.assign({},this._core.options);const c=m=>this._core.options[m],h=(m,w)=>{this._checkReadonlyOptions(m),this._core.options[m]=w};for(const m in this._core.options){const w={get:c.bind(this,m),set:h.bind(this,m)};Object.defineProperty(this._publicOptions,m,w)}}_checkReadonlyOptions(l){if(E.includes(l))throw new Error(`Option "${l}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new C.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new u.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const l=this._core.coreService.decPrivateModes;let c="none";switch(this._core.coreMouseService.activeProtocol){case"X10":c="x10";break;case"VT200":c="vt200";break;case"DRAG":c="drag";break;case"ANY":c="any"}return{applicationCursorKeysMode:l.applicationCursorKeys,applicationKeypadMode:l.applicationKeypad,bracketedPasteMode:l.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:c,originMode:l.origin,reverseWraparoundMode:l.reverseWraparound,sendFocusMode:l.sendFocus,wraparoundMode:l.wraparound}}get options(){return this._publicOptions}set options(l){for(const c in l)this._publicOptions[c]=l[c]}blur(){this._core.blur()}focus(){this._core.focus()}resize(l,c){this._verifyIntegers(l,c),this._core.resize(l,c)}open(l){this._core.open(l)}attachCustomKeyEventHandler(l){this._core.attachCustomKeyEventHandler(l)}registerLinkProvider(l){return this._core.registerLinkProvider(l)}registerCharacterJoiner(l){return this._checkProposedApi(),this._core.registerCharacterJoiner(l)}deregisterCharacterJoiner(l){this._checkProposedApi(),this._core.deregisterCharacterJoiner(l)}registerMarker(l=0){return this._verifyIntegers(l),this._core.registerMarker(l)}registerDecoration(l){var c,h,m;return this._checkProposedApi(),this._verifyPositiveIntegers((c=l.x)!==null&&c!==void 0?c:0,(h=l.width)!==null&&h!==void 0?h:0,(m=l.height)!==null&&m!==void 0?m:0),this._core.registerDecoration(l)}hasSelection(){return this._core.hasSelection()}select(l,c,h){this._verifyIntegers(l,c,h),this._core.select(l,c,h)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(l,c){this._verifyIntegers(l,c),this._core.selectLines(l,c)}dispose(){super.dispose()}scrollLines(l){this._verifyIntegers(l),this._core.scrollLines(l)}scrollPages(l){this._verifyIntegers(l),this._core.scrollPages(l)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(l){this._verifyIntegers(l),this._core.scrollToLine(l)}clear(){this._core.clear()}write(l,c){this._core.write(l,c)}writeln(l,c){this._core.write(l),this._core.write(`\r
`,c)}paste(l){this._core.paste(l)}refresh(l,c){this._verifyIntegers(l,c),this._core.refresh(l,c)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(l){this._addonManager.loadAddon(this,l)}static get strings(){return s}_verifyIntegers(...l){for(const c of l)if(c===1/0||isNaN(c)||c%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...l){for(const c of l)if(c&&(c===1/0||isNaN(c)||c%1!=0||c<0))throw new Error("This API only accepts positive integers")}}g.Terminal=_})(),f})())})(Q_);var by=Q_.exports,Y_={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,()=>(()=>{var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{activate(o){this._terminal=o}dispose(){}fit(){const o=this.proposeDimensions();if(!o||!this._terminal||isNaN(o.cols)||isNaN(o.rows))return;const f=this._terminal._core;this._terminal.rows===o.rows&&this._terminal.cols===o.cols||(f._renderService.clear(),this._terminal.resize(o.cols,o.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const o=this._terminal._core,f=o._renderService.dimensions;if(f.css.cell.width===0||f.css.cell.height===0)return;const g=this._terminal.options.scrollback===0?0:o.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(s.getPropertyValue("height")),d=Math.max(0,parseInt(s.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),u=a-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),p=d-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-g;return{cols:Math.max(2,Math.floor(p/f.css.cell.width)),rows:Math.max(1,Math.floor(u/f.css.cell.height))}}}})(),r})())})(Y_);var xy=Y_.exports,J_={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,function(){return(()=>{var r={965:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlyphRenderer=void 0;const d=a(381),v=a(855),u=a(859),p=a(374),C=a(509),E=11,_=E*Float32Array.BYTES_PER_ELEMENT;let n,l=0,c=0,h=0;class m extends u.Disposable{constructor(b,x,y){super(),this._terminal=b,this._gl=x,this._dimensions=y,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const S=this._gl;C.TextureAtlas.maxAtlasPages===void 0&&(C.TextureAtlas.maxAtlasPages=Math.min(32,(0,p.throwIfFalsy)(S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS))),C.TextureAtlas.maxTextureSize=(0,p.throwIfFalsy)(S.getParameter(S.MAX_TEXTURE_SIZE))),this._program=(0,p.throwIfFalsy)((0,d.createProgram)(S,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(N){let $="";for(let I=1;I<N;I++)$+=` else if (v_texpage == ${I}) { outColor = texture(u_texture[${I}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${N}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${$}
}`}(C.TextureAtlas.maxAtlasPages))),this.register((0,u.toDisposable)(()=>S.deleteProgram(this._program))),this._projectionLocation=(0,p.throwIfFalsy)(S.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,p.throwIfFalsy)(S.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,p.throwIfFalsy)(S.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=S.createVertexArray(),S.bindVertexArray(this._vertexArrayObject);const L=new Float32Array([0,0,1,0,0,1,1,1]),k=S.createBuffer();this.register((0,u.toDisposable)(()=>S.deleteBuffer(k))),S.bindBuffer(S.ARRAY_BUFFER,k),S.bufferData(S.ARRAY_BUFFER,L,S.STATIC_DRAW),S.enableVertexAttribArray(0),S.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const D=new Uint8Array([0,1,2,3]),A=S.createBuffer();this.register((0,u.toDisposable)(()=>S.deleteBuffer(A))),S.bindBuffer(S.ELEMENT_ARRAY_BUFFER,A),S.bufferData(S.ELEMENT_ARRAY_BUFFER,D,S.STATIC_DRAW),this._attributesBuffer=(0,p.throwIfFalsy)(S.createBuffer()),this.register((0,u.toDisposable)(()=>S.deleteBuffer(this._attributesBuffer))),S.bindBuffer(S.ARRAY_BUFFER,this._attributesBuffer),S.enableVertexAttribArray(2),S.vertexAttribPointer(2,2,S.FLOAT,!1,_,0),S.vertexAttribDivisor(2,1),S.enableVertexAttribArray(3),S.vertexAttribPointer(3,2,S.FLOAT,!1,_,2*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(3,1),S.enableVertexAttribArray(4),S.vertexAttribPointer(4,1,S.FLOAT,!1,_,4*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(4,1),S.enableVertexAttribArray(5),S.vertexAttribPointer(5,2,S.FLOAT,!1,_,5*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(5,1),S.enableVertexAttribArray(6),S.vertexAttribPointer(6,2,S.FLOAT,!1,_,7*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(6,1),S.enableVertexAttribArray(1),S.vertexAttribPointer(1,2,S.FLOAT,!1,_,9*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(1,1),S.useProgram(this._program);const B=new Int32Array(C.TextureAtlas.maxAtlasPages);for(let N=0;N<C.TextureAtlas.maxAtlasPages;N++)B[N]=N;S.uniform1iv(this._textureLocation,B),S.uniformMatrix4fv(this._projectionLocation,!1,d.PROJECTION_MATRIX),this._atlasTextures=[];for(let N=0;N<C.TextureAtlas.maxAtlasPages;N++){const $=new d.GLTexture((0,p.throwIfFalsy)(S.createTexture()));this.register((0,u.toDisposable)(()=>S.deleteTexture($.texture))),S.activeTexture(S.TEXTURE0+N),S.bindTexture(S.TEXTURE_2D,$.texture),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[N]=$}S.enable(S.BLEND),S.blendFunc(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(b,x,y,S,L,k,D,A){this._updateCell(this._vertices.attributes,b,x,y,S,L,k,D,A)}_updateCell(b,x,y,S,L,k,D,A,B){l=(y*this._terminal.cols+x)*E,S!==v.NULL_CELL_CODE&&S!==void 0?this._atlas&&(n=A&&A.length>1?this._atlas.getRasterizedGlyphCombinedChar(A,L,k,D):this._atlas.getRasterizedGlyph(S,L,k,D),c=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),L!==B&&n.offset.x>c?(h=n.offset.x-c,b[l]=-(n.offset.x-h)+this._dimensions.device.char.left,b[l+1]=-n.offset.y+this._dimensions.device.char.top,b[l+2]=(n.size.x-h)/this._dimensions.device.canvas.width,b[l+3]=n.size.y/this._dimensions.device.canvas.height,b[l+4]=n.texturePage,b[l+5]=n.texturePositionClipSpace.x+h/this._atlas.pages[n.texturePage].canvas.width,b[l+6]=n.texturePositionClipSpace.y,b[l+7]=n.sizeClipSpace.x-h/this._atlas.pages[n.texturePage].canvas.width,b[l+8]=n.sizeClipSpace.y):(b[l]=-n.offset.x+this._dimensions.device.char.left,b[l+1]=-n.offset.y+this._dimensions.device.char.top,b[l+2]=n.size.x/this._dimensions.device.canvas.width,b[l+3]=n.size.y/this._dimensions.device.canvas.height,b[l+4]=n.texturePage,b[l+5]=n.texturePositionClipSpace.x,b[l+6]=n.texturePositionClipSpace.y,b[l+7]=n.sizeClipSpace.x,b[l+8]=n.sizeClipSpace.y)):b.fill(0,l,l+E-1-2)}clear(){const b=this._terminal,x=b.cols*b.rows*E;this._vertices.count!==x?this._vertices.attributes=new Float32Array(x):this._vertices.attributes.fill(0);let y=0;for(;y<this._vertices.attributesBuffers.length;y++)this._vertices.count!==x?this._vertices.attributesBuffers[y]=new Float32Array(x):this._vertices.attributesBuffers[y].fill(0);this._vertices.count=x,y=0;for(let S=0;S<b.rows;S++)for(let L=0;L<b.cols;L++)this._vertices.attributes[y+9]=L/b.cols,this._vertices.attributes[y+10]=S/b.rows,y+=E}handleResize(){const b=this._gl;b.viewport(0,0,b.canvas.width,b.canvas.height),b.uniform2f(this._resolutionLocation,b.canvas.width,b.canvas.height),this.clear()}render(b){if(!this._atlas)return;const x=this._gl;x.useProgram(this._program),x.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const y=this._vertices.attributesBuffers[this._activeBuffer];let S=0;for(let L=0;L<b.lineLengths.length;L++){const k=L*this._terminal.cols*E,D=this._vertices.attributes.subarray(k,k+b.lineLengths[L]*E);y.set(D,S),S+=D.length}x.bindBuffer(x.ARRAY_BUFFER,this._attributesBuffer),x.bufferData(x.ARRAY_BUFFER,y.subarray(0,S),x.STREAM_DRAW);for(let L=0;L<this._atlas.pages.length;L++)this._atlas.pages[L].version!==this._atlasTextures[L].version&&this._bindAtlasPageTexture(x,this._atlas,L);x.drawElementsInstanced(x.TRIANGLE_STRIP,4,x.UNSIGNED_BYTE,0,S/E)}setAtlas(b){this._atlas=b;for(const x of this._atlasTextures)x.version=-1}_bindAtlasPageTexture(b,x,y){b.activeTexture(b.TEXTURE0+y),b.bindTexture(b.TEXTURE_2D,this._atlasTextures[y].texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,x.pages[y].canvas),b.generateMipmap(b.TEXTURE_2D),this._atlasTextures[y].version=x.pages[y].version}setDimensions(b){this._dimensions=b}}s.GlyphRenderer=m},742:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RectangleRenderer=void 0;const d=a(381),v=a(310),u=a(859),p=a(237),C=a(374),E=8*Float32Array.BYTES_PER_ELEMENT;let _=0,n=!1,l=0,c=0,h=0,m=0,w=0,b=0;class x extends u.Disposable{constructor(S,L,k,D){super(),this._terminal=S,this._gl=L,this._dimensions=k,this._themeService=D,this._vertices={count:0,attributes:new Float32Array(160)};const A=this._gl;this._program=(0,C.throwIfFalsy)((0,d.createProgram)(A,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,u.toDisposable)(()=>A.deleteProgram(this._program))),this._projectionLocation=(0,C.throwIfFalsy)(A.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=A.createVertexArray(),A.bindVertexArray(this._vertexArrayObject);const B=new Float32Array([0,0,1,0,0,1,1,1]),N=A.createBuffer();this.register((0,u.toDisposable)(()=>A.deleteBuffer(N))),A.bindBuffer(A.ARRAY_BUFFER,N),A.bufferData(A.ARRAY_BUFFER,B,A.STATIC_DRAW),A.enableVertexAttribArray(3),A.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const $=new Uint8Array([0,1,2,3]),I=A.createBuffer();this.register((0,u.toDisposable)(()=>A.deleteBuffer(I))),A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,I),A.bufferData(A.ELEMENT_ARRAY_BUFFER,$,A.STATIC_DRAW),this._attributesBuffer=(0,C.throwIfFalsy)(A.createBuffer()),this.register((0,u.toDisposable)(()=>A.deleteBuffer(this._attributesBuffer))),A.bindBuffer(A.ARRAY_BUFFER,this._attributesBuffer),A.enableVertexAttribArray(0),A.vertexAttribPointer(0,2,A.FLOAT,!1,E,0),A.vertexAttribDivisor(0,1),A.enableVertexAttribArray(1),A.vertexAttribPointer(1,2,A.FLOAT,!1,E,2*Float32Array.BYTES_PER_ELEMENT),A.vertexAttribDivisor(1,1),A.enableVertexAttribArray(2),A.vertexAttribPointer(2,4,A.FLOAT,!1,E,4*Float32Array.BYTES_PER_ELEMENT),A.vertexAttribDivisor(2,1),this._updateCachedColors(D.colors),this.register(this._themeService.onChangeColors(R=>{this._updateCachedColors(R),this._updateViewportRectangle()}))}render(){const S=this._gl;S.useProgram(this._program),S.bindVertexArray(this._vertexArrayObject),S.uniformMatrix4fv(this._projectionLocation,!1,d.PROJECTION_MATRIX),S.bindBuffer(S.ARRAY_BUFFER,this._attributesBuffer),S.bufferData(S.ARRAY_BUFFER,this._vertices.attributes,S.DYNAMIC_DRAW),S.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,S.UNSIGNED_BYTE,0,this._vertices.count)}handleResize(){this._updateViewportRectangle()}setDimensions(S){this._dimensions=S}_updateCachedColors(S){this._bgFloat=this._colorToFloat32Array(S.background)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(S){const L=this._terminal,k=this._vertices;let D,A,B,N,$,I,R,T,P,O,W,V=1;for(D=0;D<L.rows;D++){for(B=-1,N=0,$=0,I=!1,A=0;A<L.cols;A++)R=(D*L.cols+A)*v.RENDER_MODEL_INDICIES_PER_CELL,T=S.cells[R+v.RENDER_MODEL_BG_OFFSET],P=S.cells[R+v.RENDER_MODEL_FG_OFFSET],O=!!(67108864&P),(T!==N||P!==$&&(I||O))&&((N!==0||I&&$!==0)&&(W=8*V++,this._updateRectangle(k,W,$,N,B,A,D)),B=A,N=T,$=P,I=O);(N!==0||I&&$!==0)&&(W=8*V++,this._updateRectangle(k,W,$,N,B,L.cols,D))}k.count=V}_updateRectangle(S,L,k,D,A,B,N){if(n=!1,67108864&k)switch(50331648&k){case 16777216:case 33554432:_=this._themeService.colors.ansi[255&k].rgba;break;case 50331648:_=(16777215&k)<<8;break;default:_=this._themeService.colors.foreground.rgba}else switch(50331648&D){case 16777216:case 33554432:_=this._themeService.colors.ansi[255&D].rgba;break;case 50331648:_=(16777215&D)<<8;break;default:_=this._themeService.colors.background.rgba,n=!0}S.attributes.length<L+4&&(S.attributes=(0,d.expandFloat32Array)(S.attributes,this._terminal.rows*this._terminal.cols*8)),l=A*this._dimensions.device.cell.width,c=N*this._dimensions.device.cell.height,h=(_>>24&255)/255,m=(_>>16&255)/255,w=(_>>8&255)/255,b=!n&&134217728&D?p.DIM_OPACITY:1,this._addRectangle(S.attributes,L,l,c,(B-A)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,h,m,w,b)}_addRectangle(S,L,k,D,A,B,N,$,I,R){S[L]=k/this._dimensions.device.canvas.width,S[L+1]=D/this._dimensions.device.canvas.height,S[L+2]=A/this._dimensions.device.canvas.width,S[L+3]=B/this._dimensions.device.canvas.height,S[L+4]=N,S[L+5]=$,S[L+6]=I,S[L+7]=R}_addRectangleFloat(S,L,k,D,A,B,N){S[L]=k/this._dimensions.device.canvas.width,S[L+1]=D/this._dimensions.device.canvas.height,S[L+2]=A/this._dimensions.device.canvas.width,S[L+3]=B/this._dimensions.device.canvas.height,S[L+4]=N[0],S[L+5]=N[1],S[L+6]=N[2],S[L+7]=N[3]}_colorToFloat32Array(S){return new Float32Array([(S.rgba>>24&255)/255,(S.rgba>>16&255)/255,(S.rgba>>8&255)/255,(255&S.rgba)/255])}}s.RectangleRenderer=x},310:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderModel=s.COMBINED_CHAR_BIT_MASK=s.RENDER_MODEL_EXT_OFFSET=s.RENDER_MODEL_FG_OFFSET=s.RENDER_MODEL_BG_OFFSET=s.RENDER_MODEL_INDICIES_PER_CELL=void 0;const d=a(296);s.RENDER_MODEL_INDICIES_PER_CELL=4,s.RENDER_MODEL_BG_OFFSET=1,s.RENDER_MODEL_FG_OFFSET=2,s.RENDER_MODEL_EXT_OFFSET=3,s.COMBINED_CHAR_BIT_MASK=2147483648,s.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,d.createSelectionRenderModel)()}resize(v,u){const p=v*u*s.RENDER_MODEL_INDICIES_PER_CELL;p!==this.cells.length&&(this.cells=new Uint32Array(p),this.lineLengths=new Uint32Array(u))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.JoinedCellData=s.WebglRenderer=void 0;const d=a(820),v=a(274),u=a(627),p=a(56),C=a(374),E=a(147),_=a(782),n=a(855),l=a(345),c=a(859),h=a(965),m=a(742),w=a(461),b=a(733),x=a(310);class y extends c.Disposable{constructor(k,D,A,B,N,$,I,R,T){super(),this._terminal=k,this._characterJoinerService=D,this._charSizeService=A,this._coreBrowserService=B,this._decorationService=$,this._optionsService=I,this._themeService=R,this._model=new x.RenderModel,this._workCell=new _.CellData,this._onChangeTextureAtlas=this.register(new l.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new l.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new l.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new l.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new l.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new v.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new b.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,I,this._themeService),new w.CursorRenderLayer(k,this._core.screenElement,3,this._onRequestRedraw,this._coreBrowserService,N,I,this._themeService)],this.dimensions=(0,C.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register(I.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");const P={antialias:!1,depth:!1,preserveDrawingBuffer:T};if(this._gl=this._canvas.getContext("webgl2",P),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,d.addDisposableDomListener)(this._canvas,"webglcontextlost",O=>{console.log("webglcontextlost event received"),O.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(O)},3e3)})),this.register((0,d.addDisposableDomListener)(this._canvas,"webglcontextrestored",O=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,u.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,p.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(O,W)=>this._setCanvasDevicePixelDimensions(O,W))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer,this._glyphRenderer]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,c.toDisposable)(()=>{var O;for(const W of this._renderLayers)W.dispose();(O=this._canvas.parentElement)===null||O===void 0||O.removeChild(this._canvas),(0,u.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var k;return(k=this._charAtlas)===null||k===void 0?void 0:k.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(k,D){this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const A of this._renderLayers)A.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,this._rectangleRenderer.setDimensions(this.dimensions),this._rectangleRenderer.handleResize(),this._glyphRenderer.setDimensions(this.dimensions),this._glyphRenderer.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){for(const k of this._renderLayers)k.handleBlur(this._terminal);this._requestRedrawViewport()}handleFocus(){for(const k of this._renderLayers)k.handleFocus(this._terminal);this._requestRedrawViewport()}handleSelectionChanged(k,D,A){for(const B of this._renderLayers)B.handleSelectionChanged(this._terminal,k,D,A);this._model.selection.update(this._terminal,k,D,A),this._requestRedrawViewport()}handleCursorMove(){for(const k of this._renderLayers)k.handleCursorMove(this._terminal)}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas()}_initializeWebGLState(){var k,D;return(k=this._rectangleRenderer)===null||k===void 0||k.dispose(),(D=this._glyphRenderer)===null||D===void 0||D.dispose(),this._rectangleRenderer=this.register(new m.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService)),this._glyphRenderer=this.register(new h.GlyphRenderer(this._terminal,this._gl,this.dimensions)),this.handleCharSizeChanged(),[this._rectangleRenderer,this._glyphRenderer]}_refreshCharAtlas(){var k;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const D=(0,u.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==D&&((k=this._charAtlasDisposable)===null||k===void 0||k.dispose(),this._onChangeTextureAtlas.fire(D.pages[0].canvas),this._charAtlasDisposable=(0,c.getDisposeArrayDisposable)([(0,l.forwardEvent)(D.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,l.forwardEvent)(D.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=D,this._charAtlas.warmUp(),this._glyphRenderer.setAtlas(this._charAtlas)}_clearModel(k){this._model.clear(),k&&this._glyphRenderer.clear()}clearTextureAtlas(){var k;(k=this._charAtlas)===null||k===void 0||k.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){this._clearModel(!0);for(const k of this._renderLayers)k.reset(this._terminal)}registerCharacterJoiner(k){return-1}deregisterCharacterJoiner(k){return!1}renderRows(k,D){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const A of this._renderLayers)A.handleGridChanged(this._terminal,k,D);this._glyphRenderer.beginFrame()&&this._clearModel(!0),this._updateModel(k,D),this._rectangleRenderer.render(),this._glyphRenderer.render(this._model)}_updateModel(k,D){const A=this._core;let B,N,$,I,R,T,P,O,W,V,Q,q,Z,M=this._workCell;for(N=k;N<=D&&($=N+A.buffer.ydisp,I=A.buffer.lines.get($),I);N++)for(this._model.lineLengths[N]=0,R=this._characterJoinerService.getJoinedCharacters($),q=0;q<A.cols;q++)if(B=this._cellColorResolver.result.bg,I.loadCell(q,M),q===0&&(B=this._cellColorResolver.result.bg),T=!1,P=q,R.length>0&&q===R[0][0]&&(T=!0,O=R.shift(),M=new S(M,I.translateToString(!0,O[0],O[1]),O[1]-O[0]),P=O[1]-1),W=M.getChars(),V=M.getCode(),Q=(N*A.cols+q)*x.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(M,q,$),V!==n.NULL_CELL_CODE&&(this._model.lineLengths[N]=q+1),(this._model.cells[Q]!==V||this._model.cells[Q+x.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[Q+x.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[Q+x.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(W.length>1&&(V|=x.COMBINED_CHAR_BIT_MASK),this._model.cells[Q]=V,this._model.cells[Q+x.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[Q+x.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[Q+x.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.updateCell(q,N,V,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,W,B),T))for(M=this._workCell,q++;q<P;q++)Z=(N*A.cols+q)*x.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.updateCell(q,N,n.NULL_CELL_CODE,0,0,0,n.NULL_CELL_CHAR,0),this._model.cells[Z]=n.NULL_CELL_CODE,this._model.cells[Z+x.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[Z+x.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[Z+x.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;this._rectangleRenderer.updateBackgrounds(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(k,D){this._canvas.width===k&&this._canvas.height===D||(this._canvas.width=k,this._canvas.height=D,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}}s.WebglRenderer=y;class S extends E.AttributeData{constructor(k,D,A){super(),this.content=0,this.combinedData="",this.fg=k.fg,this.bg=k.bg,this.combinedData=D,this._width=A}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(k){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=S},381:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GLTexture=s.expandFloat32Array=s.createShader=s.createProgram=s.PROJECTION_MATRIX=void 0;const d=a(374);function v(u,p,C){const E=(0,d.throwIfFalsy)(u.createShader(p));if(u.shaderSource(E,C),u.compileShader(E),u.getShaderParameter(E,u.COMPILE_STATUS))return E;console.error(u.getShaderInfoLog(E)),u.deleteShader(E)}s.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),s.createProgram=function(u,p,C){const E=(0,d.throwIfFalsy)(u.createProgram());if(u.attachShader(E,(0,d.throwIfFalsy)(v(u,u.VERTEX_SHADER,p))),u.attachShader(E,(0,d.throwIfFalsy)(v(u,u.FRAGMENT_SHADER,C))),u.linkProgram(E),u.getProgramParameter(E,u.LINK_STATUS))return E;console.error(u.getProgramInfoLog(E)),u.deleteProgram(E)},s.createShader=v,s.expandFloat32Array=function(u,p){const C=Math.min(2*u.length,p),E=new Float32Array(C);for(let _=0;_<u.length;_++)E[_]=u[_];return E},s.GLTexture=class{constructor(u){this.texture=u,this.version=-1}}},592:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseRenderLayer=void 0;const d=a(627),v=a(237),u=a(374),p=a(859);class C extends p.Disposable{constructor(_,n,l,c,h,m,w,b){super(),this._container=n,this._alpha=h,this._coreBrowserService=m,this._optionsService=w,this._themeService=b,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${l}-layer`),this._canvas.style.zIndex=c.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(x=>{this._refreshCharAtlas(_,x),this.reset(_)})),this.register((0,p.toDisposable)(()=>{var x;this._canvas.remove(),(x=this._charAtlas)===null||x===void 0||x.dispose()}))}_initCanvas(){this._ctx=(0,u.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(_){}handleFocus(_){}handleCursorMove(_){}handleGridChanged(_,n,l){}handleSelectionChanged(_,n,l,c=!1){}_setTransparency(_,n){if(n===this._alpha)return;const l=this._canvas;this._alpha=n,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,l),this._refreshCharAtlas(_,this._themeService.colors),this.handleGridChanged(_,0,_.rows-1)}_refreshCharAtlas(_,n){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,d.acquireTextureAtlas)(_,this._optionsService.rawOptions,n,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(_,n){this._deviceCellWidth=n.device.cell.width,this._deviceCellHeight=n.device.cell.height,this._deviceCharWidth=n.device.char.width,this._deviceCharHeight=n.device.char.height,this._deviceCharLeft=n.device.char.left,this._deviceCharTop=n.device.char.top,this._canvas.width=n.device.canvas.width,this._canvas.height=n.device.canvas.height,this._canvas.style.width=`${n.css.canvas.width}px`,this._canvas.style.height=`${n.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(_,this._themeService.colors)}_fillCells(_,n,l,c){this._ctx.fillRect(_*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,c*this._deviceCellHeight)}_fillBottomLineAtCells(_,n,l=1){this._ctx.fillRect(_*this._deviceCellWidth,(n+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,l*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillLeftLineAtCell(_,n,l){this._ctx.fillRect(_*this._deviceCellWidth,n*this._deviceCellHeight,this._coreBrowserService.dpr*l,this._deviceCellHeight)}_strokeRectAtCell(_,n,l,c){this._ctx.lineWidth=this._coreBrowserService.dpr,this._ctx.strokeRect(_*this._deviceCellWidth+this._coreBrowserService.dpr/2,n*this._deviceCellHeight+this._coreBrowserService.dpr/2,l*this._deviceCellWidth-this._coreBrowserService.dpr,c*this._deviceCellHeight-this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(_,n,l,c){this._alpha?this._ctx.clearRect(_*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,c*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(_*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,c*this._deviceCellHeight))}_fillCharTrueColor(_,n,l,c){this._ctx.font=this._getFont(_,!1,!1),this._ctx.textBaseline=v.TEXT_BASELINE,this._clipCell(l,c,n.getWidth()),this._ctx.fillText(n.getChars(),l*this._deviceCellWidth+this._deviceCharLeft,c*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(_,n,l){this._ctx.beginPath(),this._ctx.rect(_*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(_,n,l){return`${l?"italic":""} ${n?_.options.fontWeightBold:_.options.fontWeight} ${_.options.fontSize*this._coreBrowserService.dpr}px ${_.options.fontFamily}`}}s.BaseRenderLayer=C},461:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CursorRenderLayer=void 0;const d=a(592),v=a(782),u=a(859);class p extends d.BaseRenderLayer{constructor(_,n,l,c,h,m,w,b){super(_,n,"cursor",l,!0,h,w,b),this._onRequestRefreshRowsEvent=c,this._coreService=m,this._cell=new v.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this)},this._handleOptionsChanged(_),this.register(w.onOptionChange(()=>this._handleOptionsChanged(_))),this.register((0,u.toDisposable)(()=>{var x;(x=this._cursorBlinkStateManager)===null||x===void 0||x.dispose(),this._cursorBlinkStateManager=void 0}))}resize(_,n){super.resize(_,n),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(_){var n;this._clearCursor(),(n=this._cursorBlinkStateManager)===null||n===void 0||n.restartBlinkAnimation(_),this._handleOptionsChanged(_)}handleBlur(_){var n;(n=this._cursorBlinkStateManager)===null||n===void 0||n.pause(),this._onRequestRefreshRowsEvent.fire({start:_.buffer.active.cursorY,end:_.buffer.active.cursorY})}handleFocus(_){var n;(n=this._cursorBlinkStateManager)===null||n===void 0||n.resume(_),this._onRequestRefreshRowsEvent.fire({start:_.buffer.active.cursorY,end:_.buffer.active.cursorY})}_handleOptionsChanged(_){var n;_.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new C(()=>{this._render(_,!0)},this._coreBrowserService)):((n=this._cursorBlinkStateManager)===null||n===void 0||n.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:_.buffer.active.cursorY,end:_.buffer.active.cursorY})}handleCursorMove(_){var n;(n=this._cursorBlinkStateManager)===null||n===void 0||n.restartBlinkAnimation(_)}handleGridChanged(_,n,l){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(_,!1):this._cursorBlinkStateManager.restartBlinkAnimation(_)}_render(_,n){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const l=_.buffer.active.baseY+_.buffer.active.cursorY,c=l-_.buffer.active.viewportY,h=Math.min(_.buffer.active.cursorX,_.cols-1);if(c<0||c>=_.rows)this._clearCursor();else if(_._core.buffer.lines.get(l).loadCell(h,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const m=_.options.cursorStyle;return m&&m!=="block"?this._cursorRenderers[m](_,h,c,this._cell):this._renderBlurCursor(_,h,c,this._cell),this._ctx.restore(),this._state.x=h,this._state.y=c,this._state.isFocused=!1,this._state.style=m,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===h&&this._state.y===c&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===_.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[_.options.cursorStyle||"block"](_,h,c,this._cell),this._ctx.restore(),this._state.x=h,this._state.y=c,this._state.isFocused=!1,this._state.style=_.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(_,n,l,c){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(n,l,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(_,n,l,c){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(n,l,c.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(_,c,n,l),this._ctx.restore()}_renderUnderlineCursor(_,n,l,c){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(n,l),this._ctx.restore()}_renderBlurCursor(_,n,l,c){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(n,l,c.getWidth(),1),this._ctx.restore()}}s.CursorRenderLayer=p;class C{constructor(_,n){this._renderCallback=_,this._coreBrowserService=n,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(_){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(_=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const n=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,n>0)return void this._restartInterval(n)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const n=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(n)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},_)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(_){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation(_)}}},733:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkRenderLayer=void 0;const d=a(197),v=a(237),u=a(592);class p extends u.BaseRenderLayer{constructor(E,_,n,l,c,h,m){super(n,E,"link",_,!0,c,h,m),this.register(l.onShowLinkUnderline(w=>this._handleShowLinkUnderline(w))),this.register(l.onHideLinkUnderline(w=>this._handleHideLinkUnderline(w)))}resize(E,_){super.resize(E,_),this._state=void 0}reset(E){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const E=this._state.y2-this._state.y1-1;E>0&&this._clearCells(0,this._state.y1+1,this._state.cols,E),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(E){if(E.fg===v.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:E.fg!==void 0&&(0,d.is256Color)(E.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[E.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,E.y1===E.y2)this._fillBottomLineAtCells(E.x1,E.y1,E.x2-E.x1);else{this._fillBottomLineAtCells(E.x1,E.y1,E.cols-E.x1);for(let _=E.y1+1;_<E.y2;_++)this._fillBottomLineAtCells(0,_,E.cols);this._fillBottomLineAtCells(0,E.y2,E.x2)}this._state=E}_handleHideLinkUnderline(E){this._clearCurrentLink()}}s.LinkRenderLayer=p},820:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,d,v,u){a.addEventListener(d,v,u);let p=!1;return{dispose:()=>{p||(p=!0,a.removeEventListener(d,v,u))}}}},274:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellColorResolver=void 0;let a,d=0,v=0,u=!1,p=!1,C=!1;s.CellColorResolver=class{constructor(E,_,n,l,c){this._terminal=E,this._selectionRenderModel=_,this._decorationService=n,this._coreBrowserService=l,this._themeService=c,this.result={fg:0,bg:0,ext:0}}resolve(E,_,n){this.result.bg=E.bg,this.result.fg=E.fg,this.result.ext=268435456&E.bg?E.extended.ext:0,v=0,d=0,p=!1,u=!1,C=!1,a=this._themeService.colors,this._decorationService.forEachDecorationAtCell(_,n,"bottom",l=>{l.backgroundColorRGB&&(v=l.backgroundColorRGB.rgba>>8&16777215,p=!0),l.foregroundColorRGB&&(d=l.foregroundColorRGB.rgba>>8&16777215,u=!0)}),C=this._selectionRenderModel.isCellSelected(this._terminal,_,n),C&&(v=(this._coreBrowserService.isFocused?a.selectionBackgroundOpaque:a.selectionInactiveBackgroundOpaque).rgba>>8&16777215,p=!0,a.selectionForeground&&(d=a.selectionForeground.rgba>>8&16777215,u=!0)),this._decorationService.forEachDecorationAtCell(_,n,"top",l=>{l.backgroundColorRGB&&(v=l.backgroundColorRGB.rgba>>8&16777215,p=!0),l.foregroundColorRGB&&(d=l.foregroundColorRGB.rgba>>8&16777215,u=!0)}),p&&(v=C?-16777216&E.bg&-134217729|v|50331648:-16777216&E.bg|v|50331648),u&&(d=-16777216&E.fg&-67108865|d|50331648),67108864&this.result.fg&&(p&&!u&&(d=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&a.background.rgba>>8|50331648,u=!0),!p&&u&&(v=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&a.foreground.rgba>>8|50331648,p=!0)),a=void 0,this.result.bg=p?v:this.result.bg,this.result.fg=u?d:this.result.fg}}},627:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeTerminalFromCache=s.acquireTextureAtlas=void 0;const d=a(509),v=a(197),u=[];s.acquireTextureAtlas=function(p,C,E,_,n,l,c,h){const m=(0,v.generateConfig)(_,n,l,c,C,E,h);for(let x=0;x<u.length;x++){const y=u[x],S=y.ownedBy.indexOf(p);if(S>=0){if((0,v.configEquals)(y.config,m))return y.atlas;y.ownedBy.length===1?(y.atlas.dispose(),u.splice(x,1)):y.ownedBy.splice(S,1);break}}for(let x=0;x<u.length;x++){const y=u[x];if((0,v.configEquals)(y.config,m))return y.ownedBy.push(p),y.atlas}const w=p._core,b={atlas:new d.TextureAtlas(document,m,w.unicodeService),config:m,ownedBy:[p]};return u.push(b),b.atlas},s.removeTerminalFromCache=function(p){for(let C=0;C<u.length;C++){const E=u[C].ownedBy.indexOf(p);if(E!==-1){u[C].ownedBy.length===1?(u[C].atlas.dispose(),u.splice(C,1)):u[C].ownedBy.splice(E,1);break}}}},197:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.is256Color=s.configEquals=s.generateConfig=void 0;const d=a(160);s.generateConfig=function(v,u,p,C,E,_,n){const l={foreground:_.foreground,background:_.background,cursor:d.NULL_COLOR,cursorAccent:d.NULL_COLOR,selectionForeground:d.NULL_COLOR,selectionBackgroundTransparent:d.NULL_COLOR,selectionBackgroundOpaque:d.NULL_COLOR,selectionInactiveBackgroundTransparent:d.NULL_COLOR,selectionInactiveBackgroundOpaque:d.NULL_COLOR,ansi:_.ansi.slice(),contrastCache:_.contrastCache};return{customGlyphs:E.customGlyphs,devicePixelRatio:n,letterSpacing:E.letterSpacing,lineHeight:E.lineHeight,deviceCellWidth:v,deviceCellHeight:u,deviceCharWidth:p,deviceCharHeight:C,fontFamily:E.fontFamily,fontSize:E.fontSize,fontWeight:E.fontWeight,fontWeightBold:E.fontWeightBold,allowTransparency:E.allowTransparency,drawBoldTextInBrightColors:E.drawBoldTextInBrightColors,minimumContrastRatio:E.minimumContrastRatio,colors:l}},s.configEquals=function(v,u){for(let p=0;p<v.colors.ansi.length;p++)if(v.colors.ansi[p].rgba!==u.colors.ansi[p].rgba)return!1;return v.devicePixelRatio===u.devicePixelRatio&&v.customGlyphs===u.customGlyphs&&v.lineHeight===u.lineHeight&&v.letterSpacing===u.letterSpacing&&v.fontFamily===u.fontFamily&&v.fontSize===u.fontSize&&v.fontWeight===u.fontWeight&&v.fontWeightBold===u.fontWeightBold&&v.allowTransparency===u.allowTransparency&&v.deviceCharWidth===u.deviceCharWidth&&v.deviceCharHeight===u.deviceCharHeight&&v.drawBoldTextInBrightColors===u.drawBoldTextInBrightColors&&v.minimumContrastRatio===u.minimumContrastRatio&&v.colors.foreground.rgba===u.colors.foreground.rgba&&v.colors.background.rgba===u.colors.background.rgba},s.is256Color=function(v){return(50331648&v)==16777216||(50331648&v)==33554432}},237:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const d=a(399);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},860:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tryDrawCustomChar=s.powerlineDefinitions=s.boxDrawingDefinitions=s.blockElementDefinitions=void 0;const d=a(374);s.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const v={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};s.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(_,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M${.5-_},0 L${.5-_},1 M${.5+_},0 L${.5+_},1`},"":{1:(_,n)=>`M.5,1 L.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M${.5-_},1 L${.5-_},.5 L1,.5 M${.5+_},.5 L${.5+_},1`},"":{1:(_,n)=>`M1,${.5-n} L${.5-_},${.5-n} L${.5-_},1 M1,${.5+n} L${.5+_},${.5+n} L${.5+_},1`},"":{1:(_,n)=>`M0,${.5-n} L.5,${.5-n} L.5,1 M0,${.5+n} L.5,${.5+n}`},"":{1:(_,n)=>`M${.5+_},1 L${.5+_},.5 L0,.5 M${.5-_},.5 L${.5-_},1`},"":{1:(_,n)=>`M0,${.5+n} L${.5-_},${.5+n} L${.5-_},1 M0,${.5-n} L${.5+_},${.5-n} L${.5+_},1`},"":{1:(_,n)=>`M.5,0 L.5,${.5+n} L1,${.5+n} M.5,${.5-n} L1,${.5-n}`},"":{1:(_,n)=>`M1,.5 L${.5-_},.5 L${.5-_},0 M${.5+_},.5 L${.5+_},0`},"":{1:(_,n)=>`M1,${.5-n} L${.5+_},${.5-n} L${.5+_},0 M1,${.5+n} L${.5-_},${.5+n} L${.5-_},0`},"":{1:(_,n)=>`M0,${.5+n} L.5,${.5+n} L.5,0 M0,${.5-n} L.5,${.5-n}`},"":{1:(_,n)=>`M0,.5 L${.5+_},.5 L${.5+_},0 M${.5-_},.5 L${.5-_},0`},"":{1:(_,n)=>`M0,${.5-n} L${.5-_},${.5-n} L${.5-_},0 M0,${.5+n} L${.5+_},${.5+n} L${.5+_},0`},"":{1:(_,n)=>`M.5,0 L.5,1 M.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M${.5-_},0 L${.5-_},1 M${.5+_},0 L${.5+_},1 M${.5+_},.5 L1,.5`},"":{1:(_,n)=>`M${.5-_},0 L${.5-_},1 M1,${.5+n} L${.5+_},${.5+n} L${.5+_},1 M1,${.5-n} L${.5+_},${.5-n} L${.5+_},0`},"":{1:(_,n)=>`M.5,0 L.5,1 M0,${.5-n} L.5,${.5-n} M0,${.5+n} L.5,${.5+n}`},"":{1:(_,n)=>`M0,.5 L${.5-_},.5 M${.5-_},0 L${.5-_},1 M${.5+_},0 L${.5+_},1`},"":{1:(_,n)=>`M${.5+_},0 L${.5+_},1 M0,${.5+n} L${.5-_},${.5+n} L${.5-_},1 M0,${.5-n} L${.5-_},${.5-n} L${.5-_},0`},"":{1:(_,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n} M.5,${.5+n} L.5,1`},"":{1:(_,n)=>`M0,.5 L1,.5 M${.5-_},.5 L${.5-_},1 M${.5+_},.5 L${.5+_},1`},"":{1:(_,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L${.5-_},${.5+n} L${.5-_},1 M1,${.5+n} L${.5+_},${.5+n} L${.5+_},1`},"":{1:(_,n)=>`M.5,0 L.5,${.5-n} M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M0,.5 L1,.5 M${.5-_},.5 L${.5-_},0 M${.5+_},.5 L${.5+_},0`},"":{1:(_,n)=>`M0,${.5+n} L1,${.5+n} M0,${.5-n} L${.5-_},${.5-n} L${.5-_},0 M1,${.5-n} L${.5+_},${.5-n} L${.5+_},0`},"":{1:(_,n)=>`M.5,0 L.5,1 M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M0,.5 L1,.5 M${.5-_},0 L${.5-_},1 M${.5+_},0 L${.5+_},1`},"":{1:(_,n)=>`M0,${.5+n} L${.5-_},${.5+n} L${.5-_},1 M1,${.5+n} L${.5+_},${.5+n} L${.5+_},1 M0,${.5-n} L${.5-_},${.5-n} L${.5-_},0 M1,${.5-n} L${.5+_},${.5-n} L${.5+_},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(_,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,1,.5`},"":{1:(_,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,0,.5`},"":{1:(_,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,0,.5`},"":{1:(_,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,1,.5`}},s.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},s.powerlineDefinitions[""]=s.powerlineDefinitions[""],s.powerlineDefinitions[""]=s.powerlineDefinitions[""],s.tryDrawCustomChar=function(_,n,l,c,h,m,w,b){const x=s.blockElementDefinitions[n];if(x)return function(k,D,A,B,N,$){for(let I=0;I<D.length;I++){const R=D[I],T=N/8,P=$/8;k.fillRect(A+R.x*T,B+R.y*P,R.w*T,R.h*P)}}(_,x,l,c,h,m),!0;const y=v[n];if(y)return function(k,D,A,B,N,$){let I=u.get(D);I||(I=new Map,u.set(D,I));const R=k.fillStyle;if(typeof R!="string")throw new Error(`Unexpected fillStyle type "${R}"`);let T=I.get(R);if(!T){const P=D[0].length,O=D.length,W=document.createElement("canvas");W.width=P,W.height=O;const V=(0,d.throwIfFalsy)(W.getContext("2d")),Q=new ImageData(P,O);let q,Z,M,U;if(R.startsWith("#"))q=parseInt(R.slice(1,3),16),Z=parseInt(R.slice(3,5),16),M=parseInt(R.slice(5,7),16),U=R.length>7&&parseInt(R.slice(7,9),16)||1;else{if(!R.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${R}" when drawing pattern glyph`);[q,Z,M,U]=R.substring(5,R.length-1).split(",").map(j=>parseFloat(j))}for(let j=0;j<O;j++)for(let z=0;z<P;z++)Q.data[4*(j*P+z)]=q,Q.data[4*(j*P+z)+1]=Z,Q.data[4*(j*P+z)+2]=M,Q.data[4*(j*P+z)+3]=D[j][z]*(255*U);V.putImageData(Q,0,0),T=(0,d.throwIfFalsy)(k.createPattern(W,null)),I.set(R,T)}k.fillStyle=T,k.fillRect(A,B,N,$)}(_,y,l,c,h,m),!0;const S=s.boxDrawingDefinitions[n];if(S)return function(k,D,A,B,N,$,I){k.strokeStyle=k.fillStyle;for(const[R,T]of Object.entries(D)){let P;k.beginPath(),k.lineWidth=I*Number.parseInt(R),P=typeof T=="function"?T(.15,.15/$*N):T;for(const O of P.split(" ")){const W=O[0],V=C[W];if(!V){console.error(`Could not find drawing instructions for "${W}"`);continue}const Q=O.substring(1).split(",");Q[0]&&Q[1]&&V(k,E(Q,N,$,A,B,!0,I))}k.stroke(),k.closePath()}}(_,S,l,c,h,m,b),!0;const L=s.powerlineDefinitions[n];return!!L&&(function(k,D,A,B,N,$,I,R){var T,P;const O=new Path2D;O.rect(A,B,N,$),k.clip(O),k.beginPath();const W=I/12;k.lineWidth=R*W;for(const V of D.d.split(" ")){const Q=V[0],q=C[Q];if(!q){console.error(`Could not find drawing instructions for "${Q}"`);continue}const Z=V.substring(1).split(",");Z[0]&&Z[1]&&q(k,E(Z,N,$,A,B,!1,R,((T=D.leftPadding)!==null&&T!==void 0?T:0)*(W/2),((P=D.rightPadding)!==null&&P!==void 0?P:0)*(W/2)))}D.type===1?(k.strokeStyle=k.fillStyle,k.stroke()):k.fill(),k.closePath()}(_,L,l,c,h,m,w,b),!0)};const u=new Map;function p(_,n,l=0){return Math.max(Math.min(_,n),l)}const C={C:(_,n)=>_.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),L:(_,n)=>_.lineTo(n[0],n[1]),M:(_,n)=>_.moveTo(n[0],n[1])};function E(_,n,l,c,h,m,w,b=0,x=0){const y=_.map(S=>parseFloat(S)||parseInt(S));if(y.length<2)throw new Error("Too few arguments for instruction");for(let S=0;S<y.length;S+=2)y[S]*=n-b*w-x*w,m&&y[S]!==0&&(y[S]=p(Math.round(y[S]+.5)-.5,n,0)),y[S]+=c+b*w;for(let S=1;S<y.length;S+=2)y[S]*=l,m&&y[S]!==0&&(y[S]=p(Math.round(y[S]+.5)-.5,l,0)),y[S]+=h;return y}},56:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.observeDevicePixelDimensions=void 0;const d=a(859);s.observeDevicePixelDimensions=function(v,u,p){let C=new u.ResizeObserver(E=>{const _=E.find(c=>c.target===v);if(!_)return;if(!("devicePixelContentBoxSize"in _))return C==null||C.disconnect(),void(C=void 0);const n=_.devicePixelContentBoxSize[0].inlineSize,l=_.devicePixelContentBoxSize[0].blockSize;n>0&&l>0&&p(n,l)});try{C.observe(v,{box:["device-pixel-content-box"]})}catch{C.disconnect(),C=void 0}return(0,d.toDisposable)(()=>C==null?void 0:C.disconnect())}},374:(g,s)=>{function a(d){return 57508<=d&&d<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},s.excludeFromContrastRatioDemands=function(d){return a(d)||function(v){return 9472<=v&&v<=9631}(d)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(v,u,p,C=!1){if(this.selectionStart=u,this.selectionEnd=p,!u||!p||u[0]===p[0]&&u[1]===p[1])return void this.clear();const E=u[1]-v.buffer.active.viewportY,_=p[1]-v.buffer.active.viewportY,n=Math.max(E,0),l=Math.min(_,v.rows-1);n>=v.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=C,this.viewportStartRow=E,this.viewportEndRow=_,this.viewportCappedStartRow=n,this.viewportCappedEndRow=l,this.startCol=u[0],this.endCol=p[0])}isCellSelected(v,u,p){return!!this.hasSelection&&(p-=v.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?u>=this.startCol&&p>=this.viewportCappedStartRow&&u<this.endCol&&p<=this.viewportCappedEndRow:u<this.startCol&&p>=this.viewportCappedStartRow&&u>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&u>=this.startCol&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&u>=this.startCol)}}s.createSelectionRenderModel=function(){return new a}},509:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextureAtlas=void 0;const d=a(237),v=a(855),u=a(147),p=a(160),C=a(860),E=a(374),_=a(485),n=a(385),l=a(345),c={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let h;class m{constructor(S,L,k){this._document=S,this._config=L,this._unicodeService=k,this._didWarmUp=!1,this._cacheMap=new _.FourKeyMap,this._cacheMapCombined=new _.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new u.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new l.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new l.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=x(S,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,E.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}get pages(){return this._pages}dispose(){for(const S of this.pages)S.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const S=new n.IdleTaskQueue;for(let L=33;L<126;L++)S.enqueue(()=>{if(!this._cacheMap.get(L,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT)){const k=this._drawToCache(L,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT);this._cacheMap.set(L,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT,k)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const S of this._pages)S.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages/2)&&queueMicrotask(()=>{const L=this._pages.filter(I=>2*I.canvas.width<=(m.maxTextureSize||4096)).sort((I,R)=>R.canvas.width!==I.canvas.width?R.canvas.width-I.canvas.width:R.percentageUsed-I.percentageUsed);let k=-1,D=0;for(let I=0;I<L.length;I++)if(L[I].canvas.width!==D)k=I,D=L[I].canvas.width;else if(I-k==3)break;const A=L.slice(k,k+4),B=A.map(I=>I.glyphs[0].texturePage).sort((I,R)=>I>R?1:-1),N=B[0],$=this._mergePages(A,N);$.version++,this._pages[N]=$;for(let I=B.length-1;I>=1;I--)this._deletePage(B[I]);this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire($.canvas)});const S=new w(this._document,this._textureSize);return this._pages.push(S),this._activePages.push(S),this._onAddTextureAtlasCanvas.fire(S.canvas),S}_mergePages(S,L){const k=2*S[0].canvas.width,D=new w(this._document,k,S);for(const[A,B]of S.entries()){const N=A*B.canvas.width%k,$=Math.floor(A/2)*B.canvas.height;D.ctx.drawImage(B.canvas,N,$);for(const R of B.glyphs)R.texturePage=L,R.sizeClipSpace.x=R.size.x/k,R.sizeClipSpace.y=R.size.y/k,R.texturePosition.x+=N,R.texturePosition.y+=$,R.texturePositionClipSpace.x=R.texturePosition.x/k,R.texturePositionClipSpace.y=R.texturePosition.y/k;this._onRemoveTextureAtlasCanvas.fire(B.canvas);const I=this._activePages.indexOf(B);I!==-1&&this._activePages.splice(I,1)}return D}_deletePage(S){this._pages.splice(S,1);for(let L=S;L<this._pages.length;L++){const k=this._pages[L];for(const D of k.glyphs)D.texturePage--;k.version++}}getRasterizedGlyphCombinedChar(S,L,k,D){return this._getFromCacheMap(this._cacheMapCombined,S,L,k,D)}getRasterizedGlyph(S,L,k,D){return this._getFromCacheMap(this._cacheMap,S,L,k,D)}_getFromCacheMap(S,L,k,D,A){return h=S.get(L,k,D,A),h||(h=this._drawToCache(L,k,D,A),S.set(L,k,D,A,h)),h}_getColorFromAnsiIndex(S){if(S>=this._config.colors.ansi.length)throw new Error("No color found for idx "+S);return this._config.colors.ansi[S]}_getBackgroundColor(S,L,k,D){if(this._config.allowTransparency)return p.NULL_COLOR;let A;switch(S){case 16777216:case 33554432:A=this._getColorFromAnsiIndex(L);break;case 50331648:const B=u.AttributeData.toColorRGB(L);A=p.rgba.toColor(B[0],B[1],B[2]);break;default:A=k?this._config.colors.foreground:this._config.colors.background}return D&&(A=p.color.blend(this._config.colors.background,p.color.multiplyOpacity(A,d.DIM_OPACITY))),A}_getForegroundColor(S,L,k,D,A,B,N,$,I,R){const T=this._getMinimumContrastColor(S,L,k,D,A,B,!1,I,R);if(T)return T;let P;switch(A){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&B<8&&(B+=8),P=this._getColorFromAnsiIndex(B);break;case 50331648:const O=u.AttributeData.toColorRGB(B);P=p.rgba.toColor(O[0],O[1],O[2]);break;default:P=N?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(P=p.color.opaque(P)),$&&(P=p.color.multiplyOpacity(P,d.DIM_OPACITY)),P}_resolveBackgroundRgba(S,L,k){switch(S){case 16777216:case 33554432:return this._getColorFromAnsiIndex(L).rgba;case 50331648:return L<<8;default:return k?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(S,L,k,D){switch(S){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&D&&L<8&&(L+=8),this._getColorFromAnsiIndex(L).rgba;case 50331648:return L<<8;default:return k?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(S,L,k,D,A,B,N,$,I){if(this._config.minimumContrastRatio===1||I)return;const R=this._config.colors.contrastCache.getColor(S,D);if(R!==void 0)return R||void 0;const T=this._resolveBackgroundRgba(L,k,N),P=this._resolveForegroundRgba(A,B,N,$),O=p.rgba.ensureContrastRatio(T,P,this._config.minimumContrastRatio);if(!O)return void this._config.colors.contrastCache.setColor(S,D,null);const W=p.rgba.toColor(O>>24&255,O>>16&255,O>>8&255);return this._config.colors.contrastCache.setColor(S,D,W),W}_drawToCache(S,L,k,D){const A=typeof S=="number"?String.fromCharCode(S):S,B=this._config.deviceCellWidth*Math.max(A.length,2)+4;this._tmpCanvas.width<B&&(this._tmpCanvas.width=B);const N=this._config.deviceCellHeight+8;if(this._tmpCanvas.height<N&&(this._tmpCanvas.height=N),this._tmpCtx.save(),this._workAttributeData.fg=k,this._workAttributeData.bg=L,this._workAttributeData.extended.ext=D,this._workAttributeData.isInvisible())return c;const $=!!this._workAttributeData.isBold(),I=!!this._workAttributeData.isInverse(),R=!!this._workAttributeData.isDim(),T=!!this._workAttributeData.isItalic(),P=!!this._workAttributeData.isUnderline(),O=!!this._workAttributeData.isStrikethrough();let W=this._workAttributeData.getFgColor(),V=this._workAttributeData.getFgColorMode(),Q=this._workAttributeData.getBgColor(),q=this._workAttributeData.getBgColorMode();if(I){const ie=W;W=Q,Q=ie;const de=V;V=q,q=de}const Z=this._getBackgroundColor(q,Q,I,R);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=Z.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const M=$?this._config.fontWeightBold:this._config.fontWeight,U=T?"italic":"";this._tmpCtx.font=`${U} ${M} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=d.TEXT_BASELINE;const j=A.length===1&&(0,E.isPowerlineGlyph)(A.charCodeAt(0)),z=A.length===1&&(0,E.isRestrictedPowerlineGlyph)(A.charCodeAt(0)),te=this._getForegroundColor(L,q,Q,k,V,W,I,R,$,(0,E.excludeFromContrastRatioDemands)(A.charCodeAt(0)));this._tmpCtx.fillStyle=te.css;const G=z?0:4;let ae=!1;this._config.customGlyphs!==!1&&(ae=(0,C.tryDrawCustomChar)(this._tmpCtx,A,G,G,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let ke,Ae=!j;if(ke=typeof S=="number"?this._unicodeService.wcwidth(S):this._unicodeService.getStringCellWidth(S),P){this._tmpCtx.save();const ie=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),de=ie%2==1?.5:0;if(this._tmpCtx.lineWidth=ie,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Ae=!1,this._tmpCtx.strokeStyle=`rgb(${u.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Ae=!1;let qe=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&qe<8&&(qe+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(qe).css}this._tmpCtx.beginPath();const ye=G,Te=Math.ceil(G+this._config.deviceCharHeight)-de,We=G+this._config.deviceCharHeight+ie-de,bt=Math.ceil(G+this._config.deviceCharHeight+2*ie)-de;for(let qe=0;qe<ke;qe++){this._tmpCtx.save();const Se=ye+qe*this._config.deviceCellWidth,et=ye+(qe+1)*this._config.deviceCellWidth,_t=Se+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Se,Te),this._tmpCtx.lineTo(et,Te),this._tmpCtx.moveTo(Se,bt),this._tmpCtx.lineTo(et,bt);break;case 3:const Bt=ie<=1?bt:Math.ceil(G+this._config.deviceCharHeight-ie/2)-de,pe=ie<=1?Te:Math.ceil(G+this._config.deviceCharHeight+ie/2)-de,nn=new Path2D;nn.rect(Se,Te,this._config.deviceCellWidth,bt-Te),this._tmpCtx.clip(nn),this._tmpCtx.moveTo(Se-this._config.deviceCellWidth/2,We),this._tmpCtx.bezierCurveTo(Se-this._config.deviceCellWidth/2,pe,Se,pe,Se,We),this._tmpCtx.bezierCurveTo(Se,Bt,_t,Bt,_t,We),this._tmpCtx.bezierCurveTo(_t,pe,et,pe,et,We),this._tmpCtx.bezierCurveTo(et,Bt,et+this._config.deviceCellWidth/2,Bt,et+this._config.deviceCellWidth/2,We);break;case 4:this._tmpCtx.setLineDash([2*this._config.devicePixelRatio,this._config.devicePixelRatio]),this._tmpCtx.moveTo(Se,Te),this._tmpCtx.lineTo(et,Te);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Se,Te),this._tmpCtx.lineTo(et,Te);break;default:this._tmpCtx.moveTo(Se,Te),this._tmpCtx.lineTo(et,Te)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ae&&this._config.fontSize>=12&&!this._config.allowTransparency&&A!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const qe=this._tmpCtx.measureText(A);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in qe&&qe.actualBoundingBoxDescent>0){this._tmpCtx.save();const Se=new Path2D;Se.rect(ye,Te-Math.ceil(ie/2),this._config.deviceCellWidth,bt-Te+Math.ceil(ie/2)),this._tmpCtx.clip(Se),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=Z.css,this._tmpCtx.strokeText(A,G,G+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(ae||this._tmpCtx.fillText(A,G,G+this._config.deviceCharHeight),A==="_"&&!this._config.allowTransparency){let ie=b(this._tmpCtx.getImageData(G,G,this._config.deviceCellWidth,this._config.deviceCellHeight),Z,te,Ae);if(ie)for(let de=1;de<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=Z.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(A,G,G+this._config.deviceCharHeight-de),ie=b(this._tmpCtx.getImageData(G,G,this._config.deviceCellWidth,this._config.deviceCellHeight),Z,te,Ae),ie);de++);}if(O){const ie=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),de=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=ie,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(G,G+Math.floor(this._config.deviceCharHeight/2)-de),this._tmpCtx.lineTo(G+this._config.deviceCharWidth*ke,G+Math.floor(this._config.deviceCharHeight/2)-de),this._tmpCtx.stroke()}this._tmpCtx.restore();const Et=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let re;if(re=this._config.allowTransparency?function(ie){for(let de=0;de<ie.data.length;de+=4)if(ie.data[de+3]>0)return!1;return!0}(Et):b(Et,Z,te,Ae),re)return c;const he=this._findGlyphBoundingBox(Et,this._workBoundingBox,B,z,ae,G);let le,ue;for(;;){if(this._activePages.length===0){const ie=this._createNewPage();le=ie,ue=ie.currentRow,ue.height=he.size.y;break}le=this._activePages[this._activePages.length-1],ue=le.currentRow;for(const ie of this._activePages)he.size.y<=ie.currentRow.height&&(le=ie,ue=ie.currentRow);for(let ie=this._activePages.length-1;ie>=0;ie--)for(const de of this._activePages[ie].fixedRows)de.height<=ue.height&&he.size.y<=de.height&&(le=this._activePages[ie],ue=de);if(ue.y+he.size.y>=le.canvas.height||ue.height>he.size.y+2){let ie=!1;if(le.currentRow.y+le.currentRow.height+he.size.y>=le.canvas.height){let de;for(const ye of this._activePages)if(ye.currentRow.y+ye.currentRow.height+he.size.y<ye.canvas.height){de=ye;break}if(de)le=de;else{const ye=this._createNewPage();le=ye,ue=ye.currentRow,ue.height=he.size.y,ie=!0}}ie||(le.currentRow.height>0&&le.fixedRows.push(le.currentRow),ue={x:0,y:le.currentRow.y+le.currentRow.height,height:he.size.y},le.fixedRows.push(ue),le.currentRow={x:0,y:ue.y+ue.height,height:0})}if(ue.x+he.size.x<=le.canvas.width)break;ue===le.currentRow?(ue.x=0,ue.y+=ue.height,ue.height=0):le.fixedRows.splice(le.fixedRows.indexOf(ue),1)}return he.texturePage=this._pages.indexOf(le),he.texturePosition.x=ue.x,he.texturePosition.y=ue.y,he.texturePositionClipSpace.x=ue.x/le.canvas.width,he.texturePositionClipSpace.y=ue.y/le.canvas.height,he.sizeClipSpace.x/=le.canvas.width,he.sizeClipSpace.y/=le.canvas.height,ue.height=Math.max(ue.height,he.size.y),ue.x+=he.size.x,le.ctx.putImageData(Et,he.texturePosition.x-this._workBoundingBox.left,he.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,he.size.x,he.size.y),le.addGlyph(he),le.version++,he}_findGlyphBoundingBox(S,L,k,D,A,B){L.top=0;const N=D?this._config.deviceCellHeight:this._tmpCanvas.height,$=D?this._config.deviceCellWidth:k;let I=!1;for(let R=0;R<N;R++){for(let T=0;T<$;T++){const P=R*this._tmpCanvas.width*4+4*T+3;if(S.data[P]!==0){L.top=R,I=!0;break}}if(I)break}L.left=0,I=!1;for(let R=0;R<B+$;R++){for(let T=0;T<N;T++){const P=T*this._tmpCanvas.width*4+4*R+3;if(S.data[P]!==0){L.left=R,I=!0;break}}if(I)break}L.right=$,I=!1;for(let R=B+$-1;R>=B;R--){for(let T=0;T<N;T++){const P=T*this._tmpCanvas.width*4+4*R+3;if(S.data[P]!==0){L.right=R,I=!0;break}}if(I)break}L.bottom=N,I=!1;for(let R=N-1;R>=0;R--){for(let T=0;T<$;T++){const P=R*this._tmpCanvas.width*4+4*T+3;if(S.data[P]!==0){L.bottom=R,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:L.right-L.left+1,y:L.bottom-L.top+1},sizeClipSpace:{x:L.right-L.left+1,y:L.bottom-L.top+1},offset:{x:-L.left+B+(D||A?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-L.top+B+(D||A?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}s.TextureAtlas=m;class w{constructor(S,L,k){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],k)for(const D of k)this._glyphs.push(...D.glyphs),this._usedPixels+=D._usedPixels;this.canvas=x(S,L,L),this.ctx=(0,E.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(S){this._glyphs.push(S),this._usedPixels+=S.size.x*S.size.y}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function b(y,S,L,k){const D=S.rgba>>>24,A=S.rgba>>>16&255,B=S.rgba>>>8&255,N=L.rgba>>>24,$=L.rgba>>>16&255,I=L.rgba>>>8&255,R=Math.floor((Math.abs(D-N)+Math.abs(A-$)+Math.abs(B-I))/12);let T=!0;for(let P=0;P<y.data.length;P+=4)y.data[P]===D&&y.data[P+1]===A&&y.data[P+2]===B||k&&Math.abs(y.data[P]-D)+Math.abs(y.data[P+1]-A)+Math.abs(y.data[P+2]-B)<R?y.data[P+3]=0:T=!1;return T}function x(y,S,L){const k=y.createElement("canvas");return k.width=S,k.height=L,k}},160:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;const d=a(399);let v=0,u=0,p=0,C=0;var E,_,n;function l(h){const m=h.toString(16);return m.length<2?"0"+m:m}function c(h,m){return h<m?(m+.05)/(h+.05):(h+.05)/(m+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(h){h.toCss=function(m,w,b,x){return x!==void 0?`#${l(m)}${l(w)}${l(b)}${l(x)}`:`#${l(m)}${l(w)}${l(b)}`},h.toRgba=function(m,w,b,x=255){return(m<<24|w<<16|b<<8|x)>>>0}}(E=s.channels||(s.channels={})),function(h){function m(w,b){return C=Math.round(255*b),[v,u,p]=n.toChannels(w.rgba),{css:E.toCss(v,u,p,C),rgba:E.toRgba(v,u,p,C)}}h.blend=function(w,b){if(C=(255&b.rgba)/255,C===1)return{css:b.css,rgba:b.rgba};const x=b.rgba>>24&255,y=b.rgba>>16&255,S=b.rgba>>8&255,L=w.rgba>>24&255,k=w.rgba>>16&255,D=w.rgba>>8&255;return v=L+Math.round((x-L)*C),u=k+Math.round((y-k)*C),p=D+Math.round((S-D)*C),{css:E.toCss(v,u,p),rgba:E.toRgba(v,u,p)}},h.isOpaque=function(w){return(255&w.rgba)==255},h.ensureContrastRatio=function(w,b,x){const y=n.ensureContrastRatio(w.rgba,b.rgba,x);if(y)return n.toColor(y>>24&255,y>>16&255,y>>8&255)},h.opaque=function(w){const b=(255|w.rgba)>>>0;return[v,u,p]=n.toChannels(b),{css:E.toCss(v,u,p),rgba:b}},h.opacity=m,h.multiplyOpacity=function(w,b){return C=255&w.rgba,m(w,C*b/255)},h.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(s.color||(s.color={})),function(h){let m,w;if(!d.isNode){const b=document.createElement("canvas");b.width=1,b.height=1;const x=b.getContext("2d",{willReadFrequently:!0});x&&(m=x,m.globalCompositeOperation="copy",w=m.createLinearGradient(0,0,1,1))}h.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return v=parseInt(b.slice(1,2).repeat(2),16),u=parseInt(b.slice(2,3).repeat(2),16),p=parseInt(b.slice(3,4).repeat(2),16),n.toColor(v,u,p);case 5:return v=parseInt(b.slice(1,2).repeat(2),16),u=parseInt(b.slice(2,3).repeat(2),16),p=parseInt(b.slice(3,4).repeat(2),16),C=parseInt(b.slice(4,5).repeat(2),16),n.toColor(v,u,p,C);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}const x=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return v=parseInt(x[1]),u=parseInt(x[2]),p=parseInt(x[3]),C=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),n.toColor(v,u,p,C);if(!m||!w)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=w,m.fillStyle=b,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[v,u,p,C]=m.getImageData(0,0,1,1).data,C!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:E.toRgba(v,u,p,C),css:b}}}(s.css||(s.css={})),function(h){function m(w,b,x){const y=w/255,S=b/255,L=x/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.0722*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))}h.relativeLuminance=function(w){return m(w>>16&255,w>>8&255,255&w)},h.relativeLuminance2=m}(_=s.rgb||(s.rgb={})),function(h){function m(b,x,y){const S=b>>24&255,L=b>>16&255,k=b>>8&255;let D=x>>24&255,A=x>>16&255,B=x>>8&255,N=c(_.relativeLuminance2(D,A,B),_.relativeLuminance2(S,L,k));for(;N<y&&(D>0||A>0||B>0);)D-=Math.max(0,Math.ceil(.1*D)),A-=Math.max(0,Math.ceil(.1*A)),B-=Math.max(0,Math.ceil(.1*B)),N=c(_.relativeLuminance2(D,A,B),_.relativeLuminance2(S,L,k));return(D<<24|A<<16|B<<8|255)>>>0}function w(b,x,y){const S=b>>24&255,L=b>>16&255,k=b>>8&255;let D=x>>24&255,A=x>>16&255,B=x>>8&255,N=c(_.relativeLuminance2(D,A,B),_.relativeLuminance2(S,L,k));for(;N<y&&(D<255||A<255||B<255);)D=Math.min(255,D+Math.ceil(.1*(255-D))),A=Math.min(255,A+Math.ceil(.1*(255-A))),B=Math.min(255,B+Math.ceil(.1*(255-B))),N=c(_.relativeLuminance2(D,A,B),_.relativeLuminance2(S,L,k));return(D<<24|A<<16|B<<8|255)>>>0}h.ensureContrastRatio=function(b,x,y){const S=_.relativeLuminance(b>>8),L=_.relativeLuminance(x>>8);if(c(S,L)<y){if(L<S){const A=m(b,x,y),B=c(S,_.relativeLuminance(A>>8));if(B<y){const N=w(b,x,y);return B>c(S,_.relativeLuminance(N>>8))?A:N}return A}const k=w(b,x,y),D=c(S,_.relativeLuminance(k>>8));if(D<y){const A=m(b,x,y);return D>c(S,_.relativeLuminance(A>>8))?k:A}return k}},h.reduceLuminance=m,h.increaseLuminance=w,h.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]},h.toColor=function(b,x,y,S){return{css:E.toCss(b,x,y,S),rgba:E.toRgba(b,x,y,S)}}}(n=s.rgba||(s.rgba={})),s.toPaddedHex=l,s.contrastRatio=c},345:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===a)return void this._listeners.splice(d,1)}}})),this._event}fire(a,d){const v=[];for(let u=0;u<this._listeners.length;u++)v.push(this._listeners[u]);for(let u=0;u<v.length;u++)v[u].call(void 0,a,d)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},s.forwardEvent=function(a,d){return a(v=>d.fire(v))}},859:(g,s)=>{function a(d){for(const v of d)v.dispose();d.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const v=this._disposables.indexOf(d);v!==-1&&this._disposables.splice(v,1)}},s.toDisposable=function(d){return{dispose:d}},s.disposeArray=a,s.getDisposeArrayDisposable=function(d){return{dispose:()=>a(d)}}},485:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(v,u,p){this._data[v]||(this._data[v]={}),this._data[v][u]=p}get(v,u){return this._data[v]?this._data[v][u]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(d,v,u,p,C){this._data.get(d,v)||this._data.set(d,v,new a),this._data.get(d,v).set(u,p,C)}get(d,v,u,p){var C;return(C=this._data.get(d,v))===null||C===void 0?void 0:C.get(u,p)}clear(){this._data.clear()}}},399:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";const a=s.isNode?"node":navigator.userAgent,d=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;const v=a.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),s.isIpad=d==="iPad",s.isIphone=d==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),s.isLinux=d.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},385:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const d=a(399);class v{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let E=0,_=0,n=C.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(E=Date.now(),this._tasks[this._i]()||this._i++,E=Math.max(1,Date.now()-E),_=Math.max(E,_),l=C.timeRemaining(),1.5*_>l)return n-E<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-E))}ms`),void this._start();n=l}this.clear()}}class u extends v{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const E=Date.now()+C;return{timeRemaining:()=>Math.max(0,E-Date.now())}}}s.PriorityTaskQueue=u,s.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:u,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){const u=new a;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=a;class d{constructor(u=0,p=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=p}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=d},782:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const d=a(133),v=a(855),u=a(147);class p extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(E){const _=new p;return _.setFromCharData(E),_}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(E){this.fg=E[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let _=!1;if(E[v.CHAR_DATA_CHAR_INDEX].length>2)_=!0;else if(E[v.CHAR_DATA_CHAR_INDEX].length===2){const n=E[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const l=E[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(n-55296)+l-56320+65536|E[v.CHAR_DATA_WIDTH_INDEX]<<22:_=!0}else _=!0}else this.content=E[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|E[v.CHAR_DATA_WIDTH_INDEX]<<22;_&&(this.combinedData=E[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|E[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=p},855:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},133:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,d=0,v=a.length){let u="";for(let p=d;p<v;++p){let C=a[p];C>65535?(C-=65536,u+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):u+=String.fromCharCode(C)}return u},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,d){const v=a.length;if(!v)return 0;let u=0,p=0;if(this._interim){const C=a.charCodeAt(p++);56320<=C&&C<=57343?d[u++]=1024*(this._interim-55296)+C-56320+65536:(d[u++]=this._interim,d[u++]=C),this._interim=0}for(let C=p;C<v;++C){const E=a.charCodeAt(C);if(55296<=E&&E<=56319){if(++C>=v)return this._interim=E,u;const _=a.charCodeAt(C);56320<=_&&_<=57343?d[u++]=1024*(E-55296)+_-56320+65536:(d[u++]=E,d[u++]=_)}else E!==65279&&(d[u++]=E)}return u}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,d){const v=a.length;if(!v)return 0;let u,p,C,E,_=0,n=0,l=0;if(this.interim[0]){let m=!1,w=this.interim[0];w&=(224&w)==192?31:(240&w)==224?15:7;let b,x=0;for(;(b=63&this.interim[++x])&&x<4;)w<<=6,w|=b;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,S=y-x;for(;l<S;){if(l>=v)return 0;if(b=a[l++],(192&b)!=128){l--,m=!0;break}this.interim[x++]=b,w<<=6,w|=63&b}m||(y===2?w<128?l--:d[_++]=w:y===3?w<2048||w>=55296&&w<=57343||w===65279||(d[_++]=w):w<65536||w>1114111||(d[_++]=w)),this.interim.fill(0)}const c=v-4;let h=l;for(;h<v;){for(;!(!(h<c)||128&(u=a[h])||128&(p=a[h+1])||128&(C=a[h+2])||128&(E=a[h+3]));)d[_++]=u,d[_++]=p,d[_++]=C,d[_++]=E,h+=4;if(u=a[h++],u<128)d[_++]=u;else if((224&u)==192){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(n=(31&u)<<6|63&p,n<128){h--;continue}d[_++]=n}else if((240&u)==224){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,_;if(C=a[h++],(192&C)!=128){h--;continue}if(n=(15&u)<<12|(63&p)<<6|63&C,n<2048||n>=55296&&n<=57343||n===65279)continue;d[_++]=n}else if((248&u)==240){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,_;if(C=a[h++],(192&C)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,this.interim[2]=C,_;if(E=a[h++],(192&E)!=128){h--;continue}if(n=(7&u)<<18|(63&p)<<12|(63&C)<<6|63&E,n<65536||n>1114111)continue;d[_++]=n}}return _}}}},i={};function o(g){var s=i[g];if(s!==void 0)return s.exports;var a=i[g]={exports:{}};return r[g](a,a.exports,o),a.exports}var f={};return(()=>{var g=f;Object.defineProperty(g,"__esModule",{value:!0}),g.WebglAddon=void 0;const s=o(345),a=o(859),d=o(399),v=o(666);class u extends a.Disposable{constructor(C){if(d.isSafari&&(0,d.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=C,this._onChangeTextureAtlas=this.register(new s.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new s.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new s.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new s.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(C){const E=C._core;if(!C.element)return void this.register(E.onWillOpen(()=>this.activate(C)));this._terminal=C;const _=E.coreService,n=E.optionsService,l=E,c=l._renderService,h=l._characterJoinerService,m=l._charSizeService,w=l._coreBrowserService,b=l._decorationService,x=l._themeService;this._renderer=this.register(new v.WebglRenderer(C,h,m,w,_,b,n,x,this._preserveDrawingBuffer)),this.register((0,s.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,s.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,s.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,s.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),c.setRenderer(this._renderer),this.register((0,a.toDisposable)(()=>{const y=this._terminal._core._renderService;y.setRenderer(this._terminal._core._createRenderer()),y.handleResize(C.cols,C.rows)}))}get textureAtlas(){var C;return(C=this._renderer)===null||C===void 0?void 0:C.textureAtlas}clearTextureAtlas(){var C;(C=this._renderer)===null||C===void 0||C.clearTextureAtlas()}}g.WebglAddon=u})(),f})()})})(J_);var Ly=J_.exports;function Ry({containerName:e}){const t=F.useRef(null),r=F.useRef(null),i=F.useRef(null),[o]=s_(G_),[f,g]=F.useState(!1),[s,a]=F.useState(!1),d=e||o,v=u=>{var C;const p=i.current;p&&p.readyState===WebSocket.OPEN&&p.send(u),(C=r.current)==null||C.focus()};return F.useEffect(()=>{a("ontouchstart"in window||navigator.maxTouchPoints>0)},[]),F.useEffect(()=>{if(!d||!t.current)return;g(!0),r.current&&r.current.dispose(),i.current&&i.current.close();const u=new by.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',scrollback:5e3,drawBoldTextInBrightColors:!0}),p=new xy.FitAddon;u.loadAddon(p);try{const C=new Ly.WebglAddon;u.loadAddon(C)}catch{}r.current=u;try{u.open(t.current),u.focus(),setTimeout(()=>{try{p.fit();const y=i.current;if(y&&y.readyState===WebSocket.OPEN){const S=u.cols,L=u.rows;y.send(`__RESIZE__:${S},${L}`)}}catch(y){console.warn("Failed to fit terminal:",y)}},100);const C=window.location.protocol==="https:"?"wss":"ws",E=new URLSearchParams(window.location.search).get("token")||d,_=new URLSearchParams(window.location.search),n=_.get("run"),l=_.get("run_b64"),c=_.get("cwd"),h=_.get("cwd_b64"),m=new URLSearchParams;m.set("token",E),l?m.set("run_b64",l):n&&m.set("run",n),h?m.set("cwd_b64",h):c&&m.set("cwd",c);const w=new WebSocket(`${C}://${window.location.host}/terminal/${d}?${m.toString()}`);i.current=w,w.onopen=()=>{g(!1),u.write(`Connected to container...\r
`);try{p.fit();const y=u.cols,S=u.rows;w.send(`__RESIZE__:${y},${S}`)}catch{}},w.onmessage=y=>{try{u.write(y.data)}catch(S){console.error("Failed to write to terminal:",S)}},w.onerror=y=>{console.error("WebSocket error:",y),g(!1),u.write(`\r
Connection error. Please try again.\r
`)},w.onclose=()=>{g(!1),u.write(`\r
Connection closed.\r
`)},u.onData(y=>{w.readyState===WebSocket.OPEN&&w.send(y)});const b=()=>{try{p.fit();const y=i.current;if(y&&y.readyState===WebSocket.OPEN){const S=u.cols,L=u.rows;y.send(`__RESIZE__:${S},${L}`)}}catch(y){console.warn("Failed to fit terminal on resize:",y)}};window.addEventListener("resize",b);let x=null;return t.current&&(x=new ResizeObserver(()=>b()),x.observe(t.current)),()=>{window.removeEventListener("resize",b),x&&x.disconnect(),w.readyState===WebSocket.OPEN&&w.close(),u.dispose()}}catch(C){console.error("Failed to initialize terminal:",C),g(!1)}},[d]),d?X.jsxs("div",{className:"h-full w-full relative",children:[f&&X.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 text-white z-10",children:"Connecting to terminal..."}),s&&X.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2 z-20",children:[X.jsx("button",{className:"px-2 py-1 text-sm bg-gray-700 text-white rounded",onClick:()=>v(""),children:"Ctrl+C"}),X.jsx("button",{className:"px-2 py-1 text-sm bg-gray-700 text-white rounded",onClick:()=>v("\x1B"),children:"Esc"})]}),X.jsx("div",{ref:t,className:"h-full w-full"})]}):X.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-500",children:"No container specified"})}function ky({containerName:e}){const[t]=s_(G_),r=e||t,{data:i,isLoading:o,error:f}=Yf({queryKey:["diff",r],queryFn:async()=>{const s=await fetch(`/api/changed/${r}`);if(!s.ok)throw new Error("failed");return s.json()},enabled:!!r,refetchInterval:5e3});if(!r)return X.jsx("p",{className:"p-4",children:"No container specified."});if(o)return X.jsx("p",{className:"p-4",children:"Loading..."});if(f)return X.jsx("p",{className:"p-4",children:"Error loading diff."});function g(s){const a=s.split(`
`),d=[];let v=0,u=0;const p=/@@ -(\d+),?\d* \+(\d+),?\d* @@/;for(const C of a)if(C.startsWith("@@")){const E=C.match(p);E&&(v=parseInt(E[1],10),u=parseInt(E[2],10)),d.push({content:C,type:"hunk"})}else C.startsWith("+")&&!C.startsWith("+++")?d.push({content:C,oldNumber:void 0,newNumber:u++,type:"add"}):C.startsWith("-")&&!C.startsWith("---")?d.push({content:C,oldNumber:v++,newNumber:void 0,type:"remove"}):d.push({content:C,oldNumber:v++,newNumber:u++,type:"context"});return d}return X.jsx("div",{className:"p-2 space-y-4 text-sm",children:i==null?void 0:i.files.map(s=>X.jsxs("div",{children:[X.jsxs("h3",{className:"font-medium",children:[s.path," (",s.status,")"]}),s.diff?X.jsx("div",{className:"bg-gray-100 p-2 overflow-auto text-xs font-mono",children:g(s.diff).map((a,d)=>{let v="flex whitespace-pre";return a.type==="add"?v+=" text-green-700 bg-green-100":a.type==="remove"?v+=" text-red-700 bg-red-100":a.type==="hunk"&&(v+=" text-purple-700"),X.jsxs("div",{className:v,children:[X.jsx("span",{className:"w-12 text-right pr-2 text-gray-500 select-none",children:a.oldNumber??""}),X.jsx("span",{className:"w-12 text-right pr-2 text-gray-500 select-none",children:a.newNumber??""}),X.jsx("span",{className:"flex-1",children:a.content})]},d)})}):X.jsx("div",{className:"bg-gray-100 p-2 overflow-auto text-xs",children:"No diff"})]},s.path))})}function Dy(){const[e,t]=F.useState("/"),r=Mc(),{data:i,isLoading:o,error:f}=Yf({queryKey:["list",e],queryFn:async()=>{const a=await fetch(`/api/list?path=${encodeURIComponent(e)}`);if(!a.ok)throw new Error("failed");return a.json()}}),g=()=>{if(e==="/")return;const a=e.replace(/\/?[^/]+$/,"")||"/";t(a)},s=async()=>{const a=await fetch("/api/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,agent:"claude"})});if(a.ok){const d=await a.json();r(`/container/${d.container}`)}};return o?X.jsx("p",{className:"p-4",children:"Loading..."}):f?X.jsx("p",{className:"p-4",children:"Error loading directory."}):X.jsxs("div",{className:"p-4 space-y-2",children:[X.jsxs("div",{className:"flex space-x-2",children:[X.jsx("button",{className:"px-2 py-1 bg-gray-200",onClick:g,children:"Up"}),X.jsx("button",{className:"px-2 py-1 bg-blue-500 text-white",onClick:s,children:"Start Here"}),X.jsx("span",{className:"ml-4",children:e})]}),X.jsx("ul",{className:"space-y-1",children:i==null?void 0:i.filter(a=>a.is_dir).map(a=>X.jsx("li",{children:X.jsx("button",{className:"text-blue-600 underline",onClick:()=>t(a.path),children:a.name})},a.path))})]})}function Ay(){const{containerName:e}=Xm();return X.jsxs(Ey,{defaultValue:"terminal",className:"h-full flex flex-col",children:[X.jsxs(q_,{className:"fixed bottom-0 w-full",children:[X.jsx(Al,{value:"terminal",children:"Terminal"}),X.jsx(Al,{value:"diff",children:"Diff"})]}),X.jsx(Ml,{value:"terminal",className:"flex-1 mb-12",children:X.jsx(Ry,{containerName:e})}),X.jsx(Ml,{value:"diff",className:"flex-1 overflow-auto mb-12",children:X.jsx(ky,{containerName:e})})]})}function My(){const e=Mc(),t=Nr();return F.useEffect(()=>{const r=new URLSearchParams(t.search),i=r.get("container");if(i){r.delete("container");const o=r.toString(),f=o?`/container/${i}?${o}`:`/container/${i}`;e(f,{replace:!0})}},[t.search,e]),new URLSearchParams(t.search).get("container")?null:X.jsx(Dy,{})}function Ty(){return X.jsxs(h0,{children:[X.jsx(Ll,{path:"/container/:containerName",element:X.jsx(Ay,{})}),X.jsx(Ll,{path:"/",element:X.jsx(My,{})})]})}const Py=new jg;ga.createRoot(document.getElementById("root")).render(X.jsx(Dt.StrictMode,{children:X.jsx(gm,{children:X.jsx(Qg,{client:Py,children:X.jsx(O0,{children:X.jsx(Ty,{})})})})}));
