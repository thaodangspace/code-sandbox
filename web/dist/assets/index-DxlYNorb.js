var Zc=e=>{throw TypeError(e)};var Yo=(e,t,r)=>t.has(e)||Zc("Cannot "+r);var H=(e,t,r)=>(Yo(e,t,"read from private field"),r?r.call(e):t.get(e)),ee=(e,t,r)=>t.has(e)?Zc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),J=(e,t,r,i)=>(Yo(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),oe=(e,t,r)=>(Yo(e,t,"access private method"),r);var vn=(e,t,r,i)=>({set _(o){J(e,t,o,r)},get _(){return H(e,t,i)}});function Ep(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const f=Object.getOwnPropertyDescriptor(i,o);f&&Object.defineProperty(e,o,f.get?f:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function r(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function i(o){if(o.ep)return;o.ep=!0;const f=r(o);fetch(o.href,f)}})();function Lp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jh={exports:{}},Mo={},Vh={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sn=Symbol.for("react.element"),Rp=Symbol.for("react.portal"),kp=Symbol.for("react.fragment"),Ap=Symbol.for("react.strict_mode"),Dp=Symbol.for("react.profiler"),Mp=Symbol.for("react.provider"),Tp=Symbol.for("react.context"),Pp=Symbol.for("react.forward_ref"),Op=Symbol.for("react.suspense"),Bp=Symbol.for("react.memo"),Ip=Symbol.for("react.lazy"),eu=Symbol.iterator;function Fp(e){return e===null||typeof e!="object"?null:(e=eu&&e[eu]||e["@@iterator"],typeof e=="function"?e:null)}var Kh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qh=Object.assign,Gh={};function Zi(e,t,r){this.props=e,this.context=t,this.refs=Gh,this.updater=r||Kh}Zi.prototype.isReactComponent={};Zi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Qh(){}Qh.prototype=Zi.prototype;function Kl(e,t,r){this.props=e,this.context=t,this.refs=Gh,this.updater=r||Kh}var ql=Kl.prototype=new Qh;ql.constructor=Kl;qh(ql,Zi.prototype);ql.isPureReactComponent=!0;var tu=Array.isArray,Xh=Object.prototype.hasOwnProperty,Gl={current:null},Yh={key:!0,ref:!0,__self:!0,__source:!0};function Jh(e,t,r){var i,o={},f=null,g=null;if(t!=null)for(i in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(f=""+t.key),t)Xh.call(t,i)&&!Yh.hasOwnProperty(i)&&(o[i]=t[i]);var s=arguments.length-2;if(s===1)o.children=r;else if(1<s){for(var a=Array(s),d=0;d<s;d++)a[d]=arguments[d+2];o.children=a}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)o[i]===void 0&&(o[i]=s[i]);return{$$typeof:sn,type:e,key:f,ref:g,props:o,_owner:Gl.current}}function Np(e,t){return{$$typeof:sn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ql(e){return typeof e=="object"&&e!==null&&e.$$typeof===sn}function Hp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ru=/\/+/g;function Jo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Hp(""+e.key):t.toString(36)}function Nn(e,t,r,i,o){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(f){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case sn:case Rp:g=!0}}if(g)return g=e,o=o(g),e=i===""?"."+Jo(g,0):i,tu(o)?(r="",e!=null&&(r=e.replace(ru,"$&/")+"/"),Nn(o,t,r,"",function(d){return d})):o!=null&&(Ql(o)&&(o=Np(o,r+(!o.key||g&&g.key===o.key?"":(""+o.key).replace(ru,"$&/")+"/")+e)),t.push(o)),1;if(g=0,i=i===""?".":i+":",tu(e))for(var s=0;s<e.length;s++){f=e[s];var a=i+Jo(f,s);g+=Nn(f,t,r,a,o)}else if(a=Fp(e),typeof a=="function")for(e=a.call(e),s=0;!(f=e.next()).done;)f=f.value,a=i+Jo(f,s++),g+=Nn(f,t,r,a,o);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function gn(e,t,r){if(e==null)return e;var i=[],o=0;return Nn(e,i,"","",function(f){return t.call(r,f,o++)}),i}function $p(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var et={current:null},Hn={transition:null},Up={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:Hn,ReactCurrentOwner:Gl};function Zh(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:gn,forEach:function(e,t,r){gn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return gn(e,function(){t++}),t},toArray:function(e){return gn(e,function(t){return t})||[]},only:function(e){if(!Ql(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ne.Component=Zi;ne.Fragment=kp;ne.Profiler=Dp;ne.PureComponent=Kl;ne.StrictMode=Ap;ne.Suspense=Op;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Up;ne.act=Zh;ne.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=qh({},e.props),o=e.key,f=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,g=Gl.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(a in t)Xh.call(t,a)&&!Yh.hasOwnProperty(a)&&(i[a]=t[a]===void 0&&s!==void 0?s[a]:t[a])}var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){s=Array(a);for(var d=0;d<a;d++)s[d]=arguments[d+2];i.children=s}return{$$typeof:sn,type:e.type,key:o,ref:f,props:i,_owner:g}};ne.createContext=function(e){return e={$$typeof:Tp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Mp,_context:e},e.Consumer=e};ne.createElement=Jh;ne.createFactory=function(e){var t=Jh.bind(null,e);return t.type=e,t};ne.createRef=function(){return{current:null}};ne.forwardRef=function(e){return{$$typeof:Pp,render:e}};ne.isValidElement=Ql;ne.lazy=function(e){return{$$typeof:Ip,_payload:{_status:-1,_result:e},_init:$p}};ne.memo=function(e,t){return{$$typeof:Bp,type:e,compare:t===void 0?null:t}};ne.startTransition=function(e){var t=Hn.transition;Hn.transition={};try{e()}finally{Hn.transition=t}};ne.unstable_act=Zh;ne.useCallback=function(e,t){return et.current.useCallback(e,t)};ne.useContext=function(e){return et.current.useContext(e)};ne.useDebugValue=function(){};ne.useDeferredValue=function(e){return et.current.useDeferredValue(e)};ne.useEffect=function(e,t){return et.current.useEffect(e,t)};ne.useId=function(){return et.current.useId()};ne.useImperativeHandle=function(e,t,r){return et.current.useImperativeHandle(e,t,r)};ne.useInsertionEffect=function(e,t){return et.current.useInsertionEffect(e,t)};ne.useLayoutEffect=function(e,t){return et.current.useLayoutEffect(e,t)};ne.useMemo=function(e,t){return et.current.useMemo(e,t)};ne.useReducer=function(e,t,r){return et.current.useReducer(e,t,r)};ne.useRef=function(e){return et.current.useRef(e)};ne.useState=function(e){return et.current.useState(e)};ne.useSyncExternalStore=function(e,t,r){return et.current.useSyncExternalStore(e,t,r)};ne.useTransition=function(){return et.current.useTransition()};ne.version="18.3.1";Vh.exports=ne;var F=Vh.exports;const Mt=Lp(F),ed=Ep({__proto__:null,default:Mt},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zp=F,Wp=Symbol.for("react.element"),jp=Symbol.for("react.fragment"),Vp=Object.prototype.hasOwnProperty,Kp=zp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qp={key:!0,ref:!0,__self:!0,__source:!0};function td(e,t,r){var i,o={},f=null,g=null;r!==void 0&&(f=""+r),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(g=t.ref);for(i in t)Vp.call(t,i)&&!qp.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)o[i]===void 0&&(o[i]=t[i]);return{$$typeof:Wp,type:e,key:f,ref:g,props:o,_owner:Kp.current}}Mo.Fragment=jp;Mo.jsx=td;Mo.jsxs=td;jh.exports=Mo;var X=jh.exports,Ma={},rd={exports:{}},_t={},id={exports:{}},sd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,T){var P=R.length;R.push(T);e:for(;0<P;){var O=P-1>>>1,z=R[O];if(0<o(z,T))R[O]=T,R[P]=z,P=O;else break e}}function r(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var T=R[0],P=R.pop();if(P!==T){R[0]=P;e:for(var O=0,z=R.length,V=z>>>1;O<V;){var Q=2*(O+1)-1,q=R[Q],Z=Q+1,M=R[Z];if(0>o(q,P))Z<z&&0>o(M,q)?(R[O]=M,R[Z]=P,O=Z):(R[O]=q,R[Q]=P,O=Q);else if(Z<z&&0>o(M,P))R[O]=M,R[Z]=P,O=Z;else break e}}return T}function o(R,T){var P=R.sortIndex-T.sortIndex;return P!==0?P:R.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var g=Date,s=g.now();e.unstable_now=function(){return g.now()-s}}var a=[],d=[],v=1,u=null,p=3,C=!1,w=!1,_=!1,n=typeof setTimeout=="function"?setTimeout:null,l=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(R){for(var T=r(d);T!==null;){if(T.callback===null)i(d);else if(T.startTime<=R)i(d),T.sortIndex=T.expirationTime,t(a,T);else break;T=r(d)}}function m(R){if(_=!1,h(R),!w)if(r(a)!==null)w=!0,$(b);else{var T=r(d);T!==null&&I(m,T.startTime-R)}}function b(R,T){w=!1,_&&(_=!1,l(S),S=-1),C=!0;var P=p;try{for(h(T),u=r(a);u!==null&&(!(u.expirationTime>T)||R&&!A());){var O=u.callback;if(typeof O=="function"){u.callback=null,p=u.priorityLevel;var z=O(u.expirationTime<=T);T=e.unstable_now(),typeof z=="function"?u.callback=z:u===r(a)&&i(a),h(T)}else i(a);u=r(a)}if(u!==null)var V=!0;else{var Q=r(d);Q!==null&&I(m,Q.startTime-T),V=!1}return V}finally{u=null,p=P,C=!1}}var x=!1,E=null,S=-1,y=5,L=-1;function A(){return!(e.unstable_now()-L<y)}function k(){if(E!==null){var R=e.unstable_now();L=R;var T=!0;try{T=E(!0,R)}finally{T?D():(x=!1,E=null)}}else x=!1}var D;if(typeof c=="function")D=function(){c(k)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,N=B.port2;B.port1.onmessage=k,D=function(){N.postMessage(null)}}else D=function(){n(k,0)};function $(R){E=R,x||(x=!0,D())}function I(R,T){S=n(function(){R(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){w||C||(w=!0,$(b))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(a)},e.unstable_next=function(R){switch(p){case 1:case 2:case 3:var T=3;break;default:T=p}var P=p;p=T;try{return R()}finally{p=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,T){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var P=p;p=R;try{return T()}finally{p=P}},e.unstable_scheduleCallback=function(R,T,P){var O=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?O+P:O):P=O,R){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=P+z,R={id:v++,callback:T,priorityLevel:R,startTime:P,expirationTime:z,sortIndex:-1},P>O?(R.sortIndex=P,t(d,R),r(a)===null&&R===r(d)&&(_?(l(S),S=-1):_=!0,I(m,P-O))):(R.sortIndex=z,t(a,R),w||C||(w=!0,$(b))),R},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(R){var T=p;return function(){var P=p;p=T;try{return R.apply(this,arguments)}finally{p=P}}}})(sd);id.exports=sd;var Gp=id.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp=F,ft=Gp;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nd=new Set,Ps={};function hi(e,t){Ki(e,t),Ki(e+"Capture",t)}function Ki(e,t){for(Ps[e]=t,e=0;e<t.length;e++)nd.add(t[e])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ta=Object.prototype.hasOwnProperty,Xp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iu={},su={};function Yp(e){return Ta.call(su,e)?!0:Ta.call(iu,e)?!1:Xp.test(e)?su[e]=!0:(iu[e]=!0,!1)}function Jp(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Zp(e,t,r,i){if(t===null||typeof t>"u"||Jp(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tt(e,t,r,i,o,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){We[e]=new tt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];We[t]=new tt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){We[e]=new tt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){We[e]=new tt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){We[e]=new tt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){We[e]=new tt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){We[e]=new tt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){We[e]=new tt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){We[e]=new tt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xl=/[\-:]([a-z])/g;function Yl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xl,Yl);We[t]=new tt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xl,Yl);We[t]=new tt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xl,Yl);We[t]=new tt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){We[e]=new tt(e,1,!1,e.toLowerCase(),null,!1,!1)});We.xlinkHref=new tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){We[e]=new tt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jl(e,t,r,i){var o=We.hasOwnProperty(t)?We[t]:null;(o!==null?o.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Zp(t,r,o,i)&&(r=null),i||o===null?Yp(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,i=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var ur=Qp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mn=Symbol.for("react.element"),_i=Symbol.for("react.portal"),pi=Symbol.for("react.fragment"),Zl=Symbol.for("react.strict_mode"),Pa=Symbol.for("react.profiler"),od=Symbol.for("react.provider"),ad=Symbol.for("react.context"),ec=Symbol.for("react.forward_ref"),Oa=Symbol.for("react.suspense"),Ba=Symbol.for("react.suspense_list"),tc=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),ld=Symbol.for("react.offscreen"),nu=Symbol.iterator;function os(e){return e===null||typeof e!="object"?null:(e=nu&&e[nu]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Object.assign,Zo;function ms(e){if(Zo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Zo=t&&t[1]||""}return`
`+Zo+e}var ea=!1;function ta(e,t){if(!e||ea)return"";ea=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var i=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){i=d}e.call(t.prototype)}else{try{throw Error()}catch(d){i=d}e()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),f=i.stack.split(`
`),g=o.length-1,s=f.length-1;1<=g&&0<=s&&o[g]!==f[s];)s--;for(;1<=g&&0<=s;g--,s--)if(o[g]!==f[s]){if(g!==1||s!==1)do if(g--,s--,0>s||o[g]!==f[s]){var a=`
`+o[g].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=g&&0<=s);break}}}finally{ea=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ms(e):""}function ev(e){switch(e.tag){case 5:return ms(e.type);case 16:return ms("Lazy");case 13:return ms("Suspense");case 19:return ms("SuspenseList");case 0:case 2:case 15:return e=ta(e.type,!1),e;case 11:return e=ta(e.type.render,!1),e;case 1:return e=ta(e.type,!0),e;default:return""}}function Ia(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case pi:return"Fragment";case _i:return"Portal";case Pa:return"Profiler";case Zl:return"StrictMode";case Oa:return"Suspense";case Ba:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ad:return(e.displayName||"Context")+".Consumer";case od:return(e._context.displayName||"Context")+".Provider";case ec:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tc:return t=e.displayName||null,t!==null?t:Ia(e.type)||"Memo";case pr:t=e._payload,e=e._init;try{return Ia(e(t))}catch{}}return null}function tv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ia(t);case 8:return t===Zl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Nr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rv(e){var t=cd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(g){i=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yn(e){e._valueTracker||(e._valueTracker=rv(e))}function ud(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=cd(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function Zn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fa(e,t){var r=t.checked;return Re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ou(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Nr(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hd(e,t){t=t.checked,t!=null&&Jl(e,"checked",t,!1)}function Na(e,t){hd(e,t);var r=Nr(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ha(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ha(e,t.type,Nr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function au(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ha(e,t,r){(t!=="number"||Zn(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ys=Array.isArray;function Li(e,t,r,i){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Nr(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function $a(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return Re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function lu(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(K(92));if(ys(r)){if(1<r.length)throw Error(K(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Nr(r)}}function dd(e,t){var r=Nr(t.value),i=Nr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function cu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ua(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Sn,_d=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Sn=Sn||document.createElement("div"),Sn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Sn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Os(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var xs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iv=["Webkit","ms","Moz","O"];Object.keys(xs).forEach(function(e){iv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xs[t]=xs[e]})});function pd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||xs.hasOwnProperty(e)&&xs[e]?(""+t).trim():t+"px"}function vd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,o=pd(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,o):e[r]=o}}var sv=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function za(e,t){if(t){if(sv[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function Wa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ja=null;function rc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Va=null,Ri=null,ki=null;function uu(e){if(e=an(e)){if(typeof Va!="function")throw Error(K(280));var t=e.stateNode;t&&(t=Io(t),Va(e.stateNode,e.type,t))}}function gd(e){Ri?ki?ki.push(e):ki=[e]:Ri=e}function md(){if(Ri){var e=Ri,t=ki;if(ki=Ri=null,uu(e),t)for(e=0;e<t.length;e++)uu(t[e])}}function yd(e,t){return e(t)}function Sd(){}var ra=!1;function Cd(e,t,r){if(ra)return e(t,r);ra=!0;try{return yd(e,t,r)}finally{ra=!1,(Ri!==null||ki!==null)&&(Sd(),md())}}function Bs(e,t){var r=e.stateNode;if(r===null)return null;var i=Io(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(K(231,t,typeof r));return r}var Ka=!1;if(nr)try{var as={};Object.defineProperty(as,"passive",{get:function(){Ka=!0}}),window.addEventListener("test",as,as),window.removeEventListener("test",as,as)}catch{Ka=!1}function nv(e,t,r,i,o,f,g,s,a){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(v){this.onError(v)}}var Es=!1,eo=null,to=!1,qa=null,ov={onError:function(e){Es=!0,eo=e}};function av(e,t,r,i,o,f,g,s,a){Es=!1,eo=null,nv.apply(ov,arguments)}function lv(e,t,r,i,o,f,g,s,a){if(av.apply(this,arguments),Es){if(Es){var d=eo;Es=!1,eo=null}else throw Error(K(198));to||(to=!0,qa=d)}}function di(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function wd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hu(e){if(di(e)!==e)throw Error(K(188))}function cv(e){var t=e.alternate;if(!t){if(t=di(e),t===null)throw Error(K(188));return t!==e?null:e}for(var r=e,i=t;;){var o=r.return;if(o===null)break;var f=o.alternate;if(f===null){if(i=o.return,i!==null){r=i;continue}break}if(o.child===f.child){for(f=o.child;f;){if(f===r)return hu(o),e;if(f===i)return hu(o),t;f=f.sibling}throw Error(K(188))}if(r.return!==i.return)r=o,i=f;else{for(var g=!1,s=o.child;s;){if(s===r){g=!0,r=o,i=f;break}if(s===i){g=!0,i=o,r=f;break}s=s.sibling}if(!g){for(s=f.child;s;){if(s===r){g=!0,r=f,i=o;break}if(s===i){g=!0,i=f,r=o;break}s=s.sibling}if(!g)throw Error(K(189))}}if(r.alternate!==i)throw Error(K(190))}if(r.tag!==3)throw Error(K(188));return r.stateNode.current===r?e:t}function bd(e){return e=cv(e),e!==null?xd(e):null}function xd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xd(e);if(t!==null)return t;e=e.sibling}return null}var Ed=ft.unstable_scheduleCallback,du=ft.unstable_cancelCallback,uv=ft.unstable_shouldYield,hv=ft.unstable_requestPaint,Me=ft.unstable_now,dv=ft.unstable_getCurrentPriorityLevel,ic=ft.unstable_ImmediatePriority,Ld=ft.unstable_UserBlockingPriority,ro=ft.unstable_NormalPriority,fv=ft.unstable_LowPriority,Rd=ft.unstable_IdlePriority,To=null,jt=null;function _v(e){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(To,e,void 0,(e.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:gv,pv=Math.log,vv=Math.LN2;function gv(e){return e>>>=0,e===0?32:31-(pv(e)/vv|0)|0}var Cn=64,wn=4194304;function Ss(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function io(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,o=e.suspendedLanes,f=e.pingedLanes,g=r&268435455;if(g!==0){var s=g&~o;s!==0?i=Ss(s):(f&=g,f!==0&&(i=Ss(f)))}else g=r&~o,g!==0?i=Ss(g):f!==0&&(i=Ss(f));if(i===0)return 0;if(t!==0&&t!==i&&!(t&o)&&(o=i&-i,f=t&-t,o>=f||o===16&&(f&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Ot(t),o=1<<r,i|=e[r],t&=~o;return i}function mv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yv(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-Ot(f),s=1<<g,a=o[g];a===-1?(!(s&r)||s&i)&&(o[g]=mv(s,t)):a<=t&&(e.expiredLanes|=s),f&=~s}}function Ga(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function kd(){var e=Cn;return Cn<<=1,!(Cn&4194240)&&(Cn=64),e}function ia(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function nn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ot(t),e[t]=r}function Sv(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-Ot(r),f=1<<o;t[o]=0,i[o]=-1,e[o]=-1,r&=~f}}function sc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Ot(r),o=1<<i;o&t|e[i]&t&&(e[i]|=t),r&=~o}}var pe=0;function Ad(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Dd,nc,Md,Td,Pd,Qa=!1,bn=[],Ar=null,Dr=null,Mr=null,Is=new Map,Fs=new Map,gr=[],Cv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fu(e,t){switch(e){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Is.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fs.delete(t.pointerId)}}function ls(e,t,r,i,o,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:f,targetContainers:[o]},t!==null&&(t=an(t),t!==null&&nc(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function wv(e,t,r,i,o){switch(t){case"focusin":return Ar=ls(Ar,e,t,r,i,o),!0;case"dragenter":return Dr=ls(Dr,e,t,r,i,o),!0;case"mouseover":return Mr=ls(Mr,e,t,r,i,o),!0;case"pointerover":var f=o.pointerId;return Is.set(f,ls(Is.get(f)||null,e,t,r,i,o)),!0;case"gotpointercapture":return f=o.pointerId,Fs.set(f,ls(Fs.get(f)||null,e,t,r,i,o)),!0}return!1}function Od(e){var t=Kr(e.target);if(t!==null){var r=di(t);if(r!==null){if(t=r.tag,t===13){if(t=wd(r),t!==null){e.blockedOn=t,Pd(e.priority,function(){Md(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $n(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Xa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);ja=i,r.target.dispatchEvent(i),ja=null}else return t=an(r),t!==null&&nc(t),e.blockedOn=r,!1;t.shift()}return!0}function _u(e,t,r){$n(e)&&r.delete(t)}function bv(){Qa=!1,Ar!==null&&$n(Ar)&&(Ar=null),Dr!==null&&$n(Dr)&&(Dr=null),Mr!==null&&$n(Mr)&&(Mr=null),Is.forEach(_u),Fs.forEach(_u)}function cs(e,t){e.blockedOn===t&&(e.blockedOn=null,Qa||(Qa=!0,ft.unstable_scheduleCallback(ft.unstable_NormalPriority,bv)))}function Ns(e){function t(o){return cs(o,e)}if(0<bn.length){cs(bn[0],e);for(var r=1;r<bn.length;r++){var i=bn[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Ar!==null&&cs(Ar,e),Dr!==null&&cs(Dr,e),Mr!==null&&cs(Mr,e),Is.forEach(t),Fs.forEach(t),r=0;r<gr.length;r++)i=gr[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<gr.length&&(r=gr[0],r.blockedOn===null);)Od(r),r.blockedOn===null&&gr.shift()}var Ai=ur.ReactCurrentBatchConfig,so=!0;function xv(e,t,r,i){var o=pe,f=Ai.transition;Ai.transition=null;try{pe=1,oc(e,t,r,i)}finally{pe=o,Ai.transition=f}}function Ev(e,t,r,i){var o=pe,f=Ai.transition;Ai.transition=null;try{pe=4,oc(e,t,r,i)}finally{pe=o,Ai.transition=f}}function oc(e,t,r,i){if(so){var o=Xa(e,t,r,i);if(o===null)fa(e,t,i,no,r),fu(e,i);else if(wv(o,e,t,r,i))i.stopPropagation();else if(fu(e,i),t&4&&-1<Cv.indexOf(e)){for(;o!==null;){var f=an(o);if(f!==null&&Dd(f),f=Xa(e,t,r,i),f===null&&fa(e,t,i,no,r),f===o)break;o=f}o!==null&&i.stopPropagation()}else fa(e,t,i,null,r)}}var no=null;function Xa(e,t,r,i){if(no=null,e=rc(i),e=Kr(e),e!==null)if(t=di(e),t===null)e=null;else if(r=t.tag,r===13){if(e=wd(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return no=e,null}function Bd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dv()){case ic:return 1;case Ld:return 4;case ro:case fv:return 16;case Rd:return 536870912;default:return 16}default:return 16}}var Rr=null,ac=null,Un=null;function Id(){if(Un)return Un;var e,t=ac,r=t.length,i,o="value"in Rr?Rr.value:Rr.textContent,f=o.length;for(e=0;e<r&&t[e]===o[e];e++);var g=r-e;for(i=1;i<=g&&t[r-i]===o[f-i];i++);return Un=o.slice(e,1<i?1-i:void 0)}function zn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xn(){return!0}function pu(){return!1}function pt(e){function t(r,i,o,f,g){this._reactName=r,this._targetInst=o,this.type=i,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(f):f[s]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?xn:pu,this.isPropagationStopped=pu,this}return Re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=xn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=xn)},persist:function(){},isPersistent:xn}),t}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lc=pt(es),on=Re({},es,{view:0,detail:0}),Lv=pt(on),sa,na,us,Po=Re({},on,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==us&&(us&&e.type==="mousemove"?(sa=e.screenX-us.screenX,na=e.screenY-us.screenY):na=sa=0,us=e),sa)},movementY:function(e){return"movementY"in e?e.movementY:na}}),vu=pt(Po),Rv=Re({},Po,{dataTransfer:0}),kv=pt(Rv),Av=Re({},on,{relatedTarget:0}),oa=pt(Av),Dv=Re({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),Mv=pt(Dv),Tv=Re({},es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pv=pt(Tv),Ov=Re({},es,{data:0}),gu=pt(Ov),Bv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fv[e])?!!t[e]:!1}function cc(){return Nv}var Hv=Re({},on,{key:function(e){if(e.key){var t=Bv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Iv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cc,charCode:function(e){return e.type==="keypress"?zn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$v=pt(Hv),Uv=Re({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mu=pt(Uv),zv=Re({},on,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cc}),Wv=pt(zv),jv=Re({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vv=pt(jv),Kv=Re({},Po,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qv=pt(Kv),Gv=[9,13,27,32],uc=nr&&"CompositionEvent"in window,Ls=null;nr&&"documentMode"in document&&(Ls=document.documentMode);var Qv=nr&&"TextEvent"in window&&!Ls,Fd=nr&&(!uc||Ls&&8<Ls&&11>=Ls),yu=" ",Su=!1;function Nd(e,t){switch(e){case"keyup":return Gv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vi=!1;function Xv(e,t){switch(e){case"compositionend":return Hd(t);case"keypress":return t.which!==32?null:(Su=!0,yu);case"textInput":return e=t.data,e===yu&&Su?null:e;default:return null}}function Yv(e,t){if(vi)return e==="compositionend"||!uc&&Nd(e,t)?(e=Id(),Un=ac=Rr=null,vi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fd&&t.locale!=="ko"?null:t.data;default:return null}}var Jv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Jv[e.type]:t==="textarea"}function $d(e,t,r,i){gd(i),t=oo(t,"onChange"),0<t.length&&(r=new lc("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Rs=null,Hs=null;function Zv(e){Yd(e,0)}function Oo(e){var t=yi(e);if(ud(t))return e}function eg(e,t){if(e==="change")return t}var Ud=!1;if(nr){var aa;if(nr){var la="oninput"in document;if(!la){var wu=document.createElement("div");wu.setAttribute("oninput","return;"),la=typeof wu.oninput=="function"}aa=la}else aa=!1;Ud=aa&&(!document.documentMode||9<document.documentMode)}function bu(){Rs&&(Rs.detachEvent("onpropertychange",zd),Hs=Rs=null)}function zd(e){if(e.propertyName==="value"&&Oo(Hs)){var t=[];$d(t,Hs,e,rc(e)),Cd(Zv,t)}}function tg(e,t,r){e==="focusin"?(bu(),Rs=t,Hs=r,Rs.attachEvent("onpropertychange",zd)):e==="focusout"&&bu()}function rg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Oo(Hs)}function ig(e,t){if(e==="click")return Oo(t)}function sg(e,t){if(e==="input"||e==="change")return Oo(t)}function ng(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var It=typeof Object.is=="function"?Object.is:ng;function $s(e,t){if(It(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var o=r[i];if(!Ta.call(t,o)||!It(e[o],t[o]))return!1}return!0}function xu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Eu(e,t){var r=xu(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=xu(r)}}function Wd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jd(){for(var e=window,t=Zn();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Zn(e.document)}return t}function hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function og(e){var t=jd(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Wd(r.ownerDocument.documentElement,r)){if(i!==null&&hc(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,f=Math.min(i.start,o);i=i.end===void 0?f:Math.min(i.end,o),!e.extend&&f>i&&(o=i,i=f,f=o),o=Eu(r,f);var g=Eu(r,i);o&&g&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),f>i?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ag=nr&&"documentMode"in document&&11>=document.documentMode,gi=null,Ya=null,ks=null,Ja=!1;function Lu(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ja||gi==null||gi!==Zn(i)||(i=gi,"selectionStart"in i&&hc(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ks&&$s(ks,i)||(ks=i,i=oo(Ya,"onSelect"),0<i.length&&(t=new lc("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=gi)))}function En(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var mi={animationend:En("Animation","AnimationEnd"),animationiteration:En("Animation","AnimationIteration"),animationstart:En("Animation","AnimationStart"),transitionend:En("Transition","TransitionEnd")},ca={},Vd={};nr&&(Vd=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function Bo(e){if(ca[e])return ca[e];if(!mi[e])return e;var t=mi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Vd)return ca[e]=t[r];return e}var Kd=Bo("animationend"),qd=Bo("animationiteration"),Gd=Bo("animationstart"),Qd=Bo("transitionend"),Xd=new Map,Ru="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $r(e,t){Xd.set(e,t),hi(t,[e])}for(var ua=0;ua<Ru.length;ua++){var ha=Ru[ua],lg=ha.toLowerCase(),cg=ha[0].toUpperCase()+ha.slice(1);$r(lg,"on"+cg)}$r(Kd,"onAnimationEnd");$r(qd,"onAnimationIteration");$r(Gd,"onAnimationStart");$r("dblclick","onDoubleClick");$r("focusin","onFocus");$r("focusout","onBlur");$r(Qd,"onTransitionEnd");Ki("onMouseEnter",["mouseout","mouseover"]);Ki("onMouseLeave",["mouseout","mouseover"]);Ki("onPointerEnter",["pointerout","pointerover"]);Ki("onPointerLeave",["pointerout","pointerover"]);hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ug=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cs));function ku(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,lv(i,t,void 0,e),e.currentTarget=null}function Yd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],o=i.event;i=i.listeners;e:{var f=void 0;if(t)for(var g=i.length-1;0<=g;g--){var s=i[g],a=s.instance,d=s.currentTarget;if(s=s.listener,a!==f&&o.isPropagationStopped())break e;ku(o,s,d),f=a}else for(g=0;g<i.length;g++){if(s=i[g],a=s.instance,d=s.currentTarget,s=s.listener,a!==f&&o.isPropagationStopped())break e;ku(o,s,d),f=a}}}if(to)throw e=qa,to=!1,qa=null,e}function ye(e,t){var r=t[il];r===void 0&&(r=t[il]=new Set);var i=e+"__bubble";r.has(i)||(Jd(t,e,2,!1),r.add(i))}function da(e,t,r){var i=0;t&&(i|=4),Jd(r,e,i,t)}var Ln="_reactListening"+Math.random().toString(36).slice(2);function Us(e){if(!e[Ln]){e[Ln]=!0,nd.forEach(function(r){r!=="selectionchange"&&(ug.has(r)||da(r,!1,e),da(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ln]||(t[Ln]=!0,da("selectionchange",!1,t))}}function Jd(e,t,r,i){switch(Bd(t)){case 1:var o=xv;break;case 4:o=Ev;break;default:o=oc}r=o.bind(null,t,r,e),o=void 0,!Ka||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function fa(e,t,r,i,o){var f=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var g=i.tag;if(g===3||g===4){var s=i.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(g===4)for(g=i.return;g!==null;){var a=g.tag;if((a===3||a===4)&&(a=g.stateNode.containerInfo,a===o||a.nodeType===8&&a.parentNode===o))return;g=g.return}for(;s!==null;){if(g=Kr(s),g===null)return;if(a=g.tag,a===5||a===6){i=f=g;continue e}s=s.parentNode}}i=i.return}Cd(function(){var d=f,v=rc(r),u=[];e:{var p=Xd.get(e);if(p!==void 0){var C=lc,w=e;switch(e){case"keypress":if(zn(r)===0)break e;case"keydown":case"keyup":C=$v;break;case"focusin":w="focus",C=oa;break;case"focusout":w="blur",C=oa;break;case"beforeblur":case"afterblur":C=oa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=kv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Wv;break;case Kd:case qd:case Gd:C=Mv;break;case Qd:C=Vv;break;case"scroll":C=Lv;break;case"wheel":C=qv;break;case"copy":case"cut":case"paste":C=Pv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=mu}var _=(t&4)!==0,n=!_&&e==="scroll",l=_?p!==null?p+"Capture":null:p;_=[];for(var c=d,h;c!==null;){h=c;var m=h.stateNode;if(h.tag===5&&m!==null&&(h=m,l!==null&&(m=Bs(c,l),m!=null&&_.push(zs(c,m,h)))),n)break;c=c.return}0<_.length&&(p=new C(p,w,null,r,v),u.push({event:p,listeners:_}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",p&&r!==ja&&(w=r.relatedTarget||r.fromElement)&&(Kr(w)||w[or]))break e;if((C||p)&&(p=v.window===v?v:(p=v.ownerDocument)?p.defaultView||p.parentWindow:window,C?(w=r.relatedTarget||r.toElement,C=d,w=w?Kr(w):null,w!==null&&(n=di(w),w!==n||w.tag!==5&&w.tag!==6)&&(w=null)):(C=null,w=d),C!==w)){if(_=vu,m="onMouseLeave",l="onMouseEnter",c="mouse",(e==="pointerout"||e==="pointerover")&&(_=mu,m="onPointerLeave",l="onPointerEnter",c="pointer"),n=C==null?p:yi(C),h=w==null?p:yi(w),p=new _(m,c+"leave",C,r,v),p.target=n,p.relatedTarget=h,m=null,Kr(v)===d&&(_=new _(l,c+"enter",w,r,v),_.target=h,_.relatedTarget=n,m=_),n=m,C&&w)t:{for(_=C,l=w,c=0,h=_;h;h=fi(h))c++;for(h=0,m=l;m;m=fi(m))h++;for(;0<c-h;)_=fi(_),c--;for(;0<h-c;)l=fi(l),h--;for(;c--;){if(_===l||l!==null&&_===l.alternate)break t;_=fi(_),l=fi(l)}_=null}else _=null;C!==null&&Au(u,p,C,_,!1),w!==null&&n!==null&&Au(u,n,w,_,!0)}}e:{if(p=d?yi(d):window,C=p.nodeName&&p.nodeName.toLowerCase(),C==="select"||C==="input"&&p.type==="file")var b=eg;else if(Cu(p))if(Ud)b=sg;else{b=rg;var x=tg}else(C=p.nodeName)&&C.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(b=ig);if(b&&(b=b(e,d))){$d(u,b,r,v);break e}x&&x(e,p,d),e==="focusout"&&(x=p._wrapperState)&&x.controlled&&p.type==="number"&&Ha(p,"number",p.value)}switch(x=d?yi(d):window,e){case"focusin":(Cu(x)||x.contentEditable==="true")&&(gi=x,Ya=d,ks=null);break;case"focusout":ks=Ya=gi=null;break;case"mousedown":Ja=!0;break;case"contextmenu":case"mouseup":case"dragend":Ja=!1,Lu(u,r,v);break;case"selectionchange":if(ag)break;case"keydown":case"keyup":Lu(u,r,v)}var E;if(uc)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else vi?Nd(e,r)&&(S="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(Fd&&r.locale!=="ko"&&(vi||S!=="onCompositionStart"?S==="onCompositionEnd"&&vi&&(E=Id()):(Rr=v,ac="value"in Rr?Rr.value:Rr.textContent,vi=!0)),x=oo(d,S),0<x.length&&(S=new gu(S,e,null,r,v),u.push({event:S,listeners:x}),E?S.data=E:(E=Hd(r),E!==null&&(S.data=E)))),(E=Qv?Xv(e,r):Yv(e,r))&&(d=oo(d,"onBeforeInput"),0<d.length&&(v=new gu("onBeforeInput","beforeinput",null,r,v),u.push({event:v,listeners:d}),v.data=E))}Yd(u,t)})}function zs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function oo(e,t){for(var r=t+"Capture",i=[];e!==null;){var o=e,f=o.stateNode;o.tag===5&&f!==null&&(o=f,f=Bs(e,r),f!=null&&i.unshift(zs(e,f,o)),f=Bs(e,t),f!=null&&i.push(zs(e,f,o))),e=e.return}return i}function fi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Au(e,t,r,i,o){for(var f=t._reactName,g=[];r!==null&&r!==i;){var s=r,a=s.alternate,d=s.stateNode;if(a!==null&&a===i)break;s.tag===5&&d!==null&&(s=d,o?(a=Bs(r,f),a!=null&&g.unshift(zs(r,a,s))):o||(a=Bs(r,f),a!=null&&g.push(zs(r,a,s)))),r=r.return}g.length!==0&&e.push({event:t,listeners:g})}var hg=/\r\n?/g,dg=/\u0000|\uFFFD/g;function Du(e){return(typeof e=="string"?e:""+e).replace(hg,`
`).replace(dg,"")}function Rn(e,t,r){if(t=Du(t),Du(e)!==t&&r)throw Error(K(425))}function ao(){}var Za=null,el=null;function tl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rl=typeof setTimeout=="function"?setTimeout:void 0,fg=typeof clearTimeout=="function"?clearTimeout:void 0,Mu=typeof Promise=="function"?Promise:void 0,_g=typeof queueMicrotask=="function"?queueMicrotask:typeof Mu<"u"?function(e){return Mu.resolve(null).then(e).catch(pg)}:rl;function pg(e){setTimeout(function(){throw e})}function _a(e,t){var r=t,i=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(i===0){e.removeChild(o),Ns(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=o}while(r);Ns(t)}function Tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ts=Math.random().toString(36).slice(2),Wt="__reactFiber$"+ts,Ws="__reactProps$"+ts,or="__reactContainer$"+ts,il="__reactEvents$"+ts,vg="__reactListeners$"+ts,gg="__reactHandles$"+ts;function Kr(e){var t=e[Wt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[or]||r[Wt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Tu(e);e!==null;){if(r=e[Wt])return r;e=Tu(e)}return t}e=r,r=e.parentNode}return null}function an(e){return e=e[Wt]||e[or],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function Io(e){return e[Ws]||null}var sl=[],Si=-1;function Ur(e){return{current:e}}function Se(e){0>Si||(e.current=sl[Si],sl[Si]=null,Si--)}function ge(e,t){Si++,sl[Si]=e.current,e.current=t}var Hr={},Ge=Ur(Hr),at=Ur(!1),ni=Hr;function qi(e,t){var r=e.type.contextTypes;if(!r)return Hr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o={},f;for(f in r)o[f]=t[f];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function lt(e){return e=e.childContextTypes,e!=null}function lo(){Se(at),Se(Ge)}function Pu(e,t,r){if(Ge.current!==Hr)throw Error(K(168));ge(Ge,t),ge(at,r)}function Zd(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var o in i)if(!(o in t))throw Error(K(108,tv(e)||"Unknown",o));return Re({},r,i)}function co(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hr,ni=Ge.current,ge(Ge,e),ge(at,at.current),!0}function Ou(e,t,r){var i=e.stateNode;if(!i)throw Error(K(169));r?(e=Zd(e,t,ni),i.__reactInternalMemoizedMergedChildContext=e,Se(at),Se(Ge),ge(Ge,e)):Se(at),ge(at,r)}var Jt=null,Fo=!1,pa=!1;function ef(e){Jt===null?Jt=[e]:Jt.push(e)}function mg(e){Fo=!0,ef(e)}function zr(){if(!pa&&Jt!==null){pa=!0;var e=0,t=pe;try{var r=Jt;for(pe=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Jt=null,Fo=!1}catch(o){throw Jt!==null&&(Jt=Jt.slice(e+1)),Ed(ic,zr),o}finally{pe=t,pa=!1}}return null}var Ci=[],wi=0,uo=null,ho=0,yt=[],St=0,oi=null,er=1,tr="";function jr(e,t){Ci[wi++]=ho,Ci[wi++]=uo,uo=e,ho=t}function tf(e,t,r){yt[St++]=er,yt[St++]=tr,yt[St++]=oi,oi=e;var i=er;e=tr;var o=32-Ot(i)-1;i&=~(1<<o),r+=1;var f=32-Ot(t)+o;if(30<f){var g=o-o%5;f=(i&(1<<g)-1).toString(32),i>>=g,o-=g,er=1<<32-Ot(t)+o|r<<o|i,tr=f+e}else er=1<<f|r<<o|i,tr=e}function dc(e){e.return!==null&&(jr(e,1),tf(e,1,0))}function fc(e){for(;e===uo;)uo=Ci[--wi],Ci[wi]=null,ho=Ci[--wi],Ci[wi]=null;for(;e===oi;)oi=yt[--St],yt[St]=null,tr=yt[--St],yt[St]=null,er=yt[--St],yt[St]=null}var dt=null,ht=null,be=!1,Pt=null;function rf(e,t){var r=Ct(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Bu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dt=e,ht=Tr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dt=e,ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=oi!==null?{id:er,overflow:tr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ct(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,dt=e,ht=null,!0):!1;default:return!1}}function nl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ol(e){if(be){var t=ht;if(t){var r=t;if(!Bu(e,t)){if(nl(e))throw Error(K(418));t=Tr(r.nextSibling);var i=dt;t&&Bu(e,t)?rf(i,r):(e.flags=e.flags&-4097|2,be=!1,dt=e)}}else{if(nl(e))throw Error(K(418));e.flags=e.flags&-4097|2,be=!1,dt=e}}}function Iu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dt=e}function kn(e){if(e!==dt)return!1;if(!be)return Iu(e),be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!tl(e.type,e.memoizedProps)),t&&(t=ht)){if(nl(e))throw sf(),Error(K(418));for(;t;)rf(e,t),t=Tr(t.nextSibling)}if(Iu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ht=Tr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ht=null}}else ht=dt?Tr(e.stateNode.nextSibling):null;return!0}function sf(){for(var e=ht;e;)e=Tr(e.nextSibling)}function Gi(){ht=dt=null,be=!1}function _c(e){Pt===null?Pt=[e]:Pt.push(e)}var yg=ur.ReactCurrentBatchConfig;function hs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(K(309));var i=r.stateNode}if(!i)throw Error(K(147,e));var o=i,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var s=o.refs;g===null?delete s[f]:s[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(K(284));if(!r._owner)throw Error(K(290,e))}return e}function An(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Fu(e){var t=e._init;return t(e._payload)}function nf(e){function t(l,c){if(e){var h=l.deletions;h===null?(l.deletions=[c],l.flags|=16):h.push(c)}}function r(l,c){if(!e)return null;for(;c!==null;)t(l,c),c=c.sibling;return null}function i(l,c){for(l=new Map;c!==null;)c.key!==null?l.set(c.key,c):l.set(c.index,c),c=c.sibling;return l}function o(l,c){return l=Ir(l,c),l.index=0,l.sibling=null,l}function f(l,c,h){return l.index=h,e?(h=l.alternate,h!==null?(h=h.index,h<c?(l.flags|=2,c):h):(l.flags|=2,c)):(l.flags|=1048576,c)}function g(l){return e&&l.alternate===null&&(l.flags|=2),l}function s(l,c,h,m){return c===null||c.tag!==6?(c=wa(h,l.mode,m),c.return=l,c):(c=o(c,h),c.return=l,c)}function a(l,c,h,m){var b=h.type;return b===pi?v(l,c,h.props.children,m,h.key):c!==null&&(c.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===pr&&Fu(b)===c.type)?(m=o(c,h.props),m.ref=hs(l,c,h),m.return=l,m):(m=Qn(h.type,h.key,h.props,null,l.mode,m),m.ref=hs(l,c,h),m.return=l,m)}function d(l,c,h,m){return c===null||c.tag!==4||c.stateNode.containerInfo!==h.containerInfo||c.stateNode.implementation!==h.implementation?(c=ba(h,l.mode,m),c.return=l,c):(c=o(c,h.children||[]),c.return=l,c)}function v(l,c,h,m,b){return c===null||c.tag!==7?(c=si(h,l.mode,m,b),c.return=l,c):(c=o(c,h),c.return=l,c)}function u(l,c,h){if(typeof c=="string"&&c!==""||typeof c=="number")return c=wa(""+c,l.mode,h),c.return=l,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case mn:return h=Qn(c.type,c.key,c.props,null,l.mode,h),h.ref=hs(l,null,c),h.return=l,h;case _i:return c=ba(c,l.mode,h),c.return=l,c;case pr:var m=c._init;return u(l,m(c._payload),h)}if(ys(c)||os(c))return c=si(c,l.mode,h,null),c.return=l,c;An(l,c)}return null}function p(l,c,h,m){var b=c!==null?c.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return b!==null?null:s(l,c,""+h,m);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case mn:return h.key===b?a(l,c,h,m):null;case _i:return h.key===b?d(l,c,h,m):null;case pr:return b=h._init,p(l,c,b(h._payload),m)}if(ys(h)||os(h))return b!==null?null:v(l,c,h,m,null);An(l,h)}return null}function C(l,c,h,m,b){if(typeof m=="string"&&m!==""||typeof m=="number")return l=l.get(h)||null,s(c,l,""+m,b);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case mn:return l=l.get(m.key===null?h:m.key)||null,a(c,l,m,b);case _i:return l=l.get(m.key===null?h:m.key)||null,d(c,l,m,b);case pr:var x=m._init;return C(l,c,h,x(m._payload),b)}if(ys(m)||os(m))return l=l.get(h)||null,v(c,l,m,b,null);An(c,m)}return null}function w(l,c,h,m){for(var b=null,x=null,E=c,S=c=0,y=null;E!==null&&S<h.length;S++){E.index>S?(y=E,E=null):y=E.sibling;var L=p(l,E,h[S],m);if(L===null){E===null&&(E=y);break}e&&E&&L.alternate===null&&t(l,E),c=f(L,c,S),x===null?b=L:x.sibling=L,x=L,E=y}if(S===h.length)return r(l,E),be&&jr(l,S),b;if(E===null){for(;S<h.length;S++)E=u(l,h[S],m),E!==null&&(c=f(E,c,S),x===null?b=E:x.sibling=E,x=E);return be&&jr(l,S),b}for(E=i(l,E);S<h.length;S++)y=C(E,l,S,h[S],m),y!==null&&(e&&y.alternate!==null&&E.delete(y.key===null?S:y.key),c=f(y,c,S),x===null?b=y:x.sibling=y,x=y);return e&&E.forEach(function(A){return t(l,A)}),be&&jr(l,S),b}function _(l,c,h,m){var b=os(h);if(typeof b!="function")throw Error(K(150));if(h=b.call(h),h==null)throw Error(K(151));for(var x=b=null,E=c,S=c=0,y=null,L=h.next();E!==null&&!L.done;S++,L=h.next()){E.index>S?(y=E,E=null):y=E.sibling;var A=p(l,E,L.value,m);if(A===null){E===null&&(E=y);break}e&&E&&A.alternate===null&&t(l,E),c=f(A,c,S),x===null?b=A:x.sibling=A,x=A,E=y}if(L.done)return r(l,E),be&&jr(l,S),b;if(E===null){for(;!L.done;S++,L=h.next())L=u(l,L.value,m),L!==null&&(c=f(L,c,S),x===null?b=L:x.sibling=L,x=L);return be&&jr(l,S),b}for(E=i(l,E);!L.done;S++,L=h.next())L=C(E,l,S,L.value,m),L!==null&&(e&&L.alternate!==null&&E.delete(L.key===null?S:L.key),c=f(L,c,S),x===null?b=L:x.sibling=L,x=L);return e&&E.forEach(function(k){return t(l,k)}),be&&jr(l,S),b}function n(l,c,h,m){if(typeof h=="object"&&h!==null&&h.type===pi&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case mn:e:{for(var b=h.key,x=c;x!==null;){if(x.key===b){if(b=h.type,b===pi){if(x.tag===7){r(l,x.sibling),c=o(x,h.props.children),c.return=l,l=c;break e}}else if(x.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===pr&&Fu(b)===x.type){r(l,x.sibling),c=o(x,h.props),c.ref=hs(l,x,h),c.return=l,l=c;break e}r(l,x);break}else t(l,x);x=x.sibling}h.type===pi?(c=si(h.props.children,l.mode,m,h.key),c.return=l,l=c):(m=Qn(h.type,h.key,h.props,null,l.mode,m),m.ref=hs(l,c,h),m.return=l,l=m)}return g(l);case _i:e:{for(x=h.key;c!==null;){if(c.key===x)if(c.tag===4&&c.stateNode.containerInfo===h.containerInfo&&c.stateNode.implementation===h.implementation){r(l,c.sibling),c=o(c,h.children||[]),c.return=l,l=c;break e}else{r(l,c);break}else t(l,c);c=c.sibling}c=ba(h,l.mode,m),c.return=l,l=c}return g(l);case pr:return x=h._init,n(l,c,x(h._payload),m)}if(ys(h))return w(l,c,h,m);if(os(h))return _(l,c,h,m);An(l,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,c!==null&&c.tag===6?(r(l,c.sibling),c=o(c,h),c.return=l,l=c):(r(l,c),c=wa(h,l.mode,m),c.return=l,l=c),g(l)):r(l,c)}return n}var Qi=nf(!0),of=nf(!1),fo=Ur(null),_o=null,bi=null,pc=null;function vc(){pc=bi=_o=null}function gc(e){var t=fo.current;Se(fo),e._currentValue=t}function al(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Di(e,t){_o=e,pc=bi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ot=!0),e.firstContext=null)}function bt(e){var t=e._currentValue;if(pc!==e)if(e={context:e,memoizedValue:t,next:null},bi===null){if(_o===null)throw Error(K(308));bi=e,_o.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var qr=null;function mc(e){qr===null?qr=[e]:qr.push(e)}function af(e,t,r,i){var o=t.interleaved;return o===null?(r.next=r,mc(t)):(r.next=o.next,o.next=r),t.interleaved=r,ar(e,i)}function ar(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var vr=!1;function yc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function rr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pr(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,ue&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,ar(e,r)}return o=i.interleaved,o===null?(t.next=t,mc(i)):(t.next=o.next,o.next=t),i.interleaved=t,ar(e,r)}function Wn(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,sc(e,r)}}function Nu(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var o=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var g={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?o=f=g:f=f.next=g,r=r.next}while(r!==null);f===null?o=f=t:f=f.next=t}else o=f=t;r={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:f,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function po(e,t,r,i){var o=e.updateQueue;vr=!1;var f=o.firstBaseUpdate,g=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var a=s,d=a.next;a.next=null,g===null?f=d:g.next=d,g=a;var v=e.alternate;v!==null&&(v=v.updateQueue,s=v.lastBaseUpdate,s!==g&&(s===null?v.firstBaseUpdate=d:s.next=d,v.lastBaseUpdate=a))}if(f!==null){var u=o.baseState;g=0,v=d=a=null,s=f;do{var p=s.lane,C=s.eventTime;if((i&p)===p){v!==null&&(v=v.next={eventTime:C,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var w=e,_=s;switch(p=t,C=r,_.tag){case 1:if(w=_.payload,typeof w=="function"){u=w.call(C,u,p);break e}u=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=_.payload,p=typeof w=="function"?w.call(C,u,p):w,p==null)break e;u=Re({},u,p);break e;case 2:vr=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,p=o.effects,p===null?o.effects=[s]:p.push(s))}else C={eventTime:C,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},v===null?(d=v=C,a=u):v=v.next=C,g|=p;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;p=s,s=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);if(v===null&&(a=u),o.baseState=a,o.firstBaseUpdate=d,o.lastBaseUpdate=v,t=o.shared.interleaved,t!==null){o=t;do g|=o.lane,o=o.next;while(o!==t)}else f===null&&(o.shared.lanes=0);li|=g,e.lanes=g,e.memoizedState=u}}function Hu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],o=i.callback;if(o!==null){if(i.callback=null,i=r,typeof o!="function")throw Error(K(191,o));o.call(i)}}}var ln={},Vt=Ur(ln),js=Ur(ln),Vs=Ur(ln);function Gr(e){if(e===ln)throw Error(K(174));return e}function Sc(e,t){switch(ge(Vs,t),ge(js,e),ge(Vt,ln),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ua(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ua(t,e)}Se(Vt),ge(Vt,t)}function Xi(){Se(Vt),Se(js),Se(Vs)}function cf(e){Gr(Vs.current);var t=Gr(Vt.current),r=Ua(t,e.type);t!==r&&(ge(js,e),ge(Vt,r))}function Cc(e){js.current===e&&(Se(Vt),Se(js))}var xe=Ur(0);function vo(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var va=[];function wc(){for(var e=0;e<va.length;e++)va[e]._workInProgressVersionPrimary=null;va.length=0}var jn=ur.ReactCurrentDispatcher,ga=ur.ReactCurrentBatchConfig,ai=0,Ee=null,Be=null,Ne=null,go=!1,As=!1,Ks=0,Sg=0;function Ve(){throw Error(K(321))}function bc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!It(e[r],t[r]))return!1;return!0}function xc(e,t,r,i,o,f){if(ai=f,Ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,jn.current=e===null||e.memoizedState===null?xg:Eg,e=r(i,o),As){f=0;do{if(As=!1,Ks=0,25<=f)throw Error(K(301));f+=1,Ne=Be=null,t.updateQueue=null,jn.current=Lg,e=r(i,o)}while(As)}if(jn.current=mo,t=Be!==null&&Be.next!==null,ai=0,Ne=Be=Ee=null,go=!1,t)throw Error(K(300));return e}function Ec(){var e=Ks!==0;return Ks=0,e}function Ht(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?Ee.memoizedState=Ne=e:Ne=Ne.next=e,Ne}function xt(){if(Be===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=Ne===null?Ee.memoizedState:Ne.next;if(t!==null)Ne=t,Be=e;else{if(e===null)throw Error(K(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ne===null?Ee.memoizedState=Ne=e:Ne=Ne.next=e}return Ne}function qs(e,t){return typeof t=="function"?t(e):t}function ma(e){var t=xt(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var i=Be,o=i.baseQueue,f=r.pending;if(f!==null){if(o!==null){var g=o.next;o.next=f.next,f.next=g}i.baseQueue=o=f,r.pending=null}if(o!==null){f=o.next,i=i.baseState;var s=g=null,a=null,d=f;do{var v=d.lane;if((ai&v)===v)a!==null&&(a=a.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:e(i,d.action);else{var u={lane:v,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};a===null?(s=a=u,g=i):a=a.next=u,Ee.lanes|=v,li|=v}d=d.next}while(d!==null&&d!==f);a===null?g=i:a.next=s,It(i,t.memoizedState)||(ot=!0),t.memoizedState=i,t.baseState=g,t.baseQueue=a,r.lastRenderedState=i}if(e=r.interleaved,e!==null){o=e;do f=o.lane,Ee.lanes|=f,li|=f,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ya(e){var t=xt(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var i=r.dispatch,o=r.pending,f=t.memoizedState;if(o!==null){r.pending=null;var g=o=o.next;do f=e(f,g.action),g=g.next;while(g!==o);It(f,t.memoizedState)||(ot=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,i]}function uf(){}function hf(e,t){var r=Ee,i=xt(),o=t(),f=!It(i.memoizedState,o);if(f&&(i.memoizedState=o,ot=!0),i=i.queue,Lc(_f.bind(null,r,i,e),[e]),i.getSnapshot!==t||f||Ne!==null&&Ne.memoizedState.tag&1){if(r.flags|=2048,Gs(9,ff.bind(null,r,i,o,t),void 0,null),He===null)throw Error(K(349));ai&30||df(r,t,o)}return o}function df(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ff(e,t,r,i){t.value=r,t.getSnapshot=i,pf(t)&&vf(e)}function _f(e,t,r){return r(function(){pf(t)&&vf(e)})}function pf(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!It(e,r)}catch{return!0}}function vf(e){var t=ar(e,1);t!==null&&Bt(t,e,1,-1)}function $u(e){var t=Ht();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:e},t.queue=e,e=e.dispatch=bg.bind(null,Ee,e),[t.memoizedState,e]}function Gs(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function gf(){return xt().memoizedState}function Vn(e,t,r,i){var o=Ht();Ee.flags|=e,o.memoizedState=Gs(1|t,r,void 0,i===void 0?null:i)}function No(e,t,r,i){var o=xt();i=i===void 0?null:i;var f=void 0;if(Be!==null){var g=Be.memoizedState;if(f=g.destroy,i!==null&&bc(i,g.deps)){o.memoizedState=Gs(t,r,f,i);return}}Ee.flags|=e,o.memoizedState=Gs(1|t,r,f,i)}function Uu(e,t){return Vn(8390656,8,e,t)}function Lc(e,t){return No(2048,8,e,t)}function mf(e,t){return No(4,2,e,t)}function yf(e,t){return No(4,4,e,t)}function Sf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Cf(e,t,r){return r=r!=null?r.concat([e]):null,No(4,4,Sf.bind(null,t,e),r)}function Rc(){}function wf(e,t){var r=xt();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&bc(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function bf(e,t){var r=xt();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&bc(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function xf(e,t,r){return ai&21?(It(r,t)||(r=kd(),Ee.lanes|=r,li|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ot=!0),e.memoizedState=r)}function Cg(e,t){var r=pe;pe=r!==0&&4>r?r:4,e(!0);var i=ga.transition;ga.transition={};try{e(!1),t()}finally{pe=r,ga.transition=i}}function Ef(){return xt().memoizedState}function wg(e,t,r){var i=Br(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Lf(e))Rf(t,r);else if(r=af(e,t,r,i),r!==null){var o=Ze();Bt(r,e,i,o),kf(r,t,i)}}function bg(e,t,r){var i=Br(e),o={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Lf(e))Rf(t,o);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,s=f(g,r);if(o.hasEagerState=!0,o.eagerState=s,It(s,g)){var a=t.interleaved;a===null?(o.next=o,mc(t)):(o.next=a.next,a.next=o),t.interleaved=o;return}}catch{}finally{}r=af(e,t,o,i),r!==null&&(o=Ze(),Bt(r,e,i,o),kf(r,t,i))}}function Lf(e){var t=e.alternate;return e===Ee||t!==null&&t===Ee}function Rf(e,t){As=go=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function kf(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,sc(e,r)}}var mo={readContext:bt,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useInsertionEffect:Ve,useLayoutEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useMutableSource:Ve,useSyncExternalStore:Ve,useId:Ve,unstable_isNewReconciler:!1},xg={readContext:bt,useCallback:function(e,t){return Ht().memoizedState=[e,t===void 0?null:t],e},useContext:bt,useEffect:Uu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Vn(4194308,4,Sf.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Vn(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vn(4,2,e,t)},useMemo:function(e,t){var r=Ht();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Ht();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=wg.bind(null,Ee,e),[i.memoizedState,e]},useRef:function(e){var t=Ht();return e={current:e},t.memoizedState=e},useState:$u,useDebugValue:Rc,useDeferredValue:function(e){return Ht().memoizedState=e},useTransition:function(){var e=$u(!1),t=e[0];return e=Cg.bind(null,e[1]),Ht().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Ee,o=Ht();if(be){if(r===void 0)throw Error(K(407));r=r()}else{if(r=t(),He===null)throw Error(K(349));ai&30||df(i,t,r)}o.memoizedState=r;var f={value:r,getSnapshot:t};return o.queue=f,Uu(_f.bind(null,i,f,e),[e]),i.flags|=2048,Gs(9,ff.bind(null,i,f,r,t),void 0,null),r},useId:function(){var e=Ht(),t=He.identifierPrefix;if(be){var r=tr,i=er;r=(i&~(1<<32-Ot(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ks++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Sg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Eg={readContext:bt,useCallback:wf,useContext:bt,useEffect:Lc,useImperativeHandle:Cf,useInsertionEffect:mf,useLayoutEffect:yf,useMemo:bf,useReducer:ma,useRef:gf,useState:function(){return ma(qs)},useDebugValue:Rc,useDeferredValue:function(e){var t=xt();return xf(t,Be.memoizedState,e)},useTransition:function(){var e=ma(qs)[0],t=xt().memoizedState;return[e,t]},useMutableSource:uf,useSyncExternalStore:hf,useId:Ef,unstable_isNewReconciler:!1},Lg={readContext:bt,useCallback:wf,useContext:bt,useEffect:Lc,useImperativeHandle:Cf,useInsertionEffect:mf,useLayoutEffect:yf,useMemo:bf,useReducer:ya,useRef:gf,useState:function(){return ya(qs)},useDebugValue:Rc,useDeferredValue:function(e){var t=xt();return Be===null?t.memoizedState=e:xf(t,Be.memoizedState,e)},useTransition:function(){var e=ya(qs)[0],t=xt().memoizedState;return[e,t]},useMutableSource:uf,useSyncExternalStore:hf,useId:Ef,unstable_isNewReconciler:!1};function kt(e,t){if(e&&e.defaultProps){t=Re({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ll(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Re({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ho={isMounted:function(e){return(e=e._reactInternals)?di(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Ze(),o=Br(e),f=rr(i,o);f.payload=t,r!=null&&(f.callback=r),t=Pr(e,f,o),t!==null&&(Bt(t,e,o,i),Wn(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Ze(),o=Br(e),f=rr(i,o);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=Pr(e,f,o),t!==null&&(Bt(t,e,o,i),Wn(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ze(),i=Br(e),o=rr(r,i);o.tag=2,t!=null&&(o.callback=t),t=Pr(e,o,i),t!==null&&(Bt(t,e,i,r),Wn(t,e,i))}};function zu(e,t,r,i,o,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,f,g):t.prototype&&t.prototype.isPureReactComponent?!$s(r,i)||!$s(o,f):!0}function Af(e,t,r){var i=!1,o=Hr,f=t.contextType;return typeof f=="object"&&f!==null?f=bt(f):(o=lt(t)?ni:Ge.current,i=t.contextTypes,f=(i=i!=null)?qi(e,o):Hr),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ho,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=f),t}function Wu(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Ho.enqueueReplaceState(t,t.state,null)}function cl(e,t,r,i){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},yc(e);var f=t.contextType;typeof f=="object"&&f!==null?o.context=bt(f):(f=lt(t)?ni:Ge.current,o.context=qi(e,f)),o.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(ll(e,t,f,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Ho.enqueueReplaceState(o,o.state,null),po(e,r,o,i),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Yi(e,t){try{var r="",i=t;do r+=ev(i),i=i.return;while(i);var o=r}catch(f){o=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:o,digest:null}}function Sa(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ul(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Rg=typeof WeakMap=="function"?WeakMap:Map;function Df(e,t,r){r=rr(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){So||(So=!0,Sl=i),ul(e,t)},r}function Mf(e,t,r){r=rr(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var o=t.value;r.payload=function(){return i(o)},r.callback=function(){ul(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){ul(e,t),typeof i!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),r}function ju(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new Rg;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(r)||(o.add(r),e=Ug.bind(null,e,t,r),t.then(e,e))}function Vu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ku(e,t,r,i,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=rr(-1,1),t.tag=2,Pr(r,t,1))),r.lanes|=1),e)}var kg=ur.ReactCurrentOwner,ot=!1;function Je(e,t,r,i){t.child=e===null?of(t,null,r,i):Qi(t,e.child,r,i)}function qu(e,t,r,i,o){r=r.render;var f=t.ref;return Di(t,o),i=xc(e,t,r,i,f,o),r=Ec(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,lr(e,t,o)):(be&&r&&dc(t),t.flags|=1,Je(e,t,i,o),t.child)}function Gu(e,t,r,i,o){if(e===null){var f=r.type;return typeof f=="function"&&!Bc(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,Tf(e,t,f,i,o)):(e=Qn(r.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&o)){var g=f.memoizedProps;if(r=r.compare,r=r!==null?r:$s,r(g,i)&&e.ref===t.ref)return lr(e,t,o)}return t.flags|=1,e=Ir(f,i),e.ref=t.ref,e.return=t,t.child=e}function Tf(e,t,r,i,o){if(e!==null){var f=e.memoizedProps;if($s(f,i)&&e.ref===t.ref)if(ot=!1,t.pendingProps=i=f,(e.lanes&o)!==0)e.flags&131072&&(ot=!0);else return t.lanes=e.lanes,lr(e,t,o)}return hl(e,t,r,i,o)}function Pf(e,t,r){var i=t.pendingProps,o=i.children,f=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(Ei,ut),ut|=r;else{if(!(r&1073741824))return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ge(Ei,ut),ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=f!==null?f.baseLanes:r,ge(Ei,ut),ut|=i}else f!==null?(i=f.baseLanes|r,t.memoizedState=null):i=r,ge(Ei,ut),ut|=i;return Je(e,t,o,r),t.child}function Of(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function hl(e,t,r,i,o){var f=lt(r)?ni:Ge.current;return f=qi(t,f),Di(t,o),r=xc(e,t,r,i,f,o),i=Ec(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,lr(e,t,o)):(be&&i&&dc(t),t.flags|=1,Je(e,t,r,o),t.child)}function Qu(e,t,r,i,o){if(lt(r)){var f=!0;co(t)}else f=!1;if(Di(t,o),t.stateNode===null)Kn(e,t),Af(t,r,i),cl(t,r,i,o),i=!0;else if(e===null){var g=t.stateNode,s=t.memoizedProps;g.props=s;var a=g.context,d=r.contextType;typeof d=="object"&&d!==null?d=bt(d):(d=lt(r)?ni:Ge.current,d=qi(t,d));var v=r.getDerivedStateFromProps,u=typeof v=="function"||typeof g.getSnapshotBeforeUpdate=="function";u||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(s!==i||a!==d)&&Wu(t,g,i,d),vr=!1;var p=t.memoizedState;g.state=p,po(t,i,g,o),a=t.memoizedState,s!==i||p!==a||at.current||vr?(typeof v=="function"&&(ll(t,r,v,i),a=t.memoizedState),(s=vr||zu(t,r,s,i,p,a,d))?(u||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=a),g.props=i,g.state=a,g.context=d,i=s):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{g=t.stateNode,lf(e,t),s=t.memoizedProps,d=t.type===t.elementType?s:kt(t.type,s),g.props=d,u=t.pendingProps,p=g.context,a=r.contextType,typeof a=="object"&&a!==null?a=bt(a):(a=lt(r)?ni:Ge.current,a=qi(t,a));var C=r.getDerivedStateFromProps;(v=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(s!==u||p!==a)&&Wu(t,g,i,a),vr=!1,p=t.memoizedState,g.state=p,po(t,i,g,o);var w=t.memoizedState;s!==u||p!==w||at.current||vr?(typeof C=="function"&&(ll(t,r,C,i),w=t.memoizedState),(d=vr||zu(t,r,d,i,p,w,a)||!1)?(v||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(i,w,a),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(i,w,a)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=w),g.props=i,g.state=w,g.context=a,i=d):(typeof g.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),i=!1)}return dl(e,t,r,i,f,o)}function dl(e,t,r,i,o,f){Of(e,t);var g=(t.flags&128)!==0;if(!i&&!g)return o&&Ou(t,r,!1),lr(e,t,f);i=t.stateNode,kg.current=t;var s=g&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&g?(t.child=Qi(t,e.child,null,f),t.child=Qi(t,null,s,f)):Je(e,t,s,f),t.memoizedState=i.state,o&&Ou(t,r,!0),t.child}function Bf(e){var t=e.stateNode;t.pendingContext?Pu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pu(e,t.context,!1),Sc(e,t.containerInfo)}function Xu(e,t,r,i,o){return Gi(),_c(o),t.flags|=256,Je(e,t,r,i),t.child}var fl={dehydrated:null,treeContext:null,retryLane:0};function _l(e){return{baseLanes:e,cachePool:null,transitions:null}}function If(e,t,r){var i=t.pendingProps,o=xe.current,f=!1,g=(t.flags&128)!==0,s;if((s=g)||(s=e!==null&&e.memoizedState===null?!1:(o&2)!==0),s?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ge(xe,o&1),e===null)return ol(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=i.children,e=i.fallback,f?(i=t.mode,f=t.child,g={mode:"hidden",children:g},!(i&1)&&f!==null?(f.childLanes=0,f.pendingProps=g):f=zo(g,i,0,null),e=si(e,i,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=_l(r),t.memoizedState=fl,e):kc(t,g));if(o=e.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return Ag(e,t,g,i,s,o,r);if(f){f=i.fallback,g=t.mode,o=e.child,s=o.sibling;var a={mode:"hidden",children:i.children};return!(g&1)&&t.child!==o?(i=t.child,i.childLanes=0,i.pendingProps=a,t.deletions=null):(i=Ir(o,a),i.subtreeFlags=o.subtreeFlags&14680064),s!==null?f=Ir(s,f):(f=si(f,g,r,null),f.flags|=2),f.return=t,i.return=t,i.sibling=f,t.child=i,i=f,f=t.child,g=e.child.memoizedState,g=g===null?_l(r):{baseLanes:g.baseLanes|r,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~r,t.memoizedState=fl,i}return f=e.child,e=f.sibling,i=Ir(f,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function kc(e,t){return t=zo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Dn(e,t,r,i){return i!==null&&_c(i),Qi(t,e.child,null,r),e=kc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ag(e,t,r,i,o,f,g){if(r)return t.flags&256?(t.flags&=-257,i=Sa(Error(K(422))),Dn(e,t,g,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=i.fallback,o=t.mode,i=zo({mode:"visible",children:i.children},o,0,null),f=si(f,o,g,null),f.flags|=2,i.return=t,f.return=t,i.sibling=f,t.child=i,t.mode&1&&Qi(t,e.child,null,g),t.child.memoizedState=_l(g),t.memoizedState=fl,f);if(!(t.mode&1))return Dn(e,t,g,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var s=i.dgst;return i=s,f=Error(K(419)),i=Sa(f,i,void 0),Dn(e,t,g,i)}if(s=(g&e.childLanes)!==0,ot||s){if(i=He,i!==null){switch(g&-g){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|g)?0:o,o!==0&&o!==f.retryLane&&(f.retryLane=o,ar(e,o),Bt(i,e,o,-1))}return Oc(),i=Sa(Error(K(421))),Dn(e,t,g,i)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=zg.bind(null,e),o._reactRetry=t,null):(e=f.treeContext,ht=Tr(o.nextSibling),dt=t,be=!0,Pt=null,e!==null&&(yt[St++]=er,yt[St++]=tr,yt[St++]=oi,er=e.id,tr=e.overflow,oi=t),t=kc(t,i.children),t.flags|=4096,t)}function Yu(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),al(e.return,t,r)}function Ca(e,t,r,i,o){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:o}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=r,f.tailMode=o)}function Ff(e,t,r){var i=t.pendingProps,o=i.revealOrder,f=i.tail;if(Je(e,t,i.children,r),i=xe.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yu(e,r,t);else if(e.tag===19)Yu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ge(xe,i),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&vo(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),Ca(t,!1,o,r,f);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&vo(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}Ca(t,!0,r,null,f);break;case"together":Ca(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Kn(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function lr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),li|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,r=Ir(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ir(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Dg(e,t,r){switch(t.tag){case 3:Bf(t),Gi();break;case 5:cf(t);break;case 1:lt(t.type)&&co(t);break;case 4:Sc(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,o=t.memoizedProps.value;ge(fo,i._currentValue),i._currentValue=o;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(ge(xe,xe.current&1),t.flags|=128,null):r&t.child.childLanes?If(e,t,r):(ge(xe,xe.current&1),e=lr(e,t,r),e!==null?e.sibling:null);ge(xe,xe.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return Ff(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ge(xe,xe.current),i)break;return null;case 22:case 23:return t.lanes=0,Pf(e,t,r)}return lr(e,t,r)}var Nf,pl,Hf,$f;Nf=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};pl=function(){};Hf=function(e,t,r,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,Gr(Vt.current);var f=null;switch(r){case"input":o=Fa(e,o),i=Fa(e,i),f=[];break;case"select":o=Re({},o,{value:void 0}),i=Re({},i,{value:void 0}),f=[];break;case"textarea":o=$a(e,o),i=$a(e,i),f=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=ao)}za(r,i);var g;r=null;for(d in o)if(!i.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var s=o[d];for(g in s)s.hasOwnProperty(g)&&(r||(r={}),r[g]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ps.hasOwnProperty(d)?f||(f=[]):(f=f||[]).push(d,null));for(d in i){var a=i[d];if(s=o!=null?o[d]:void 0,i.hasOwnProperty(d)&&a!==s&&(a!=null||s!=null))if(d==="style")if(s){for(g in s)!s.hasOwnProperty(g)||a&&a.hasOwnProperty(g)||(r||(r={}),r[g]="");for(g in a)a.hasOwnProperty(g)&&s[g]!==a[g]&&(r||(r={}),r[g]=a[g])}else r||(f||(f=[]),f.push(d,r)),r=a;else d==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,s=s?s.__html:void 0,a!=null&&s!==a&&(f=f||[]).push(d,a)):d==="children"?typeof a!="string"&&typeof a!="number"||(f=f||[]).push(d,""+a):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ps.hasOwnProperty(d)?(a!=null&&d==="onScroll"&&ye("scroll",e),f||s===a||(f=[])):(f=f||[]).push(d,a))}r&&(f=f||[]).push("style",r);var d=f;(t.updateQueue=d)&&(t.flags|=4)}};$f=function(e,t,r,i){r!==i&&(t.flags|=4)};function ds(e,t){if(!be)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function Mg(e,t,r){var i=t.pendingProps;switch(fc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(t),null;case 1:return lt(t.type)&&lo(),Ke(t),null;case 3:return i=t.stateNode,Xi(),Se(at),Se(Ge),wc(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(kn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pt!==null&&(bl(Pt),Pt=null))),pl(e,t),Ke(t),null;case 5:Cc(t);var o=Gr(Vs.current);if(r=t.type,e!==null&&t.stateNode!=null)Hf(e,t,r,i,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(K(166));return Ke(t),null}if(e=Gr(Vt.current),kn(t)){i=t.stateNode,r=t.type;var f=t.memoizedProps;switch(i[Wt]=t,i[Ws]=f,e=(t.mode&1)!==0,r){case"dialog":ye("cancel",i),ye("close",i);break;case"iframe":case"object":case"embed":ye("load",i);break;case"video":case"audio":for(o=0;o<Cs.length;o++)ye(Cs[o],i);break;case"source":ye("error",i);break;case"img":case"image":case"link":ye("error",i),ye("load",i);break;case"details":ye("toggle",i);break;case"input":ou(i,f),ye("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!f.multiple},ye("invalid",i);break;case"textarea":lu(i,f),ye("invalid",i)}za(r,f),o=null;for(var g in f)if(f.hasOwnProperty(g)){var s=f[g];g==="children"?typeof s=="string"?i.textContent!==s&&(f.suppressHydrationWarning!==!0&&Rn(i.textContent,s,e),o=["children",s]):typeof s=="number"&&i.textContent!==""+s&&(f.suppressHydrationWarning!==!0&&Rn(i.textContent,s,e),o=["children",""+s]):Ps.hasOwnProperty(g)&&s!=null&&g==="onScroll"&&ye("scroll",i)}switch(r){case"input":yn(i),au(i,f,!0);break;case"textarea":yn(i),cu(i);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(i.onclick=ao)}i=o,t.updateQueue=i,i!==null&&(t.flags|=4)}else{g=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=g.createElement(r,{is:i.is}):(e=g.createElement(r),r==="select"&&(g=e,i.multiple?g.multiple=!0:i.size&&(g.size=i.size))):e=g.createElementNS(e,r),e[Wt]=t,e[Ws]=i,Nf(e,t,!1,!1),t.stateNode=e;e:{switch(g=Wa(r,i),r){case"dialog":ye("cancel",e),ye("close",e),o=i;break;case"iframe":case"object":case"embed":ye("load",e),o=i;break;case"video":case"audio":for(o=0;o<Cs.length;o++)ye(Cs[o],e);o=i;break;case"source":ye("error",e),o=i;break;case"img":case"image":case"link":ye("error",e),ye("load",e),o=i;break;case"details":ye("toggle",e),o=i;break;case"input":ou(e,i),o=Fa(e,i),ye("invalid",e);break;case"option":o=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=Re({},i,{value:void 0}),ye("invalid",e);break;case"textarea":lu(e,i),o=$a(e,i),ye("invalid",e);break;default:o=i}za(r,o),s=o;for(f in s)if(s.hasOwnProperty(f)){var a=s[f];f==="style"?vd(e,a):f==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&_d(e,a)):f==="children"?typeof a=="string"?(r!=="textarea"||a!=="")&&Os(e,a):typeof a=="number"&&Os(e,""+a):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Ps.hasOwnProperty(f)?a!=null&&f==="onScroll"&&ye("scroll",e):a!=null&&Jl(e,f,a,g))}switch(r){case"input":yn(e),au(e,i,!1);break;case"textarea":yn(e),cu(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Nr(i.value));break;case"select":e.multiple=!!i.multiple,f=i.value,f!=null?Li(e,!!i.multiple,f,!1):i.defaultValue!=null&&Li(e,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=ao)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ke(t),null;case 6:if(e&&t.stateNode!=null)$f(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(K(166));if(r=Gr(Vs.current),Gr(Vt.current),kn(t)){if(i=t.stateNode,r=t.memoizedProps,i[Wt]=t,(f=i.nodeValue!==r)&&(e=dt,e!==null))switch(e.tag){case 3:Rn(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Rn(i.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Wt]=t,t.stateNode=i}return Ke(t),null;case 13:if(Se(xe),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(be&&ht!==null&&t.mode&1&&!(t.flags&128))sf(),Gi(),t.flags|=98560,f=!1;else if(f=kn(t),i!==null&&i.dehydrated!==null){if(e===null){if(!f)throw Error(K(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(K(317));f[Wt]=t}else Gi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ke(t),f=!1}else Pt!==null&&(bl(Pt),Pt=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||xe.current&1?Ie===0&&(Ie=3):Oc())),t.updateQueue!==null&&(t.flags|=4),Ke(t),null);case 4:return Xi(),pl(e,t),e===null&&Us(t.stateNode.containerInfo),Ke(t),null;case 10:return gc(t.type._context),Ke(t),null;case 17:return lt(t.type)&&lo(),Ke(t),null;case 19:if(Se(xe),f=t.memoizedState,f===null)return Ke(t),null;if(i=(t.flags&128)!==0,g=f.rendering,g===null)if(i)ds(f,!1);else{if(Ie!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=vo(e),g!==null){for(t.flags|=128,ds(f,!1),i=g.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)f=r,e=i,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ge(xe,xe.current&1|2),t.child}e=e.sibling}f.tail!==null&&Me()>Ji&&(t.flags|=128,i=!0,ds(f,!1),t.lanes=4194304)}else{if(!i)if(e=vo(g),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ds(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!be)return Ke(t),null}else 2*Me()-f.renderingStartTime>Ji&&r!==1073741824&&(t.flags|=128,i=!0,ds(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(r=f.last,r!==null?r.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Me(),t.sibling=null,r=xe.current,ge(xe,i?r&1|2:r&1),t):(Ke(t),null);case 22:case 23:return Pc(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?ut&1073741824&&(Ke(t),t.subtreeFlags&6&&(t.flags|=8192)):Ke(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function Tg(e,t){switch(fc(t),t.tag){case 1:return lt(t.type)&&lo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xi(),Se(at),Se(Ge),wc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Cc(t),null;case 13:if(Se(xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));Gi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(xe),null;case 4:return Xi(),null;case 10:return gc(t.type._context),null;case 22:case 23:return Pc(),null;case 24:return null;default:return null}}var Mn=!1,qe=!1,Pg=typeof WeakSet=="function"?WeakSet:Set,Y=null;function xi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Ae(e,t,i)}else r.current=null}function vl(e,t,r){try{r()}catch(i){Ae(e,t,i)}}var Ju=!1;function Og(e,t){if(Za=so,e=jd(),hc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var o=i.anchorOffset,f=i.focusNode;i=i.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var g=0,s=-1,a=-1,d=0,v=0,u=e,p=null;t:for(;;){for(var C;u!==r||o!==0&&u.nodeType!==3||(s=g+o),u!==f||i!==0&&u.nodeType!==3||(a=g+i),u.nodeType===3&&(g+=u.nodeValue.length),(C=u.firstChild)!==null;)p=u,u=C;for(;;){if(u===e)break t;if(p===r&&++d===o&&(s=g),p===f&&++v===i&&(a=g),(C=u.nextSibling)!==null)break;u=p,p=u.parentNode}u=C}r=s===-1||a===-1?null:{start:s,end:a}}else r=null}r=r||{start:0,end:0}}else r=null;for(el={focusedElem:e,selectionRange:r},so=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var _=w.memoizedProps,n=w.memoizedState,l=t.stateNode,c=l.getSnapshotBeforeUpdate(t.elementType===t.type?_:kt(t.type,_),n);l.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(m){Ae(t,t.return,m)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return w=Ju,Ju=!1,w}function Ds(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&e)===e){var f=o.destroy;o.destroy=void 0,f!==void 0&&vl(t,r,f)}o=o.next}while(o!==i)}}function $o(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function gl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Uf(e){var t=e.alternate;t!==null&&(e.alternate=null,Uf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wt],delete t[Ws],delete t[il],delete t[vg],delete t[gg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zf(e){return e.tag===5||e.tag===3||e.tag===4}function Zu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ml(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ao));else if(i!==4&&(e=e.child,e!==null))for(ml(e,t,r),e=e.sibling;e!==null;)ml(e,t,r),e=e.sibling}function yl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(yl(e,t,r),e=e.sibling;e!==null;)yl(e,t,r),e=e.sibling}var $e=null,Tt=!1;function hr(e,t,r){for(r=r.child;r!==null;)Wf(e,t,r),r=r.sibling}function Wf(e,t,r){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(To,r)}catch{}switch(r.tag){case 5:qe||xi(r,t);case 6:var i=$e,o=Tt;$e=null,hr(e,t,r),$e=i,Tt=o,$e!==null&&(Tt?(e=$e,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):$e.removeChild(r.stateNode));break;case 18:$e!==null&&(Tt?(e=$e,r=r.stateNode,e.nodeType===8?_a(e.parentNode,r):e.nodeType===1&&_a(e,r),Ns(e)):_a($e,r.stateNode));break;case 4:i=$e,o=Tt,$e=r.stateNode.containerInfo,Tt=!0,hr(e,t,r),$e=i,Tt=o;break;case 0:case 11:case 14:case 15:if(!qe&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var f=o,g=f.destroy;f=f.tag,g!==void 0&&(f&2||f&4)&&vl(r,t,g),o=o.next}while(o!==i)}hr(e,t,r);break;case 1:if(!qe&&(xi(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(s){Ae(r,t,s)}hr(e,t,r);break;case 21:hr(e,t,r);break;case 22:r.mode&1?(qe=(i=qe)||r.memoizedState!==null,hr(e,t,r),qe=i):hr(e,t,r);break;default:hr(e,t,r)}}function eh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Pg),t.forEach(function(i){var o=Wg.bind(null,e,i);r.has(i)||(r.add(i),i.then(o,o))})}}function Rt(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];try{var f=e,g=t,s=g;e:for(;s!==null;){switch(s.tag){case 5:$e=s.stateNode,Tt=!1;break e;case 3:$e=s.stateNode.containerInfo,Tt=!0;break e;case 4:$e=s.stateNode.containerInfo,Tt=!0;break e}s=s.return}if($e===null)throw Error(K(160));Wf(f,g,o),$e=null,Tt=!1;var a=o.alternate;a!==null&&(a.return=null),o.return=null}catch(d){Ae(o,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)jf(t,e),t=t.sibling}function jf(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rt(t,e),Nt(e),i&4){try{Ds(3,e,e.return),$o(3,e)}catch(_){Ae(e,e.return,_)}try{Ds(5,e,e.return)}catch(_){Ae(e,e.return,_)}}break;case 1:Rt(t,e),Nt(e),i&512&&r!==null&&xi(r,r.return);break;case 5:if(Rt(t,e),Nt(e),i&512&&r!==null&&xi(r,r.return),e.flags&32){var o=e.stateNode;try{Os(o,"")}catch(_){Ae(e,e.return,_)}}if(i&4&&(o=e.stateNode,o!=null)){var f=e.memoizedProps,g=r!==null?r.memoizedProps:f,s=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{s==="input"&&f.type==="radio"&&f.name!=null&&hd(o,f),Wa(s,g);var d=Wa(s,f);for(g=0;g<a.length;g+=2){var v=a[g],u=a[g+1];v==="style"?vd(o,u):v==="dangerouslySetInnerHTML"?_d(o,u):v==="children"?Os(o,u):Jl(o,v,u,d)}switch(s){case"input":Na(o,f);break;case"textarea":dd(o,f);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!f.multiple;var C=f.value;C!=null?Li(o,!!f.multiple,C,!1):p!==!!f.multiple&&(f.defaultValue!=null?Li(o,!!f.multiple,f.defaultValue,!0):Li(o,!!f.multiple,f.multiple?[]:"",!1))}o[Ws]=f}catch(_){Ae(e,e.return,_)}}break;case 6:if(Rt(t,e),Nt(e),i&4){if(e.stateNode===null)throw Error(K(162));o=e.stateNode,f=e.memoizedProps;try{o.nodeValue=f}catch(_){Ae(e,e.return,_)}}break;case 3:if(Rt(t,e),Nt(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Ns(t.containerInfo)}catch(_){Ae(e,e.return,_)}break;case 4:Rt(t,e),Nt(e);break;case 13:Rt(t,e),Nt(e),o=e.child,o.flags&8192&&(f=o.memoizedState!==null,o.stateNode.isHidden=f,!f||o.alternate!==null&&o.alternate.memoizedState!==null||(Mc=Me())),i&4&&eh(e);break;case 22:if(v=r!==null&&r.memoizedState!==null,e.mode&1?(qe=(d=qe)||v,Rt(t,e),qe=d):Rt(t,e),Nt(e),i&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!v&&e.mode&1)for(Y=e,v=e.child;v!==null;){for(u=Y=v;Y!==null;){switch(p=Y,C=p.child,p.tag){case 0:case 11:case 14:case 15:Ds(4,p,p.return);break;case 1:xi(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){i=p,r=p.return;try{t=i,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(_){Ae(i,r,_)}}break;case 5:xi(p,p.return);break;case 22:if(p.memoizedState!==null){rh(u);continue}}C!==null?(C.return=p,Y=C):rh(u)}v=v.sibling}e:for(v=null,u=e;;){if(u.tag===5){if(v===null){v=u;try{o=u.stateNode,d?(f=o.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(s=u.stateNode,a=u.memoizedProps.style,g=a!=null&&a.hasOwnProperty("display")?a.display:null,s.style.display=pd("display",g))}catch(_){Ae(e,e.return,_)}}}else if(u.tag===6){if(v===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(_){Ae(e,e.return,_)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;v===u&&(v=null),u=u.return}v===u&&(v=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Rt(t,e),Nt(e),i&4&&eh(e);break;case 21:break;default:Rt(t,e),Nt(e)}}function Nt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(zf(r)){var i=r;break e}r=r.return}throw Error(K(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Os(o,""),i.flags&=-33);var f=Zu(e);yl(e,f,o);break;case 3:case 4:var g=i.stateNode.containerInfo,s=Zu(e);ml(e,s,g);break;default:throw Error(K(161))}}catch(a){Ae(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Bg(e,t,r){Y=e,Vf(e)}function Vf(e,t,r){for(var i=(e.mode&1)!==0;Y!==null;){var o=Y,f=o.child;if(o.tag===22&&i){var g=o.memoizedState!==null||Mn;if(!g){var s=o.alternate,a=s!==null&&s.memoizedState!==null||qe;s=Mn;var d=qe;if(Mn=g,(qe=a)&&!d)for(Y=o;Y!==null;)g=Y,a=g.child,g.tag===22&&g.memoizedState!==null?ih(o):a!==null?(a.return=g,Y=a):ih(o);for(;f!==null;)Y=f,Vf(f),f=f.sibling;Y=o,Mn=s,qe=d}th(e)}else o.subtreeFlags&8772&&f!==null?(f.return=o,Y=f):th(e)}}function th(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qe||$o(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!qe)if(r===null)i.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:kt(t.type,r.memoizedProps);i.componentDidUpdate(o,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Hu(t,f,i);break;case 3:var g=t.updateQueue;if(g!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Hu(t,g,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break;case"img":a.src&&(r.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var v=d.memoizedState;if(v!==null){var u=v.dehydrated;u!==null&&Ns(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}qe||t.flags&512&&gl(t)}catch(p){Ae(t,t.return,p)}}if(t===e){Y=null;break}if(r=t.sibling,r!==null){r.return=t.return,Y=r;break}Y=t.return}}function rh(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Y=r;break}Y=t.return}}function ih(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{$o(4,t)}catch(a){Ae(t,r,a)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var o=t.return;try{i.componentDidMount()}catch(a){Ae(t,o,a)}}var f=t.return;try{gl(t)}catch(a){Ae(t,f,a)}break;case 5:var g=t.return;try{gl(t)}catch(a){Ae(t,g,a)}}}catch(a){Ae(t,t.return,a)}if(t===e){Y=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Y=s;break}Y=t.return}}var Ig=Math.ceil,yo=ur.ReactCurrentDispatcher,Ac=ur.ReactCurrentOwner,wt=ur.ReactCurrentBatchConfig,ue=0,He=null,Pe=null,ze=0,ut=0,Ei=Ur(0),Ie=0,Qs=null,li=0,Uo=0,Dc=0,Ms=null,nt=null,Mc=0,Ji=1/0,Yt=null,So=!1,Sl=null,Or=null,Tn=!1,kr=null,Co=0,Ts=0,Cl=null,qn=-1,Gn=0;function Ze(){return ue&6?Me():qn!==-1?qn:qn=Me()}function Br(e){return e.mode&1?ue&2&&ze!==0?ze&-ze:yg.transition!==null?(Gn===0&&(Gn=kd()),Gn):(e=pe,e!==0||(e=window.event,e=e===void 0?16:Bd(e.type)),e):1}function Bt(e,t,r,i){if(50<Ts)throw Ts=0,Cl=null,Error(K(185));nn(e,r,i),(!(ue&2)||e!==He)&&(e===He&&(!(ue&2)&&(Uo|=r),Ie===4&&mr(e,ze)),ct(e,i),r===1&&ue===0&&!(t.mode&1)&&(Ji=Me()+500,Fo&&zr()))}function ct(e,t){var r=e.callbackNode;yv(e,t);var i=io(e,e===He?ze:0);if(i===0)r!==null&&du(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&du(r),t===1)e.tag===0?mg(sh.bind(null,e)):ef(sh.bind(null,e)),_g(function(){!(ue&6)&&zr()}),r=null;else{switch(Ad(i)){case 1:r=ic;break;case 4:r=Ld;break;case 16:r=ro;break;case 536870912:r=Rd;break;default:r=ro}r=Zf(r,Kf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Kf(e,t){if(qn=-1,Gn=0,ue&6)throw Error(K(327));var r=e.callbackNode;if(Mi()&&e.callbackNode!==r)return null;var i=io(e,e===He?ze:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=wo(e,i);else{t=i;var o=ue;ue|=2;var f=Gf();(He!==e||ze!==t)&&(Yt=null,Ji=Me()+500,ii(e,t));do try{Hg();break}catch(s){qf(e,s)}while(!0);vc(),yo.current=f,ue=o,Pe!==null?t=0:(He=null,ze=0,t=Ie)}if(t!==0){if(t===2&&(o=Ga(e),o!==0&&(i=o,t=wl(e,o))),t===1)throw r=Qs,ii(e,0),mr(e,i),ct(e,Me()),r;if(t===6)mr(e,i);else{if(o=e.current.alternate,!(i&30)&&!Fg(o)&&(t=wo(e,i),t===2&&(f=Ga(e),f!==0&&(i=f,t=wl(e,f))),t===1))throw r=Qs,ii(e,0),mr(e,i),ct(e,Me()),r;switch(e.finishedWork=o,e.finishedLanes=i,t){case 0:case 1:throw Error(K(345));case 2:Vr(e,nt,Yt);break;case 3:if(mr(e,i),(i&130023424)===i&&(t=Mc+500-Me(),10<t)){if(io(e,0)!==0)break;if(o=e.suspendedLanes,(o&i)!==i){Ze(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=rl(Vr.bind(null,e,nt,Yt),t);break}Vr(e,nt,Yt);break;case 4:if(mr(e,i),(i&4194240)===i)break;for(t=e.eventTimes,o=-1;0<i;){var g=31-Ot(i);f=1<<g,g=t[g],g>o&&(o=g),i&=~f}if(i=o,i=Me()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ig(i/1960))-i,10<i){e.timeoutHandle=rl(Vr.bind(null,e,nt,Yt),i);break}Vr(e,nt,Yt);break;case 5:Vr(e,nt,Yt);break;default:throw Error(K(329))}}}return ct(e,Me()),e.callbackNode===r?Kf.bind(null,e):null}function wl(e,t){var r=Ms;return e.current.memoizedState.isDehydrated&&(ii(e,t).flags|=256),e=wo(e,t),e!==2&&(t=nt,nt=r,t!==null&&bl(t)),e}function bl(e){nt===null?nt=e:nt.push.apply(nt,e)}function Fg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var o=r[i],f=o.getSnapshot;o=o.value;try{if(!It(f(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function mr(e,t){for(t&=~Dc,t&=~Uo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ot(t),i=1<<r;e[r]=-1,t&=~i}}function sh(e){if(ue&6)throw Error(K(327));Mi();var t=io(e,0);if(!(t&1))return ct(e,Me()),null;var r=wo(e,t);if(e.tag!==0&&r===2){var i=Ga(e);i!==0&&(t=i,r=wl(e,i))}if(r===1)throw r=Qs,ii(e,0),mr(e,t),ct(e,Me()),r;if(r===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vr(e,nt,Yt),ct(e,Me()),null}function Tc(e,t){var r=ue;ue|=1;try{return e(t)}finally{ue=r,ue===0&&(Ji=Me()+500,Fo&&zr())}}function ci(e){kr!==null&&kr.tag===0&&!(ue&6)&&Mi();var t=ue;ue|=1;var r=wt.transition,i=pe;try{if(wt.transition=null,pe=1,e)return e()}finally{pe=i,wt.transition=r,ue=t,!(ue&6)&&zr()}}function Pc(){ut=Ei.current,Se(Ei)}function ii(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,fg(r)),Pe!==null)for(r=Pe.return;r!==null;){var i=r;switch(fc(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&lo();break;case 3:Xi(),Se(at),Se(Ge),wc();break;case 5:Cc(i);break;case 4:Xi();break;case 13:Se(xe);break;case 19:Se(xe);break;case 10:gc(i.type._context);break;case 22:case 23:Pc()}r=r.return}if(He=e,Pe=e=Ir(e.current,null),ze=ut=t,Ie=0,Qs=null,Dc=Uo=li=0,nt=Ms=null,qr!==null){for(t=0;t<qr.length;t++)if(r=qr[t],i=r.interleaved,i!==null){r.interleaved=null;var o=i.next,f=r.pending;if(f!==null){var g=f.next;f.next=o,i.next=g}r.pending=i}qr=null}return e}function qf(e,t){do{var r=Pe;try{if(vc(),jn.current=mo,go){for(var i=Ee.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}go=!1}if(ai=0,Ne=Be=Ee=null,As=!1,Ks=0,Ac.current=null,r===null||r.return===null){Ie=1,Qs=t,Pe=null;break}e:{var f=e,g=r.return,s=r,a=t;if(t=ze,s.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var d=a,v=s,u=v.tag;if(!(v.mode&1)&&(u===0||u===11||u===15)){var p=v.alternate;p?(v.updateQueue=p.updateQueue,v.memoizedState=p.memoizedState,v.lanes=p.lanes):(v.updateQueue=null,v.memoizedState=null)}var C=Vu(g);if(C!==null){C.flags&=-257,Ku(C,g,s,f,t),C.mode&1&&ju(f,d,t),t=C,a=d;var w=t.updateQueue;if(w===null){var _=new Set;_.add(a),t.updateQueue=_}else w.add(a);break e}else{if(!(t&1)){ju(f,d,t),Oc();break e}a=Error(K(426))}}else if(be&&s.mode&1){var n=Vu(g);if(n!==null){!(n.flags&65536)&&(n.flags|=256),Ku(n,g,s,f,t),_c(Yi(a,s));break e}}f=a=Yi(a,s),Ie!==4&&(Ie=2),Ms===null?Ms=[f]:Ms.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var l=Df(f,a,t);Nu(f,l);break e;case 1:s=a;var c=f.type,h=f.stateNode;if(!(f.flags&128)&&(typeof c.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Or===null||!Or.has(h)))){f.flags|=65536,t&=-t,f.lanes|=t;var m=Mf(f,s,t);Nu(f,m);break e}}f=f.return}while(f!==null)}Xf(r)}catch(b){t=b,Pe===r&&r!==null&&(Pe=r=r.return);continue}break}while(!0)}function Gf(){var e=yo.current;return yo.current=mo,e===null?mo:e}function Oc(){(Ie===0||Ie===3||Ie===2)&&(Ie=4),He===null||!(li&268435455)&&!(Uo&268435455)||mr(He,ze)}function wo(e,t){var r=ue;ue|=2;var i=Gf();(He!==e||ze!==t)&&(Yt=null,ii(e,t));do try{Ng();break}catch(o){qf(e,o)}while(!0);if(vc(),ue=r,yo.current=i,Pe!==null)throw Error(K(261));return He=null,ze=0,Ie}function Ng(){for(;Pe!==null;)Qf(Pe)}function Hg(){for(;Pe!==null&&!uv();)Qf(Pe)}function Qf(e){var t=Jf(e.alternate,e,ut);e.memoizedProps=e.pendingProps,t===null?Xf(e):Pe=t,Ac.current=null}function Xf(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Tg(r,t),r!==null){r.flags&=32767,Pe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ie=6,Pe=null;return}}else if(r=Mg(r,t,ut),r!==null){Pe=r;return}if(t=t.sibling,t!==null){Pe=t;return}Pe=t=e}while(t!==null);Ie===0&&(Ie=5)}function Vr(e,t,r){var i=pe,o=wt.transition;try{wt.transition=null,pe=1,$g(e,t,r,i)}finally{wt.transition=o,pe=i}return null}function $g(e,t,r,i){do Mi();while(kr!==null);if(ue&6)throw Error(K(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(Sv(e,f),e===He&&(Pe=He=null,ze=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Tn||(Tn=!0,Zf(ro,function(){return Mi(),null})),f=(r.flags&15990)!==0,r.subtreeFlags&15990||f){f=wt.transition,wt.transition=null;var g=pe;pe=1;var s=ue;ue|=4,Ac.current=null,Og(e,r),jf(r,e),og(el),so=!!Za,el=Za=null,e.current=r,Bg(r),hv(),ue=s,pe=g,wt.transition=f}else e.current=r;if(Tn&&(Tn=!1,kr=e,Co=o),f=e.pendingLanes,f===0&&(Or=null),_v(r.stateNode),ct(e,Me()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],i(o.value,{componentStack:o.stack,digest:o.digest});if(So)throw So=!1,e=Sl,Sl=null,e;return Co&1&&e.tag!==0&&Mi(),f=e.pendingLanes,f&1?e===Cl?Ts++:(Ts=0,Cl=e):Ts=0,zr(),null}function Mi(){if(kr!==null){var e=Ad(Co),t=wt.transition,r=pe;try{if(wt.transition=null,pe=16>e?16:e,kr===null)var i=!1;else{if(e=kr,kr=null,Co=0,ue&6)throw Error(K(331));var o=ue;for(ue|=4,Y=e.current;Y!==null;){var f=Y,g=f.child;if(Y.flags&16){var s=f.deletions;if(s!==null){for(var a=0;a<s.length;a++){var d=s[a];for(Y=d;Y!==null;){var v=Y;switch(v.tag){case 0:case 11:case 15:Ds(8,v,f)}var u=v.child;if(u!==null)u.return=v,Y=u;else for(;Y!==null;){v=Y;var p=v.sibling,C=v.return;if(Uf(v),v===d){Y=null;break}if(p!==null){p.return=C,Y=p;break}Y=C}}}var w=f.alternate;if(w!==null){var _=w.child;if(_!==null){w.child=null;do{var n=_.sibling;_.sibling=null,_=n}while(_!==null)}}Y=f}}if(f.subtreeFlags&2064&&g!==null)g.return=f,Y=g;else e:for(;Y!==null;){if(f=Y,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Ds(9,f,f.return)}var l=f.sibling;if(l!==null){l.return=f.return,Y=l;break e}Y=f.return}}var c=e.current;for(Y=c;Y!==null;){g=Y;var h=g.child;if(g.subtreeFlags&2064&&h!==null)h.return=g,Y=h;else e:for(g=c;Y!==null;){if(s=Y,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:$o(9,s)}}catch(b){Ae(s,s.return,b)}if(s===g){Y=null;break e}var m=s.sibling;if(m!==null){m.return=s.return,Y=m;break e}Y=s.return}}if(ue=o,zr(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(To,e)}catch{}i=!0}return i}finally{pe=r,wt.transition=t}}return!1}function nh(e,t,r){t=Yi(r,t),t=Df(e,t,1),e=Pr(e,t,1),t=Ze(),e!==null&&(nn(e,1,t),ct(e,t))}function Ae(e,t,r){if(e.tag===3)nh(e,e,r);else for(;t!==null;){if(t.tag===3){nh(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Or===null||!Or.has(i))){e=Yi(r,e),e=Mf(t,e,1),t=Pr(t,e,1),e=Ze(),t!==null&&(nn(t,1,e),ct(t,e));break}}t=t.return}}function Ug(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Ze(),e.pingedLanes|=e.suspendedLanes&r,He===e&&(ze&r)===r&&(Ie===4||Ie===3&&(ze&130023424)===ze&&500>Me()-Mc?ii(e,0):Dc|=r),ct(e,t)}function Yf(e,t){t===0&&(e.mode&1?(t=wn,wn<<=1,!(wn&130023424)&&(wn=4194304)):t=1);var r=Ze();e=ar(e,t),e!==null&&(nn(e,t,r),ct(e,r))}function zg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Yf(e,r)}function Wg(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(K(314))}i!==null&&i.delete(t),Yf(e,r)}var Jf;Jf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||at.current)ot=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ot=!1,Dg(e,t,r);ot=!!(e.flags&131072)}else ot=!1,be&&t.flags&1048576&&tf(t,ho,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Kn(e,t),e=t.pendingProps;var o=qi(t,Ge.current);Di(t,r),o=xc(null,t,i,e,o,r);var f=Ec();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,lt(i)?(f=!0,co(t)):f=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,yc(t),o.updater=Ho,t.stateNode=o,o._reactInternals=t,cl(t,i,e,r),t=dl(null,t,i,!0,f,r)):(t.tag=0,be&&f&&dc(t),Je(null,t,o,r),t=t.child),t;case 16:i=t.elementType;e:{switch(Kn(e,t),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=Vg(i),e=kt(i,e),o){case 0:t=hl(null,t,i,e,r);break e;case 1:t=Qu(null,t,i,e,r);break e;case 11:t=qu(null,t,i,e,r);break e;case 14:t=Gu(null,t,i,kt(i.type,e),r);break e}throw Error(K(306,i,""))}return t;case 0:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:kt(i,o),hl(e,t,i,o,r);case 1:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:kt(i,o),Qu(e,t,i,o,r);case 3:e:{if(Bf(t),e===null)throw Error(K(387));i=t.pendingProps,f=t.memoizedState,o=f.element,lf(e,t),po(t,i,null,r);var g=t.memoizedState;if(i=g.element,f.isDehydrated)if(f={element:i,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){o=Yi(Error(K(423)),t),t=Xu(e,t,i,r,o);break e}else if(i!==o){o=Yi(Error(K(424)),t),t=Xu(e,t,i,r,o);break e}else for(ht=Tr(t.stateNode.containerInfo.firstChild),dt=t,be=!0,Pt=null,r=of(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Gi(),i===o){t=lr(e,t,r);break e}Je(e,t,i,r)}t=t.child}return t;case 5:return cf(t),e===null&&ol(t),i=t.type,o=t.pendingProps,f=e!==null?e.memoizedProps:null,g=o.children,tl(i,o)?g=null:f!==null&&tl(i,f)&&(t.flags|=32),Of(e,t),Je(e,t,g,r),t.child;case 6:return e===null&&ol(t),null;case 13:return If(e,t,r);case 4:return Sc(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Qi(t,null,i,r):Je(e,t,i,r),t.child;case 11:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:kt(i,o),qu(e,t,i,o,r);case 7:return Je(e,t,t.pendingProps,r),t.child;case 8:return Je(e,t,t.pendingProps.children,r),t.child;case 12:return Je(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,o=t.pendingProps,f=t.memoizedProps,g=o.value,ge(fo,i._currentValue),i._currentValue=g,f!==null)if(It(f.value,g)){if(f.children===o.children&&!at.current){t=lr(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var s=f.dependencies;if(s!==null){g=f.child;for(var a=s.firstContext;a!==null;){if(a.context===i){if(f.tag===1){a=rr(-1,r&-r),a.tag=2;var d=f.updateQueue;if(d!==null){d=d.shared;var v=d.pending;v===null?a.next=a:(a.next=v.next,v.next=a),d.pending=a}}f.lanes|=r,a=f.alternate,a!==null&&(a.lanes|=r),al(f.return,r,t),s.lanes|=r;break}a=a.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(K(341));g.lanes|=r,s=g.alternate,s!==null&&(s.lanes|=r),al(g,r,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}Je(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps.children,Di(t,r),o=bt(o),i=i(o),t.flags|=1,Je(e,t,i,r),t.child;case 14:return i=t.type,o=kt(i,t.pendingProps),o=kt(i.type,o),Gu(e,t,i,o,r);case 15:return Tf(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:kt(i,o),Kn(e,t),t.tag=1,lt(i)?(e=!0,co(t)):e=!1,Di(t,r),Af(t,i,o),cl(t,i,o,r),dl(null,t,i,!0,e,r);case 19:return Ff(e,t,r);case 22:return Pf(e,t,r)}throw Error(K(156,t.tag))};function Zf(e,t){return Ed(e,t)}function jg(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,r,i){return new jg(e,t,r,i)}function Bc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vg(e){if(typeof e=="function")return Bc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ec)return 11;if(e===tc)return 14}return 2}function Ir(e,t){var r=e.alternate;return r===null?(r=Ct(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Qn(e,t,r,i,o,f){var g=2;if(i=e,typeof e=="function")Bc(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case pi:return si(r.children,o,f,t);case Zl:g=8,o|=8;break;case Pa:return e=Ct(12,r,t,o|2),e.elementType=Pa,e.lanes=f,e;case Oa:return e=Ct(13,r,t,o),e.elementType=Oa,e.lanes=f,e;case Ba:return e=Ct(19,r,t,o),e.elementType=Ba,e.lanes=f,e;case ld:return zo(r,o,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case od:g=10;break e;case ad:g=9;break e;case ec:g=11;break e;case tc:g=14;break e;case pr:g=16,i=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=Ct(g,r,t,o),t.elementType=e,t.type=i,t.lanes=f,t}function si(e,t,r,i){return e=Ct(7,e,i,t),e.lanes=r,e}function zo(e,t,r,i){return e=Ct(22,e,i,t),e.elementType=ld,e.lanes=r,e.stateNode={isHidden:!1},e}function wa(e,t,r){return e=Ct(6,e,null,t),e.lanes=r,e}function ba(e,t,r){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Kg(e,t,r,i,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ia(0),this.expirationTimes=ia(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ia(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Ic(e,t,r,i,o,f,g,s,a){return e=new Kg(e,t,r,s,a),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Ct(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},yc(f),e}function qg(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_i,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function e_(e){if(!e)return Hr;e=e._reactInternals;e:{if(di(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var r=e.type;if(lt(r))return Zd(e,r,t)}return t}function t_(e,t,r,i,o,f,g,s,a){return e=Ic(r,i,!0,e,o,f,g,s,a),e.context=e_(null),r=e.current,i=Ze(),o=Br(r),f=rr(i,o),f.callback=t??null,Pr(r,f,o),e.current.lanes=o,nn(e,o,i),ct(e,i),e}function Wo(e,t,r,i){var o=t.current,f=Ze(),g=Br(o);return r=e_(r),t.context===null?t.context=r:t.pendingContext=r,t=rr(f,g),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Pr(o,t,g),e!==null&&(Bt(e,o,g,f),Wn(e,o,g)),g}function bo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function oh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Fc(e,t){oh(e,t),(e=e.alternate)&&oh(e,t)}function Gg(){return null}var r_=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nc(e){this._internalRoot=e}jo.prototype.render=Nc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));Wo(e,t,null,null)};jo.prototype.unmount=Nc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ci(function(){Wo(null,e,null,null)}),t[or]=null}};function jo(e){this._internalRoot=e}jo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Td();e={blockedOn:null,target:e,priority:t};for(var r=0;r<gr.length&&t!==0&&t<gr[r].priority;r++);gr.splice(r,0,e),r===0&&Od(e)}};function Hc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ah(){}function Qg(e,t,r,i,o){if(o){if(typeof i=="function"){var f=i;i=function(){var d=bo(g);f.call(d)}}var g=t_(t,i,e,0,null,!1,!1,"",ah);return e._reactRootContainer=g,e[or]=g.current,Us(e.nodeType===8?e.parentNode:e),ci(),g}for(;o=e.lastChild;)e.removeChild(o);if(typeof i=="function"){var s=i;i=function(){var d=bo(a);s.call(d)}}var a=Ic(e,0,!1,null,null,!1,!1,"",ah);return e._reactRootContainer=a,e[or]=a.current,Us(e.nodeType===8?e.parentNode:e),ci(function(){Wo(t,a,r,i)}),a}function Ko(e,t,r,i,o){var f=r._reactRootContainer;if(f){var g=f;if(typeof o=="function"){var s=o;o=function(){var a=bo(g);s.call(a)}}Wo(t,g,e,o)}else g=Qg(r,t,e,o,i);return bo(g)}Dd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ss(t.pendingLanes);r!==0&&(sc(t,r|1),ct(t,Me()),!(ue&6)&&(Ji=Me()+500,zr()))}break;case 13:ci(function(){var i=ar(e,1);if(i!==null){var o=Ze();Bt(i,e,1,o)}}),Fc(e,1)}};nc=function(e){if(e.tag===13){var t=ar(e,134217728);if(t!==null){var r=Ze();Bt(t,e,134217728,r)}Fc(e,134217728)}};Md=function(e){if(e.tag===13){var t=Br(e),r=ar(e,t);if(r!==null){var i=Ze();Bt(r,e,t,i)}Fc(e,t)}};Td=function(){return pe};Pd=function(e,t){var r=pe;try{return pe=e,t()}finally{pe=r}};Va=function(e,t,r){switch(t){case"input":if(Na(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var o=Io(i);if(!o)throw Error(K(90));ud(i),Na(i,o)}}}break;case"textarea":dd(e,r);break;case"select":t=r.value,t!=null&&Li(e,!!r.multiple,t,!1)}};yd=Tc;Sd=ci;var Xg={usingClientEntryPoint:!1,Events:[an,yi,Io,gd,md,Tc]},fs={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yg={bundleType:fs.bundleType,version:fs.version,rendererPackageName:fs.rendererPackageName,rendererConfig:fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=bd(e),e===null?null:e.stateNode},findFiberByHostInstance:fs.findFiberByHostInstance||Gg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pn.isDisabled&&Pn.supportsFiber)try{To=Pn.inject(Yg),jt=Pn}catch{}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xg;_t.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hc(t))throw Error(K(200));return qg(e,t,null,r)};_t.createRoot=function(e,t){if(!Hc(e))throw Error(K(299));var r=!1,i="",o=r_;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Ic(e,1,!1,null,null,r,!1,i,o),e[or]=t.current,Us(e.nodeType===8?e.parentNode:e),new Nc(t)};_t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=bd(t),e=e===null?null:e.stateNode,e};_t.flushSync=function(e){return ci(e)};_t.hydrate=function(e,t,r){if(!Vo(t))throw Error(K(200));return Ko(null,e,t,!0,r)};_t.hydrateRoot=function(e,t,r){if(!Hc(e))throw Error(K(405));var i=r!=null&&r.hydratedSources||null,o=!1,f="",g=r_;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(g=r.onRecoverableError)),t=t_(t,null,e,1,r??null,o,!1,f,g),e[or]=t.current,Us(e),i)for(e=0;e<i.length;e++)r=i[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new jo(t)};_t.render=function(e,t,r){if(!Vo(t))throw Error(K(200));return Ko(null,e,t,!1,r)};_t.unmountComponentAtNode=function(e){if(!Vo(e))throw Error(K(40));return e._reactRootContainer?(ci(function(){Ko(null,null,e,!1,function(){e._reactRootContainer=null,e[or]=null})}),!0):!1};_t.unstable_batchedUpdates=Tc;_t.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Vo(r))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return Ko(e,t,r,!1,i)};_t.version="18.3.1-next-f1338f8080-20240426";function i_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i_)}catch(e){console.error(e)}}i_(),rd.exports=_t;var Jg=rd.exports,lh=Jg;Ma.createRoot=lh.createRoot,Ma.hydrateRoot=lh.hydrateRoot;var cn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ui=typeof window>"u"||"Deno"in globalThis;function st(){}function Zg(e,t){return typeof e=="function"?e(t):e}function xl(e){return typeof e=="number"&&e>=0&&e!==1/0}function s_(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Fr(e,t){return typeof e=="function"?e(t):e}function mt(e,t){return typeof e=="function"?e(t):e}function ch(e,t){const{type:r="all",exact:i,fetchStatus:o,predicate:f,queryKey:g,stale:s}=e;if(g){if(i){if(t.queryHash!==$c(g,t.options))return!1}else if(!Ys(t.queryKey,g))return!1}if(r!=="all"){const a=t.isActive();if(r==="active"&&!a||r==="inactive"&&a)return!1}return!(typeof s=="boolean"&&t.isStale()!==s||o&&o!==t.state.fetchStatus||f&&!f(t))}function uh(e,t){const{exact:r,status:i,predicate:o,mutationKey:f}=e;if(f){if(!t.options.mutationKey)return!1;if(r){if(Xs(t.options.mutationKey)!==Xs(f))return!1}else if(!Ys(t.options.mutationKey,f))return!1}return!(i&&t.state.status!==i||o&&!o(t))}function $c(e,t){return((t==null?void 0:t.queryKeyHashFn)||Xs)(e)}function Xs(e){return JSON.stringify(e,(t,r)=>Ll(r)?Object.keys(r).sort().reduce((i,o)=>(i[o]=r[o],i),{}):r)}function Ys(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Ys(e[r],t[r])):!1}function n_(e,t){if(e===t)return e;const r=hh(e)&&hh(t);if(r||Ll(e)&&Ll(t)){const i=r?e:Object.keys(e),o=i.length,f=r?t:Object.keys(t),g=f.length,s=r?[]:{},a=new Set(i);let d=0;for(let v=0;v<g;v++){const u=r?v:f[v];(!r&&a.has(u)||r)&&e[u]===void 0&&t[u]===void 0?(s[u]=void 0,d++):(s[u]=n_(e[u],t[u]),s[u]===e[u]&&e[u]!==void 0&&d++)}return o===g&&d===o?e:s}return t}function El(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function hh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ll(e){if(!dh(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!dh(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function dh(e){return Object.prototype.toString.call(e)==="[object Object]"}function em(e){return new Promise(t=>{setTimeout(t,e)})}function Rl(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?n_(e,t):t}function tm(e,t,r=0){const i=[...e,t];return r&&i.length>r?i.slice(1):i}function rm(e,t,r=0){const i=[t,...e];return r&&i.length>r?i.slice(0,-1):i}var Uc=Symbol();function o_(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Uc?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function im(e,t){return typeof e=="function"?e(...t):!!e}var Qr,yr,Pi,Bh,sm=(Bh=class extends cn{constructor(){super();ee(this,Qr);ee(this,yr);ee(this,Pi);J(this,Pi,t=>{if(!ui&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){H(this,yr)||this.setEventListener(H(this,Pi))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,yr))==null||t.call(this),J(this,yr,void 0))}setEventListener(t){var r;J(this,Pi,t),(r=H(this,yr))==null||r.call(this),J(this,yr,t(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(t){H(this,Qr)!==t&&(J(this,Qr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof H(this,Qr)=="boolean"?H(this,Qr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Qr=new WeakMap,yr=new WeakMap,Pi=new WeakMap,Bh),zc=new sm,Oi,Sr,Bi,Ih,nm=(Ih=class extends cn{constructor(){super();ee(this,Oi,!0);ee(this,Sr);ee(this,Bi);J(this,Bi,t=>{if(!ui&&window.addEventListener){const r=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i)}}})}onSubscribe(){H(this,Sr)||this.setEventListener(H(this,Bi))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,Sr))==null||t.call(this),J(this,Sr,void 0))}setEventListener(t){var r;J(this,Bi,t),(r=H(this,Sr))==null||r.call(this),J(this,Sr,t(this.setOnline.bind(this)))}setOnline(t){H(this,Oi)!==t&&(J(this,Oi,t),this.listeners.forEach(i=>{i(t)}))}isOnline(){return H(this,Oi)}},Oi=new WeakMap,Sr=new WeakMap,Bi=new WeakMap,Ih),xo=new nm;function kl(){let e,t;const r=new Promise((o,f)=>{e=o,t=f});r.status="pending",r.catch(()=>{});function i(o){Object.assign(r,o),delete r.resolve,delete r.reject}return r.resolve=o=>{i({status:"fulfilled",value:o}),e(o)},r.reject=o=>{i({status:"rejected",reason:o}),t(o)},r}function om(e){return Math.min(1e3*2**e,3e4)}function a_(e){return(e??"online")==="online"?xo.isOnline():!0}var l_=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function c_(e){let t=!1,r=0,i;const o=kl(),f=()=>o.status!=="pending",g=_=>{var n;f()||(p(new l_(_)),(n=e.abort)==null||n.call(e))},s=()=>{t=!0},a=()=>{t=!1},d=()=>zc.isFocused()&&(e.networkMode==="always"||xo.isOnline())&&e.canRun(),v=()=>a_(e.networkMode)&&e.canRun(),u=_=>{f()||(i==null||i(),o.resolve(_))},p=_=>{f()||(i==null||i(),o.reject(_))},C=()=>new Promise(_=>{var n;i=l=>{(f()||d())&&_(l)},(n=e.onPause)==null||n.call(e)}).then(()=>{var _;i=void 0,f()||(_=e.onContinue)==null||_.call(e)}),w=()=>{if(f())return;let _;const n=r===0?e.initialPromise:void 0;try{_=n??e.fn()}catch(l){_=Promise.reject(l)}Promise.resolve(_).then(u).catch(l=>{var x;if(f())return;const c=e.retry??(ui?0:3),h=e.retryDelay??om,m=typeof h=="function"?h(r,l):h,b=c===!0||typeof c=="number"&&r<c||typeof c=="function"&&c(r,l);if(t||!b){p(l);return}r++,(x=e.onFail)==null||x.call(e,r,l),em(m).then(()=>d()?void 0:C()).then(()=>{t?p(l):w()})})};return{promise:o,status:()=>o.status,cancel:g,continue:()=>(i==null||i(),o),cancelRetry:s,continueRetry:a,canStart:v,start:()=>(v()?w():C().then(w),o)}}var am=e=>setTimeout(e,0);function lm(){let e=[],t=0,r=s=>{s()},i=s=>{s()},o=am;const f=s=>{t?e.push(s):o(()=>{r(s)})},g=()=>{const s=e;e=[],s.length&&o(()=>{i(()=>{s.forEach(a=>{r(a)})})})};return{batch:s=>{let a;t++;try{a=s()}finally{t--,t||g()}return a},batchCalls:s=>(...a)=>{f(()=>{s(...a)})},schedule:f,setNotifyFunction:s=>{r=s},setBatchNotifyFunction:s=>{i=s},setScheduler:s=>{o=s}}}var Ue=lm(),Xr,Fh,u_=(Fh=class{constructor(){ee(this,Xr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xl(this.gcTime)&&J(this,Xr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ui?1/0:5*60*1e3))}clearGcTimeout(){H(this,Xr)&&(clearTimeout(H(this,Xr)),J(this,Xr,void 0))}},Xr=new WeakMap,Fh),Ii,Fi,gt,Yr,Fe,Zs,Jr,At,Xt,Nh,cm=(Nh=class extends u_{constructor(t){super();ee(this,At);ee(this,Ii);ee(this,Fi);ee(this,gt);ee(this,Yr);ee(this,Fe);ee(this,Zs);ee(this,Jr);J(this,Jr,!1),J(this,Zs,t.defaultOptions),this.setOptions(t.options),this.observers=[],J(this,Yr,t.client),J(this,gt,H(this,Yr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,J(this,Ii,um(this.options)),this.state=t.state??H(this,Ii),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=H(this,Fe))==null?void 0:t.promise}setOptions(t){this.options={...H(this,Zs),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,gt).remove(this)}setData(t,r){const i=Rl(this.state.data,t,this.options);return oe(this,At,Xt).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){oe(this,At,Xt).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,o;const r=(i=H(this,Fe))==null?void 0:i.promise;return(o=H(this,Fe))==null||o.cancel(t),r?r.then(st).catch(st):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,Ii))}isActive(){return this.observers.some(t=>mt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Uc||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Fr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!s_(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=H(this,Fe))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=H(this,Fe))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),H(this,gt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(H(this,Fe)&&(H(this,Jr)?H(this,Fe).cancel({revert:!0}):H(this,Fe).cancelRetry()),this.scheduleGc()),H(this,gt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||oe(this,At,Xt).call(this,{type:"invalidate"})}async fetch(t,r){var a,d,v,u,p,C,w,_,n,l,c,h;if(this.state.fetchStatus!=="idle"&&((a=H(this,Fe))==null?void 0:a.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(H(this,Fe))return H(this,Fe).continueRetry(),H(this,Fe).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(b=>b.options.queryFn);m&&this.setOptions(m.options)}const i=new AbortController,o=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(J(this,Jr,!0),i.signal)})},f=()=>{const m=o_(this.options,r),x=(()=>{const E={client:H(this,Yr),queryKey:this.queryKey,meta:this.meta};return o(E),E})();return J(this,Jr,!1),this.options.persister?this.options.persister(m,x,this):m(x)},s=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:H(this,Yr),state:this.state,fetchFn:f};return o(m),m})();(d=this.options.behavior)==null||d.onFetch(s,this),J(this,Fi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((v=s.fetchOptions)==null?void 0:v.meta))&&oe(this,At,Xt).call(this,{type:"fetch",meta:(u=s.fetchOptions)==null?void 0:u.meta}),J(this,Fe,c_({initialPromise:r==null?void 0:r.initialPromise,fn:s.fetchFn,abort:i.abort.bind(i),onFail:(m,b)=>{oe(this,At,Xt).call(this,{type:"failed",failureCount:m,error:b})},onPause:()=>{oe(this,At,Xt).call(this,{type:"pause"})},onContinue:()=>{oe(this,At,Xt).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}));try{const m=await H(this,Fe).start();if(m===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(m),(C=(p=H(this,gt).config).onSuccess)==null||C.call(p,m,this),(_=(w=H(this,gt).config).onSettled)==null||_.call(w,m,this.state.error,this),m}catch(m){if(m instanceof l_){if(m.silent)return H(this,Fe).promise;if(m.revert)return this.setState({...H(this,Fi),fetchStatus:"idle"}),this.state.data}throw oe(this,At,Xt).call(this,{type:"error",error:m}),(l=(n=H(this,gt).config).onError)==null||l.call(n,m,this),(h=(c=H(this,gt).config).onSettled)==null||h.call(c,this.state.data,m,this),m}finally{this.scheduleGc()}}},Ii=new WeakMap,Fi=new WeakMap,gt=new WeakMap,Yr=new WeakMap,Fe=new WeakMap,Zs=new WeakMap,Jr=new WeakMap,At=new WeakSet,Xt=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...h_(i.data,this.options),fetchMeta:t.meta??null};case"success":const o={...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return J(this,Fi,t.manual?o:void 0),o;case"error":const f=t.error;return{...i,error:f,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:f,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),Ue.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),H(this,gt).notify({query:this,type:"updated",action:t})})},Nh);function h_(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:a_(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function um(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,i=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var $t,Hh,hm=(Hh=class extends cn{constructor(t={}){super();ee(this,$t);this.config=t,J(this,$t,new Map)}build(t,r,i){const o=r.queryKey,f=r.queryHash??$c(o,r);let g=this.get(f);return g||(g=new cm({client:t,queryKey:o,queryHash:f,options:t.defaultQueryOptions(r),state:i,defaultOptions:t.getQueryDefaults(o)}),this.add(g)),g}add(t){H(this,$t).has(t.queryHash)||(H(this,$t).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=H(this,$t).get(t.queryHash);r&&(t.destroy(),r===t&&H(this,$t).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ue.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return H(this,$t).get(t)}getAll(){return[...H(this,$t).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(i=>ch(r,i))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(i=>ch(t,i)):r}notify(t){Ue.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Ue.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ue.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},$t=new WeakMap,Hh),Ut,Xe,Zr,zt,_r,$h,dm=($h=class extends u_{constructor(t){super();ee(this,zt);ee(this,Ut);ee(this,Xe);ee(this,Zr);this.mutationId=t.mutationId,J(this,Xe,t.mutationCache),J(this,Ut,[]),this.state=t.state||fm(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){H(this,Ut).includes(t)||(H(this,Ut).push(t),this.clearGcTimeout(),H(this,Xe).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){J(this,Ut,H(this,Ut).filter(r=>r!==t)),this.scheduleGc(),H(this,Xe).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){H(this,Ut).length||(this.state.status==="pending"?this.scheduleGc():H(this,Xe).remove(this))}continue(){var t;return((t=H(this,Zr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var f,g,s,a,d,v,u,p,C,w,_,n,l,c,h,m,b,x,E,S;const r=()=>{oe(this,zt,_r).call(this,{type:"continue"})};J(this,Zr,c_({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(y,L)=>{oe(this,zt,_r).call(this,{type:"failed",failureCount:y,error:L})},onPause:()=>{oe(this,zt,_r).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,Xe).canRun(this)}));const i=this.state.status==="pending",o=!H(this,Zr).canStart();try{if(i)r();else{oe(this,zt,_r).call(this,{type:"pending",variables:t,isPaused:o}),await((g=(f=H(this,Xe).config).onMutate)==null?void 0:g.call(f,t,this));const L=await((a=(s=this.options).onMutate)==null?void 0:a.call(s,t));L!==this.state.context&&oe(this,zt,_r).call(this,{type:"pending",context:L,variables:t,isPaused:o})}const y=await H(this,Zr).start();return await((v=(d=H(this,Xe).config).onSuccess)==null?void 0:v.call(d,y,t,this.state.context,this)),await((p=(u=this.options).onSuccess)==null?void 0:p.call(u,y,t,this.state.context)),await((w=(C=H(this,Xe).config).onSettled)==null?void 0:w.call(C,y,null,this.state.variables,this.state.context,this)),await((n=(_=this.options).onSettled)==null?void 0:n.call(_,y,null,t,this.state.context)),oe(this,zt,_r).call(this,{type:"success",data:y}),y}catch(y){try{throw await((c=(l=H(this,Xe).config).onError)==null?void 0:c.call(l,y,t,this.state.context,this)),await((m=(h=this.options).onError)==null?void 0:m.call(h,y,t,this.state.context)),await((x=(b=H(this,Xe).config).onSettled)==null?void 0:x.call(b,void 0,y,this.state.variables,this.state.context,this)),await((S=(E=this.options).onSettled)==null?void 0:S.call(E,void 0,y,t,this.state.context)),y}finally{oe(this,zt,_r).call(this,{type:"error",error:y})}}finally{H(this,Xe).runNext(this)}}},Ut=new WeakMap,Xe=new WeakMap,Zr=new WeakMap,zt=new WeakSet,_r=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ue.batch(()=>{H(this,Ut).forEach(i=>{i.onMutationUpdate(t)}),H(this,Xe).notify({mutation:this,type:"updated",action:t})})},$h);function fm(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Zt,Dt,en,Uh,_m=(Uh=class extends cn{constructor(t={}){super();ee(this,Zt);ee(this,Dt);ee(this,en);this.config=t,J(this,Zt,new Set),J(this,Dt,new Map),J(this,en,0)}build(t,r,i){const o=new dm({mutationCache:this,mutationId:++vn(this,en)._,options:t.defaultMutationOptions(r),state:i});return this.add(o),o}add(t){H(this,Zt).add(t);const r=On(t);if(typeof r=="string"){const i=H(this,Dt).get(r);i?i.push(t):H(this,Dt).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(H(this,Zt).delete(t)){const r=On(t);if(typeof r=="string"){const i=H(this,Dt).get(r);if(i)if(i.length>1){const o=i.indexOf(t);o!==-1&&i.splice(o,1)}else i[0]===t&&H(this,Dt).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=On(t);if(typeof r=="string"){const i=H(this,Dt).get(r),o=i==null?void 0:i.find(f=>f.state.status==="pending");return!o||o===t}else return!0}runNext(t){var i;const r=On(t);if(typeof r=="string"){const o=(i=H(this,Dt).get(r))==null?void 0:i.find(f=>f!==t&&f.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ue.batch(()=>{H(this,Zt).forEach(t=>{this.notify({type:"removed",mutation:t})}),H(this,Zt).clear(),H(this,Dt).clear()})}getAll(){return Array.from(H(this,Zt))}find(t){const r={exact:!0,...t};return this.getAll().find(i=>uh(r,i))}findAll(t={}){return this.getAll().filter(r=>uh(t,r))}notify(t){Ue.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Ue.batch(()=>Promise.all(t.map(r=>r.continue().catch(st))))}},Zt=new WeakMap,Dt=new WeakMap,en=new WeakMap,Uh);function On(e){var t;return(t=e.options.scope)==null?void 0:t.id}function fh(e){return{onFetch:(t,r)=>{var v,u,p,C,w;const i=t.options,o=(p=(u=(v=t.fetchOptions)==null?void 0:v.meta)==null?void 0:u.fetchMore)==null?void 0:p.direction,f=((C=t.state.data)==null?void 0:C.pages)||[],g=((w=t.state.data)==null?void 0:w.pageParams)||[];let s={pages:[],pageParams:[]},a=0;const d=async()=>{let _=!1;const n=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(t.signal.aborted?_=!0:t.signal.addEventListener("abort",()=>{_=!0}),t.signal)})},l=o_(t.options,t.fetchOptions),c=async(h,m,b)=>{if(_)return Promise.reject();if(m==null&&h.pages.length)return Promise.resolve(h);const E=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:m,direction:b?"backward":"forward",meta:t.options.meta};return n(A),A})(),S=await l(E),{maxPages:y}=t.options,L=b?rm:tm;return{pages:L(h.pages,S,y),pageParams:L(h.pageParams,m,y)}};if(o&&f.length){const h=o==="backward",m=h?pm:_h,b={pages:f,pageParams:g},x=m(i,b);s=await c(b,x,h)}else{const h=e??f.length;do{const m=a===0?g[0]??i.initialPageParam:_h(i,s);if(a>0&&m==null)break;s=await c(s,m),a++}while(a<h)}return s};t.options.persister?t.fetchFn=()=>{var _,n;return(n=(_=t.options).persister)==null?void 0:n.call(_,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function _h(e,{pages:t,pageParams:r}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,r[i],r):void 0}function pm(e,{pages:t,pageParams:r}){var i;return t.length>0?(i=e.getPreviousPageParam)==null?void 0:i.call(e,t[0],t,r[0],r):void 0}var ke,Cr,wr,Ni,Hi,br,$i,Ui,zh,vm=(zh=class{constructor(e={}){ee(this,ke);ee(this,Cr);ee(this,wr);ee(this,Ni);ee(this,Hi);ee(this,br);ee(this,$i);ee(this,Ui);J(this,ke,e.queryCache||new hm),J(this,Cr,e.mutationCache||new _m),J(this,wr,e.defaultOptions||{}),J(this,Ni,new Map),J(this,Hi,new Map),J(this,br,0)}mount(){vn(this,br)._++,H(this,br)===1&&(J(this,$i,zc.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,ke).onFocus())})),J(this,Ui,xo.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,ke).onOnline())})))}unmount(){var e,t;vn(this,br)._--,H(this,br)===0&&((e=H(this,$i))==null||e.call(this),J(this,$i,void 0),(t=H(this,Ui))==null||t.call(this),J(this,Ui,void 0))}isFetching(e){return H(this,ke).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return H(this,Cr).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=H(this,ke).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=H(this,ke).build(this,t),i=r.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Fr(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return H(this,ke).findAll(e).map(({queryKey:t,state:r})=>{const i=r.data;return[t,i]})}setQueryData(e,t,r){const i=this.defaultQueryOptions({queryKey:e}),o=H(this,ke).get(i.queryHash),f=o==null?void 0:o.state.data,g=Zg(t,f);if(g!==void 0)return H(this,ke).build(this,i).setData(g,{...r,manual:!0})}setQueriesData(e,t,r){return Ue.batch(()=>H(this,ke).findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=H(this,ke).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=H(this,ke);Ue.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=H(this,ke);return Ue.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},i=Ue.batch(()=>H(this,ke).findAll(e).map(o=>o.cancel(r)));return Promise.all(i).then(st).catch(st)}invalidateQueries(e,t={}){return Ue.batch(()=>(H(this,ke).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},i=Ue.batch(()=>H(this,ke).findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let f=o.fetch(void 0,r);return r.throwOnError||(f=f.catch(st)),o.state.fetchStatus==="paused"?Promise.resolve():f}));return Promise.all(i).then(st)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=H(this,ke).build(this,t);return r.isStaleByTime(Fr(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(st).catch(st)}fetchInfiniteQuery(e){return e.behavior=fh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(st).catch(st)}ensureInfiniteQueryData(e){return e.behavior=fh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return xo.isOnline()?H(this,Cr).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,ke)}getMutationCache(){return H(this,Cr)}getDefaultOptions(){return H(this,wr)}setDefaultOptions(e){J(this,wr,e)}setQueryDefaults(e,t){H(this,Ni).set(Xs(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...H(this,Ni).values()],r={};return t.forEach(i=>{Ys(e,i.queryKey)&&Object.assign(r,i.defaultOptions)}),r}setMutationDefaults(e,t){H(this,Hi).set(Xs(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...H(this,Hi).values()],r={};return t.forEach(i=>{Ys(e,i.mutationKey)&&Object.assign(r,i.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...H(this,wr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=$c(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Uc&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...H(this,wr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){H(this,ke).clear(),H(this,Cr).clear()}},ke=new WeakMap,Cr=new WeakMap,wr=new WeakMap,Ni=new WeakMap,Hi=new WeakMap,br=new WeakMap,$i=new WeakMap,Ui=new WeakMap,zh),it,ae,tn,Ye,ei,zi,xr,Er,rn,Wi,ji,ti,ri,Lr,Vi,_e,ws,Al,Dl,Ml,Tl,Pl,Ol,Bl,d_,Wh,gm=(Wh=class extends cn{constructor(t,r){super();ee(this,_e);ee(this,it);ee(this,ae);ee(this,tn);ee(this,Ye);ee(this,ei);ee(this,zi);ee(this,xr);ee(this,Er);ee(this,rn);ee(this,Wi);ee(this,ji);ee(this,ti);ee(this,ri);ee(this,Lr);ee(this,Vi,new Set);this.options=r,J(this,it,t),J(this,Er,null),J(this,xr,kl()),this.options.experimental_prefetchInRender||H(this,xr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(H(this,ae).addObserver(this),ph(H(this,ae),this.options)?oe(this,_e,ws).call(this):this.updateResult(),oe(this,_e,Tl).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Il(H(this,ae),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Il(H(this,ae),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,oe(this,_e,Pl).call(this),oe(this,_e,Ol).call(this),H(this,ae).removeObserver(this)}setOptions(t){const r=this.options,i=H(this,ae);if(this.options=H(this,it).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof mt(this.options.enabled,H(this,ae))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");oe(this,_e,Bl).call(this),H(this,ae).setOptions(this.options),r._defaulted&&!El(this.options,r)&&H(this,it).getQueryCache().notify({type:"observerOptionsUpdated",query:H(this,ae),observer:this});const o=this.hasListeners();o&&vh(H(this,ae),i,this.options,r)&&oe(this,_e,ws).call(this),this.updateResult(),o&&(H(this,ae)!==i||mt(this.options.enabled,H(this,ae))!==mt(r.enabled,H(this,ae))||Fr(this.options.staleTime,H(this,ae))!==Fr(r.staleTime,H(this,ae)))&&oe(this,_e,Al).call(this);const f=oe(this,_e,Dl).call(this);o&&(H(this,ae)!==i||mt(this.options.enabled,H(this,ae))!==mt(r.enabled,H(this,ae))||f!==H(this,Lr))&&oe(this,_e,Ml).call(this,f)}getOptimisticResult(t){const r=H(this,it).getQueryCache().build(H(this,it),t),i=this.createResult(r,t);return ym(this,i)&&(J(this,Ye,i),J(this,zi,this.options),J(this,ei,H(this,ae).state)),i}getCurrentResult(){return H(this,Ye)}trackResult(t,r){return new Proxy(t,{get:(i,o)=>(this.trackProp(o),r==null||r(o),Reflect.get(i,o))})}trackProp(t){H(this,Vi).add(t)}getCurrentQuery(){return H(this,ae)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=H(this,it).defaultQueryOptions(t),i=H(this,it).getQueryCache().build(H(this,it),r);return i.fetch().then(()=>this.createResult(i,r))}fetch(t){return oe(this,_e,ws).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),H(this,Ye)))}createResult(t,r){var y;const i=H(this,ae),o=this.options,f=H(this,Ye),g=H(this,ei),s=H(this,zi),d=t!==i?t.state:H(this,tn),{state:v}=t;let u={...v},p=!1,C;if(r._optimisticResults){const L=this.hasListeners(),A=!L&&ph(t,r),k=L&&vh(t,i,r,o);(A||k)&&(u={...u,...h_(v.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:w,errorUpdatedAt:_,status:n}=u;C=u.data;let l=!1;if(r.placeholderData!==void 0&&C===void 0&&n==="pending"){let L;f!=null&&f.isPlaceholderData&&r.placeholderData===(s==null?void 0:s.placeholderData)?(L=f.data,l=!0):L=typeof r.placeholderData=="function"?r.placeholderData((y=H(this,ji))==null?void 0:y.state.data,H(this,ji)):r.placeholderData,L!==void 0&&(n="success",C=Rl(f==null?void 0:f.data,L,r),p=!0)}if(r.select&&C!==void 0&&!l)if(f&&C===(g==null?void 0:g.data)&&r.select===H(this,rn))C=H(this,Wi);else try{J(this,rn,r.select),C=r.select(C),C=Rl(f==null?void 0:f.data,C,r),J(this,Wi,C),J(this,Er,null)}catch(L){J(this,Er,L)}H(this,Er)&&(w=H(this,Er),C=H(this,Wi),_=Date.now(),n="error");const c=u.fetchStatus==="fetching",h=n==="pending",m=n==="error",b=h&&c,x=C!==void 0,S={status:n,fetchStatus:u.fetchStatus,isPending:h,isSuccess:n==="success",isError:m,isInitialLoading:b,isLoading:b,data:C,dataUpdatedAt:u.dataUpdatedAt,error:w,errorUpdatedAt:_,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:c,isRefetching:c&&!h,isLoadingError:m&&!x,isPaused:u.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:m&&x,isStale:Wc(t,r),refetch:this.refetch,promise:H(this,xr),isEnabled:mt(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const L=D=>{S.status==="error"?D.reject(S.error):S.data!==void 0&&D.resolve(S.data)},A=()=>{const D=J(this,xr,S.promise=kl());L(D)},k=H(this,xr);switch(k.status){case"pending":t.queryHash===i.queryHash&&L(k);break;case"fulfilled":(S.status==="error"||S.data!==k.value)&&A();break;case"rejected":(S.status!=="error"||S.error!==k.reason)&&A();break}}return S}updateResult(){const t=H(this,Ye),r=this.createResult(H(this,ae),this.options);if(J(this,ei,H(this,ae).state),J(this,zi,this.options),H(this,ei).data!==void 0&&J(this,ji,H(this,ae)),El(r,t))return;J(this,Ye,r);const i=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,f=typeof o=="function"?o():o;if(f==="all"||!f&&!H(this,Vi).size)return!0;const g=new Set(f??H(this,Vi));return this.options.throwOnError&&g.add("error"),Object.keys(H(this,Ye)).some(s=>{const a=s;return H(this,Ye)[a]!==t[a]&&g.has(a)})};oe(this,_e,d_).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&oe(this,_e,Tl).call(this)}},it=new WeakMap,ae=new WeakMap,tn=new WeakMap,Ye=new WeakMap,ei=new WeakMap,zi=new WeakMap,xr=new WeakMap,Er=new WeakMap,rn=new WeakMap,Wi=new WeakMap,ji=new WeakMap,ti=new WeakMap,ri=new WeakMap,Lr=new WeakMap,Vi=new WeakMap,_e=new WeakSet,ws=function(t){oe(this,_e,Bl).call(this);let r=H(this,ae).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(st)),r},Al=function(){oe(this,_e,Pl).call(this);const t=Fr(this.options.staleTime,H(this,ae));if(ui||H(this,Ye).isStale||!xl(t))return;const i=s_(H(this,Ye).dataUpdatedAt,t)+1;J(this,ti,setTimeout(()=>{H(this,Ye).isStale||this.updateResult()},i))},Dl=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(H(this,ae)):this.options.refetchInterval)??!1},Ml=function(t){oe(this,_e,Ol).call(this),J(this,Lr,t),!(ui||mt(this.options.enabled,H(this,ae))===!1||!xl(H(this,Lr))||H(this,Lr)===0)&&J(this,ri,setInterval(()=>{(this.options.refetchIntervalInBackground||zc.isFocused())&&oe(this,_e,ws).call(this)},H(this,Lr)))},Tl=function(){oe(this,_e,Al).call(this),oe(this,_e,Ml).call(this,oe(this,_e,Dl).call(this))},Pl=function(){H(this,ti)&&(clearTimeout(H(this,ti)),J(this,ti,void 0))},Ol=function(){H(this,ri)&&(clearInterval(H(this,ri)),J(this,ri,void 0))},Bl=function(){const t=H(this,it).getQueryCache().build(H(this,it),this.options);if(t===H(this,ae))return;const r=H(this,ae);J(this,ae,t),J(this,tn,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},d_=function(t){Ue.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(H(this,Ye))}),H(this,it).getQueryCache().notify({query:H(this,ae),type:"observerResultsUpdated"})})},Wh);function mm(e,t){return mt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ph(e,t){return mm(e,t)||e.state.data!==void 0&&Il(e,t,t.refetchOnMount)}function Il(e,t,r){if(mt(t.enabled,e)!==!1&&Fr(t.staleTime,e)!=="static"){const i=typeof r=="function"?r(e):r;return i==="always"||i!==!1&&Wc(e,t)}return!1}function vh(e,t,r,i){return(e!==t||mt(i.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Wc(e,r)}function Wc(e,t){return mt(t.enabled,e)!==!1&&e.isStaleByTime(Fr(t.staleTime,e))}function ym(e,t){return!El(e.getCurrentResult(),t)}var f_=F.createContext(void 0),Sm=e=>{const t=F.useContext(f_);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Cm=({client:e,children:t})=>(F.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),X.jsx(f_.Provider,{value:e,children:t})),__=F.createContext(!1),wm=()=>F.useContext(__);__.Provider;function bm(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var xm=F.createContext(bm()),Em=()=>F.useContext(xm),Lm=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Rm=e=>{F.useEffect(()=>{e.clearReset()},[e])},km=({result:e,errorResetBoundary:t,throwOnError:r,query:i,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(o&&e.data===void 0||im(r,[e.error,i])),Am=e=>{if(e.suspense){const t=i=>i==="static"?i:Math.max(i??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...i)=>t(r(...i)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Dm=(e,t)=>e.isLoading&&e.isFetching&&!t,Mm=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,gh=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Tm(e,t,r){var u,p,C,w,_;const i=wm(),o=Em(),f=Sm(),g=f.defaultQueryOptions(e);(p=(u=f.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||p.call(u,g),g._optimisticResults=i?"isRestoring":"optimistic",Am(g),Lm(g,o),Rm(o);const s=!f.getQueryCache().get(g.queryHash),[a]=F.useState(()=>new t(f,g)),d=a.getOptimisticResult(g),v=!i&&e.subscribed!==!1;if(F.useSyncExternalStore(F.useCallback(n=>{const l=v?a.subscribe(Ue.batchCalls(n)):st;return a.updateResult(),l},[a,v]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),F.useEffect(()=>{a.setOptions(g)},[g,a]),Mm(g,d))throw gh(g,a,o);if(km({result:d,errorResetBoundary:o,throwOnError:g.throwOnError,query:f.getQueryCache().get(g.queryHash),suspense:g.suspense}))throw d.error;if((w=(C=f.getDefaultOptions().queries)==null?void 0:C._experimental_afterQuery)==null||w.call(C,g,d),g.experimental_prefetchInRender&&!ui&&Dm(d,i)){const n=s?gh(g,a,o):(_=f.getQueryCache().get(g.queryHash))==null?void 0:_.promise;n==null||n.catch(st).finally(()=>{a.updateResult()})}return g.notifyOnChangeProps?d:a.trackResult(d)}function p_(e,t){return Tm(e,gm)}const bs={},mh=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,yh=e=>"init"in e,xa=e=>!!e.write,Sh=e=>"v"in e||"e"in e,Bn=e=>{if("e"in e)throw e.e;if((bs?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},Eo=new WeakMap,Ch=e=>{var t;return Lo(e)&&!!((t=Eo.get(e))!=null&&t[0])},Pm=e=>{const t=Eo.get(e);t!=null&&t[0]&&(t[0]=!1,t[1].forEach(r=>r()))},v_=(e,t)=>{let r=Eo.get(e);if(!r){r=[!0,new Set],Eo.set(e,r);const i=()=>{r[0]=!1};e.then(i,i)}r[1].add(t)},Lo=e=>typeof(e==null?void 0:e.then)=="function",g_=(e,t,r)=>{r.p.has(e)||(r.p.add(e),t.then(()=>{r.p.delete(e)},()=>{r.p.delete(e)}))},Ea=(e,t,r)=>{const i=r(e),o="v"in i,f=i.v;if(Lo(t))for(const g of i.d.keys())g_(e,t,r(g));i.v=t,delete i.e,(!o||!Object.is(f,i.v))&&(++i.n,Lo(f)&&Pm(f))},wh=(e,t,r)=>{var i;const o=new Set;for(const f of((i=r.get(e))==null?void 0:i.t)||[])r.has(f)&&o.add(f);for(const f of t.p)o.add(f);return o},Om=Symbol(),Bm=(e=new WeakMap,t=new WeakMap,r=new WeakMap,i=new Set,o=new Set,f=new Set,g={},s=(p,...C)=>p.read(...C),a=(p,...C)=>p.write(...C),d=(p,C)=>{var w;return(w=p.unstable_onInit)==null?void 0:w.call(p,C)},v=(p,C)=>{var w;return(w=p.onMount)==null?void 0:w.call(p,C)},...u)=>{const p=u[0]||(E=>{if((bs?"production":void 0)!=="production"&&!E)throw new Error("Atom is undefined or null");let S=e.get(E);return S||(S={d:new Map,p:new Set,n:0},e.set(E,S),d==null||d(E,x)),S}),C=u[1]||(()=>{const E=[],S=y=>{try{y()}catch(L){E.push(L)}};do{g.f&&S(g.f);const y=new Set,L=y.add.bind(y);i.forEach(A=>{var k;return(k=t.get(A))==null?void 0:k.l.forEach(L)}),i.clear(),f.forEach(L),f.clear(),o.forEach(L),o.clear(),y.forEach(S),i.size&&w()}while(i.size||f.size||o.size);if(E.length)throw new AggregateError(E)}),w=u[2]||(()=>{const E=[],S=new WeakSet,y=new WeakSet,L=Array.from(i);for(;L.length;){const A=L[L.length-1],k=p(A);if(y.has(A)){L.pop();continue}if(S.has(A)){if(r.get(A)===k.n)E.push([A,k]);else if((bs?"production":void 0)!=="production"&&r.has(A))throw new Error("[Bug] invalidated atom exists");y.add(A),L.pop();continue}S.add(A);for(const D of wh(A,k,t))S.has(D)||L.push(D)}for(let A=E.length-1;A>=0;--A){const[k,D]=E[A];let B=!1;for(const N of D.d.keys())if(N!==k&&i.has(N)){B=!0;break}B&&(_(k),c(k)),r.delete(k)}}),_=u[3]||(E=>{var S;const y=p(E);if(Sh(y)&&(t.has(E)&&r.get(E)!==y.n||Array.from(y.d).every(([I,R])=>_(I).n===R)))return y;y.d.clear();let L=!0;const A=()=>{t.has(E)&&(c(E),w(),C())},k=I=>{var R;if(mh(E,I)){const P=p(I);if(!Sh(P))if(yh(I))Ea(I,I.init,p);else throw new Error("no atom init");return Bn(P)}const T=_(I);try{return Bn(T)}finally{y.d.set(I,T.n),Ch(y.v)&&g_(E,y.v,T),(R=t.get(I))==null||R.t.add(E),L||A()}};let D,B;const N={get signal(){return D||(D=new AbortController),D.signal},get setSelf(){return(bs?"production":void 0)!=="production"&&!xa(E)&&console.warn("setSelf function cannot be used with read-only atom"),!B&&xa(E)&&(B=(...I)=>{if((bs?"production":void 0)!=="production"&&L&&console.warn("setSelf function cannot be called in sync"),!L)try{return l(E,...I)}finally{w(),C()}}),B}},$=y.n;try{const I=s(E,k,N);return Ea(E,I,p),Lo(I)&&(v_(I,()=>D==null?void 0:D.abort()),I.then(A,A)),y}catch(I){return delete y.v,y.e=I,++y.n,y}finally{L=!1,$!==y.n&&r.get(E)===$&&(r.set(E,y.n),i.add(E),(S=g.c)==null||S.call(g,E))}}),n=u[4]||(E=>{const S=[E];for(;S.length;){const y=S.pop(),L=p(y);for(const A of wh(y,L,t)){const k=p(A);r.set(A,k.n),S.push(A)}}}),l=u[5]||((E,...S)=>{let y=!0;const L=k=>Bn(_(k)),A=(k,...D)=>{var B;const N=p(k);try{if(mh(E,k)){if(!yh(k))throw new Error("atom not writable");const $=N.n,I=D[0];Ea(k,I,p),c(k),$!==N.n&&(i.add(k),(B=g.c)==null||B.call(g,k),n(k));return}else return l(k,...D)}finally{y||(w(),C())}};try{return a(E,L,A,...S)}finally{y=!1}}),c=u[6]||(E=>{var S;const y=p(E),L=t.get(E);if(L&&!Ch(y.v)){for(const[A,k]of y.d)if(!L.d.has(A)){const D=p(A);h(A).t.add(E),L.d.add(A),k!==D.n&&(i.add(A),(S=g.c)==null||S.call(g,A),n(A))}for(const A of L.d||[])if(!y.d.has(A)){L.d.delete(A);const k=m(A);k==null||k.t.delete(E)}}}),h=u[7]||(E=>{var S;const y=p(E);let L=t.get(E);if(!L){_(E);for(const A of y.d.keys())h(A).t.add(E);if(L={l:new Set,d:new Set(y.d.keys()),t:new Set},t.set(E,L),(S=g.m)==null||S.call(g,E),xa(E)){const A=()=>{let k=!0;const D=(...B)=>{try{return l(E,...B)}finally{k||(w(),C())}};try{const B=v(E,D);B&&(L.u=()=>{k=!0;try{B()}finally{k=!1}})}finally{k=!1}};o.add(A)}}return L}),m=u[8]||(E=>{var S;const y=p(E);let L=t.get(E);if(L&&!L.l.size&&!Array.from(L.t).some(A=>{var k;return(k=t.get(A))==null?void 0:k.d.has(E)})){L.u&&f.add(L.u),L=void 0,t.delete(E),(S=g.u)==null||S.call(g,E);for(const A of y.d.keys()){const k=m(A);k==null||k.t.delete(E)}return}return L}),b=[e,t,r,i,o,f,g,s,a,d,v,p,C,w,_,n,l,c,h,m],x={get:E=>Bn(_(E)),set:(E,...S)=>{try{return l(E,...S)}finally{w(),C()}},sub:(E,S)=>{const L=h(E).l;return L.add(S),C(),()=>{L.delete(S),m(E),C()}}};return Object.defineProperty(x,Om,{value:b}),x},Im=Bm,bh=v_,m_={};let Fm=0;function Nm(e,t){const r=`atom${++Fm}`,i={toString(){return(m_?"production":void 0)!=="production"&&this.debugLabel?r+":"+this.debugLabel:r}};return i.init=e,i.read=Hm,i.write=$m,i}function Hm(e){return e(this)}function $m(e,t,r){return t(this,typeof r=="function"?r(e(this)):r)}function y_(){return Im()}let _s;function Um(){return _s||(_s=y_(),(m_?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=_s),globalThis.__JOTAI_DEFAULT_STORE__!==_s&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),_s}const zm={},S_=F.createContext(void 0);function C_(e){return F.useContext(S_)||Um()}function Wm({children:e,store:t}){const r=F.useRef(void 0);return!t&&!r.current&&(r.current=y_()),F.createElement(S_.Provider,{value:t||r.current},e)}const Fl=e=>typeof(e==null?void 0:e.then)=="function",Nl=e=>{e.status||(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}))},jm=Mt.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(Nl(e),e)}),La=new WeakMap,xh=(e,t)=>{let r=La.get(e);return r||(r=new Promise((i,o)=>{let f=e;const g=d=>v=>{f===d&&i(v)},s=d=>v=>{f===d&&o(v)},a=()=>{try{const d=t();Fl(d)?(La.set(d,r),f=d,d.then(g(d),s(d)),bh(d,a)):i(d)}catch(d){o(d)}};e.then(g(e),s(e)),bh(e,a)}),La.set(e,r)),r};function Vm(e,t){const{delay:r,unstable_promiseStatus:i=!Mt.use}={},o=C_(),[[f,g,s],a]=F.useReducer(v=>{const u=o.get(e);return Object.is(v[0],u)&&v[1]===o&&v[2]===e?v:[u,o,e]},void 0,()=>[o.get(e),o,e]);let d=f;if((g!==o||s!==e)&&(a(),d=o.get(e)),F.useEffect(()=>{const v=o.sub(e,()=>{if(i)try{const u=o.get(e);Fl(u)&&Nl(xh(u,()=>o.get(e)))}catch{}if(typeof r=="number"){setTimeout(a,r);return}a()});return a(),v},[o,e,r,i]),F.useDebugValue(d),Fl(d)){const v=xh(d,()=>o.get(e));return i&&Nl(v),jm(v)}return d}function Km(e,t){const r=C_();return F.useCallback((...o)=>{if((zm?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return r.set(e,...o)},[r,e])}function w_(e,t){return[Vm(e),Km(e)]}/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Eh="popstate";function qm(e={}){function t(i,o){let{pathname:f,search:g,hash:s}=i.location;return Hl("",{pathname:f,search:g,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(i,o){return typeof o=="string"?o:Js(o)}return Qm(t,r,null,e)}function Le(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Gm(){return Math.random().toString(36).substring(2,10)}function Lh(e,t){return{usr:e.state,key:e.key,idx:t}}function Hl(e,t,r=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?rs(t):t,state:r,key:t&&t.key||i||Gm()}}function Js({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function rs(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function Qm(e,t,r,i={}){let{window:o=document.defaultView,v5Compat:f=!1}=i,g=o.history,s="POP",a=null,d=v();d==null&&(d=0,g.replaceState({...g.state,idx:d},""));function v(){return(g.state||{idx:null}).idx}function u(){s="POP";let n=v(),l=n==null?null:n-d;d=n,a&&a({action:s,location:_.location,delta:l})}function p(n,l){s="PUSH";let c=Hl(_.location,n,l);d=v()+1;let h=Lh(c,d),m=_.createHref(c);try{g.pushState(h,"",m)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;o.location.assign(m)}f&&a&&a({action:s,location:_.location,delta:1})}function C(n,l){s="REPLACE";let c=Hl(_.location,n,l);d=v();let h=Lh(c,d),m=_.createHref(c);g.replaceState(h,"",m),f&&a&&a({action:s,location:_.location,delta:0})}function w(n){return Xm(n)}let _={get action(){return s},get location(){return e(o,g)},listen(n){if(a)throw new Error("A history only accepts one active listener");return o.addEventListener(Eh,u),a=n,()=>{o.removeEventListener(Eh,u),a=null}},createHref(n){return t(o,n)},createURL:w,encodeLocation(n){let l=w(n);return{pathname:l.pathname,search:l.search,hash:l.hash}},push:p,replace:C,go(n){return g.go(n)}};return _}function Xm(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Le(r,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:Js(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function b_(e,t,r="/"){return Ym(e,t,r,!1)}function Ym(e,t,r,i){let o=typeof t=="string"?rs(t):t,f=cr(o.pathname||"/",r);if(f==null)return null;let g=x_(e);Jm(g);let s=null;for(let a=0;s==null&&a<g.length;++a){let d=c0(f);s=a0(g[a],d,i)}return s}function x_(e,t=[],r=[],i="",o=!1){let f=(g,s,a=o,d)=>{let v={relativePath:d===void 0?g.path||"":d,caseSensitive:g.caseSensitive===!0,childrenIndex:s,route:g};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(i)&&a)return;Le(v.relativePath.startsWith(i),`Absolute route path "${v.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(i.length)}let u=ir([i,v.relativePath]),p=r.concat(v);g.children&&g.children.length>0&&(Le(g.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),x_(g.children,t,p,u,a)),!(g.path==null&&!g.index)&&t.push({path:u,score:n0(u,g.index),routesMeta:p})};return e.forEach((g,s)=>{var a;if(g.path===""||!((a=g.path)!=null&&a.includes("?")))f(g,s);else for(let d of E_(g.path))f(g,s,!0,d)}),t}function E_(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,o=r.endsWith("?"),f=r.replace(/\?$/,"");if(i.length===0)return o?[f,""]:[f];let g=E_(i.join("/")),s=[];return s.push(...g.map(a=>a===""?f:[f,a].join("/"))),o&&s.push(...g),s.map(a=>e.startsWith("/")&&a===""?"/":a)}function Jm(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:o0(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var Zm=/^:[\w-]+$/,e0=3,t0=2,r0=1,i0=10,s0=-2,Rh=e=>e==="*";function n0(e,t){let r=e.split("/"),i=r.length;return r.some(Rh)&&(i+=s0),t&&(i+=t0),r.filter(o=>!Rh(o)).reduce((o,f)=>o+(Zm.test(f)?e0:f===""?r0:i0),i)}function o0(e,t){return e.length===t.length&&e.slice(0,-1).every((i,o)=>i===t[o])?e[e.length-1]-t[t.length-1]:0}function a0(e,t,r=!1){let{routesMeta:i}=e,o={},f="/",g=[];for(let s=0;s<i.length;++s){let a=i[s],d=s===i.length-1,v=f==="/"?t:t.slice(f.length)||"/",u=Ro({path:a.relativePath,caseSensitive:a.caseSensitive,end:d},v),p=a.route;if(!u&&d&&r&&!i[i.length-1].route.index&&(u=Ro({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},v)),!u)return null;Object.assign(o,u.params),g.push({params:o,pathname:ir([f,u.pathname]),pathnameBase:f0(ir([f,u.pathnameBase])),route:p}),u.pathnameBase!=="/"&&(f=ir([f,u.pathnameBase]))}return g}function Ro(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=l0(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let f=o[0],g=f.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:i.reduce((d,{paramName:v,isOptional:u},p)=>{if(v==="*"){let w=s[p]||"";g=f.slice(0,f.length-w.length).replace(/(.)\/+$/,"$1")}const C=s[p];return u&&!C?d[v]=void 0:d[v]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:f,pathnameBase:g,pattern:e}}function l0(e,t=!1,r=!0){Kt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,s,a)=>(i.push({paramName:s,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),i]}function c0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Kt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function cr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function u0(e,t="/"){let{pathname:r,search:i="",hash:o=""}=typeof e=="string"?rs(e):e;return{pathname:r?r.startsWith("/")?r:h0(r,t):t,search:_0(i),hash:p0(o)}}function h0(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function Ra(e,t,r,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function d0(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function L_(e){let t=d0(e);return t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase)}function R_(e,t,r,i=!1){let o;typeof e=="string"?o=rs(e):(o={...e},Le(!o.pathname||!o.pathname.includes("?"),Ra("?","pathname","search",o)),Le(!o.pathname||!o.pathname.includes("#"),Ra("#","pathname","hash",o)),Le(!o.search||!o.search.includes("#"),Ra("#","search","hash",o)));let f=e===""||o.pathname==="",g=f?"/":o.pathname,s;if(g==null)s=r;else{let u=t.length-1;if(!i&&g.startsWith("..")){let p=g.split("/");for(;p[0]==="..";)p.shift(),u-=1;o.pathname=p.join("/")}s=u>=0?t[u]:"/"}let a=u0(o,s),d=g&&g!=="/"&&g.endsWith("/"),v=(f||g===".")&&r.endsWith("/");return!a.pathname.endsWith("/")&&(d||v)&&(a.pathname+="/"),a}var ir=e=>e.join("/").replace(/\/\/+/g,"/"),f0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,p0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function v0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var k_=["POST","PUT","PATCH","DELETE"];new Set(k_);var g0=["GET",...k_];new Set(g0);var is=F.createContext(null);is.displayName="DataRouter";var qo=F.createContext(null);qo.displayName="DataRouterState";F.createContext(!1);var A_=F.createContext({isTransitioning:!1});A_.displayName="ViewTransition";var m0=F.createContext(new Map);m0.displayName="Fetchers";var y0=F.createContext(null);y0.displayName="Await";var qt=F.createContext(null);qt.displayName="Navigation";var un=F.createContext(null);un.displayName="Location";var Gt=F.createContext({outlet:null,matches:[],isDataRoute:!1});Gt.displayName="Route";var jc=F.createContext(null);jc.displayName="RouteError";function S0(e,{relative:t}={}){Le(hn(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=F.useContext(qt),{hash:o,pathname:f,search:g}=dn(e,{relative:t}),s=f;return r!=="/"&&(s=f==="/"?r:ir([r,f])),i.createHref({pathname:s,search:g,hash:o})}function hn(){return F.useContext(un)!=null}function Wr(){return Le(hn(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(un).location}var D_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function M_(e){F.useContext(qt).static||F.useLayoutEffect(e)}function Vc(){let{isDataRoute:e}=F.useContext(Gt);return e?O0():C0()}function C0(){Le(hn(),"useNavigate() may be used only in the context of a <Router> component.");let e=F.useContext(is),{basename:t,navigator:r}=F.useContext(qt),{matches:i}=F.useContext(Gt),{pathname:o}=Wr(),f=JSON.stringify(L_(i)),g=F.useRef(!1);return M_(()=>{g.current=!0}),F.useCallback((a,d={})=>{if(Kt(g.current,D_),!g.current)return;if(typeof a=="number"){r.go(a);return}let v=R_(a,JSON.parse(f),o,d.relative==="path");e==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:ir([t,v.pathname])),(d.replace?r.replace:r.push)(v,d.state,d)},[t,r,f,o,e])}F.createContext(null);function w0(){let{matches:e}=F.useContext(Gt),t=e[e.length-1];return t?t.params:{}}function dn(e,{relative:t}={}){let{matches:r}=F.useContext(Gt),{pathname:i}=Wr(),o=JSON.stringify(L_(r));return F.useMemo(()=>R_(e,JSON.parse(o),i,t==="path"),[e,o,i,t])}function b0(e,t){return T_(e,t)}function T_(e,t,r,i){var l;Le(hn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=F.useContext(qt),{matches:f}=F.useContext(Gt),g=f[f.length-1],s=g?g.params:{},a=g?g.pathname:"/",d=g?g.pathnameBase:"/",v=g&&g.route;{let c=v&&v.path||"";P_(a,!v||c.endsWith("*")||c.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${a}" (under <Route path="${c}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${c}"> to <Route path="${c==="/"?"*":`${c}/*`}">.`)}let u=Wr(),p;if(t){let c=typeof t=="string"?rs(t):t;Le(d==="/"||((l=c.pathname)==null?void 0:l.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${c.pathname}" was given in the \`location\` prop.`),p=c}else p=u;let C=p.pathname||"/",w=C;if(d!=="/"){let c=d.replace(/^\//,"").split("/");w="/"+C.replace(/^\//,"").split("/").slice(c.length).join("/")}let _=b_(e,{pathname:w});Kt(v||_!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Kt(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let n=k0(_&&_.map(c=>Object.assign({},c,{params:Object.assign({},s,c.params),pathname:ir([d,o.encodeLocation?o.encodeLocation(c.pathname).pathname:c.pathname]),pathnameBase:c.pathnameBase==="/"?d:ir([d,o.encodeLocation?o.encodeLocation(c.pathnameBase).pathname:c.pathnameBase])})),f,r,i);return t&&n?F.createElement(un.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},n):n}function x0(){let e=P0(),t=v0(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},f={padding:"2px 4px",backgroundColor:i},g=null;return console.error("Error handled by React Router default ErrorBoundary:",e),g=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:f},"ErrorBoundary")," or"," ",F.createElement("code",{style:f},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),r?F.createElement("pre",{style:o},r):null,g)}var E0=F.createElement(x0,null),L0=class extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?F.createElement(Gt.Provider,{value:this.props.routeContext},F.createElement(jc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function R0({routeContext:e,match:t,children:r}){let i=F.useContext(is);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),F.createElement(Gt.Provider,{value:e},r)}function k0(e,t=[],r=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,f=r==null?void 0:r.errors;if(f!=null){let a=o.findIndex(d=>d.route.id&&(f==null?void 0:f[d.route.id])!==void 0);Le(a>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),o=o.slice(0,Math.min(o.length,a+1))}let g=!1,s=-1;if(r)for(let a=0;a<o.length;a++){let d=o[a];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(s=a),d.route.id){let{loaderData:v,errors:u}=r,p=d.route.loader&&!v.hasOwnProperty(d.route.id)&&(!u||u[d.route.id]===void 0);if(d.route.lazy||p){g=!0,s>=0?o=o.slice(0,s+1):o=[o[0]];break}}}return o.reduceRight((a,d,v)=>{let u,p=!1,C=null,w=null;r&&(u=f&&d.route.id?f[d.route.id]:void 0,C=d.route.errorElement||E0,g&&(s<0&&v===0?(P_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,w=null):s===v&&(p=!0,w=d.route.hydrateFallbackElement||null)));let _=t.concat(o.slice(0,v+1)),n=()=>{let l;return u?l=C:p?l=w:d.route.Component?l=F.createElement(d.route.Component,null):d.route.element?l=d.route.element:l=a,F.createElement(R0,{match:d,routeContext:{outlet:a,matches:_,isDataRoute:r!=null},children:l})};return r&&(d.route.ErrorBoundary||d.route.errorElement||v===0)?F.createElement(L0,{location:r.location,revalidation:r.revalidation,component:C,error:u,children:n(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):n()},null)}function Kc(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function A0(e){let t=F.useContext(is);return Le(t,Kc(e)),t}function D0(e){let t=F.useContext(qo);return Le(t,Kc(e)),t}function M0(e){let t=F.useContext(Gt);return Le(t,Kc(e)),t}function qc(e){let t=M0(e),r=t.matches[t.matches.length-1];return Le(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function T0(){return qc("useRouteId")}function P0(){var i;let e=F.useContext(jc),t=D0("useRouteError"),r=qc("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[r]}function O0(){let{router:e}=A0("useNavigate"),t=qc("useNavigate"),r=F.useRef(!1);return M_(()=>{r.current=!0}),F.useCallback(async(o,f={})=>{Kt(r.current,D_),r.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:t,...f}))},[e,t])}var kh={};function P_(e,t,r){!t&&!kh[e]&&(kh[e]=!0,Kt(!1,r))}F.memo(B0);function B0({routes:e,future:t,state:r}){return T_(e,void 0,r,t)}function $l(e){Le(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function I0({basename:e="/",children:t=null,location:r,navigationType:i="POP",navigator:o,static:f=!1}){Le(!hn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=e.replace(/^\/*/,"/"),s=F.useMemo(()=>({basename:g,navigator:o,static:f,future:{}}),[g,o,f]);typeof r=="string"&&(r=rs(r));let{pathname:a="/",search:d="",hash:v="",state:u=null,key:p="default"}=r,C=F.useMemo(()=>{let w=cr(a,g);return w==null?null:{location:{pathname:w,search:d,hash:v,state:u,key:p},navigationType:i}},[g,a,d,v,u,p,i]);return Kt(C!=null,`<Router basename="${g}"> is not able to match the URL "${a}${d}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:F.createElement(qt.Provider,{value:s},F.createElement(un.Provider,{children:t,value:C}))}function F0({children:e,location:t}){return b0(Ul(e),t)}function Ul(e,t=[]){let r=[];return F.Children.forEach(e,(i,o)=>{if(!F.isValidElement(i))return;let f=[...t,o];if(i.type===F.Fragment){r.push.apply(r,Ul(i.props.children,f));return}Le(i.type===$l,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Le(!i.props.index||!i.props.children,"An index route cannot have child routes.");let g={id:i.props.id||f.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(g.children=Ul(i.props.children,f)),r.push(g)}),r}var Xn="get",Yn="application/x-www-form-urlencoded";function Go(e){return e!=null&&typeof e.tagName=="string"}function N0(e){return Go(e)&&e.tagName.toLowerCase()==="button"}function H0(e){return Go(e)&&e.tagName.toLowerCase()==="form"}function $0(e){return Go(e)&&e.tagName.toLowerCase()==="input"}function U0(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function z0(e,t){return e.button===0&&(!t||t==="_self")&&!U0(e)}var In=null;function W0(){if(In===null)try{new FormData(document.createElement("form"),0),In=!1}catch{In=!0}return In}var j0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ka(e){return e!=null&&!j0.has(e)?(Kt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yn}"`),null):e}function V0(e,t){let r,i,o,f,g;if(H0(e)){let s=e.getAttribute("action");i=s?cr(s,t):null,r=e.getAttribute("method")||Xn,o=ka(e.getAttribute("enctype"))||Yn,f=new FormData(e)}else if(N0(e)||$0(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||s.getAttribute("action");if(i=a?cr(a,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||Xn,o=ka(e.getAttribute("formenctype"))||ka(s.getAttribute("enctype"))||Yn,f=new FormData(s,e),!W0()){let{name:d,type:v,value:u}=e;if(v==="image"){let p=d?`${d}.`:"";f.append(`${p}x`,"0"),f.append(`${p}y`,"0")}else d&&f.append(d,u)}}else{if(Go(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Xn,i=null,o=Yn,g=e}return f&&o==="text/plain"&&(g=f,f=void 0),{action:i,method:r.toLowerCase(),encType:o,formData:f,body:g}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Gc(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function K0(e,t,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${r}`:t&&cr(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function q0(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function G0(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Q0(e,t,r){let i=await Promise.all(e.map(async o=>{let f=t.routes[o.route.id];if(f){let g=await q0(f,r);return g.links?g.links():[]}return[]}));return Z0(i.flat(1).filter(G0).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Ah(e,t,r,i,o,f){let g=(a,d)=>r[d]?a.route.id!==r[d].route.id:!0,s=(a,d)=>{var v;return r[d].pathname!==a.pathname||((v=r[d].route.path)==null?void 0:v.endsWith("*"))&&r[d].params["*"]!==a.params["*"]};return f==="assets"?t.filter((a,d)=>g(a,d)||s(a,d)):f==="data"?t.filter((a,d)=>{var u;let v=i.routes[a.route.id];if(!v||!v.hasLoader)return!1;if(g(a,d)||s(a,d))return!0;if(a.route.shouldRevalidate){let p=a.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((u=r[0])==null?void 0:u.params)||{},nextUrl:new URL(e,window.origin),nextParams:a.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function X0(e,t,{includeHydrateFallback:r}={}){return Y0(e.map(i=>{let o=t.routes[i.route.id];if(!o)return[];let f=[o.module];return o.clientActionModule&&(f=f.concat(o.clientActionModule)),o.clientLoaderModule&&(f=f.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(f=f.concat(o.hydrateFallbackModule)),o.imports&&(f=f.concat(o.imports)),f}).flat(1))}function Y0(e){return[...new Set(e)]}function J0(e){let t={},r=Object.keys(e).sort();for(let i of r)t[i]=e[i];return t}function Z0(e,t){let r=new Set;return new Set(t),e.reduce((i,o)=>{let f=JSON.stringify(J0(o));return r.has(f)||(r.add(f),i.push({key:f,link:o})),i},[])}function O_(){let e=F.useContext(is);return Gc(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ey(){let e=F.useContext(qo);return Gc(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Qc=F.createContext(void 0);Qc.displayName="FrameworkContext";function B_(){let e=F.useContext(Qc);return Gc(e,"You must render this element inside a <HydratedRouter> element"),e}function ty(e,t){let r=F.useContext(Qc),[i,o]=F.useState(!1),[f,g]=F.useState(!1),{onFocus:s,onBlur:a,onMouseEnter:d,onMouseLeave:v,onTouchStart:u}=t,p=F.useRef(null);F.useEffect(()=>{if(e==="render"&&g(!0),e==="viewport"){let _=l=>{l.forEach(c=>{g(c.isIntersecting)})},n=new IntersectionObserver(_,{threshold:.5});return p.current&&n.observe(p.current),()=>{n.disconnect()}}},[e]),F.useEffect(()=>{if(i){let _=setTimeout(()=>{g(!0)},100);return()=>{clearTimeout(_)}}},[i]);let C=()=>{o(!0)},w=()=>{o(!1),g(!1)};return r?e!=="intent"?[f,p,{}]:[f,p,{onFocus:ps(s,C),onBlur:ps(a,w),onMouseEnter:ps(d,C),onMouseLeave:ps(v,w),onTouchStart:ps(u,C)}]:[!1,p,{}]}function ps(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function ry({page:e,...t}){let{router:r}=O_(),i=F.useMemo(()=>b_(r.routes,e,r.basename),[r.routes,e,r.basename]);return i?F.createElement(sy,{page:e,matches:i,...t}):null}function iy(e){let{manifest:t,routeModules:r}=B_(),[i,o]=F.useState([]);return F.useEffect(()=>{let f=!1;return Q0(e,t,r).then(g=>{f||o(g)}),()=>{f=!0}},[e,t,r]),i}function sy({page:e,matches:t,...r}){let i=Wr(),{manifest:o,routeModules:f}=B_(),{basename:g}=O_(),{loaderData:s,matches:a}=ey(),d=F.useMemo(()=>Ah(e,t,a,o,i,"data"),[e,t,a,o,i]),v=F.useMemo(()=>Ah(e,t,a,o,i,"assets"),[e,t,a,o,i]),u=F.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let w=new Set,_=!1;if(t.forEach(l=>{var h;let c=o.routes[l.route.id];!c||!c.hasLoader||(!d.some(m=>m.route.id===l.route.id)&&l.route.id in s&&((h=f[l.route.id])!=null&&h.shouldRevalidate)||c.hasClientLoader?_=!0:w.add(l.route.id))}),w.size===0)return[];let n=K0(e,g,"data");return _&&w.size>0&&n.searchParams.set("_routes",t.filter(l=>w.has(l.route.id)).map(l=>l.route.id).join(",")),[n.pathname+n.search]},[g,s,i,o,d,t,e,f]),p=F.useMemo(()=>X0(v,o),[v,o]),C=iy(v);return F.createElement(F.Fragment,null,u.map(w=>F.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...r})),p.map(w=>F.createElement("link",{key:w,rel:"modulepreload",href:w,...r})),C.map(({key:w,link:_})=>F.createElement("link",{key:w,nonce:r.nonce,..._})))}function ny(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var I_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{I_&&(window.__reactRouterVersion="7.8.1")}catch{}function oy({basename:e,children:t,window:r}){let i=F.useRef();i.current==null&&(i.current=qm({window:r,v5Compat:!0}));let o=i.current,[f,g]=F.useState({action:o.action,location:o.location}),s=F.useCallback(a=>{F.startTransition(()=>g(a))},[g]);return F.useLayoutEffect(()=>o.listen(s),[o,s]),F.createElement(I0,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:o})}var F_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,N_=F.forwardRef(function({onClick:t,discover:r="render",prefetch:i="none",relative:o,reloadDocument:f,replace:g,state:s,target:a,to:d,preventScrollReset:v,viewTransition:u,...p},C){let{basename:w}=F.useContext(qt),_=typeof d=="string"&&F_.test(d),n,l=!1;if(typeof d=="string"&&_&&(n=d,I_))try{let y=new URL(window.location.href),L=d.startsWith("//")?new URL(y.protocol+d):new URL(d),A=cr(L.pathname,w);L.origin===y.origin&&A!=null?d=A+L.search+L.hash:l=!0}catch{Kt(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let c=S0(d,{relative:o}),[h,m,b]=ty(i,p),x=uy(d,{replace:g,state:s,target:a,preventScrollReset:v,relative:o,viewTransition:u});function E(y){t&&t(y),y.defaultPrevented||x(y)}let S=F.createElement("a",{...p,...b,href:n||c,onClick:l||f?t:E,ref:ny(C,m),target:a,"data-discover":!_&&r==="render"?"true":void 0});return h&&!_?F.createElement(F.Fragment,null,S,F.createElement(ry,{page:c})):S});N_.displayName="Link";var ay=F.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:i="",end:o=!1,style:f,to:g,viewTransition:s,children:a,...d},v){let u=dn(g,{relative:d.relative}),p=Wr(),C=F.useContext(qo),{navigator:w,basename:_}=F.useContext(qt),n=C!=null&&py(u)&&s===!0,l=w.encodeLocation?w.encodeLocation(u).pathname:u.pathname,c=p.pathname,h=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;r||(c=c.toLowerCase(),h=h?h.toLowerCase():null,l=l.toLowerCase()),h&&_&&(h=cr(h,_)||h);const m=l!=="/"&&l.endsWith("/")?l.length-1:l.length;let b=c===l||!o&&c.startsWith(l)&&c.charAt(m)==="/",x=h!=null&&(h===l||!o&&h.startsWith(l)&&h.charAt(l.length)==="/"),E={isActive:b,isPending:x,isTransitioning:n},S=b?t:void 0,y;typeof i=="function"?y=i(E):y=[i,b?"active":null,x?"pending":null,n?"transitioning":null].filter(Boolean).join(" ");let L=typeof f=="function"?f(E):f;return F.createElement(N_,{...d,"aria-current":S,className:y,ref:v,style:L,to:g,viewTransition:s},typeof a=="function"?a(E):a)});ay.displayName="NavLink";var ly=F.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:i,replace:o,state:f,method:g=Xn,action:s,onSubmit:a,relative:d,preventScrollReset:v,viewTransition:u,...p},C)=>{let w=fy(),_=_y(s,{relative:d}),n=g.toLowerCase()==="get"?"get":"post",l=typeof s=="string"&&F_.test(s),c=h=>{if(a&&a(h),h.defaultPrevented)return;h.preventDefault();let m=h.nativeEvent.submitter,b=(m==null?void 0:m.getAttribute("formmethod"))||g;w(m||h.currentTarget,{fetcherKey:t,method:b,navigate:r,replace:o,state:f,relative:d,preventScrollReset:v,viewTransition:u})};return F.createElement("form",{ref:C,method:n,action:_,onSubmit:i?a:c,...p,"data-discover":!l&&e==="render"?"true":void 0})});ly.displayName="Form";function cy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function H_(e){let t=F.useContext(is);return Le(t,cy(e)),t}function uy(e,{target:t,replace:r,state:i,preventScrollReset:o,relative:f,viewTransition:g}={}){let s=Vc(),a=Wr(),d=dn(e,{relative:f});return F.useCallback(v=>{if(z0(v,t)){v.preventDefault();let u=r!==void 0?r:Js(a)===Js(d);s(e,{replace:u,state:i,preventScrollReset:o,relative:f,viewTransition:g})}},[a,s,d,r,i,t,e,o,f,g])}var hy=0,dy=()=>`__${String(++hy)}__`;function fy(){let{router:e}=H_("useSubmit"),{basename:t}=F.useContext(qt),r=T0();return F.useCallback(async(i,o={})=>{let{action:f,method:g,encType:s,formData:a,body:d}=V0(i,t);if(o.navigate===!1){let v=o.fetcherKey||dy();await e.fetch(v,r,o.action||f,{preventScrollReset:o.preventScrollReset,formData:a,body:d,formMethod:o.method||g,formEncType:o.encType||s,flushSync:o.flushSync})}else await e.navigate(o.action||f,{preventScrollReset:o.preventScrollReset,formData:a,body:d,formMethod:o.method||g,formEncType:o.encType||s,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,r])}function _y(e,{relative:t}={}){let{basename:r}=F.useContext(qt),i=F.useContext(Gt);Le(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),f={...dn(e||".",{relative:t})},g=Wr();if(e==null){f.search=g.search;let s=new URLSearchParams(f.search),a=s.getAll("index");if(a.some(v=>v==="")){s.delete("index"),a.filter(u=>u).forEach(u=>s.append("index",u));let v=s.toString();f.search=v?`?${v}`:""}}return(!e||e===".")&&o.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(f.pathname=f.pathname==="/"?r:ir([r,f.pathname])),Js(f)}function py(e,{relative:t}={}){let r=F.useContext(A_);Le(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=H_("useViewTransitionState"),o=dn(e,{relative:t});if(!r.isTransitioning)return!1;let f=cr(r.currentLocation.pathname,i)||r.currentLocation.pathname,g=cr(r.nextLocation.pathname,i)||r.nextLocation.pathname;return Ro(o.pathname,g)!=null||Ro(o.pathname,f)!=null}function sr(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e==null||e(o),r===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function Xc(e,t=[]){let r=[];function i(f,g){const s=F.createContext(g),a=r.length;r=[...r,g];const d=u=>{var l;const{scope:p,children:C,...w}=u,_=((l=p==null?void 0:p[e])==null?void 0:l[a])||s,n=F.useMemo(()=>w,Object.values(w));return X.jsx(_.Provider,{value:n,children:C})};d.displayName=f+"Provider";function v(u,p){var _;const C=((_=p==null?void 0:p[e])==null?void 0:_[a])||s,w=F.useContext(C);if(w)return w;if(g!==void 0)return g;throw new Error(`\`${u}\` must be used within \`${f}\``)}return[d,v]}const o=()=>{const f=r.map(g=>F.createContext(g));return function(s){const a=(s==null?void 0:s[e])||f;return F.useMemo(()=>({[`__scope${e}`]:{...s,[e]:a}}),[s,a])}};return o.scopeName=e,[i,vy(o,...t)]}function vy(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const i=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(f){const g=i.reduce((s,{useScope:a,scopeName:d})=>{const u=a(f)[`__scope${d}`];return{...s,...u}},{});return F.useMemo(()=>({[`__scope${t.scopeName}`]:g}),[g])}};return r.scopeName=t.scopeName,r}function Dh(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function $_(...e){return t=>{let r=!1;const i=e.map(o=>{const f=Dh(o,t);return!r&&typeof f=="function"&&(r=!0),f});if(r)return()=>{for(let o=0;o<i.length;o++){const f=i[o];typeof f=="function"?f():Dh(e[o],null)}}}}function ko(...e){return F.useCallback($_(...e),e)}function Ao(e){const t=my(e),r=F.forwardRef((i,o)=>{const{children:f,...g}=i,s=F.Children.toArray(f),a=s.find(Sy);if(a){const d=a.props.children,v=s.map(u=>u===a?F.Children.count(d)>1?F.Children.only(null):F.isValidElement(d)?d.props.children:null:u);return X.jsx(t,{...g,ref:o,children:F.isValidElement(d)?F.cloneElement(d,void 0,v):null})}return X.jsx(t,{...g,ref:o,children:f})});return r.displayName=`${e}.Slot`,r}var gy=Ao("Slot");function my(e){const t=F.forwardRef((r,i)=>{const{children:o,...f}=r;if(F.isValidElement(o)){const g=wy(o),s=Cy(f,o.props);return o.type!==F.Fragment&&(s.ref=i?$_(i,g):g),F.cloneElement(o,s)}return F.Children.count(o)>1?F.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var yy=Symbol("radix.slottable");function Sy(e){return F.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===yy}function Cy(e,t){const r={...t};for(const i in t){const o=e[i],f=t[i];/^on[A-Z]/.test(i)?o&&f?r[i]=(...s)=>{const a=f(...s);return o(...s),a}:o&&(r[i]=o):i==="style"?r[i]={...o,...f}:i==="className"&&(r[i]=[o,f].filter(Boolean).join(" "))}return{...e,...r}}function wy(e){var i,o;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function by(e){const t=e+"CollectionProvider",[r,i]=Xc(t),[o,f]=r(t,{collectionRef:{current:null},itemMap:new Map}),g=_=>{const{scope:n,children:l}=_,c=Mt.useRef(null),h=Mt.useRef(new Map).current;return X.jsx(o,{scope:n,itemMap:h,collectionRef:c,children:l})};g.displayName=t;const s=e+"CollectionSlot",a=Ao(s),d=Mt.forwardRef((_,n)=>{const{scope:l,children:c}=_,h=f(s,l),m=ko(n,h.collectionRef);return X.jsx(a,{ref:m,children:c})});d.displayName=s;const v=e+"CollectionItemSlot",u="data-radix-collection-item",p=Ao(v),C=Mt.forwardRef((_,n)=>{const{scope:l,children:c,...h}=_,m=Mt.useRef(null),b=ko(n,m),x=f(v,l);return Mt.useEffect(()=>(x.itemMap.set(m,{ref:m,...h}),()=>void x.itemMap.delete(m))),X.jsx(p,{[u]:"",ref:b,children:c})});C.displayName=v;function w(_){const n=f(e+"CollectionConsumer",_);return Mt.useCallback(()=>{const c=n.collectionRef.current;if(!c)return[];const h=Array.from(c.querySelectorAll(`[${u}]`));return Array.from(n.itemMap.values()).sort((x,E)=>h.indexOf(x.ref.current)-h.indexOf(E.ref.current))},[n.collectionRef,n.itemMap])}return[{Provider:g,Slot:d,ItemSlot:C},w,i]}var Do=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{},xy=ed[" useId ".trim().toString()]||(()=>{}),Ey=0;function U_(e){const[t,r]=F.useState(xy());return Do(()=>{r(i=>i??String(Ey++))},[e]),t?`radix-${t}`:""}var Ly=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ss=Ly.reduce((e,t)=>{const r=Ao(`Primitive.${t}`),i=F.forwardRef((o,f)=>{const{asChild:g,...s}=o,a=g?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),X.jsx(a,{...s,ref:f})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function Ry(e){const t=F.useRef(e);return F.useEffect(()=>{t.current=e}),F.useMemo(()=>(...r)=>{var i;return(i=t.current)==null?void 0:i.call(t,...r)},[])}var ky=ed[" useInsertionEffect ".trim().toString()]||Do;function z_({prop:e,defaultProp:t,onChange:r=()=>{},caller:i}){const[o,f,g]=Ay({defaultProp:t,onChange:r}),s=e!==void 0,a=s?e:o;{const v=F.useRef(e!==void 0);F.useEffect(()=>{const u=v.current;u!==s&&console.warn(`${i} is changing from ${u?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=s},[s,i])}const d=F.useCallback(v=>{var u;if(s){const p=Dy(v)?v(e):v;p!==e&&((u=g.current)==null||u.call(g,p))}else f(v)},[s,e,f,g]);return[a,d]}function Ay({defaultProp:e,onChange:t}){const[r,i]=F.useState(e),o=F.useRef(r),f=F.useRef(t);return ky(()=>{f.current=t},[t]),F.useEffect(()=>{var g;o.current!==r&&((g=f.current)==null||g.call(f,r),o.current=r)},[r,o]),[r,i,f]}function Dy(e){return typeof e=="function"}var My=F.createContext(void 0);function W_(e){const t=F.useContext(My);return e||t||"ltr"}var Aa="rovingFocusGroup.onEntryFocus",Ty={bubbles:!1,cancelable:!0},fn="RovingFocusGroup",[zl,j_,Py]=by(fn),[Oy,V_]=Xc(fn,[Py]),[By,Iy]=Oy(fn),K_=F.forwardRef((e,t)=>X.jsx(zl.Provider,{scope:e.__scopeRovingFocusGroup,children:X.jsx(zl.Slot,{scope:e.__scopeRovingFocusGroup,children:X.jsx(Fy,{...e,ref:t})})}));K_.displayName=fn;var Fy=F.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:i,loop:o=!1,dir:f,currentTabStopId:g,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:a,onEntryFocus:d,preventScrollOnEntryFocus:v=!1,...u}=e,p=F.useRef(null),C=ko(t,p),w=W_(f),[_,n]=z_({prop:g,defaultProp:s??null,onChange:a,caller:fn}),[l,c]=F.useState(!1),h=Ry(d),m=j_(r),b=F.useRef(!1),[x,E]=F.useState(0);return F.useEffect(()=>{const S=p.current;if(S)return S.addEventListener(Aa,h),()=>S.removeEventListener(Aa,h)},[h]),X.jsx(By,{scope:r,orientation:i,dir:w,loop:o,currentTabStopId:_,onItemFocus:F.useCallback(S=>n(S),[n]),onItemShiftTab:F.useCallback(()=>c(!0),[]),onFocusableItemAdd:F.useCallback(()=>E(S=>S+1),[]),onFocusableItemRemove:F.useCallback(()=>E(S=>S-1),[]),children:X.jsx(ss.div,{tabIndex:l||x===0?-1:0,"data-orientation":i,...u,ref:C,style:{outline:"none",...e.style},onMouseDown:sr(e.onMouseDown,()=>{b.current=!0}),onFocus:sr(e.onFocus,S=>{const y=!b.current;if(S.target===S.currentTarget&&y&&!l){const L=new CustomEvent(Aa,Ty);if(S.currentTarget.dispatchEvent(L),!L.defaultPrevented){const A=m().filter($=>$.focusable),k=A.find($=>$.active),D=A.find($=>$.id===_),N=[k,D,...A].filter(Boolean).map($=>$.ref.current);Q_(N,v)}}b.current=!1}),onBlur:sr(e.onBlur,()=>c(!1))})})}),q_="RovingFocusGroupItem",G_=F.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:i=!0,active:o=!1,tabStopId:f,children:g,...s}=e,a=U_(),d=f||a,v=Iy(q_,r),u=v.currentTabStopId===d,p=j_(r),{onFocusableItemAdd:C,onFocusableItemRemove:w,currentTabStopId:_}=v;return F.useEffect(()=>{if(i)return C(),()=>w()},[i,C,w]),X.jsx(zl.ItemSlot,{scope:r,id:d,focusable:i,active:o,children:X.jsx(ss.span,{tabIndex:u?0:-1,"data-orientation":v.orientation,...s,ref:t,onMouseDown:sr(e.onMouseDown,n=>{i?v.onItemFocus(d):n.preventDefault()}),onFocus:sr(e.onFocus,()=>v.onItemFocus(d)),onKeyDown:sr(e.onKeyDown,n=>{if(n.key==="Tab"&&n.shiftKey){v.onItemShiftTab();return}if(n.target!==n.currentTarget)return;const l=$y(n,v.orientation,v.dir);if(l!==void 0){if(n.metaKey||n.ctrlKey||n.altKey||n.shiftKey)return;n.preventDefault();let h=p().filter(m=>m.focusable).map(m=>m.ref.current);if(l==="last")h.reverse();else if(l==="prev"||l==="next"){l==="prev"&&h.reverse();const m=h.indexOf(n.currentTarget);h=v.loop?Uy(h,m+1):h.slice(m+1)}setTimeout(()=>Q_(h))}}),children:typeof g=="function"?g({isCurrentTabStop:u,hasTabStop:_!=null}):g})})});G_.displayName=q_;var Ny={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Hy(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function $y(e,t,r){const i=Hy(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return Ny[i]}function Q_(e,t=!1){const r=document.activeElement;for(const i of e)if(i===r||(i.focus({preventScroll:t}),document.activeElement!==r))return}function Uy(e,t){return e.map((r,i)=>e[(t+i)%e.length])}var zy=K_,Wy=G_;function jy(e,t){return F.useReducer((r,i)=>t[r][i]??r,e)}var X_=e=>{const{present:t,children:r}=e,i=Vy(t),o=typeof r=="function"?r({present:i.isPresent}):F.Children.only(r),f=ko(i.ref,Ky(o));return typeof r=="function"||i.isPresent?F.cloneElement(o,{ref:f}):null};X_.displayName="Presence";function Vy(e){const[t,r]=F.useState(),i=F.useRef(null),o=F.useRef(e),f=F.useRef("none"),g=e?"mounted":"unmounted",[s,a]=jy(g,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return F.useEffect(()=>{const d=Fn(i.current);f.current=s==="mounted"?d:"none"},[s]),Do(()=>{const d=i.current,v=o.current;if(v!==e){const p=f.current,C=Fn(d);e?a("MOUNT"):C==="none"||(d==null?void 0:d.display)==="none"?a("UNMOUNT"):a(v&&p!==C?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,a]),Do(()=>{if(t){let d;const v=t.ownerDocument.defaultView??window,u=C=>{const _=Fn(i.current).includes(CSS.escape(C.animationName));if(C.target===t&&_&&(a("ANIMATION_END"),!o.current)){const n=t.style.animationFillMode;t.style.animationFillMode="forwards",d=v.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=n)})}},p=C=>{C.target===t&&(f.current=Fn(i.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{v.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else a("ANIMATION_END")},[t,a]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:F.useCallback(d=>{i.current=d?getComputedStyle(d):null,r(d)},[])}}function Fn(e){return(e==null?void 0:e.animationName)||"none"}function Ky(e){var i,o;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Qo="Tabs",[qy,z1]=Xc(Qo,[V_]),Y_=V_(),[Gy,Yc]=qy(Qo),J_=F.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,onValueChange:o,defaultValue:f,orientation:g="horizontal",dir:s,activationMode:a="automatic",...d}=e,v=W_(s),[u,p]=z_({prop:i,onChange:o,defaultProp:f??"",caller:Qo});return X.jsx(Gy,{scope:r,baseId:U_(),value:u,onValueChange:p,orientation:g,dir:v,activationMode:a,children:X.jsx(ss.div,{dir:v,"data-orientation":g,...d,ref:t})})});J_.displayName=Qo;var Z_="TabsList",ep=F.forwardRef((e,t)=>{const{__scopeTabs:r,loop:i=!0,...o}=e,f=Yc(Z_,r),g=Y_(r);return X.jsx(zy,{asChild:!0,...g,orientation:f.orientation,dir:f.dir,loop:i,children:X.jsx(ss.div,{role:"tablist","aria-orientation":f.orientation,...o,ref:t})})});ep.displayName=Z_;var tp="TabsTrigger",rp=F.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,disabled:o=!1,...f}=e,g=Yc(tp,r),s=Y_(r),a=np(g.baseId,i),d=op(g.baseId,i),v=i===g.value;return X.jsx(Wy,{asChild:!0,...s,focusable:!o,active:v,children:X.jsx(ss.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":d,"data-state":v?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:a,...f,ref:t,onMouseDown:sr(e.onMouseDown,u=>{!o&&u.button===0&&u.ctrlKey===!1?g.onValueChange(i):u.preventDefault()}),onKeyDown:sr(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&g.onValueChange(i)}),onFocus:sr(e.onFocus,()=>{const u=g.activationMode!=="manual";!v&&!o&&u&&g.onValueChange(i)})})})});rp.displayName=tp;var ip="TabsContent",sp=F.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,forceMount:o,children:f,...g}=e,s=Yc(ip,r),a=np(s.baseId,i),d=op(s.baseId,i),v=i===s.value,u=F.useRef(v);return F.useEffect(()=>{const p=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(p)},[]),X.jsx(X_,{present:o||v,children:({present:p})=>X.jsx(ss.div,{"data-state":v?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":a,hidden:!p,id:d,tabIndex:0,...g,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:p&&f})})});sp.displayName=ip;function np(e,t){return`${e}-trigger-${t}`}function op(e,t){return`${e}-content-${t}`}var Qy=J_,ap=ep,lp=rp,cp=sp;function up(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=up(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function _n(){for(var e,t,r=0,i="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=up(e))&&(i&&(i+=" "),i+=t);return i}const Xy=Qy,hp=F.forwardRef(({className:e,...t},r)=>X.jsx(ap,{ref:r,className:_n("flex w-full justify-around border-t bg-white",e),...t}));hp.displayName=ap.displayName;const Wl=F.forwardRef(({className:e,...t},r)=>X.jsx(lp,{ref:r,className:_n("flex-1 py-2 text-sm font-medium data-[state=active]:border-b-2 data-[state=active]:border-blue-500",e),...t}));Wl.displayName=lp.displayName;const jl=F.forwardRef(({className:e,...t},r)=>X.jsx(cp,{ref:r,className:_n("h-full w-full",e),...t}));jl.displayName=cp.displayName;const dp=Nm("");var fp={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,()=>(()=>{var r={4567:function(g,s,a){var d=this&&this.__decorate||function(h,m,b,x){var E,S=arguments.length,y=S<3?m:x===null?x=Object.getOwnPropertyDescriptor(m,b):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(h,m,b,x);else for(var L=h.length-1;L>=0;L--)(E=h[L])&&(y=(S<3?E(y):S>3?E(m,b,y):E(m,b))||y);return S>3&&y&&Object.defineProperty(m,b,y),y},v=this&&this.__param||function(h,m){return function(b,x){m(b,x,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const u=a(9042),p=a(6114),C=a(9924),w=a(844),_=a(5596),n=a(4725),l=a(3656);let c=s.AccessibilityManager=class extends w.Disposable{constructor(h,m){super(),this._terminal=h,this._renderService=m,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let b=0;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);if(this._topBoundaryFocusListener=b=>this._handleBoundaryFocus(b,0),this._bottomBoundaryFocusListener=b=>this._handleBoundaryFocus(b,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new C.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(b=>this._handleResize(b.rows))),this.register(this._terminal.onRender(b=>this._refreshRows(b.start,b.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(b=>this._handleChar(b))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(b=>this._handleTab(b))),this.register(this._terminal.onKey(b=>this._handleKey(b.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new _.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(h){for(let m=0;m<h;m++)this._handleChar(" ")}_handleChar(h){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==h&&(this._charsToAnnounce+=h):this._charsToAnnounce+=h,h===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)),p.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,p.isMac&&this._liveRegion.remove()}_handleKey(h){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(h)||this._charsToConsume.push(h)}_refreshRows(h,m){this._liveRegionDebouncer.refresh(h,m,this._terminal.rows)}_renderRows(h,m){const b=this._terminal.buffer,x=b.lines.length.toString();for(let E=h;E<=m;E++){const S=b.translateBufferLineToString(b.ydisp+E,!0),y=(b.ydisp+E+1).toString(),L=this._rowElements[E];L&&(S.length===0?L.innerText="":L.textContent=S,L.setAttribute("aria-posinset",y),L.setAttribute("aria-setsize",x))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(h,m){const b=h.target,x=this._rowElements[m===0?1:this._rowElements.length-2];if(b.getAttribute("aria-posinset")===(m===0?"1":`${this._terminal.buffer.lines.length}`)||h.relatedTarget!==x)return;let E,S;if(m===0?(E=b,S=this._rowElements.pop(),this._rowContainer.removeChild(S)):(E=this._rowElements.shift(),S=b,this._rowContainer.removeChild(E)),E.removeEventListener("focus",this._topBoundaryFocusListener),S.removeEventListener("focus",this._bottomBoundaryFocusListener),m===0){const y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{const y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(m===0?-1:1),this._rowElements[m===0?1:this._rowElements.length-2].focus(),h.preventDefault(),h.stopImmediatePropagation()}_handleResize(h){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let m=this._rowContainer.children.length;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);for(;this._rowElements.length>h;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const h=document.createElement("div");return h.setAttribute("role","listitem"),h.tabIndex=-1,this._refreshRowDimensions(h),h}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let h=0;h<this._terminal.rows;h++)this._refreshRowDimensions(this._rowElements[h])}}_refreshRowDimensions(h){h.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=c=d([v(1,n.IRenderService)],c)},3614:(g,s)=>{function a(p){return p.replace(/\r?\n/g,"\r")}function d(p,C){return C?"\x1B[200~"+p+"\x1B[201~":p}function v(p,C,w,_){p=d(p=a(p),w.decPrivateModes.bracketedPasteMode&&_.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(p,!0),C.value=""}function u(p,C,w){const _=w.getBoundingClientRect(),n=p.clientX-_.left-10,l=p.clientY-_.top-10;C.style.width="20px",C.style.height="20px",C.style.left=`${n}px`,C.style.top=`${l}px`,C.style.zIndex="1000",C.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=a,s.bracketTextForPaste=d,s.copyHandler=function(p,C){p.clipboardData&&p.clipboardData.setData("text/plain",C.selectionText),p.preventDefault()},s.handlePasteEvent=function(p,C,w,_){p.stopPropagation(),p.clipboardData&&v(p.clipboardData.getData("text/plain"),C,w,_)},s.paste=v,s.moveTextAreaUnderMouseCursor=u,s.rightClickHandler=function(p,C,w,_,n){u(p,C,w),n&&_.rightClickSelect(p),C.value=_.selectionText,C.select()}},7239:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const d=a(1505);s.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(v,u,p){this._css.set(v,u,p)}getCss(v,u){return this._css.get(v,u)}setColor(v,u,p){this._color.set(v,u,p)}getColor(v,u){return this._color.get(v,u)}clear(){this._color.clear(),this._css.clear()}}},3656:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,d,v,u){a.addEventListener(d,v,u);let p=!1;return{dispose:()=>{p||(p=!0,a.removeEventListener(d,v,u))}}}},6465:function(g,s,a){var d=this&&this.__decorate||function(n,l,c,h){var m,b=arguments.length,x=b<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,l,c,h);else for(var E=n.length-1;E>=0;E--)(m=n[E])&&(x=(b<3?m(x):b>3?m(l,c,x):m(l,c))||x);return b>3&&x&&Object.defineProperty(l,c,x),x},v=this&&this.__param||function(n,l){return function(c,h){l(c,h,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;const u=a(3656),p=a(8460),C=a(844),w=a(2585);let _=s.Linkifier2=class extends C.Disposable{get currentLink(){return this._currentLink}constructor(n){super(),this._bufferService=n,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,C.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,C.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(n){return this._linkProviders.push(n),{dispose:()=>{const l=this._linkProviders.indexOf(n);l!==-1&&this._linkProviders.splice(l,1)}}}attachToDom(n,l,c){this._element=n,this._mouseService=l,this._renderService=c,this.register((0,u.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,u.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(n){if(this._lastMouseEvent=n,!this._element||!this._mouseService)return;const l=this._positionFromMouseEvent(n,this._element,this._mouseService);if(!l)return;this._isMouseOut=!1;const c=n.composedPath();for(let h=0;h<c.length;h++){const m=c[h];if(m.classList.contains("xterm"))break;if(m.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._handleHover(l),this._lastBufferCell=l)}_handleHover(n){if(this._activeLine!==n.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(n,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,n)||(this._clearCurrentLink(),this._askForLink(n,!0))}_askForLink(n,l){var c,h;this._activeProviderReplies&&l||((c=this._activeProviderReplies)===null||c===void 0||c.forEach(b=>{b==null||b.forEach(x=>{x.link.dispose&&x.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=n.y);let m=!1;for(const[b,x]of this._linkProviders.entries())l?!((h=this._activeProviderReplies)===null||h===void 0)&&h.get(b)&&(m=this._checkLinkProviderResult(b,n,m)):x.provideLinks(n.y,E=>{var S,y;if(this._isMouseOut)return;const L=E==null?void 0:E.map(A=>({link:A}));(S=this._activeProviderReplies)===null||S===void 0||S.set(b,L),m=this._checkLinkProviderResult(b,n,m),((y=this._activeProviderReplies)===null||y===void 0?void 0:y.size)===this._linkProviders.length&&this._removeIntersectingLinks(n.y,this._activeProviderReplies)})}_removeIntersectingLinks(n,l){const c=new Set;for(let h=0;h<l.size;h++){const m=l.get(h);if(m)for(let b=0;b<m.length;b++){const x=m[b],E=x.link.range.start.y<n?0:x.link.range.start.x,S=x.link.range.end.y>n?this._bufferService.cols:x.link.range.end.x;for(let y=E;y<=S;y++){if(c.has(y)){m.splice(b--,1);break}c.add(y)}}}}_checkLinkProviderResult(n,l,c){var h;if(!this._activeProviderReplies)return c;const m=this._activeProviderReplies.get(n);let b=!1;for(let x=0;x<n;x++)this._activeProviderReplies.has(x)&&!this._activeProviderReplies.get(x)||(b=!0);if(!b&&m){const x=m.find(E=>this._linkAtPosition(E.link,l));x&&(c=!0,this._handleNewLink(x))}if(this._activeProviderReplies.size===this._linkProviders.length&&!c)for(let x=0;x<this._activeProviderReplies.size;x++){const E=(h=this._activeProviderReplies.get(x))===null||h===void 0?void 0:h.find(S=>this._linkAtPosition(S.link,l));if(E){c=!0,this._handleNewLink(E);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(n){if(!this._element||!this._mouseService||!this._currentLink)return;const l=this._positionFromMouseEvent(n,this._element,this._mouseService);l&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(n,this._currentLink.link.text)}_clearCurrentLink(n,l){this._element&&this._currentLink&&this._lastMouseEvent&&(!n||!l||this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,C.disposeArray)(this._linkCacheDisposables))}_handleNewLink(n){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._linkAtPosition(n.link,l)&&(this._currentLink=n,this._currentLink.state={decorations:{underline:n.link.decorations===void 0||n.link.decorations.underline,pointerCursor:n.link.decorations===void 0||n.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,n.link,this._lastMouseEvent),n.link.decorations={},Object.defineProperties(n.link.decorations,{pointerCursor:{get:()=>{var c,h;return(h=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||h===void 0?void 0:h.decorations.pointerCursor},set:c=>{var h,m;!((h=this._currentLink)===null||h===void 0)&&h.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&((m=this._element)===null||m===void 0||m.classList.toggle("xterm-cursor-pointer",c)))}},underline:{get:()=>{var c,h;return(h=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||h===void 0?void 0:h.decorations.underline},set:c=>{var h,m,b;!((h=this._currentLink)===null||h===void 0)&&h.state&&((b=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||b===void 0?void 0:b.decorations.underline)!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(n.link,c))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(c=>{if(!this._currentLink)return;const h=c.start===0?0:c.start+1+this._bufferService.buffer.ydisp,m=this._bufferService.buffer.ydisp+1+c.end;if(this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=m&&(this._clearCurrentLink(h,m),this._lastMouseEvent&&this._element)){const b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._askForLink(b,!1)}})))}_linkHover(n,l,c){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&n.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(c,l.text)}_fireUnderlineEvent(n,l){const c=n.range,h=this._bufferService.buffer.ydisp,m=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-h-1,c.end.x,c.end.y-h-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(m)}_linkLeave(n,l,c){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&n.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(c,l.text)}_linkAtPosition(n,l){const c=n.range.start.y*this._bufferService.cols+n.range.start.x,h=n.range.end.y*this._bufferService.cols+n.range.end.x,m=l.y*this._bufferService.cols+l.x;return c<=m&&m<=h}_positionFromMouseEvent(n,l,c){const h=c.getCoords(n,l,this._bufferService.cols,this._bufferService.rows);if(h)return{x:h[0],y:h[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(n,l,c,h,m){return{x1:n,y1:l,x2:c,y2:h,cols:this._bufferService.cols,fg:m}}};s.Linkifier2=_=d([v(0,w.IBufferService)],_)},9042:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(g,s,a){var d=this&&this.__decorate||function(_,n,l,c){var h,m=arguments.length,b=m<3?n:c===null?c=Object.getOwnPropertyDescriptor(n,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(_,n,l,c);else for(var x=_.length-1;x>=0;x--)(h=_[x])&&(b=(m<3?h(b):m>3?h(n,l,b):h(n,l))||b);return m>3&&b&&Object.defineProperty(n,l,b),b},v=this&&this.__param||function(_,n){return function(l,c){n(l,c,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const u=a(511),p=a(2585);let C=s.OscLinkProvider=class{constructor(_,n,l){this._bufferService=_,this._optionsService=n,this._oscLinkService=l}provideLinks(_,n){var l;const c=this._bufferService.buffer.lines.get(_-1);if(!c)return void n(void 0);const h=[],m=this._optionsService.rawOptions.linkHandler,b=new u.CellData,x=c.getTrimmedLength();let E=-1,S=-1,y=!1;for(let L=0;L<x;L++)if(S!==-1||c.hasContent(L)){if(c.loadCell(L,b),b.hasExtendedAttrs()&&b.extended.urlId){if(S===-1){S=L,E=b.extended.urlId;continue}y=b.extended.urlId!==E}else S!==-1&&(y=!0);if(y||S!==-1&&L===x-1){const A=(l=this._oscLinkService.getLinkData(E))===null||l===void 0?void 0:l.uri;if(A){const k={start:{x:S+1,y:_},end:{x:L+(y||L!==x-1?0:1),y:_}};let D=!1;if(!(m!=null&&m.allowNonHttpProtocols))try{const B=new URL(A);["http:","https:"].includes(B.protocol)||(D=!0)}catch{D=!0}D||h.push({text:A,range:k,activate:(B,N)=>m?m.activate(B,N,k):w(0,N),hover:(B,N)=>{var $;return($=m==null?void 0:m.hover)===null||$===void 0?void 0:$.call(m,B,N,k)},leave:(B,N)=>{var $;return($=m==null?void 0:m.leave)===null||$===void 0?void 0:$.call(m,B,N,k)}})}y=!1,b.hasExtendedAttrs()&&b.extended.urlId?(S=L,E=b.extended.urlId):(S=-1,E=-1)}}n(h)}};function w(_,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const l=window.open();if(l){try{l.opener=null}catch{}l.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=C=d([v(0,p.IBufferService),v(1,p.IOptionsService),v(2,p.IOscLinkService)],C)},6193:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(a,d){this._parentWindow=a,this._renderCallback=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,d,v){this._rowCount=v,a=a!==void 0?a:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const a=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;const d=a(844);class v extends d.Disposable{constructor(p){super(),this._parentWindow=p,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,d.toDisposable)(()=>{this.clearListener()}))}setListener(p){this._listener&&this.clearListener(),this._listener=p,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var p;this._outerListener&&((p=this._resolutionMediaMatchList)===null||p===void 0||p.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}s.ScreenDprMonitor=v},3236:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const d=a(3614),v=a(3656),u=a(6465),p=a(9042),C=a(3730),w=a(1680),_=a(3107),n=a(5744),l=a(2950),c=a(1296),h=a(428),m=a(4269),b=a(5114),x=a(8934),E=a(3230),S=a(9312),y=a(4725),L=a(6731),A=a(8055),k=a(8969),D=a(8460),B=a(844),N=a(6114),$=a(8437),I=a(2584),R=a(7399),T=a(5941),P=a(9074),O=a(2585),z=a(5435),V=a(4567),Q=typeof window<"u"?window.document:null;class q extends k.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(M={}){super(M),this.browser=N,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new B.MutableDisposable),this._onCursorMove=this.register(new D.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new D.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new D.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new D.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new D.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new D.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new D.EventEmitter),this._onBlur=this.register(new D.EventEmitter),this._onA11yCharEmitter=this.register(new D.EventEmitter),this._onA11yTabEmitter=this.register(new D.EventEmitter),this._onWillOpen=this.register(new D.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(u.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(C.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(O.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((U,j)=>this.refresh(U,j))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(U=>this._reportWindowsOptions(U))),this.register(this._inputHandler.onColor(U=>this._handleColorEvent(U))),this.register((0,D.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,D.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(U=>this._afterResize(U.cols,U.rows))),this.register((0,B.toDisposable)(()=>{var U,j;this._customKeyEventHandler=void 0,(j=(U=this.element)===null||U===void 0?void 0:U.parentNode)===null||j===void 0||j.removeChild(this.element)}))}_handleColorEvent(M){if(this._themeService)for(const U of M){let j,W="";switch(U.index){case 256:j="foreground",W="10";break;case 257:j="background",W="11";break;case 258:j="cursor",W="12";break;default:j="ansi",W="4;"+U.index}switch(U.type){case 0:const te=A.color.toColorRGB(j==="ansi"?this._themeService.colors.ansi[U.index]:this._themeService.colors[j]);this.coreService.triggerDataEvent(`${I.C0.ESC}]${W};${(0,T.toRgbString)(te)}${I.C1_ESCAPED.ST}`);break;case 1:if(j==="ansi")this._themeService.modifyColors(G=>G.ansi[U.index]=A.rgba.toColor(...U.color));else{const G=j;this._themeService.modifyColors(le=>le[G]=A.rgba.toColor(...U.color))}break;case 2:this._themeService.restoreColor(U.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(M){M?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(M){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(I.C0.ESC+"[I"),this.updateCursorStyle(M),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var M;return(M=this.textarea)===null||M===void 0?void 0:M.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(I.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const M=this.buffer.ybase+this.buffer.y,U=this.buffer.lines.get(M);if(!U)return;const j=Math.min(this.buffer.x,this.cols-1),W=this._renderService.dimensions.css.cell.height,te=U.getWidth(j),G=this._renderService.dimensions.css.cell.width*te,le=this.buffer.y*this._renderService.dimensions.css.cell.height,De=j*this._renderService.dimensions.css.cell.width;this.textarea.style.left=De+"px",this.textarea.style.top=le+"px",this.textarea.style.width=G+"px",this.textarea.style.height=W+"px",this.textarea.style.lineHeight=W+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",U=>{this.hasSelection()&&(0,d.copyHandler)(U,this._selectionService)}));const M=U=>(0,d.handlePasteEvent)(U,this.textarea,this.coreService,this.optionsService);this.register((0,v.addDisposableDomListener)(this.textarea,"paste",M)),this.register((0,v.addDisposableDomListener)(this.element,"paste",M)),N.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",U=>{U.button===2&&(0,d.rightClickHandler)(U,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",U=>{(0,d.rightClickHandler)(U,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),N.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",U=>{U.button===1&&(0,d.moveTextAreaUnderMouseCursor)(U,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",M=>this._keyUp(M),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",M=>this._keyDown(M),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",M=>this._keyPress(M),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",M=>this._compositionHelper.compositionupdate(M))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,v.addDisposableDomListener)(this.textarea,"input",M=>this._inputEvent(M),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(M){var U;if(!M)throw new Error("Terminal requires a parent element.");M.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=M.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),M.appendChild(this.element);const j=Q.createDocumentFragment();this._viewportElement=Q.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),j.appendChild(this._viewportElement),this._viewportScrollArea=Q.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Q.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Q.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),j.appendChild(this.screenElement),this.textarea=Q.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),N.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(b.CoreBrowserService,this.textarea,(U=this._document.defaultView)!==null&&U!==void 0?U:window),this._instantiationService.setService(y.ICoreBrowserService,this._coreBrowserService),this.register((0,v.addDisposableDomListener)(this.textarea,"focus",W=>this._handleTextAreaFocus(W))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(h.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(y.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(L.ThemeService),this._instantiationService.setService(y.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(m.CharacterJoinerService),this._instantiationService.setService(y.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(y.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(W=>this._onRender.fire(W))),this.onResize(W=>this._renderService.resize(W.cols,W.rows)),this._compositionView=Q.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(l.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(j);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(x.MouseService),this._instantiationService.setService(y.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(W=>this.scrollLines(W.amount,W.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(S.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(y.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(W=>this.scrollLines(W.amount,W.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(W=>this._renderService.handleSelectionChanged(W.start,W.end,W.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(W=>{this.textarea.value=W,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(W=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(_.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",W=>this._selectionService.handleMouseDown(W))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",W=>this._handleScreenReaderModeOptionChange(W))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",W=>{!this._overviewRulerRenderer&&W&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(c.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const M=this,U=this.element;function j(G){const le=M._mouseService.getMouseReportCoords(G,M.screenElement);if(!le)return!1;let De,Te;switch(G.overrideType||G.type){case"mousemove":Te=32,G.buttons===void 0?(De=3,G.button!==void 0&&(De=G.button<3?G.button:3)):De=1&G.buttons?0:4&G.buttons?1:2&G.buttons?2:3;break;case"mouseup":Te=0,De=G.button<3?G.button:3;break;case"mousedown":Te=1,De=G.button<3?G.button:3;break;case"wheel":if(M.viewport.getLinesScrolled(G)===0)return!1;Te=G.deltaY<0?0:1,De=4;break;default:return!1}return!(Te===void 0||De===void 0||De>4)&&M.coreMouseService.triggerMouseEvent({col:le.col,row:le.row,x:le.x,y:le.y,button:De,action:Te,ctrl:G.ctrlKey,alt:G.altKey,shift:G.shiftKey})}const W={mouseup:null,wheel:null,mousedrag:null,mousemove:null},te={mouseup:G=>(j(G),G.buttons||(this._document.removeEventListener("mouseup",W.mouseup),W.mousedrag&&this._document.removeEventListener("mousemove",W.mousedrag)),this.cancel(G)),wheel:G=>(j(G),this.cancel(G,!0)),mousedrag:G=>{G.buttons&&j(G)},mousemove:G=>{G.buttons||j(G)}};this.register(this.coreMouseService.onProtocolChange(G=>{G?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(G)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&G?W.mousemove||(U.addEventListener("mousemove",te.mousemove),W.mousemove=te.mousemove):(U.removeEventListener("mousemove",W.mousemove),W.mousemove=null),16&G?W.wheel||(U.addEventListener("wheel",te.wheel,{passive:!1}),W.wheel=te.wheel):(U.removeEventListener("wheel",W.wheel),W.wheel=null),2&G?W.mouseup||(U.addEventListener("mouseup",te.mouseup),W.mouseup=te.mouseup):(this._document.removeEventListener("mouseup",W.mouseup),U.removeEventListener("mouseup",W.mouseup),W.mouseup=null),4&G?W.mousedrag||(W.mousedrag=te.mousedrag):(this._document.removeEventListener("mousemove",W.mousedrag),W.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(U,"mousedown",G=>{if(G.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(G))return j(G),W.mouseup&&this._document.addEventListener("mouseup",W.mouseup),W.mousedrag&&this._document.addEventListener("mousemove",W.mousedrag),this.cancel(G)})),this.register((0,v.addDisposableDomListener)(U,"wheel",G=>{if(!W.wheel){if(!this.buffer.hasScrollback){const le=this.viewport.getLinesScrolled(G);if(le===0)return;const De=I.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(G.deltaY<0?"A":"B");let Te="";for(let Et=0;Et<Math.abs(le);Et++)Te+=De;return this.coreService.triggerDataEvent(Te,!0),this.cancel(G,!0)}return this.viewport.handleWheel(G)?this.cancel(G):void 0}},{passive:!1})),this.register((0,v.addDisposableDomListener)(U,"touchstart",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(G),this.cancel(G)},{passive:!0})),this.register((0,v.addDisposableDomListener)(U,"touchmove",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(G)?void 0:this.cancel(G)},{passive:!1}))}refresh(M,U){var j;(j=this._renderService)===null||j===void 0||j.refreshRows(M,U)}updateCursorStyle(M){var U;!((U=this._selectionService)===null||U===void 0)&&U.shouldColumnSelect(M)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(M,U,j=0){var W;j===1?(super.scrollLines(M,U,j),this.refresh(0,this.rows-1)):(W=this.viewport)===null||W===void 0||W.scrollLines(M)}paste(M){(0,d.paste)(M,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(M){this._customKeyEventHandler=M}registerLinkProvider(M){return this.linkifier2.registerLinkProvider(M)}registerCharacterJoiner(M){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const U=this._characterJoinerService.register(M);return this.refresh(0,this.rows-1),U}deregisterCharacterJoiner(M){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(M)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(M){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+M)}registerDecoration(M){return this._decorationService.registerDecoration(M)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(M,U,j){this._selectionService.setSelection(M,U,j)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var M;(M=this._selectionService)===null||M===void 0||M.clearSelection()}selectAll(){var M;(M=this._selectionService)===null||M===void 0||M.selectAll()}selectLines(M,U){var j;(j=this._selectionService)===null||j===void 0||j.selectLines(M,U)}_keyDown(M){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1)return!1;const U=this.browser.isMac&&this.options.macOptionIsMeta&&M.altKey;if(!U&&!this._compositionHelper.keydown(M))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;U||M.key!=="Dead"&&M.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const j=(0,R.evaluateKeyboardEvent)(M,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(M),j.type===3||j.type===2){const W=this.rows-1;return this.scrollLines(j.type===2?-W:W),this.cancel(M,!0)}return j.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,M)||(j.cancel&&this.cancel(M,!0),!j.key||!!(M.key&&!M.ctrlKey&&!M.altKey&&!M.metaKey&&M.key.length===1&&M.key.charCodeAt(0)>=65&&M.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(j.key!==I.C0.ETX&&j.key!==I.C0.CR||(this.textarea.value=""),this._onKey.fire({key:j.key,domEvent:M}),this._showCursor(),this.coreService.triggerDataEvent(j.key,!0),!this.optionsService.rawOptions.screenReaderMode||M.altKey||M.ctrlKey?this.cancel(M,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(M,U){const j=M.isMac&&!this.options.macOptionIsMeta&&U.altKey&&!U.ctrlKey&&!U.metaKey||M.isWindows&&U.altKey&&U.ctrlKey&&!U.metaKey||M.isWindows&&U.getModifierState("AltGraph");return U.type==="keypress"?j:j&&(!U.keyCode||U.keyCode>47)}_keyUp(M){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1||(function(U){return U.keyCode===16||U.keyCode===17||U.keyCode===18}(M)||this.focus(),this.updateCursorStyle(M),this._keyPressHandled=!1)}_keyPress(M){let U;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1)return!1;if(this.cancel(M),M.charCode)U=M.charCode;else if(M.which===null||M.which===void 0)U=M.keyCode;else{if(M.which===0||M.charCode===0)return!1;U=M.which}return!(!U||(M.altKey||M.ctrlKey||M.metaKey)&&!this._isThirdLevelShift(this.browser,M)||(U=String.fromCharCode(U),this._onKey.fire({key:U,domEvent:M}),this._showCursor(),this.coreService.triggerDataEvent(U,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(M){if(M.data&&M.inputType==="insertText"&&(!M.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const U=M.data;return this.coreService.triggerDataEvent(U,!0),this.cancel(M),!0}return!1}resize(M,U){M!==this.cols||U!==this.rows?super.resize(M,U):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(M,U){var j,W;(j=this._charSizeService)===null||j===void 0||j.measure(),(W=this.viewport)===null||W===void 0||W.syncScrollArea(!0)}clear(){var M;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let U=1;U<this.rows;U++)this.buffer.lines.push(this.buffer.getBlankLine($.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(M=this.viewport)===null||M===void 0||M.reset(),this.refresh(0,this.rows-1)}}reset(){var M,U;this.options.rows=this.rows,this.options.cols=this.cols;const j=this._customKeyEventHandler;this._setup(),super.reset(),(M=this._selectionService)===null||M===void 0||M.reset(),this._decorationService.reset(),(U=this.viewport)===null||U===void 0||U.reset(),this._customKeyEventHandler=j,this.refresh(0,this.rows-1)}clearTextureAtlas(){var M;(M=this._renderService)===null||M===void 0||M.clearTextureAtlas()}_reportFocus(){var M;!((M=this.element)===null||M===void 0)&&M.classList.contains("focus")?this.coreService.triggerDataEvent(I.C0.ESC+"[I"):this.coreService.triggerDataEvent(I.C0.ESC+"[O")}_reportWindowsOptions(M){if(this._renderService)switch(M){case z.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const U=this._renderService.dimensions.css.canvas.width.toFixed(0),j=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${I.C0.ESC}[4;${j};${U}t`);break;case z.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const W=this._renderService.dimensions.css.cell.width.toFixed(0),te=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${I.C0.ESC}[6;${te};${W}t`)}}cancel(M,U){if(this.options.cancelEvents||U)return M.preventDefault(),M.stopPropagation(),!1}}s.Terminal=q},9924:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(a,d=1e3){this._renderCallback=a,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,d,v){this._rowCount=v,a=a!==void 0?a:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;const u=Date.now();if(u-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=u,this._innerRefresh();else if(!this._additionalRefreshRequested){const p=u-this._lastRefreshMs,C=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},C)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const a=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,d)}}},1680:function(g,s,a){var d=this&&this.__decorate||function(l,c,h,m){var b,x=arguments.length,E=x<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,h):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(l,c,h,m);else for(var S=l.length-1;S>=0;S--)(b=l[S])&&(E=(x<3?b(E):x>3?b(c,h,E):b(c,h))||E);return x>3&&E&&Object.defineProperty(c,h,E),E},v=this&&this.__param||function(l,c){return function(h,m){c(h,m,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const u=a(3656),p=a(4725),C=a(8460),w=a(844),_=a(2585);let n=s.Viewport=class extends w.Disposable{constructor(l,c,h,m,b,x,E,S){super(),this._viewportElement=l,this._scrollArea=c,this._bufferService=h,this._optionsService=m,this._charSizeService=b,this._renderService=x,this._coreBrowserService=E,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new C.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(y=>this._activeBuffer=y.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(y=>this._renderDimensions=y)),this._handleThemeChange(S.colors),this.register(S.onChangeColors(y=>this._handleThemeChange(y))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(l){this._viewportElement.style.backgroundColor=l.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(l){if(l)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const c=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==c&&(this._lastRecordedBufferHeight=c,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._refreshAnimationFrame=null}syncScrollArea(l=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(l);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(l)}_handleScroll(l){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const c=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const l=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(l*(this._smoothScrollState.target-this._smoothScrollState.origin)),l<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(l,c){const h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(c<0&&this._viewportElement.scrollTop!==0||c>0&&h<this._lastRecordedBufferHeight)||(l.cancelable&&l.preventDefault(),!1)}handleWheel(l){const c=this._getPixelsScrolled(l);return c!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+c:this._smoothScrollState.target+=c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=c,this._bubbleScroll(l,c))}scrollLines(l){if(l!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const c=l*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!1})}_getPixelsScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let c=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_LINE?c*=this._currentRowHeight:l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._currentRowHeight*this._bufferService.rows),c}getBufferElements(l,c){var h;let m,b="";const x=[],E=c??this._bufferService.buffer.lines.length,S=this._bufferService.buffer.lines;for(let y=l;y<E;y++){const L=S.get(y);if(!L)continue;const A=(h=S.get(y+1))===null||h===void 0?void 0:h.isWrapped;if(b+=L.translateToString(!A),!A||y===S.length-1){const k=document.createElement("div");k.textContent=b,x.push(k),b.length>0&&(m=k),b=""}}return{bufferElements:x,cursorElement:m}}getLinesScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let c=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(c/=this._currentRowHeight+0,this._wheelPartialScroll+=c,c=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._bufferService.rows),c}_applyScrollModifier(l,c){const h=this._optionsService.rawOptions.fastScrollModifier;return h==="alt"&&c.altKey||h==="ctrl"&&c.ctrlKey||h==="shift"&&c.shiftKey?l*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:l*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(l){this._lastTouchY=l.touches[0].pageY}handleTouchMove(l){const c=this._lastTouchY-l.touches[0].pageY;return this._lastTouchY=l.touches[0].pageY,c!==0&&(this._viewportElement.scrollTop+=c,this._bubbleScroll(l,c))}};s.Viewport=n=d([v(2,_.IBufferService),v(3,_.IOptionsService),v(4,p.ICharSizeService),v(5,p.IRenderService),v(6,p.ICoreBrowserService),v(7,p.IThemeService)],n)},3107:function(g,s,a){var d=this&&this.__decorate||function(n,l,c,h){var m,b=arguments.length,x=b<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,l,c,h);else for(var E=n.length-1;E>=0;E--)(m=n[E])&&(x=(b<3?m(x):b>3?m(l,c,x):m(l,c))||x);return b>3&&x&&Object.defineProperty(l,c,x),x},v=this&&this.__param||function(n,l){return function(c,h){l(c,h,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const u=a(3656),p=a(4725),C=a(844),w=a(2585);let _=s.BufferDecorationRenderer=class extends C.Disposable{constructor(n,l,c,h){super(),this._screenElement=n,this._bufferService=l,this._decorationService=c,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,u.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,C.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const n of this._decorationService.decorations)this._renderDecoration(n);this._dimensionsChanged=!1}_renderDecoration(n){this._refreshStyle(n),this._dimensionsChanged&&this._refreshXPosition(n)}_createElement(n){var l,c;const h=document.createElement("div");h.classList.add("xterm-decoration"),h.classList.toggle("xterm-decoration-top-layer",((l=n==null?void 0:n.options)===null||l===void 0?void 0:l.layer)==="top"),h.style.width=`${Math.round((n.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,h.style.height=(n.options.height||1)*this._renderService.dimensions.css.cell.height+"px",h.style.top=(n.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",h.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const m=(c=n.options.x)!==null&&c!==void 0?c:0;return m&&m>this._bufferService.cols&&(h.style.display="none"),this._refreshXPosition(n,h),h}_refreshStyle(n){const l=n.marker.line-this._bufferService.buffers.active.ydisp;if(l<0||l>=this._bufferService.rows)n.element&&(n.element.style.display="none",n.onRenderEmitter.fire(n.element));else{let c=this._decorationElements.get(n);c||(c=this._createElement(n),n.element=c,this._decorationElements.set(n,c),this._container.appendChild(c),n.onDispose(()=>{this._decorationElements.delete(n),c.remove()})),c.style.top=l*this._renderService.dimensions.css.cell.height+"px",c.style.display=this._altBufferIsActive?"none":"block",n.onRenderEmitter.fire(c)}}_refreshXPosition(n,l=n.element){var c;if(!l)return;const h=(c=n.options.x)!==null&&c!==void 0?c:0;(n.options.anchor||"left")==="right"?l.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":l.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(n){var l;(l=this._decorationElements.get(n))===null||l===void 0||l.remove(),this._decorationElements.delete(n),n.dispose()}};s.BufferDecorationRenderer=_=d([v(1,w.IBufferService),v(2,w.IDecorationService),v(3,p.IRenderService)],_)},5871:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(const d of this._zones)if(d.color===a.options.overviewRulerOptions.color&&d.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,a.marker.line))return;if(this._lineAdjacentToZone(d,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(d,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,d){return d>=a.startBufferLine&&d<=a.endBufferLine}_lineAdjacentToZone(a,d,v){return d>=a.startBufferLine-this._linePadding[v||"full"]&&d<=a.endBufferLine+this._linePadding[v||"full"]}_addLineToZone(a,d){a.startBufferLine=Math.min(a.startBufferLine,d),a.endBufferLine=Math.max(a.endBufferLine,d)}}},5744:function(g,s,a){var d=this&&this.__decorate||function(m,b,x,E){var S,y=arguments.length,L=y<3?b:E===null?E=Object.getOwnPropertyDescriptor(b,x):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(m,b,x,E);else for(var A=m.length-1;A>=0;A--)(S=m[A])&&(L=(y<3?S(L):y>3?S(b,x,L):S(b,x))||L);return y>3&&L&&Object.defineProperty(b,x,L),L},v=this&&this.__param||function(m,b){return function(x,E){b(x,E,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const u=a(5871),p=a(3656),C=a(4725),w=a(844),_=a(2585),n={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0};let h=s.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(m,b,x,E,S,y,L){var A;super(),this._viewportElement=m,this._screenElement=b,this._bufferService=x,this._decorationService=E,this._renderService=S,this._optionsService=y,this._coreBrowseService=L,this._colorZoneStore=new u.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(A=this._viewportElement.parentElement)===null||A===void 0||A.insertBefore(this._canvas,this._viewportElement);const k=this._canvas.getContext("2d");if(!k)throw new Error("Ctx cannot be null");this._ctx=k,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{var D;(D=this._canvas)===null||D===void 0||D.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,p.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const m=Math.floor(this._canvas.width/3),b=Math.ceil(this._canvas.width/3);l.full=this._canvas.width,l.left=m,l.center=b,l.right=m,this._refreshDrawHeightConstants(),c.full=0,c.left=0,c.center=l.left,c.right=l.left+l.center}_refreshDrawHeightConstants(){n.full=Math.round(2*this._coreBrowseService.dpr);const m=this._canvas.height/this._bufferService.buffer.lines.length,b=Math.round(Math.max(Math.min(m,12),6)*this._coreBrowseService.dpr);n.left=b,n.center=b,n.right=b}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*n.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const b of this._decorationService.decorations)this._colorZoneStore.addDecoration(b);this._ctx.lineWidth=1;const m=this._colorZoneStore.zones;for(const b of m)b.position!=="full"&&this._renderColorZone(b);for(const b of m)b.position==="full"&&this._renderColorZone(b);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(m){this._ctx.fillStyle=m.color,this._ctx.fillRect(c[m.position||"full"],Math.round((this._canvas.height-1)*(m.startBufferLine/this._bufferService.buffers.active.lines.length)-n[m.position||"full"]/2),l[m.position||"full"],Math.round((this._canvas.height-1)*((m.endBufferLine-m.startBufferLine)/this._bufferService.buffers.active.lines.length)+n[m.position||"full"]))}_queueRefresh(m,b){this._shouldUpdateDimensions=m||this._shouldUpdateDimensions,this._shouldUpdateAnchor=b||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=h=d([v(2,_.IBufferService),v(3,_.IDecorationService),v(4,C.IRenderService),v(5,_.IOptionsService),v(6,C.ICoreBrowserService)],h)},2950:function(g,s,a){var d=this&&this.__decorate||function(_,n,l,c){var h,m=arguments.length,b=m<3?n:c===null?c=Object.getOwnPropertyDescriptor(n,l):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(_,n,l,c);else for(var x=_.length-1;x>=0;x--)(h=_[x])&&(b=(m<3?h(b):m>3?h(n,l,b):h(n,l))||b);return m>3&&b&&Object.defineProperty(n,l,b),b},v=this&&this.__param||function(_,n){return function(l,c){n(l,c,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const u=a(4725),p=a(2585),C=a(2584);let w=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(_,n,l,c,h,m){this._textarea=_,this._compositionView=n,this._bufferService=l,this._optionsService=c,this._coreService=h,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(_){this._compositionView.textContent=_.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(_){if(this._isComposing||this._isSendingComposition){if(_.keyCode===229||_.keyCode===16||_.keyCode===17||_.keyCode===18)return!1;this._finalizeComposition(!1)}return _.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(_){if(this._compositionView.classList.remove("active"),this._isComposing=!1,_){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let l;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,l=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),l.length>0&&this._coreService.triggerDataEvent(l,!0)}},0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const _=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const n=this._textarea.value,l=n.replace(_,"");this._dataAlreadySent=l,n.length>_.length?this._coreService.triggerDataEvent(l,!0):n.length<_.length?this._coreService.triggerDataEvent(`${C.C0.DEL}`,!0):n.length===_.length&&n!==_&&this._coreService.triggerDataEvent(n,!0)}},0)}updateCompositionElements(_){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),l=this._renderService.dimensions.css.cell.height,c=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=c+"px",this._compositionView.style.height=l+"px",this._compositionView.style.lineHeight=l+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const m=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=c+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}_||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=w=d([v(2,p.IBufferService),v(3,p.IOptionsService),v(4,p.ICoreService),v(5,u.IRenderService)],w)},9806:(g,s)=>{function a(d,v,u){const p=u.getBoundingClientRect(),C=d.getComputedStyle(u),w=parseInt(C.getPropertyValue("padding-left")),_=parseInt(C.getPropertyValue("padding-top"));return[v.clientX-p.left-w,v.clientY-p.top-_]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=a,s.getCoords=function(d,v,u,p,C,w,_,n,l){if(!w)return;const c=a(d,v,u);return c?(c[0]=Math.ceil((c[0]+(l?_/2:0))/_),c[1]=Math.ceil(c[1]/n),c[0]=Math.min(Math.max(c[0],1),p+(l?1:0)),c[1]=Math.min(Math.max(c[1],1),C),c):void 0}},9504:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const d=a(2584);function v(n,l,c,h){const m=n-u(n,c),b=l-u(l,c),x=Math.abs(m-b)-function(E,S,y){let L=0;const A=E-u(E,y),k=S-u(S,y);for(let D=0;D<Math.abs(A-k);D++){const B=p(E,S)==="A"?-1:1,N=y.buffer.lines.get(A+B*D);N!=null&&N.isWrapped&&L++}return L}(n,l,c);return _(x,w(p(n,l),h))}function u(n,l){let c=0,h=l.buffer.lines.get(n),m=h==null?void 0:h.isWrapped;for(;m&&n>=0&&n<l.rows;)c++,h=l.buffer.lines.get(--n),m=h==null?void 0:h.isWrapped;return c}function p(n,l){return n>l?"A":"B"}function C(n,l,c,h,m,b){let x=n,E=l,S="";for(;x!==c||E!==h;)x+=m?1:-1,m&&x>b.cols-1?(S+=b.buffer.translateBufferLineToString(E,!1,n,x),x=0,n=0,E++):!m&&x<0&&(S+=b.buffer.translateBufferLineToString(E,!1,0,n+1),x=b.cols-1,n=x,E--);return S+b.buffer.translateBufferLineToString(E,!1,n,x)}function w(n,l){const c=l?"O":"[";return d.C0.ESC+c+n}function _(n,l){n=Math.floor(n);let c="";for(let h=0;h<n;h++)c+=l;return c}s.moveToCellSequence=function(n,l,c,h){const m=c.buffer.x,b=c.buffer.y;if(!c.buffer.hasScrollback)return function(S,y,L,A,k,D){return v(y,A,k,D).length===0?"":_(C(S,y,S,y-u(y,k),!1,k).length,w("D",D))}(m,b,0,l,c,h)+v(b,l,c,h)+function(S,y,L,A,k,D){let B;B=v(y,A,k,D).length>0?A-u(A,k):y;const N=A,$=function(I,R,T,P,O,z){let V;return V=v(T,P,O,z).length>0?P-u(P,O):R,I<T&&V<=P||I>=T&&V<P?"C":"D"}(S,y,L,A,k,D);return _(C(S,B,L,N,$==="C",k).length,w($,D))}(m,b,n,l,c,h);let x;if(b===l)return x=m>n?"D":"C",_(Math.abs(m-n),w(x,h));x=b>l?"D":"C";const E=Math.abs(b-l);return _(function(S,y){return y.cols-S}(b>l?n:m,c)+(E-1)*c.cols+1+((b>l?m:n)-1),w(x,h))}},1296:function(g,s,a){var d=this&&this.__decorate||function(k,D,B,N){var $,I=arguments.length,R=I<3?D:N===null?N=Object.getOwnPropertyDescriptor(D,B):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(k,D,B,N);else for(var T=k.length-1;T>=0;T--)($=k[T])&&(R=(I<3?$(R):I>3?$(D,B,R):$(D,B))||R);return I>3&&R&&Object.defineProperty(D,B,R),R},v=this&&this.__param||function(k,D){return function(B,N){D(B,N,k)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const u=a(3787),p=a(2550),C=a(2223),w=a(6171),_=a(4725),n=a(8055),l=a(8460),c=a(844),h=a(2585),m="xterm-dom-renderer-owner-",b="xterm-rows",x="xterm-fg-",E="xterm-bg-",S="xterm-focus",y="xterm-selection";let L=1,A=s.DomRenderer=class extends c.Disposable{constructor(k,D,B,N,$,I,R,T,P,O){super(),this._element=k,this._screenElement=D,this._viewportElement=B,this._linkifier2=N,this._charSizeService=I,this._optionsService=R,this._bufferService=T,this._coreBrowserService=P,this._themeService=O,this._terminalClass=L++,this._rowElements=[],this.onRequestRedraw=this.register(new l.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(b),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(y),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(z=>this._injectCss(z))),this._injectCss(this._themeService.colors),this._rowFactory=$.createInstance(u.DomRendererRowFactory,document),this._element.classList.add(m+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(z=>this._handleLinkHover(z))),this.register(this._linkifier2.onHideLinkUnderline(z=>this._handleLinkLeave(z))),this.register((0,c.toDisposable)(()=>{this._element.classList.remove(m+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const k=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*k,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*k),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/k),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/k),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const B of this._rowElements)B.style.width=`${this.dimensions.css.canvas.width}px`,B.style.height=`${this.dimensions.css.cell.height}px`,B.style.lineHeight=`${this.dimensions.css.cell.height}px`,B.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const D=`${this._terminalSelector} .${b} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=D,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(k){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let D=`${this._terminalSelector} .${b} { color: ${k.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;D+=`${this._terminalSelector} .${b} .xterm-dim { color: ${n.color.multiplyOpacity(k.foreground,.5).css};}`,D+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,D+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",D+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${k.cursor.css};  color: ${k.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${k.cursor.css}; }}`,D+=`${this._terminalSelector} .${b}.${S} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${b}.${S} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block { background-color: ${k.cursor.css}; color: ${k.cursorAccent.css};}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${k.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${k.cursor.css} inset;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${k.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,D+=`${this._terminalSelector} .${y} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${y} div { position: absolute; background-color: ${k.selectionBackgroundOpaque.css};}${this._terminalSelector} .${y} div { position: absolute; background-color: ${k.selectionInactiveBackgroundOpaque.css};}`;for(const[B,N]of k.ansi.entries())D+=`${this._terminalSelector} .${x}${B} { color: ${N.css}; }${this._terminalSelector} .${x}${B}.xterm-dim { color: ${n.color.multiplyOpacity(N,.5).css}; }${this._terminalSelector} .${E}${B} { background-color: ${N.css}; }`;D+=`${this._terminalSelector} .${x}${C.INVERTED_DEFAULT_COLOR} { color: ${n.color.opaque(k.background).css}; }${this._terminalSelector} .${x}${C.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${n.color.multiplyOpacity(n.color.opaque(k.background),.5).css}; }${this._terminalSelector} .${E}${C.INVERTED_DEFAULT_COLOR} { background-color: ${k.foreground.css}; }`,this._themeStyleElement.textContent=D}_setDefaultSpacing(){const k=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${k}px`,this._rowFactory.defaultSpacing=k}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(k,D){for(let B=this._rowElements.length;B<=D;B++){const N=document.createElement("div");this._rowContainer.appendChild(N),this._rowElements.push(N)}for(;this._rowElements.length>D;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(k,D){this._refreshRowElements(k,D),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(S)}handleFocus(){this._rowContainer.classList.add(S),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(k,D,B){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(k,D,B),this.renderRows(0,this._bufferService.rows-1),!k||!D)return;const N=k[1]-this._bufferService.buffer.ydisp,$=D[1]-this._bufferService.buffer.ydisp,I=Math.max(N,0),R=Math.min($,this._bufferService.rows-1);if(I>=this._bufferService.rows||R<0)return;const T=document.createDocumentFragment();if(B){const P=k[0]>D[0];T.appendChild(this._createSelectionElement(I,P?D[0]:k[0],P?k[0]:D[0],R-I+1))}else{const P=N===I?k[0]:0,O=I===$?D[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(I,P,O));const z=R-I-1;if(T.appendChild(this._createSelectionElement(I+1,0,this._bufferService.cols,z)),I!==R){const V=$===R?D[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(R,0,V))}}this._selectionContainer.appendChild(T)}_createSelectionElement(k,D,B,N=1){const $=document.createElement("div");return $.style.height=N*this.dimensions.css.cell.height+"px",$.style.top=k*this.dimensions.css.cell.height+"px",$.style.left=D*this.dimensions.css.cell.width+"px",$.style.width=this.dimensions.css.cell.width*(B-D)+"px",$}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const k of this._rowElements)k.replaceChildren()}renderRows(k,D){const B=this._bufferService.buffer,N=B.ybase+B.y,$=Math.min(B.x,this._bufferService.cols-1),I=this._optionsService.rawOptions.cursorBlink,R=this._optionsService.rawOptions.cursorStyle,T=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=k;P<=D;P++){const O=P+B.ydisp,z=this._rowElements[P],V=B.lines.get(O);if(!z||!V)break;z.replaceChildren(...this._rowFactory.createRow(V,O,O===N,R,T,$,I,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${m}${this._terminalClass}`}_handleLinkHover(k){this._setCellUnderline(k.x1,k.x2,k.y1,k.y2,k.cols,!0)}_handleLinkLeave(k){this._setCellUnderline(k.x1,k.x2,k.y1,k.y2,k.cols,!1)}_setCellUnderline(k,D,B,N,$,I){B<0&&(k=0),N<0&&(D=0);const R=this._bufferService.rows-1;B=Math.max(Math.min(B,R),0),N=Math.max(Math.min(N,R),0),$=Math.min($,this._bufferService.cols);const T=this._bufferService.buffer,P=T.ybase+T.y,O=Math.min(T.x,$-1),z=this._optionsService.rawOptions.cursorBlink,V=this._optionsService.rawOptions.cursorStyle,Q=this._optionsService.rawOptions.cursorInactiveStyle;for(let q=B;q<=N;++q){const Z=q+T.ydisp,M=this._rowElements[q],U=T.lines.get(Z);if(!M||!U)break;M.replaceChildren(...this._rowFactory.createRow(U,Z,Z===P,V,Q,O,z,this.dimensions.css.cell.width,this._widthCache,I?q===B?k:0:-1,I?(q===N?D:$)-1:-1))}}};s.DomRenderer=A=d([v(4,h.IInstantiationService),v(5,_.ICharSizeService),v(6,h.IOptionsService),v(7,h.IBufferService),v(8,_.ICoreBrowserService),v(9,_.IThemeService)],A)},3787:function(g,s,a){var d=this&&this.__decorate||function(x,E,S,y){var L,A=arguments.length,k=A<3?E:y===null?y=Object.getOwnPropertyDescriptor(E,S):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(x,E,S,y);else for(var D=x.length-1;D>=0;D--)(L=x[D])&&(k=(A<3?L(k):A>3?L(E,S,k):L(E,S))||k);return A>3&&k&&Object.defineProperty(E,S,k),k},v=this&&this.__param||function(x,E){return function(S,y){E(S,y,x)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const u=a(2223),p=a(643),C=a(511),w=a(2585),_=a(8055),n=a(4725),l=a(4269),c=a(6171),h=a(3734);let m=s.DomRendererRowFactory=class{constructor(x,E,S,y,L,A,k){this._document=x,this._characterJoinerService=E,this._optionsService=S,this._coreBrowserService=y,this._coreService=L,this._decorationService=A,this._themeService=k,this._workCell=new C.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(x,E,S){this._selectionStart=x,this._selectionEnd=E,this._columnSelectMode=S}createRow(x,E,S,y,L,A,k,D,B,N,$){const I=[],R=this._characterJoinerService.getJoinedCharacters(E),T=this._themeService.colors;let P,O=x.getNoBgTrimmedLength();S&&O<A+1&&(O=A+1);let z=0,V="",Q=0,q=0,Z=0,M=!1,U=0,j=!1,W=0;const te=[],G=N!==-1&&$!==-1;for(let le=0;le<O;le++){x.loadCell(le,this._workCell);let De=this._workCell.getWidth();if(De===0)continue;let Te=!1,Et=le,ie=this._workCell;if(R.length>0&&le===R[0][0]){Te=!0;const ve=R.shift();ie=new l.JoinedCellData(this._workCell,x.translateToString(!0,ve[0],ve[1]),ve[1]-ve[0]),Et=ve[1]-1,De=ie.getWidth()}const de=this._isCellInSelection(le,E),ce=S&&le===A,he=G&&le>=N&&le<=$;let se=!1;this._decorationService.forEachDecorationAtCell(le,E,void 0,ve=>{se=!0});let fe=ie.getChars()||p.WHITESPACE_CELL_CHAR;if(fe===" "&&(ie.isUnderline()||ie.isOverline())&&(fe=""),W=De*D-B.get(fe,ie.isBold(),ie.isItalic()),P){if(z&&(de&&j||!de&&!j&&ie.bg===Q)&&(de&&j&&T.selectionForeground||ie.fg===q)&&ie.extended.ext===Z&&he===M&&W===U&&!ce&&!Te&&!se){V+=fe,z++;continue}z&&(P.textContent=V),P=this._document.createElement("span"),z=0,V=""}else P=this._document.createElement("span");if(Q=ie.bg,q=ie.fg,Z=ie.extended.ext,M=he,U=W,j=de,Te&&A>=le&&A<=Et&&(A=le),!this._coreService.isCursorHidden&&ce){if(te.push("xterm-cursor"),this._coreBrowserService.isFocused)k&&te.push("xterm-cursor-blink"),te.push(y==="bar"?"xterm-cursor-bar":y==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(L)switch(L){case"outline":te.push("xterm-cursor-outline");break;case"block":te.push("xterm-cursor-block");break;case"bar":te.push("xterm-cursor-bar");break;case"underline":te.push("xterm-cursor-underline")}}if(ie.isBold()&&te.push("xterm-bold"),ie.isItalic()&&te.push("xterm-italic"),ie.isDim()&&te.push("xterm-dim"),V=ie.isInvisible()?p.WHITESPACE_CELL_CHAR:ie.getChars()||p.WHITESPACE_CELL_CHAR,ie.isUnderline()&&(te.push(`xterm-underline-${ie.extended.underlineStyle}`),V===" "&&(V=""),!ie.isUnderlineColorDefault()))if(ie.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(ie.getUnderlineColor()).join(",")})`;else{let ve=ie.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ie.isBold()&&ve<8&&(ve+=8),P.style.textDecorationColor=T.ansi[ve].css}ie.isOverline()&&(te.push("xterm-overline"),V===" "&&(V="")),ie.isStrikethrough()&&te.push("xterm-strikethrough"),he&&(P.style.textDecoration="underline");let Ce=ie.getFgColor(),Oe=ie.getFgColorMode(),je=ie.getBgColor(),Lt=ie.getBgColorMode();const Qe=!!ie.isInverse();if(Qe){const ve=Ce;Ce=je,je=ve;const pn=Oe;Oe=Lt,Lt=pn}let we,rt,vt,Ft=!1;switch(this._decorationService.forEachDecorationAtCell(le,E,void 0,ve=>{ve.options.layer!=="top"&&Ft||(ve.backgroundColorRGB&&(Lt=50331648,je=ve.backgroundColorRGB.rgba>>8&16777215,we=ve.backgroundColorRGB),ve.foregroundColorRGB&&(Oe=50331648,Ce=ve.foregroundColorRGB.rgba>>8&16777215,rt=ve.foregroundColorRGB),Ft=ve.options.layer==="top")}),!Ft&&de&&(we=this._coreBrowserService.isFocused?T.selectionBackgroundOpaque:T.selectionInactiveBackgroundOpaque,je=we.rgba>>8&16777215,Lt=50331648,Ft=!0,T.selectionForeground&&(Oe=50331648,Ce=T.selectionForeground.rgba>>8&16777215,rt=T.selectionForeground)),Ft&&te.push("xterm-decoration-top"),Lt){case 16777216:case 33554432:vt=T.ansi[je],te.push(`xterm-bg-${je}`);break;case 50331648:vt=_.rgba.toColor(je>>16,je>>8&255,255&je),this._addStyle(P,`background-color:#${b((je>>>0).toString(16),"0",6)}`);break;default:Qe?(vt=T.foreground,te.push(`xterm-bg-${u.INVERTED_DEFAULT_COLOR}`)):vt=T.background}switch(we||ie.isDim()&&(we=_.color.multiplyOpacity(vt,.5)),Oe){case 16777216:case 33554432:ie.isBold()&&Ce<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ce+=8),this._applyMinimumContrast(P,vt,T.ansi[Ce],ie,we,void 0)||te.push(`xterm-fg-${Ce}`);break;case 50331648:const ve=_.rgba.toColor(Ce>>16&255,Ce>>8&255,255&Ce);this._applyMinimumContrast(P,vt,ve,ie,we,rt)||this._addStyle(P,`color:#${b(Ce.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,vt,T.foreground,ie,we,void 0)||Qe&&te.push(`xterm-fg-${u.INVERTED_DEFAULT_COLOR}`)}te.length&&(P.className=te.join(" "),te.length=0),ce||Te||se?P.textContent=V:z++,W!==this.defaultSpacing&&(P.style.letterSpacing=`${W}px`),I.push(P),le=Et}return P&&z&&(P.textContent=V),I}_applyMinimumContrast(x,E,S,y,L,A){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,c.excludeFromContrastRatioDemands)(y.getCode()))return!1;const k=this._getContrastCache(y);let D;if(L||A||(D=k.getColor(E.rgba,S.rgba)),D===void 0){const B=this._optionsService.rawOptions.minimumContrastRatio/(y.isDim()?2:1);D=_.color.ensureContrastRatio(L||E,A||S,B),k.setColor((L||E).rgba,(A||S).rgba,D??null)}return!!D&&(this._addStyle(x,`color:${D.css}`),!0)}_getContrastCache(x){return x.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(x,E){x.setAttribute("style",`${x.getAttribute("style")||""}${E};`)}_isCellInSelection(x,E){const S=this._selectionStart,y=this._selectionEnd;return!(!S||!y)&&(this._columnSelectMode?S[0]<=y[0]?x>=S[0]&&E>=S[1]&&x<y[0]&&E<=y[1]:x<S[0]&&E>=S[1]&&x>=y[0]&&E<=y[1]:E>S[1]&&E<y[1]||S[1]===y[1]&&E===S[1]&&x>=S[0]&&x<y[0]||S[1]<y[1]&&E===y[1]&&x<y[0]||S[1]<y[1]&&E===S[1]&&x>=S[0])}};function b(x,E,S){for(;x.length<S;)x=E+x;return x}s.DomRendererRowFactory=m=d([v(1,n.ICharacterJoinerService),v(2,w.IOptionsService),v(3,n.ICoreBrowserService),v(4,w.ICoreService),v(5,w.IDecorationService),v(6,n.IThemeService)],m)},2550:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const d=a.createElement("span"),v=a.createElement("span");v.style.fontWeight="bold";const u=a.createElement("span");u.style.fontStyle="italic";const p=a.createElement("span");p.style.fontWeight="bold",p.style.fontStyle="italic",this._measureElements=[d,v,u,p],this._container.appendChild(d),this._container.appendChild(v),this._container.appendChild(u),this._container.appendChild(p),a.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,d,v,u){a===this._font&&d===this._fontSize&&v===this._weight&&u===this._weightBold||(this._font=a,this._fontSize=d,this._weight=v,this._weightBold=u,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${v}`,this._measureElements[1].style.fontWeight=`${u}`,this._measureElements[2].style.fontWeight=`${v}`,this._measureElements[3].style.fontWeight=`${u}`,this.clear())}get(a,d,v){let u=0;if(!d&&!v&&a.length===1&&(u=a.charCodeAt(0))<256)return this._flat[u]!==-9999?this._flat[u]:this._flat[u]=this._measure(a,0);let p=a;d&&(p+="B"),v&&(p+="I");let C=this._holey.get(p);if(C===void 0){let w=0;d&&(w|=1),v&&(w|=2),C=this._measure(a,w),this._holey.set(p,C)}return C}_measure(a,d){const v=this._measureElements[d];return v.textContent=a.repeat(32),v.offsetWidth/32}}},2223:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const d=a(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(g,s)=>{function a(d){return 57508<=d&&d<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},s.excludeFromContrastRatioDemands=function(d){return a(d)||function(v){return 9472<=v&&v<=9631}(d)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const a=this.selectionStart,d=this.selectionEnd;return!(!a||!d)&&(a[1]>d[1]||a[1]===d[1]&&a[0]>d[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(g,s,a){var d=this&&this.__decorate||function(n,l,c,h){var m,b=arguments.length,x=b<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,l,c,h);else for(var E=n.length-1;E>=0;E--)(m=n[E])&&(x=(b<3?m(x):b>3?m(l,c,x):m(l,c))||x);return b>3&&x&&Object.defineProperty(l,c,x),x},v=this&&this.__param||function(n,l){return function(c,h){l(c,h,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const u=a(2585),p=a(8460),C=a(844);let w=s.CharSizeService=class extends C.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(n,l,c){super(),this._optionsService=c,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new _(n,l,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const n=this._measureStrategy.measure();n.width===this.width&&n.height===this.height||(this.width=n.width,this.height=n.height,this._onCharSizeChange.fire())}};s.CharSizeService=w=d([v(2,u.IOptionsService)],w);class _{constructor(l,c,h){this._document=l,this._parentElement=c,this._optionsService=h,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const l={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return l.width!==0&&l.height!==0&&(this._result.width=l.width/32,this._result.height=Math.ceil(l.height)),this._result}}},4269:function(g,s,a){var d=this&&this.__decorate||function(l,c,h,m){var b,x=arguments.length,E=x<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,h):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(l,c,h,m);else for(var S=l.length-1;S>=0;S--)(b=l[S])&&(E=(x<3?b(E):x>3?b(c,h,E):b(c,h))||E);return x>3&&E&&Object.defineProperty(c,h,E),E},v=this&&this.__param||function(l,c){return function(h,m){c(h,m,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const u=a(3734),p=a(643),C=a(511),w=a(2585);class _ extends u.AttributeData{constructor(c,h,m){super(),this.content=0,this.combinedData="",this.fg=c.fg,this.bg=c.bg,this.combinedData=h,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(c){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=_;let n=s.CharacterJoinerService=class _p{constructor(c){this._bufferService=c,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new C.CellData}register(c){const h={id:this._nextCharacterJoinerId++,handler:c};return this._characterJoiners.push(h),h.id}deregister(c){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===c)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(c){if(this._characterJoiners.length===0)return[];const h=this._bufferService.buffer.lines.get(c);if(!h||h.length===0)return[];const m=[],b=h.translateToString(!0);let x=0,E=0,S=0,y=h.getFg(0),L=h.getBg(0);for(let A=0;A<h.getTrimmedLength();A++)if(h.loadCell(A,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==y||this._workCell.bg!==L){if(A-x>1){const k=this._getJoinedRanges(b,S,E,h,x);for(let D=0;D<k.length;D++)m.push(k[D])}x=A,S=E,y=this._workCell.fg,L=this._workCell.bg}E+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-x>1){const A=this._getJoinedRanges(b,S,E,h,x);for(let k=0;k<A.length;k++)m.push(A[k])}return m}_getJoinedRanges(c,h,m,b,x){const E=c.substring(h,m);let S=[];try{S=this._characterJoiners[0].handler(E)}catch(y){console.error(y)}for(let y=1;y<this._characterJoiners.length;y++)try{const L=this._characterJoiners[y].handler(E);for(let A=0;A<L.length;A++)_p._mergeRanges(S,L[A])}catch(L){console.error(L)}return this._stringRangesToCellRanges(S,b,x),S}_stringRangesToCellRanges(c,h,m){let b=0,x=!1,E=0,S=c[b];if(S){for(let y=m;y<this._bufferService.cols;y++){const L=h.getWidth(y),A=h.getString(y).length||p.WHITESPACE_CELL_CHAR.length;if(L!==0){if(!x&&S[0]<=E&&(S[0]=y,x=!0),S[1]<=E){if(S[1]=y,S=c[++b],!S)break;S[0]<=E?(S[0]=y,x=!0):x=!1}E+=A}}S&&(S[1]=this._bufferService.cols)}}static _mergeRanges(c,h){let m=!1;for(let b=0;b<c.length;b++){const x=c[b];if(m){if(h[1]<=x[0])return c[b-1][1]=h[1],c;if(h[1]<=x[1])return c[b-1][1]=Math.max(h[1],x[1]),c.splice(b,1),c;c.splice(b,1),b--}else{if(h[1]<=x[0])return c.splice(b,0,h),c;if(h[1]<=x[1])return x[0]=Math.min(h[0],x[0]),c;h[0]<x[1]&&(x[0]=Math.min(h[0],x[0]),m=!0)}}return m?c[c.length-1][1]=h[1]:c.push(h),c}};s.CharacterJoinerService=n=d([v(0,w.IBufferService)],n)},5114:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0,s.CoreBrowserService=class{constructor(a,d){this._textarea=a,this.window=d,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(g,s,a){var d=this&&this.__decorate||function(w,_,n,l){var c,h=arguments.length,m=h<3?_:l===null?l=Object.getOwnPropertyDescriptor(_,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(w,_,n,l);else for(var b=w.length-1;b>=0;b--)(c=w[b])&&(m=(h<3?c(m):h>3?c(_,n,m):c(_,n))||m);return h>3&&m&&Object.defineProperty(_,n,m),m},v=this&&this.__param||function(w,_){return function(n,l){_(n,l,w)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const u=a(4725),p=a(9806);let C=s.MouseService=class{constructor(w,_){this._renderService=w,this._charSizeService=_}getCoords(w,_,n,l,c){return(0,p.getCoords)(window,w,_,n,l,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,c)}getMouseReportCoords(w,_){const n=(0,p.getCoordsRelativeToElement)(window,w,_);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};s.MouseService=C=d([v(0,u.IRenderService),v(1,u.ICharSizeService)],C)},3230:function(g,s,a){var d=this&&this.__decorate||function(m,b,x,E){var S,y=arguments.length,L=y<3?b:E===null?E=Object.getOwnPropertyDescriptor(b,x):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(m,b,x,E);else for(var A=m.length-1;A>=0;A--)(S=m[A])&&(L=(y<3?S(L):y>3?S(b,x,L):S(b,x))||L);return y>3&&L&&Object.defineProperty(b,x,L),L},v=this&&this.__param||function(m,b){return function(x,E){b(x,E,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const u=a(3656),p=a(6193),C=a(5596),w=a(4725),_=a(8460),n=a(844),l=a(7226),c=a(2585);let h=s.RenderService=class extends n.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(m,b,x,E,S,y,L,A){if(super(),this._rowCount=m,this._charSizeService=E,this._renderer=this.register(new n.MutableDisposable),this._pausedResizeTask=new l.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new _.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new _.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new _.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new _.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new p.RenderDebouncer(L.window,(k,D)=>this._renderRows(k,D)),this.register(this._renderDebouncer),this._screenDprMonitor=new C.ScreenDprMonitor(L.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(y.onResize(()=>this._fullRefresh())),this.register(y.buffers.onBufferActivate(()=>{var k;return(k=this._renderer.value)===null||k===void 0?void 0:k.clear()})),this.register(x.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(S.onDecorationRegistered(()=>this._fullRefresh())),this.register(S.onDecorationRemoved(()=>this._fullRefresh())),this.register(x.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(y.cols,y.rows),this._fullRefresh()})),this.register(x.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(y.buffer.y,y.buffer.y,!0))),this.register((0,u.addDisposableDomListener)(L.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(A.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in L.window){const k=new L.window.IntersectionObserver(D=>this._handleIntersectionChange(D[D.length-1]),{threshold:0});k.observe(b),this.register({dispose:()=>k.disconnect()})}}_handleIntersectionChange(m){this._isPaused=m.isIntersecting===void 0?m.intersectionRatio===0:!m.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(m,b,x=!1){this._isPaused?this._needsFullRefresh=!0:(x||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(m,b,this._rowCount))}_renderRows(m,b){this._renderer.value&&(m=Math.min(m,this._rowCount-1),b=Math.min(b,this._rowCount-1),this._renderer.value.renderRows(m,b),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:m,end:b}),this._onRender.fire({start:m,end:b}),this._isNextRenderRedrawOnly=!0)}resize(m,b){this._rowCount=b,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(m){this._renderer.value=m,this._renderer.value.onRequestRedraw(b=>this.refreshRows(b.start,b.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(m){return this._renderDebouncer.addRefreshCallback(m)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var m,b;this._renderer.value&&((b=(m=this._renderer.value).clearTextureAtlas)===null||b===void 0||b.call(m),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(m,b){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(m,b)):this._renderer.value.handleResize(m,b),this._fullRefresh())}handleCharSizeChanged(){var m;(m=this._renderer.value)===null||m===void 0||m.handleCharSizeChanged()}handleBlur(){var m;(m=this._renderer.value)===null||m===void 0||m.handleBlur()}handleFocus(){var m;(m=this._renderer.value)===null||m===void 0||m.handleFocus()}handleSelectionChanged(m,b,x){var E;this._selectionState.start=m,this._selectionState.end=b,this._selectionState.columnSelectMode=x,(E=this._renderer.value)===null||E===void 0||E.handleSelectionChanged(m,b,x)}handleCursorMove(){var m;(m=this._renderer.value)===null||m===void 0||m.handleCursorMove()}clear(){var m;(m=this._renderer.value)===null||m===void 0||m.clear()}};s.RenderService=h=d([v(2,c.IOptionsService),v(3,w.ICharSizeService),v(4,c.IDecorationService),v(5,c.IBufferService),v(6,w.ICoreBrowserService),v(7,w.IThemeService)],h)},9312:function(g,s,a){var d=this&&this.__decorate||function(S,y,L,A){var k,D=arguments.length,B=D<3?y:A===null?A=Object.getOwnPropertyDescriptor(y,L):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(S,y,L,A);else for(var N=S.length-1;N>=0;N--)(k=S[N])&&(B=(D<3?k(B):D>3?k(y,L,B):k(y,L))||B);return D>3&&B&&Object.defineProperty(y,L,B),B},v=this&&this.__param||function(S,y){return function(L,A){y(L,A,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const u=a(9806),p=a(9504),C=a(456),w=a(4725),_=a(8460),n=a(844),l=a(6114),c=a(4841),h=a(511),m=a(2585),b="",x=new RegExp(b,"g");let E=s.SelectionService=class extends n.Disposable{constructor(S,y,L,A,k,D,B,N,$){super(),this._element=S,this._screenElement=y,this._linkifier=L,this._bufferService=A,this._coreService=k,this._mouseService=D,this._optionsService=B,this._renderService=N,this._coreBrowserService=$,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new _.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new _.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new _.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new _.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=I=>this._handleMouseMove(I),this._mouseUpListener=I=>this._handleMouseUp(I),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(I=>this._handleTrim(I)),this.register(this._bufferService.buffers.onBufferActivate(I=>this._handleBufferActivate(I))),this.enable(),this._model=new C.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const S=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;return!(!S||!y||S[0]===y[0]&&S[1]===y[1])}get selectionText(){const S=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;if(!S||!y)return"";const L=this._bufferService.buffer,A=[];if(this._activeSelectionMode===3){if(S[0]===y[0])return"";const k=S[0]<y[0]?S[0]:y[0],D=S[0]<y[0]?y[0]:S[0];for(let B=S[1];B<=y[1];B++){const N=L.translateBufferLineToString(B,!0,k,D);A.push(N)}}else{const k=S[1]===y[1]?y[0]:void 0;A.push(L.translateBufferLineToString(S[1],!0,S[0],k));for(let D=S[1]+1;D<=y[1]-1;D++){const B=L.lines.get(D),N=L.translateBufferLineToString(D,!0);B!=null&&B.isWrapped?A[A.length-1]+=N:A.push(N)}if(S[1]!==y[1]){const D=L.lines.get(y[1]),B=L.translateBufferLineToString(y[1],!0,0,y[0]);D&&D.isWrapped?A[A.length-1]+=B:A.push(B)}}return A.map(k=>k.replace(x," ")).join(l.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(S){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),l.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(S){const y=this._getMouseBufferCoords(S),L=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!!(L&&A&&y)&&this._areCoordsInSelection(y,L,A)}isCellInSelection(S,y){const L=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!L||!A)&&this._areCoordsInSelection([S,y],L,A)}_areCoordsInSelection(S,y,L){return S[1]>y[1]&&S[1]<L[1]||y[1]===L[1]&&S[1]===y[1]&&S[0]>=y[0]&&S[0]<L[0]||y[1]<L[1]&&S[1]===L[1]&&S[0]<L[0]||y[1]<L[1]&&S[1]===y[1]&&S[0]>=y[0]}_selectWordAtCursor(S,y){var L,A;const k=(A=(L=this._linkifier.currentLink)===null||L===void 0?void 0:L.link)===null||A===void 0?void 0:A.range;if(k)return this._model.selectionStart=[k.start.x-1,k.start.y-1],this._model.selectionStartLength=(0,c.getRangeLength)(k,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const D=this._getMouseBufferCoords(S);return!!D&&(this._selectWordAt(D,y),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(S,y){this._model.clearSelection(),S=Math.max(S,0),y=Math.min(y,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,y],this.refresh(),this._onSelectionChange.fire()}_handleTrim(S){this._model.handleTrim(S)&&this.refresh()}_getMouseBufferCoords(S){const y=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(y)return y[0]--,y[1]--,y[1]+=this._bufferService.buffer.ydisp,y}_getMouseEventScrollAmount(S){let y=(0,u.getCoordsRelativeToElement)(this._coreBrowserService.window,S,this._screenElement)[1];const L=this._renderService.dimensions.css.canvas.height;return y>=0&&y<=L?0:(y>L&&(y-=L),y=Math.min(Math.max(y,-50),50),y/=50,y/Math.abs(y)+Math.round(14*y))}shouldForceSelection(S){return l.isMac?S.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:S.shiftKey}handleMouseDown(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._handleIncrementalClick(S):S.detail===1?this._handleSingleClick(S):S.detail===2?this._handleDoubleClick(S):S.detail===3&&this._handleTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))}_handleSingleClick(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const y=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);y&&y.length!==this._model.selectionStart[0]&&y.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(S){const y=this._getMouseBufferCoords(S);y&&(this._activeSelectionMode=2,this._selectLineAt(y[1]))}shouldColumnSelect(S){return S.altKey&&!(l.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(S){if(S.stopImmediatePropagation(),!this._model.selectionStart)return;const y=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const L=this._bufferService.buffer;if(this._model.selectionEnd[1]<L.lines.length){const A=L.lines.get(this._model.selectionEnd[1]);A&&A.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}y&&y[0]===this._model.selectionEnd[0]&&y[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}}_handleMouseUp(S){const y=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&y<500&&S.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const L=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(L&&L[0]!==void 0&&L[1]!==void 0){const A=(0,p.moveToCellSequence)(L[0]-1,L[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(A,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const S=this._model.finalSelectionStart,y=this._model.finalSelectionEnd,L=!(!S||!y||S[0]===y[0]&&S[1]===y[1]);L?S&&y&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&y[0]===this._oldSelectionEnd[0]&&y[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,y,L)):this._oldHasSelection&&this._fireOnSelectionChange(S,y,L)}_fireOnSelectionChange(S,y,L){this._oldSelectionStart=S,this._oldSelectionEnd=y,this._oldHasSelection=L,this._onSelectionChange.fire()}_handleBufferActivate(S){this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(y=>this._handleTrim(y))}_convertViewportColToCharacterIndex(S,y){let L=y;for(let A=0;y>=A;A++){const k=S.loadCell(A,this._workCell).getChars().length;this._workCell.getWidth()===0?L--:k>1&&y!==A&&(L+=k-1)}return L}setSelection(S,y,L){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,y],this._model.selectionStartLength=L,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(S,y,L=!0,A=!0){if(S[0]>=this._bufferService.cols)return;const k=this._bufferService.buffer,D=k.lines.get(S[1]);if(!D)return;const B=k.translateBufferLineToString(S[1],!1);let N=this._convertViewportColToCharacterIndex(D,S[0]),$=N;const I=S[0]-N;let R=0,T=0,P=0,O=0;if(B.charAt(N)===" "){for(;N>0&&B.charAt(N-1)===" ";)N--;for(;$<B.length&&B.charAt($+1)===" ";)$++}else{let Q=S[0],q=S[0];D.getWidth(Q)===0&&(R++,Q--),D.getWidth(q)===2&&(T++,q++);const Z=D.getString(q).length;for(Z>1&&(O+=Z-1,$+=Z-1);Q>0&&N>0&&!this._isCharWordSeparator(D.loadCell(Q-1,this._workCell));){D.loadCell(Q-1,this._workCell);const M=this._workCell.getChars().length;this._workCell.getWidth()===0?(R++,Q--):M>1&&(P+=M-1,N-=M-1),N--,Q--}for(;q<D.length&&$+1<B.length&&!this._isCharWordSeparator(D.loadCell(q+1,this._workCell));){D.loadCell(q+1,this._workCell);const M=this._workCell.getChars().length;this._workCell.getWidth()===2?(T++,q++):M>1&&(O+=M-1,$+=M-1),$++,q++}}$++;let z=N+I-R+P,V=Math.min(this._bufferService.cols,$-N+R+T-P-O);if(y||B.slice(N,$).trim()!==""){if(L&&z===0&&D.getCodePoint(0)!==32){const Q=k.lines.get(S[1]-1);if(Q&&D.isWrapped&&Q.getCodePoint(this._bufferService.cols-1)!==32){const q=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(q){const Z=this._bufferService.cols-q.start;z-=Z,V+=Z}}}if(A&&z+V===this._bufferService.cols&&D.getCodePoint(this._bufferService.cols-1)!==32){const Q=k.lines.get(S[1]+1);if(Q!=null&&Q.isWrapped&&Q.getCodePoint(0)!==32){const q=this._getWordAt([0,S[1]+1],!1,!1,!0);q&&(V+=q.length)}}return{start:z,length:V}}}_selectWordAt(S,y){const L=this._getWordAt(S,y);if(L){for(;L.start<0;)L.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[L.start,S[1]],this._model.selectionStartLength=L.length}}_selectToWordAt(S){const y=this._getWordAt(S,!0);if(y){let L=S[1];for(;y.start<0;)y.start+=this._bufferService.cols,L--;if(!this._model.areSelectionValuesReversed())for(;y.start+y.length>this._bufferService.cols;)y.length-=this._bufferService.cols,L++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?y.start:y.start+y.length,L]}}_isCharWordSeparator(S){return S.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(S.getChars())>=0}_selectLineAt(S){const y=this._bufferService.buffer.getWrappedRangeForLine(S),L={start:{x:0,y:y.first},end:{x:this._bufferService.cols-1,y:y.last}};this._model.selectionStart=[0,y.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,c.getRangeLength)(L,this._bufferService.cols)}};s.SelectionService=E=d([v(3,m.IBufferService),v(4,m.ICoreService),v(5,w.IMouseService),v(6,m.IOptionsService),v(7,w.IRenderService),v(8,w.ICoreBrowserService)],E)},4725:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const d=a(8343);s.ICharSizeService=(0,d.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),s.IMouseService=(0,d.createDecorator)("MouseService"),s.IRenderService=(0,d.createDecorator)("RenderService"),s.ISelectionService=(0,d.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,d.createDecorator)("ThemeService")},6731:function(g,s,a){var d=this&&this.__decorate||function(E,S,y,L){var A,k=arguments.length,D=k<3?S:L===null?L=Object.getOwnPropertyDescriptor(S,y):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(E,S,y,L);else for(var B=E.length-1;B>=0;B--)(A=E[B])&&(D=(k<3?A(D):k>3?A(S,y,D):A(S,y))||D);return k>3&&D&&Object.defineProperty(S,y,D),D},v=this&&this.__param||function(E,S){return function(y,L){S(y,L,E)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const u=a(7239),p=a(8055),C=a(8460),w=a(844),_=a(2585),n=p.css.toColor("#ffffff"),l=p.css.toColor("#000000"),c=p.css.toColor("#ffffff"),h=p.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const E=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],S=[0,95,135,175,215,255];for(let y=0;y<216;y++){const L=S[y/36%6|0],A=S[y/6%6|0],k=S[y%6];E.push({css:p.channels.toCss(L,A,k),rgba:p.channels.toRgba(L,A,k)})}for(let y=0;y<24;y++){const L=8+10*y;E.push({css:p.channels.toCss(L,L,L),rgba:p.channels.toRgba(L,L,L)})}return E})());let b=s.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(E){super(),this._optionsService=E,this._contrastCache=new u.ColorContrastCache,this._halfContrastCache=new u.ColorContrastCache,this._onChangeColors=this.register(new C.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:l,cursor:c,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:p.color.blend(l,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:p.color.blend(l,m),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(E={}){const S=this._colors;if(S.foreground=x(E.foreground,n),S.background=x(E.background,l),S.cursor=x(E.cursor,c),S.cursorAccent=x(E.cursorAccent,h),S.selectionBackgroundTransparent=x(E.selectionBackground,m),S.selectionBackgroundOpaque=p.color.blend(S.background,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundTransparent=x(E.selectionInactiveBackground,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundOpaque=p.color.blend(S.background,S.selectionInactiveBackgroundTransparent),S.selectionForeground=E.selectionForeground?x(E.selectionForeground,p.NULL_COLOR):void 0,S.selectionForeground===p.NULL_COLOR&&(S.selectionForeground=void 0),p.color.isOpaque(S.selectionBackgroundTransparent)&&(S.selectionBackgroundTransparent=p.color.opacity(S.selectionBackgroundTransparent,.3)),p.color.isOpaque(S.selectionInactiveBackgroundTransparent)&&(S.selectionInactiveBackgroundTransparent=p.color.opacity(S.selectionInactiveBackgroundTransparent,.3)),S.ansi=s.DEFAULT_ANSI_COLORS.slice(),S.ansi[0]=x(E.black,s.DEFAULT_ANSI_COLORS[0]),S.ansi[1]=x(E.red,s.DEFAULT_ANSI_COLORS[1]),S.ansi[2]=x(E.green,s.DEFAULT_ANSI_COLORS[2]),S.ansi[3]=x(E.yellow,s.DEFAULT_ANSI_COLORS[3]),S.ansi[4]=x(E.blue,s.DEFAULT_ANSI_COLORS[4]),S.ansi[5]=x(E.magenta,s.DEFAULT_ANSI_COLORS[5]),S.ansi[6]=x(E.cyan,s.DEFAULT_ANSI_COLORS[6]),S.ansi[7]=x(E.white,s.DEFAULT_ANSI_COLORS[7]),S.ansi[8]=x(E.brightBlack,s.DEFAULT_ANSI_COLORS[8]),S.ansi[9]=x(E.brightRed,s.DEFAULT_ANSI_COLORS[9]),S.ansi[10]=x(E.brightGreen,s.DEFAULT_ANSI_COLORS[10]),S.ansi[11]=x(E.brightYellow,s.DEFAULT_ANSI_COLORS[11]),S.ansi[12]=x(E.brightBlue,s.DEFAULT_ANSI_COLORS[12]),S.ansi[13]=x(E.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),S.ansi[14]=x(E.brightCyan,s.DEFAULT_ANSI_COLORS[14]),S.ansi[15]=x(E.brightWhite,s.DEFAULT_ANSI_COLORS[15]),E.extendedAnsi){const y=Math.min(S.ansi.length-16,E.extendedAnsi.length);for(let L=0;L<y;L++)S.ansi[L+16]=x(E.extendedAnsi[L],s.DEFAULT_ANSI_COLORS[L+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(E){this._restoreColor(E),this._onChangeColors.fire(this.colors)}_restoreColor(E){if(E!==void 0)switch(E){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[E]=this._restoreColors.ansi[E]}else for(let S=0;S<this._restoreColors.ansi.length;++S)this._colors.ansi[S]=this._restoreColors.ansi[S]}modifyColors(E){E(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function x(E,S){if(E!==void 0)try{return p.css.toColor(E)}catch{}return S}s.ThemeService=b=d([v(0,_.IOptionsService)],b)},6349:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const d=a(8460),v=a(844);class u extends v.Disposable{constructor(C){super(),this._maxLength=C,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(C){if(this._maxLength===C)return;const w=new Array(C);for(let _=0;_<Math.min(C,this.length);_++)w[_]=this._array[this._getCyclicIndex(_)];this._array=w,this._maxLength=C,this._startIndex=0}get length(){return this._length}set length(C){if(C>this._length)for(let w=this._length;w<C;w++)this._array[w]=void 0;this._length=C}get(C){return this._array[this._getCyclicIndex(C)]}set(C,w){this._array[this._getCyclicIndex(C)]=w}push(C){this._array[this._getCyclicIndex(this._length)]=C,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(C,w,..._){if(w){for(let n=C;n<this._length-w;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+w)];this._length-=w,this.onDeleteEmitter.fire({index:C,amount:w})}for(let n=this._length-1;n>=C;n--)this._array[this._getCyclicIndex(n+_.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<_.length;n++)this._array[this._getCyclicIndex(C+n)]=_[n];if(_.length&&this.onInsertEmitter.fire({index:C,amount:_.length}),this._length+_.length>this._maxLength){const n=this._length+_.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=_.length}trimStart(C){C>this._length&&(C=this._length),this._startIndex+=C,this._length-=C,this.onTrimEmitter.fire(C)}shiftElements(C,w,_){if(!(w<=0)){if(C<0||C>=this._length)throw new Error("start argument out of range");if(C+_<0)throw new Error("Cannot shift elements in list beyond index 0");if(_>0){for(let l=w-1;l>=0;l--)this.set(C+l+_,this.get(C+l));const n=C+w+_-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<w;n++)this.set(C+n+_,this.get(C+n))}}_getCyclicIndex(C){return(this._startIndex+C)%this._maxLength}}s.CircularList=u},1439:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function a(d,v=5){if(typeof d!="object")return d;const u=Array.isArray(d)?[]:{};for(const p in d)u[p]=v<=1?d[p]:d[p]&&a(d[p],v-1);return u}},8055:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;const d=a(6114);let v=0,u=0,p=0,C=0;var w,_,n,l,c;function h(b){const x=b.toString(16);return x.length<2?"0"+x:x}function m(b,x){return b<x?(x+.05)/(b+.05):(b+.05)/(x+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(b){b.toCss=function(x,E,S,y){return y!==void 0?`#${h(x)}${h(E)}${h(S)}${h(y)}`:`#${h(x)}${h(E)}${h(S)}`},b.toRgba=function(x,E,S,y=255){return(x<<24|E<<16|S<<8|y)>>>0}}(w||(s.channels=w={})),function(b){function x(E,S){return C=Math.round(255*S),[v,u,p]=c.toChannels(E.rgba),{css:w.toCss(v,u,p,C),rgba:w.toRgba(v,u,p,C)}}b.blend=function(E,S){if(C=(255&S.rgba)/255,C===1)return{css:S.css,rgba:S.rgba};const y=S.rgba>>24&255,L=S.rgba>>16&255,A=S.rgba>>8&255,k=E.rgba>>24&255,D=E.rgba>>16&255,B=E.rgba>>8&255;return v=k+Math.round((y-k)*C),u=D+Math.round((L-D)*C),p=B+Math.round((A-B)*C),{css:w.toCss(v,u,p),rgba:w.toRgba(v,u,p)}},b.isOpaque=function(E){return(255&E.rgba)==255},b.ensureContrastRatio=function(E,S,y){const L=c.ensureContrastRatio(E.rgba,S.rgba,y);if(L)return c.toColor(L>>24&255,L>>16&255,L>>8&255)},b.opaque=function(E){const S=(255|E.rgba)>>>0;return[v,u,p]=c.toChannels(S),{css:w.toCss(v,u,p),rgba:S}},b.opacity=x,b.multiplyOpacity=function(E,S){return C=255&E.rgba,x(E,C*S/255)},b.toColorRGB=function(E){return[E.rgba>>24&255,E.rgba>>16&255,E.rgba>>8&255]}}(_||(s.color=_={})),function(b){let x,E;if(!d.isNode){const S=document.createElement("canvas");S.width=1,S.height=1;const y=S.getContext("2d",{willReadFrequently:!0});y&&(x=y,x.globalCompositeOperation="copy",E=x.createLinearGradient(0,0,1,1))}b.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return v=parseInt(S.slice(1,2).repeat(2),16),u=parseInt(S.slice(2,3).repeat(2),16),p=parseInt(S.slice(3,4).repeat(2),16),c.toColor(v,u,p);case 5:return v=parseInt(S.slice(1,2).repeat(2),16),u=parseInt(S.slice(2,3).repeat(2),16),p=parseInt(S.slice(3,4).repeat(2),16),C=parseInt(S.slice(4,5).repeat(2),16),c.toColor(v,u,p,C);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}const y=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(y)return v=parseInt(y[1]),u=parseInt(y[2]),p=parseInt(y[3]),C=Math.round(255*(y[5]===void 0?1:parseFloat(y[5]))),c.toColor(v,u,p,C);if(!x||!E)throw new Error("css.toColor: Unsupported css format");if(x.fillStyle=E,x.fillStyle=S,typeof x.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(x.fillRect(0,0,1,1),[v,u,p,C]=x.getImageData(0,0,1,1).data,C!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:w.toRgba(v,u,p,C),css:S}}}(n||(s.css=n={})),function(b){function x(E,S,y){const L=E/255,A=S/255,k=y/255;return .2126*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.7152*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))+.0722*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))}b.relativeLuminance=function(E){return x(E>>16&255,E>>8&255,255&E)},b.relativeLuminance2=x}(l||(s.rgb=l={})),function(b){function x(S,y,L){const A=S>>24&255,k=S>>16&255,D=S>>8&255;let B=y>>24&255,N=y>>16&255,$=y>>8&255,I=m(l.relativeLuminance2(B,N,$),l.relativeLuminance2(A,k,D));for(;I<L&&(B>0||N>0||$>0);)B-=Math.max(0,Math.ceil(.1*B)),N-=Math.max(0,Math.ceil(.1*N)),$-=Math.max(0,Math.ceil(.1*$)),I=m(l.relativeLuminance2(B,N,$),l.relativeLuminance2(A,k,D));return(B<<24|N<<16|$<<8|255)>>>0}function E(S,y,L){const A=S>>24&255,k=S>>16&255,D=S>>8&255;let B=y>>24&255,N=y>>16&255,$=y>>8&255,I=m(l.relativeLuminance2(B,N,$),l.relativeLuminance2(A,k,D));for(;I<L&&(B<255||N<255||$<255);)B=Math.min(255,B+Math.ceil(.1*(255-B))),N=Math.min(255,N+Math.ceil(.1*(255-N))),$=Math.min(255,$+Math.ceil(.1*(255-$))),I=m(l.relativeLuminance2(B,N,$),l.relativeLuminance2(A,k,D));return(B<<24|N<<16|$<<8|255)>>>0}b.ensureContrastRatio=function(S,y,L){const A=l.relativeLuminance(S>>8),k=l.relativeLuminance(y>>8);if(m(A,k)<L){if(k<A){const N=x(S,y,L),$=m(A,l.relativeLuminance(N>>8));if($<L){const I=E(S,y,L);return $>m(A,l.relativeLuminance(I>>8))?N:I}return N}const D=E(S,y,L),B=m(A,l.relativeLuminance(D>>8));if(B<L){const N=x(S,y,L);return B>m(A,l.relativeLuminance(N>>8))?D:N}return D}},b.reduceLuminance=x,b.increaseLuminance=E,b.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]},b.toColor=function(S,y,L,A){return{css:w.toCss(S,y,L,A),rgba:w.toRgba(S,y,L,A)}}}(c||(s.rgba=c={})),s.toPaddedHex=h,s.contrastRatio=m},8969:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const d=a(844),v=a(2585),u=a(4348),p=a(7866),C=a(744),w=a(7302),_=a(6975),n=a(8460),l=a(1753),c=a(1480),h=a(7994),m=a(9282),b=a(5435),x=a(5981),E=a(2660);let S=!1;class y extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event(A=>{var k;(k=this._onScrollApi)===null||k===void 0||k.fire(A.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(A){for(const k in A)this.optionsService.options[k]=A[k]}constructor(A){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new u.InstantiationService,this.optionsService=this.register(new w.OptionsService(A)),this._instantiationService.setService(v.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(C.BufferService)),this._instantiationService.setService(v.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(v.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(_.CoreService)),this._instantiationService.setService(v.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(l.CoreMouseService)),this._instantiationService.setService(v.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(c.UnicodeService)),this._instantiationService.setService(v.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(v.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(E.OscLinkService),this._instantiationService.setService(v.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new b.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(k=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new x.WriteBuffer((k,D)=>this._inputHandler.parse(k,D))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(A,k){this._writeBuffer.write(A,k)}writeSync(A,k){this._logService.logLevel<=v.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(A,k)}resize(A,k){isNaN(A)||isNaN(k)||(A=Math.max(A,C.MINIMUM_COLS),k=Math.max(k,C.MINIMUM_ROWS),this._bufferService.resize(A,k))}scroll(A,k=!1){this._bufferService.scroll(A,k)}scrollLines(A,k,D){this._bufferService.scrollLines(A,k,D)}scrollPages(A){this.scrollLines(A*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(A){const k=A-this._bufferService.buffer.ydisp;k!==0&&this.scrollLines(k)}registerEscHandler(A,k){return this._inputHandler.registerEscHandler(A,k)}registerDcsHandler(A,k){return this._inputHandler.registerDcsHandler(A,k)}registerCsiHandler(A,k){return this._inputHandler.registerCsiHandler(A,k)}registerOscHandler(A,k){return this._inputHandler.registerOscHandler(A,k)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let A=!1;const k=this.optionsService.rawOptions.windowsPty;k&&k.buildNumber!==void 0&&k.buildNumber!==void 0?A=k.backend==="conpty"&&k.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(A=!0),A?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const A=[];A.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),A.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)(()=>{for(const k of A)k.dispose()})}}}s.CoreTerminal=y},8460:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===a)return void this._listeners.splice(d,1)}}})),this._event}fire(a,d){const v=[];for(let u=0;u<this._listeners.length;u++)v.push(this._listeners[u]);for(let u=0;u<v.length;u++)v[u].call(void 0,a,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(a,d){return a(v=>d.fire(v))}},5435:function(g,s,a){var d=this&&this.__decorate||function(I,R,T,P){var O,z=arguments.length,V=z<3?R:P===null?P=Object.getOwnPropertyDescriptor(R,T):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(I,R,T,P);else for(var Q=I.length-1;Q>=0;Q--)(O=I[Q])&&(V=(z<3?O(V):z>3?O(R,T,V):O(R,T))||V);return z>3&&V&&Object.defineProperty(R,T,V),V},v=this&&this.__param||function(I,R){return function(T,P){R(T,P,I)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const u=a(2584),p=a(7116),C=a(2015),w=a(844),_=a(482),n=a(8437),l=a(8460),c=a(643),h=a(511),m=a(3734),b=a(2585),x=a(6242),E=a(6351),S=a(5941),y={"(":0,")":1,"*":2,"+":3,"-":1,".":2},L=131072;function A(I,R){if(I>24)return R.setWinLines||!1;switch(I){case 1:return!!R.restoreWin;case 2:return!!R.minimizeWin;case 3:return!!R.setWinPosition;case 4:return!!R.setWinSizePixels;case 5:return!!R.raiseWin;case 6:return!!R.lowerWin;case 7:return!!R.refreshWin;case 8:return!!R.setWinSizeChars;case 9:return!!R.maximizeWin;case 10:return!!R.fullscreenWin;case 11:return!!R.getWinState;case 13:return!!R.getWinPosition;case 14:return!!R.getWinSizePixels;case 15:return!!R.getScreenSizePixels;case 16:return!!R.getCellSizePixels;case 18:return!!R.getWinSizeChars;case 19:return!!R.getScreenSizeChars;case 20:return!!R.getIconTitle;case 21:return!!R.getWinTitle;case 22:return!!R.pushTitle;case 23:return!!R.popTitle;case 24:return!!R.setWinLines}return!1}var k;(function(I){I[I.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",I[I.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(k||(s.WindowsOptionsReportType=k={}));let D=0;class B extends w.Disposable{getAttrData(){return this._curAttrData}constructor(R,T,P,O,z,V,Q,q,Z=new C.EscapeSequenceParser){super(),this._bufferService=R,this._charsetService=T,this._coreService=P,this._logService=O,this._optionsService=z,this._oscLinkService=V,this._coreMouseService=Q,this._unicodeService=q,this._parser=Z,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new _.StringToUtf32,this._utf8Decoder=new _.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new l.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new l.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new l.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new l.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new l.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new l.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new l.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new l.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new l.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new l.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new l.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new N(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(M=>this._activeBuffer=M.activeBuffer)),this._parser.setCsiHandlerFallback((M,U)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(M),params:U.toArray()})}),this._parser.setEscHandlerFallback(M=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(M)})}),this._parser.setExecuteHandlerFallback(M=>{this._logService.debug("Unknown EXECUTE code: ",{code:M})}),this._parser.setOscHandlerFallback((M,U,j)=>{this._logService.debug("Unknown OSC code: ",{identifier:M,action:U,data:j})}),this._parser.setDcsHandlerFallback((M,U,j)=>{U==="HOOK"&&(j=j.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(M),action:U,payload:j})}),this._parser.setPrintHandler((M,U,j)=>this.print(M,U,j)),this._parser.registerCsiHandler({final:"@"},M=>this.insertChars(M)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},M=>this.scrollLeft(M)),this._parser.registerCsiHandler({final:"A"},M=>this.cursorUp(M)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},M=>this.scrollRight(M)),this._parser.registerCsiHandler({final:"B"},M=>this.cursorDown(M)),this._parser.registerCsiHandler({final:"C"},M=>this.cursorForward(M)),this._parser.registerCsiHandler({final:"D"},M=>this.cursorBackward(M)),this._parser.registerCsiHandler({final:"E"},M=>this.cursorNextLine(M)),this._parser.registerCsiHandler({final:"F"},M=>this.cursorPrecedingLine(M)),this._parser.registerCsiHandler({final:"G"},M=>this.cursorCharAbsolute(M)),this._parser.registerCsiHandler({final:"H"},M=>this.cursorPosition(M)),this._parser.registerCsiHandler({final:"I"},M=>this.cursorForwardTab(M)),this._parser.registerCsiHandler({final:"J"},M=>this.eraseInDisplay(M,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},M=>this.eraseInDisplay(M,!0)),this._parser.registerCsiHandler({final:"K"},M=>this.eraseInLine(M,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},M=>this.eraseInLine(M,!0)),this._parser.registerCsiHandler({final:"L"},M=>this.insertLines(M)),this._parser.registerCsiHandler({final:"M"},M=>this.deleteLines(M)),this._parser.registerCsiHandler({final:"P"},M=>this.deleteChars(M)),this._parser.registerCsiHandler({final:"S"},M=>this.scrollUp(M)),this._parser.registerCsiHandler({final:"T"},M=>this.scrollDown(M)),this._parser.registerCsiHandler({final:"X"},M=>this.eraseChars(M)),this._parser.registerCsiHandler({final:"Z"},M=>this.cursorBackwardTab(M)),this._parser.registerCsiHandler({final:"`"},M=>this.charPosAbsolute(M)),this._parser.registerCsiHandler({final:"a"},M=>this.hPositionRelative(M)),this._parser.registerCsiHandler({final:"b"},M=>this.repeatPrecedingCharacter(M)),this._parser.registerCsiHandler({final:"c"},M=>this.sendDeviceAttributesPrimary(M)),this._parser.registerCsiHandler({prefix:">",final:"c"},M=>this.sendDeviceAttributesSecondary(M)),this._parser.registerCsiHandler({final:"d"},M=>this.linePosAbsolute(M)),this._parser.registerCsiHandler({final:"e"},M=>this.vPositionRelative(M)),this._parser.registerCsiHandler({final:"f"},M=>this.hVPosition(M)),this._parser.registerCsiHandler({final:"g"},M=>this.tabClear(M)),this._parser.registerCsiHandler({final:"h"},M=>this.setMode(M)),this._parser.registerCsiHandler({prefix:"?",final:"h"},M=>this.setModePrivate(M)),this._parser.registerCsiHandler({final:"l"},M=>this.resetMode(M)),this._parser.registerCsiHandler({prefix:"?",final:"l"},M=>this.resetModePrivate(M)),this._parser.registerCsiHandler({final:"m"},M=>this.charAttributes(M)),this._parser.registerCsiHandler({final:"n"},M=>this.deviceStatus(M)),this._parser.registerCsiHandler({prefix:"?",final:"n"},M=>this.deviceStatusPrivate(M)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},M=>this.softReset(M)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},M=>this.setCursorStyle(M)),this._parser.registerCsiHandler({final:"r"},M=>this.setScrollRegion(M)),this._parser.registerCsiHandler({final:"s"},M=>this.saveCursor(M)),this._parser.registerCsiHandler({final:"t"},M=>this.windowOptions(M)),this._parser.registerCsiHandler({final:"u"},M=>this.restoreCursor(M)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},M=>this.insertColumns(M)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},M=>this.deleteColumns(M)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},M=>this.selectProtected(M)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},M=>this.requestMode(M,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},M=>this.requestMode(M,!1)),this._parser.setExecuteHandler(u.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(u.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(u.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(u.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(u.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(u.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(u.C1.IND,()=>this.index()),this._parser.setExecuteHandler(u.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(u.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new x.OscHandler(M=>(this.setTitle(M),this.setIconName(M),!0))),this._parser.registerOscHandler(1,new x.OscHandler(M=>this.setIconName(M))),this._parser.registerOscHandler(2,new x.OscHandler(M=>this.setTitle(M))),this._parser.registerOscHandler(4,new x.OscHandler(M=>this.setOrReportIndexedColor(M))),this._parser.registerOscHandler(8,new x.OscHandler(M=>this.setHyperlink(M))),this._parser.registerOscHandler(10,new x.OscHandler(M=>this.setOrReportFgColor(M))),this._parser.registerOscHandler(11,new x.OscHandler(M=>this.setOrReportBgColor(M))),this._parser.registerOscHandler(12,new x.OscHandler(M=>this.setOrReportCursorColor(M))),this._parser.registerOscHandler(104,new x.OscHandler(M=>this.restoreIndexedColor(M))),this._parser.registerOscHandler(110,new x.OscHandler(M=>this.restoreFgColor(M))),this._parser.registerOscHandler(111,new x.OscHandler(M=>this.restoreBgColor(M))),this._parser.registerOscHandler(112,new x.OscHandler(M=>this.restoreCursorColor(M))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const M in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:M},()=>this.selectCharset("("+M)),this._parser.registerEscHandler({intermediates:")",final:M},()=>this.selectCharset(")"+M)),this._parser.registerEscHandler({intermediates:"*",final:M},()=>this.selectCharset("*"+M)),this._parser.registerEscHandler({intermediates:"+",final:M},()=>this.selectCharset("+"+M)),this._parser.registerEscHandler({intermediates:"-",final:M},()=>this.selectCharset("-"+M)),this._parser.registerEscHandler({intermediates:".",final:M},()=>this.selectCharset("."+M)),this._parser.registerEscHandler({intermediates:"/",final:M},()=>this.selectCharset("/"+M));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(M=>(this._logService.error("Parsing error: ",M),M)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new E.DcsHandler((M,U)=>this.requestStatusString(M,U)))}_preserveStack(R,T,P,O){this._parseStack.paused=!0,this._parseStack.cursorStartX=R,this._parseStack.cursorStartY=T,this._parseStack.decodedLength=P,this._parseStack.position=O}_logSlowResolvingAsync(R){this._logService.logLevel<=b.LogLevelEnum.WARN&&Promise.race([R,new Promise((T,P)=>setTimeout(()=>P("#SLOW_TIMEOUT"),5e3))]).catch(T=>{if(T!=="#SLOW_TIMEOUT")throw T;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(R,T){let P,O=this._activeBuffer.x,z=this._activeBuffer.y,V=0;const Q=this._parseStack.paused;if(Q){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,T))return this._logSlowResolvingAsync(P),P;O=this._parseStack.cursorStartX,z=this._parseStack.cursorStartY,this._parseStack.paused=!1,R.length>L&&(V=this._parseStack.position+L)}if(this._logService.logLevel<=b.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof R=="string"?` "${R}"`:` "${Array.prototype.map.call(R,q=>String.fromCharCode(q)).join("")}"`),typeof R=="string"?R.split("").map(q=>q.charCodeAt(0)):R),this._parseBuffer.length<R.length&&this._parseBuffer.length<L&&(this._parseBuffer=new Uint32Array(Math.min(R.length,L))),Q||this._dirtyRowTracker.clearRange(),R.length>L)for(let q=V;q<R.length;q+=L){const Z=q+L<R.length?q+L:R.length,M=typeof R=="string"?this._stringDecoder.decode(R.substring(q,Z),this._parseBuffer):this._utf8Decoder.decode(R.subarray(q,Z),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,M))return this._preserveStack(O,z,M,q),this._logSlowResolvingAsync(P),P}else if(!Q){const q=typeof R=="string"?this._stringDecoder.decode(R,this._parseBuffer):this._utf8Decoder.decode(R,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,q))return this._preserveStack(O,z,q,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===O&&this._activeBuffer.y===z||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(R,T,P){let O,z;const V=this._charsetService.charset,Q=this._optionsService.rawOptions.screenReaderMode,q=this._bufferService.cols,Z=this._coreService.decPrivateModes.wraparound,M=this._coreService.modes.insertMode,U=this._curAttrData;let j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-T>0&&j.getWidth(this._activeBuffer.x-1)===2&&j.setCellFromCodePoint(this._activeBuffer.x-1,0,1,U.fg,U.bg,U.extended);for(let W=T;W<P;++W){if(O=R[W],z=this._unicodeService.wcwidth(O),O<127&&V){const te=V[String.fromCharCode(O)];te&&(O=te.charCodeAt(0))}if(Q&&this._onA11yChar.fire((0,_.stringFromCodePoint)(O)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),z||!this._activeBuffer.x){if(this._activeBuffer.x+z-1>=q){if(Z){for(;this._activeBuffer.x<q;)j.setCellFromCodePoint(this._activeBuffer.x++,0,1,U.fg,U.bg,U.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=q-1,z===2)continue}if(M&&(j.insertCells(this._activeBuffer.x,z,this._activeBuffer.getNullCell(U),U),j.getWidth(q-1)===2&&j.setCellFromCodePoint(q-1,c.NULL_CELL_CODE,c.NULL_CELL_WIDTH,U.fg,U.bg,U.extended)),j.setCellFromCodePoint(this._activeBuffer.x++,O,z,U.fg,U.bg,U.extended),z>0)for(;--z;)j.setCellFromCodePoint(this._activeBuffer.x++,0,0,U.fg,U.bg,U.extended)}else j.getWidth(this._activeBuffer.x-1)?j.addCodepointToCell(this._activeBuffer.x-1,O):j.addCodepointToCell(this._activeBuffer.x-2,O)}P-T>0&&(j.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<q&&P-T>0&&j.getWidth(this._activeBuffer.x)===0&&!j.hasContent(this._activeBuffer.x)&&j.setCellFromCodePoint(this._activeBuffer.x,0,1,U.fg,U.bg,U.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(R,T){return R.final!=="t"||R.prefix||R.intermediates?this._parser.registerCsiHandler(R,T):this._parser.registerCsiHandler(R,P=>!A(P.params[0],this._optionsService.rawOptions.windowOptions)||T(P))}registerDcsHandler(R,T){return this._parser.registerDcsHandler(R,new E.DcsHandler(T))}registerEscHandler(R,T){return this._parser.registerEscHandler(R,T)}registerOscHandler(R,T){return this._parser.registerOscHandler(R,new x.OscHandler(T))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var R;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||R===void 0)&&R.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);T.hasWidth(this._activeBuffer.x)&&!T.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const R=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-R),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(R=this._bufferService.cols-1){this._activeBuffer.x=Math.min(R,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(R,T){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=R,this._activeBuffer.y=this._activeBuffer.scrollTop+T):(this._activeBuffer.x=R,this._activeBuffer.y=T),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(R,T){this._restrictCursor(),this._setCursor(this._activeBuffer.x+R,this._activeBuffer.y+T)}cursorUp(R){const T=this._activeBuffer.y-this._activeBuffer.scrollTop;return T>=0?this._moveCursor(0,-Math.min(T,R.params[0]||1)):this._moveCursor(0,-(R.params[0]||1)),!0}cursorDown(R){const T=this._activeBuffer.scrollBottom-this._activeBuffer.y;return T>=0?this._moveCursor(0,Math.min(T,R.params[0]||1)):this._moveCursor(0,R.params[0]||1),!0}cursorForward(R){return this._moveCursor(R.params[0]||1,0),!0}cursorBackward(R){return this._moveCursor(-(R.params[0]||1),0),!0}cursorNextLine(R){return this.cursorDown(R),this._activeBuffer.x=0,!0}cursorPrecedingLine(R){return this.cursorUp(R),this._activeBuffer.x=0,!0}cursorCharAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(R){return this._setCursor(R.length>=2?(R.params[1]||1)-1:0,(R.params[0]||1)-1),!0}charPosAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(R){return this._moveCursor(R.params[0]||1,0),!0}linePosAbsolute(R){return this._setCursor(this._activeBuffer.x,(R.params[0]||1)-1),!0}vPositionRelative(R){return this._moveCursor(0,R.params[0]||1),!0}hVPosition(R){return this.cursorPosition(R),!0}tabClear(R){const T=R.params[0];return T===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:T===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=R.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=R.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(R){const T=R.params[0];return T===1&&(this._curAttrData.bg|=536870912),T!==2&&T!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(R,T,P,O=!1,z=!1){const V=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);V.replaceCells(T,P,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),z),O&&(V.isWrapped=!1)}_resetBufferLine(R,T=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),T),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+R),P.isWrapped=!1)}eraseInDisplay(R,T=!1){let P;switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);P<this._bufferService.rows;P++)this._resetBufferLine(P,T);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,T),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,T);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,T);this._dirtyRowTracker.markDirty(0);break;case 3:const O=this._activeBuffer.lines.length-this._bufferService.rows;O>0&&(this._activeBuffer.lines.trimStart(O),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-O,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-O,0),this._onScroll.fire(0))}return!0}eraseInLine(R,T=!1){switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,T);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,T)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(R){this._restrictCursor();let T=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-O+1;for(;T--;)this._activeBuffer.lines.splice(z-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(R){this._restrictCursor();let T=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let O;for(O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,O=this._bufferService.rows-1+this._activeBuffer.ybase-O;T--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(R){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.insertCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(R){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.deleteCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(R){let T=R.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(R){let T=R.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=R.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);O.deleteCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=R.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);O.insertCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=R.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);O.insertCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=R.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);O.deleteCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(R){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(R.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(R){if(!this._parser.precedingCodepoint)return!0;const T=R.params[0]||1,P=new Uint32Array(T);for(let O=0;O<T;++O)P[O]=this._parser.precedingCodepoint;return this.print(P,0,P.length),!0}sendDeviceAttributesPrimary(R){return R.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(R){return R.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(R.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0}_is(R){return(this._optionsService.rawOptions.termName+"").indexOf(R)===0}setMode(R){for(let T=0;T<R.length;T++)switch(R.params[T]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(R){for(let T=0;T<R.length;T++)switch(R.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(R){for(let T=0;T<R.length;T++)switch(R.params[T]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(R){for(let T=0;T<R.length;T++)switch(R.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),R.params[T]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(R,T){const P=this._coreService.decPrivateModes,{activeProtocol:O,activeEncoding:z}=this._coreMouseService,V=this._coreService,{buffers:Q,cols:q}=this._bufferService,{active:Z,alt:M}=Q,U=this._optionsService.rawOptions,j=le=>le?1:2,W=R.params[0];return te=W,G=T?W===2?4:W===4?j(V.modes.insertMode):W===12?3:W===20?j(U.convertEol):0:W===1?j(P.applicationCursorKeys):W===3?U.windowOptions.setWinLines?q===80?2:q===132?1:0:0:W===6?j(P.origin):W===7?j(P.wraparound):W===8?3:W===9?j(O==="X10"):W===12?j(U.cursorBlink):W===25?j(!V.isCursorHidden):W===45?j(P.reverseWraparound):W===66?j(P.applicationKeypad):W===67?4:W===1e3?j(O==="VT200"):W===1002?j(O==="DRAG"):W===1003?j(O==="ANY"):W===1004?j(P.sendFocus):W===1005?4:W===1006?j(z==="SGR"):W===1015?4:W===1016?j(z==="SGR_PIXELS"):W===1048?1:W===47||W===1047||W===1049?j(Z===M):W===2004?j(P.bracketedPasteMode):0,V.triggerDataEvent(`${u.C0.ESC}[${T?"":"?"}${te};${G}$y`),!0;var te,G}_updateAttrColor(R,T,P,O,z){return T===2?(R|=50331648,R&=-16777216,R|=m.AttributeData.fromColorRGB([P,O,z])):T===5&&(R&=-50331904,R|=33554432|255&P),R}_extractColor(R,T,P){const O=[0,0,-1,0,0,0];let z=0,V=0;do{if(O[V+z]=R.params[T+V],R.hasSubParams(T+V)){const Q=R.getSubParams(T+V);let q=0;do O[1]===5&&(z=1),O[V+q+1+z]=Q[q];while(++q<Q.length&&q+V+1+z<O.length);break}if(O[1]===5&&V+z>=2||O[1]===2&&V+z>=5)break;O[1]&&(z=1)}while(++V+T<R.length&&V+z<O.length);for(let Q=2;Q<O.length;++Q)O[Q]===-1&&(O[Q]=0);switch(O[0]){case 38:P.fg=this._updateAttrColor(P.fg,O[1],O[3],O[4],O[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,O[1],O[3],O[4],O[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,O[1],O[3],O[4],O[5])}return V}_processUnderline(R,T){T.extended=T.extended.clone(),(!~R||R>5)&&(R=1),T.extended.underlineStyle=R,T.fg|=268435456,R===0&&(T.fg&=-268435457),T.updateExtended()}_processSGR0(R){R.fg=n.DEFAULT_ATTR_DATA.fg,R.bg=n.DEFAULT_ATTR_DATA.bg,R.extended=R.extended.clone(),R.extended.underlineStyle=0,R.extended.underlineColor&=-67108864,R.updateExtended()}charAttributes(R){if(R.length===1&&R.params[0]===0)return this._processSGR0(this._curAttrData),!0;const T=R.length;let P;const O=this._curAttrData;for(let z=0;z<T;z++)P=R.params[z],P>=30&&P<=37?(O.fg&=-50331904,O.fg|=16777216|P-30):P>=40&&P<=47?(O.bg&=-50331904,O.bg|=16777216|P-40):P>=90&&P<=97?(O.fg&=-50331904,O.fg|=16777224|P-90):P>=100&&P<=107?(O.bg&=-50331904,O.bg|=16777224|P-100):P===0?this._processSGR0(O):P===1?O.fg|=134217728:P===3?O.bg|=67108864:P===4?(O.fg|=268435456,this._processUnderline(R.hasSubParams(z)?R.getSubParams(z)[0]:1,O)):P===5?O.fg|=536870912:P===7?O.fg|=67108864:P===8?O.fg|=1073741824:P===9?O.fg|=2147483648:P===2?O.bg|=134217728:P===21?this._processUnderline(2,O):P===22?(O.fg&=-134217729,O.bg&=-134217729):P===23?O.bg&=-67108865:P===24?(O.fg&=-268435457,this._processUnderline(0,O)):P===25?O.fg&=-536870913:P===27?O.fg&=-67108865:P===28?O.fg&=-1073741825:P===29?O.fg&=2147483647:P===39?(O.fg&=-67108864,O.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):P===49?(O.bg&=-67108864,O.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?z+=this._extractColor(R,z,O):P===53?O.bg|=1073741824:P===55?O.bg&=-1073741825:P===59?(O.extended=O.extended.clone(),O.extended.underlineColor=-1,O.updateExtended()):P===100?(O.fg&=-67108864,O.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,O.bg&=-67108864,O.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(R){switch(R.params[0]){case 5:this._coreService.triggerDataEvent(`${u.C0.ESC}[0n`);break;case 6:const T=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[${T};${P}R`)}return!0}deviceStatusPrivate(R){if(R.params[0]===6){const T=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[?${T};${P}R`)}return!0}softReset(R){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(R){const T=R.params[0]||1;switch(T){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=T%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(R){const T=R.params[0]||1;let P;return(R.length<2||(P=R.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>T&&(this._activeBuffer.scrollTop=T-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(R){if(!A(R.params[0],this._optionsService.rawOptions.windowOptions))return!0;const T=R.length>1?R.params[1]:0;switch(R.params[0]){case 14:T!==2&&this._onRequestWindowsOptionsReport.fire(k.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(k.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${u.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:T!==0&&T!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),T!==0&&T!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:T!==0&&T!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),T!==0&&T!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(R){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(R){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(R){return this._windowTitle=R,this._onTitleChange.fire(R),!0}setIconName(R){return this._iconName=R,!0}setOrReportIndexedColor(R){const T=[],P=R.split(";");for(;P.length>1;){const O=P.shift(),z=P.shift();if(/^\d+$/.exec(O)){const V=parseInt(O);if($(V))if(z==="?")T.push({type:0,index:V});else{const Q=(0,S.parseColor)(z);Q&&T.push({type:1,index:V,color:Q})}}}return T.length&&this._onColor.fire(T),!0}setHyperlink(R){const T=R.split(";");return!(T.length<2)&&(T[1]?this._createHyperlink(T[0],T[1]):!T[0]&&this._finishHyperlink())}_createHyperlink(R,T){this._getCurrentLinkId()&&this._finishHyperlink();const P=R.split(":");let O;const z=P.findIndex(V=>V.startsWith("id="));return z!==-1&&(O=P[z].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:O,uri:T}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(R,T){const P=R.split(";");for(let O=0;O<P.length&&!(T>=this._specialColors.length);++O,++T)if(P[O]==="?")this._onColor.fire([{type:0,index:this._specialColors[T]}]);else{const z=(0,S.parseColor)(P[O]);z&&this._onColor.fire([{type:1,index:this._specialColors[T],color:z}])}return!0}setOrReportFgColor(R){return this._setOrReportSpecialColor(R,0)}setOrReportBgColor(R){return this._setOrReportSpecialColor(R,1)}setOrReportCursorColor(R){return this._setOrReportSpecialColor(R,2)}restoreIndexedColor(R){if(!R)return this._onColor.fire([{type:2}]),!0;const T=[],P=R.split(";");for(let O=0;O<P.length;++O)if(/^\d+$/.exec(P[O])){const z=parseInt(P[O]);$(z)&&T.push({type:2,index:z})}return T.length&&this._onColor.fire(T),!0}restoreFgColor(R){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(R){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(R){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(R){return R.length!==2?(this.selectDefaultCharset(),!0):(R[0]==="/"||this._charsetService.setgCharset(y[R[0]],p.CHARSETS[R[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const R=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,R,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(R){return this._charsetService.setgLevel(R),!0}screenAlignmentPattern(){const R=new h.CellData;R.content=4194373,R.fg=this._curAttrData.fg,R.bg=this._curAttrData.bg,this._setCursor(0,0);for(let T=0;T<this._bufferService.rows;++T){const P=this._activeBuffer.ybase+this._activeBuffer.y+T,O=this._activeBuffer.lines.get(P);O&&(O.fill(R),O.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(R,T){const P=this._bufferService.buffer,O=this._optionsService.rawOptions;return(z=>(this._coreService.triggerDataEvent(`${u.C0.ESC}${z}${u.C0.ESC}\\`),!0))(R==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:R==='"p'?'P1$r61;1"p':R==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:R==="m"?"P1$r0m":R===" q"?`P1$r${{block:2,underline:4,bar:6}[O.cursorStyle]-(O.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(R,T){this._dirtyRowTracker.markRangeDirty(R,T)}}s.InputHandler=B;let N=class{constructor(I){this._bufferService=I,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(I){I<this.start?this.start=I:I>this.end&&(this.end=I)}markRangeDirty(I,R){I>R&&(D=I,I=R,R=D),I<this.start&&(this.start=I),R>this.end&&(this.end=R)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function $(I){return 0<=I&&I<256}N=d([v(0,b.IBufferService)],N)},844:(g,s)=>{function a(d){for(const v of d)v.dispose();d.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const v=this._disposables.indexOf(d);v!==-1&&this._disposables.splice(v,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var v;this._isDisposed||d===this._value||((v=this._value)===null||v===void 0||v.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},s.toDisposable=function(d){return{dispose:d}},s.disposeArray=a,s.getDisposeArrayDisposable=function(d){return{dispose:()=>a(d)}}},1505:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(v,u,p){this._data[v]||(this._data[v]={}),this._data[v][u]=p}get(v,u){return this._data[v]?this._data[v][u]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(d,v,u,p,C){this._data.get(d,v)||this._data.set(d,v,new a),this._data.get(d,v).set(u,p,C)}get(d,v,u,p){var C;return(C=this._data.get(d,v))===null||C===void 0?void 0:C.get(u,p)}clear(){this._data.clear()}}},6114:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";const a=s.isNode?"node":navigator.userAgent,d=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;const v=a.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),s.isIpad=d==="iPad",s.isIphone=d==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),s.isLinux=d.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},6106:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let a=0;s.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(a=this._search(this._getKey(d)),this._array.splice(a,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;const v=this._getKey(d);if(v===void 0||(a=this._search(v),a===-1)||this._getKey(this._array[a])!==v)return!1;do if(this._array[a]===d)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===v);return!1}*getKeyIterator(d){if(this._array.length!==0&&(a=this._search(d),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===d))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===d)}forEachByKey(d,v){if(this._array.length!==0&&(a=this._search(d),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===d))do v(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===d)}values(){return[...this._array].values()}_search(d){let v=0,u=this._array.length-1;for(;u>=v;){let p=v+u>>1;const C=this._getKey(this._array[p]);if(C>d)u=p-1;else{if(!(C<d)){for(;p>0&&this._getKey(this._array[p-1])===d;)p--;return p}v=p+1}}return v}}},7226:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const d=a(6114);class v{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let w=0,_=0,n=C.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),_=Math.max(w,_),l=C.timeRemaining(),1.5*_>l)return n-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-w))}ms`),void this._start();n=l}this.clear()}}class u extends v{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const w=Date.now()+C;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}s.PriorityTaskQueue=u,s.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:u,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const d=a(643);s.updateWindowsModeWrappedState=function(v){const u=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),p=u==null?void 0:u.get(v.cols-1),C=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);C&&p&&(C.isWrapped=p[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&p[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){const u=new a;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=a;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}constructor(u=0,p=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=p}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=d},9092:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const d=a(6349),v=a(7226),u=a(3734),p=a(8437),C=a(4634),w=a(511),_=a(643),n=a(4863),l=a(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(c,h,m){this._hasScrollback=c,this._optionsService=h,this._bufferService=m,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=l.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,_.WHITESPACE_CELL_CHAR,_.WHITESPACE_CELL_WIDTH,_.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new v.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(c){return c?(this._nullCell.fg=c.fg,this._nullCell.bg=c.bg,this._nullCell.extended=c.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell}getWhitespaceCell(c){return c?(this._whitespaceCell.fg=c.fg,this._whitespaceCell.bg=c.bg,this._whitespaceCell.extended=c.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell}getBlankLine(c,h){return new p.BufferLine(this._bufferService.cols,this.getNullCell(c),h)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const c=this.ybase+this.y-this.ydisp;return c>=0&&c<this._rows}_getCorrectBufferLength(c){if(!this._hasScrollback)return c;const h=c+this._optionsService.rawOptions.scrollback;return h>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:h}fillViewportRows(c){if(this.lines.length===0){c===void 0&&(c=p.DEFAULT_ATTR_DATA);let h=this._rows;for(;h--;)this.lines.push(this.getBlankLine(c))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(c,h){const m=this.getNullCell(p.DEFAULT_ATTR_DATA);let b=0;const x=this._getCorrectBufferLength(h);if(x>this.lines.maxLength&&(this.lines.maxLength=x),this.lines.length>0){if(this._cols<c)for(let S=0;S<this.lines.length;S++)b+=+this.lines.get(S).resize(c,m);let E=0;if(this._rows<h)for(let S=this._rows;S<h;S++)this.lines.length<h+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(c,m)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(c,m)));else for(let S=this._rows;S>h;S--)this.lines.length>h+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(x<this.lines.maxLength){const S=this.lines.length-x;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=x}this.x=Math.min(this.x,c-1),this.y=Math.min(this.y,h-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,c-1),this.scrollTop=0}if(this.scrollBottom=h-1,this._isReflowEnabled&&(this._reflow(c,h),this._cols>c))for(let E=0;E<this.lines.length;E++)b+=+this.lines.get(E).resize(c,m);this._cols=c,this._rows=h,this._memoryCleanupQueue.clear(),b>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let c=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,c=!1);let h=0;for(;this._memoryCleanupPosition<this.lines.length;)if(h+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),h>100)return!0;return c}get _isReflowEnabled(){const c=this._optionsService.rawOptions.windowsPty;return c&&c.buildNumber?this._hasScrollback&&c.backend==="conpty"&&c.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(c,h){this._cols!==c&&(c>this._cols?this._reflowLarger(c,h):this._reflowSmaller(c,h))}_reflowLarger(c,h){const m=(0,C.reflowLargerGetLinesToRemove)(this.lines,this._cols,c,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(m.length>0){const b=(0,C.reflowLargerCreateNewLayout)(this.lines,m);(0,C.reflowLargerApplyNewLayout)(this.lines,b.layout),this._reflowLargerAdjustViewport(c,h,b.countRemoved)}}_reflowLargerAdjustViewport(c,h,m){const b=this.getNullCell(p.DEFAULT_ATTR_DATA);let x=m;for(;x-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<h&&this.lines.push(new p.BufferLine(c,b))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-m,0)}_reflowSmaller(c,h){const m=this.getNullCell(p.DEFAULT_ATTR_DATA),b=[];let x=0;for(let E=this.lines.length-1;E>=0;E--){let S=this.lines.get(E);if(!S||!S.isWrapped&&S.getTrimmedLength()<=c)continue;const y=[S];for(;S.isWrapped&&E>0;)S=this.lines.get(--E),y.unshift(S);const L=this.ybase+this.y;if(L>=E&&L<E+y.length)continue;const A=y[y.length-1].getTrimmedLength(),k=(0,C.reflowSmallerGetNewLineLengths)(y,this._cols,c),D=k.length-y.length;let B;B=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+D):Math.max(0,this.lines.length-this.lines.maxLength+D);const N=[];for(let O=0;O<D;O++){const z=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);N.push(z)}N.length>0&&(b.push({start:E+y.length+x,newLines:N}),x+=N.length),y.push(...N);let $=k.length-1,I=k[$];I===0&&($--,I=k[$]);let R=y.length-D-1,T=A;for(;R>=0;){const O=Math.min(T,I);if(y[$]===void 0)break;if(y[$].copyCellsFrom(y[R],T-O,I-O,O,!0),I-=O,I===0&&($--,I=k[$]),T-=O,T===0){R--;const z=Math.max(R,0);T=(0,C.getWrappedLineTrimmedLength)(y,z,this._cols)}}for(let O=0;O<y.length;O++)k[O]<c&&y[O].setCell(k[O],m);let P=D-B;for(;P-- >0;)this.ybase===0?this.y<h-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+x)-h&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+D,this.ybase+h-1)}if(b.length>0){const E=[],S=[];for(let $=0;$<this.lines.length;$++)S.push(this.lines.get($));const y=this.lines.length;let L=y-1,A=0,k=b[A];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+x);let D=0;for(let $=Math.min(this.lines.maxLength-1,y+x-1);$>=0;$--)if(k&&k.start>L+D){for(let I=k.newLines.length-1;I>=0;I--)this.lines.set($--,k.newLines[I]);$++,E.push({index:L+1,amount:k.newLines.length}),D+=k.newLines.length,k=b[++A]}else this.lines.set($,S[L--]);let B=0;for(let $=E.length-1;$>=0;$--)E[$].index+=B,this.lines.onInsertEmitter.fire(E[$]),B+=E[$].amount;const N=Math.max(0,y+x-this.lines.maxLength);N>0&&this.lines.onTrimEmitter.fire(N)}}translateBufferLineToString(c,h,m=0,b){const x=this.lines.get(c);return x?x.translateToString(h,m,b):""}getWrappedRangeForLine(c){let h=c,m=c;for(;h>0&&this.lines.get(h).isWrapped;)h--;for(;m+1<this.lines.length&&this.lines.get(m+1).isWrapped;)m++;return{first:h,last:m}}setupTabStops(c){for(c!=null?this.tabs[c]||(c=this.prevStop(c)):(this.tabs={},c=0);c<this._cols;c+=this._optionsService.rawOptions.tabStopWidth)this.tabs[c]=!0}prevStop(c){for(c==null&&(c=this.x);!this.tabs[--c]&&c>0;);return c>=this._cols?this._cols-1:c<0?0:c}nextStop(c){for(c==null&&(c=this.x);!this.tabs[++c]&&c<this._cols;);return c>=this._cols?this._cols-1:c<0?0:c}clearMarkers(c){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].line===c&&(this.markers[h].dispose(),this.markers.splice(h--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].dispose(),this.markers.splice(c--,1);this._isClearing=!1}addMarker(c){const h=new n.Marker(c);return this.markers.push(h),h.register(this.lines.onTrim(m=>{h.line-=m,h.line<0&&h.dispose()})),h.register(this.lines.onInsert(m=>{h.line>=m.index&&(h.line+=m.amount)})),h.register(this.lines.onDelete(m=>{h.line>=m.index&&h.line<m.index+m.amount&&h.dispose(),h.line>m.index&&(h.line-=m.amount)})),h.register(h.onDispose(()=>this._removeMarker(h))),h}_removeMarker(c){this._isClearing||this.markers.splice(this.markers.indexOf(c),1)}}},8437:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const d=a(3734),v=a(511),u=a(643),p=a(482);s.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let C=0;class w{constructor(n,l,c=!1){this.isWrapped=c,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const h=l||v.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let m=0;m<n;++m)this.setCell(m,h);this.length=n}get(n){const l=this._data[3*n+0],c=2097151&l;return[this._data[3*n+1],2097152&l?this._combined[n]:c?(0,p.stringFromCodePoint)(c):"",l>>22,2097152&l?this._combined[n].charCodeAt(this._combined[n].length-1):c]}set(n,l){this._data[3*n+1]=l[u.CHAR_DATA_ATTR_INDEX],l[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=l[1],this._data[3*n+0]=2097152|n|l[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=l[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|l[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const l=this._data[3*n+0];return 2097152&l?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&l}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const l=this._data[3*n+0];return 2097152&l?this._combined[n]:2097151&l?(0,p.stringFromCodePoint)(2097151&l):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,l){return C=3*n,l.content=this._data[C+0],l.fg=this._data[C+1],l.bg=this._data[C+2],2097152&l.content&&(l.combinedData=this._combined[n]),268435456&l.bg&&(l.extended=this._extendedAttrs[n]),l}setCell(n,l){2097152&l.content&&(this._combined[n]=l.combinedData),268435456&l.bg&&(this._extendedAttrs[n]=l.extended),this._data[3*n+0]=l.content,this._data[3*n+1]=l.fg,this._data[3*n+2]=l.bg}setCellFromCodePoint(n,l,c,h,m,b){268435456&m&&(this._extendedAttrs[n]=b),this._data[3*n+0]=l|c<<22,this._data[3*n+1]=h,this._data[3*n+2]=m}addCodepointToCell(n,l){let c=this._data[3*n+0];2097152&c?this._combined[n]+=(0,p.stringFromCodePoint)(l):(2097151&c?(this._combined[n]=(0,p.stringFromCodePoint)(2097151&c)+(0,p.stringFromCodePoint)(l),c&=-2097152,c|=2097152):c=l|4194304,this._data[3*n+0]=c)}insertCells(n,l,c,h){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs),l<this.length-n){const m=new v.CellData;for(let b=this.length-n-l-1;b>=0;--b)this.setCell(n+l+b,this.loadCell(n+b,m));for(let b=0;b<l;++b)this.setCell(n+b,c)}else for(let m=n;m<this.length;++m)this.setCell(m,c);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs)}deleteCells(n,l,c,h){if(n%=this.length,l<this.length-n){const m=new v.CellData;for(let b=0;b<this.length-n-l;++b)this.setCell(n+b,this.loadCell(n+l+b,m));for(let b=this.length-l;b<this.length;++b)this.setCell(b,c)}else for(let m=n;m<this.length;++m)this.setCell(m,c);n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodePoint(n,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs)}replaceCells(n,l,c,h,m=!1){if(m)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodePoint(n-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs),l<this.length&&this.getWidth(l-1)===2&&!this.isProtected(l)&&this.setCellFromCodePoint(l,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs);n<l&&n<this.length;)this.isProtected(n)||this.setCell(n,c),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs),l<this.length&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new d.ExtendedAttrs);n<l&&n<this.length;)this.setCell(n++,c)}resize(n,l){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const c=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*c)this._data=new Uint32Array(this._data.buffer,0,c);else{const h=new Uint32Array(c);h.set(this._data),this._data=h}for(let h=this.length;h<n;++h)this.setCell(h,l)}else{this._data=this._data.subarray(0,c);const h=Object.keys(this._combined);for(let b=0;b<h.length;b++){const x=parseInt(h[b],10);x>=n&&delete this._combined[x]}const m=Object.keys(this._extendedAttrs);for(let b=0;b<m.length;b++){const x=parseInt(m[b],10);x>=n&&delete this._extendedAttrs[x]}}return this.length=n,4*c*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,l=!1){if(l)for(let c=0;c<this.length;++c)this.isProtected(c)||this.setCell(c,n);else{this._combined={},this._extendedAttrs={};for(let c=0;c<this.length;++c)this.setCell(c,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const l in n._combined)this._combined[l]=n._combined[l];this._extendedAttrs={};for(const l in n._extendedAttrs)this._extendedAttrs[l]=n._extendedAttrs[l];this.isWrapped=n.isWrapped}clone(){const n=new w(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const l in this._combined)n._combined[l]=this._combined[l];for(const l in this._extendedAttrs)n._extendedAttrs[l]=this._extendedAttrs[l];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,l,c,h,m){const b=n._data;if(m)for(let E=h-1;E>=0;E--){for(let S=0;S<3;S++)this._data[3*(c+E)+S]=b[3*(l+E)+S];268435456&b[3*(l+E)+2]&&(this._extendedAttrs[c+E]=n._extendedAttrs[l+E])}else for(let E=0;E<h;E++){for(let S=0;S<3;S++)this._data[3*(c+E)+S]=b[3*(l+E)+S];268435456&b[3*(l+E)+2]&&(this._extendedAttrs[c+E]=n._extendedAttrs[l+E])}const x=Object.keys(n._combined);for(let E=0;E<x.length;E++){const S=parseInt(x[E],10);S>=l&&(this._combined[S-l+c]=n._combined[S])}}translateToString(n=!1,l=0,c=this.length){n&&(c=Math.min(c,this.getTrimmedLength()));let h="";for(;l<c;){const m=this._data[3*l+0],b=2097151&m;h+=2097152&m?this._combined[l]:b?(0,p.stringFromCodePoint)(b):u.WHITESPACE_CELL_CHAR,l+=m>>22||1}return h}}s.BufferLine=w},4841:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(a,d){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return d*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(g,s)=>{function a(d,v,u){if(v===d.length-1)return d[v].getTrimmedLength();const p=!d[v].hasContent(u-1)&&d[v].getWidth(u-1)===1,C=d[v+1].getWidth(0)===2;return p&&C?u-1:u}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(d,v,u,p,C){const w=[];for(let _=0;_<d.length-1;_++){let n=_,l=d.get(++n);if(!l.isWrapped)continue;const c=[d.get(_)];for(;n<d.length&&l.isWrapped;)c.push(l),l=d.get(++n);if(p>=_&&p<n){_+=c.length-1;continue}let h=0,m=a(c,h,v),b=1,x=0;for(;b<c.length;){const S=a(c,b,v),y=S-x,L=u-m,A=Math.min(y,L);c[h].copyCellsFrom(c[b],x,m,A,!1),m+=A,m===u&&(h++,m=0),x+=A,x===S&&(b++,x=0),m===0&&h!==0&&c[h-1].getWidth(u-1)===2&&(c[h].copyCellsFrom(c[h-1],u-1,m++,1,!1),c[h-1].setCell(u-1,C))}c[h].replaceCells(m,u,C);let E=0;for(let S=c.length-1;S>0&&(S>h||c[S].getTrimmedLength()===0);S--)E++;E>0&&(w.push(_+c.length-E),w.push(E)),_+=c.length-1}return w},s.reflowLargerCreateNewLayout=function(d,v){const u=[];let p=0,C=v[p],w=0;for(let _=0;_<d.length;_++)if(C===_){const n=v[++p];d.onDeleteEmitter.fire({index:_-w,amount:n}),_+=n-1,w+=n,C=v[++p]}else u.push(_);return{layout:u,countRemoved:w}},s.reflowLargerApplyNewLayout=function(d,v){const u=[];for(let p=0;p<v.length;p++)u.push(d.get(v[p]));for(let p=0;p<u.length;p++)d.set(p,u[p]);d.length=v.length},s.reflowSmallerGetNewLineLengths=function(d,v,u){const p=[],C=d.map((l,c)=>a(d,c,v)).reduce((l,c)=>l+c);let w=0,_=0,n=0;for(;n<C;){if(C-n<u){p.push(C-n);break}w+=u;const l=a(d,_,v);w>l&&(w-=l,_++);const c=d[_].getWidth(w-1)===2;c&&w--;const h=c?u-1:u;p.push(h),n+=h}return p},s.getWrappedLineTrimmedLength=a},5295:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const d=a(8460),v=a(844),u=a(9092);class p extends v.Disposable{constructor(w,_){super(),this._optionsService=w,this._bufferService=_,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,_){this._normal.resize(w,_),this._alt.resize(w,_),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}s.BufferSet=p},511:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const d=a(482),v=a(643),u=a(3734);class p extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const _=new p;return _.setFromCharData(w),_}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let _=!1;if(w[v.CHAR_DATA_CHAR_INDEX].length>2)_=!0;else if(w[v.CHAR_DATA_CHAR_INDEX].length===2){const n=w[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const l=w[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(n-55296)+l-56320+65536|w[v.CHAR_DATA_WIDTH_INDEX]<<22:_=!0}else _=!0}else this.content=w[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[v.CHAR_DATA_WIDTH_INDEX]<<22;_&&(this.combinedData=w[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=p},643:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const d=a(8460),v=a(844);class u{get id(){return this._id}constructor(C){this.line=C,this.isDisposed=!1,this._disposables=[],this._id=u._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,v.disposeArray)(this._disposables),this._disposables.length=0)}register(C){return this._disposables.push(C),C}}s.Marker=u,u._nextId=1},7116:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},s.CHARSETS.A={"#":""},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},s.CHARSETS.C=s.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},s.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},s.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.E=s.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},s.CHARSETS.H=s.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(g,s)=>{var a,d,v;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL=""}(a||(s.C0=a={})),function(u){u.PAD="",u.HOP="",u.BPH="",u.NBH="",u.IND="",u.NEL="",u.SSA="",u.ESA="",u.HTS="",u.HTJ="",u.VTS="",u.PLD="",u.PLU="",u.RI="",u.SS2="",u.SS3="",u.DCS="",u.PU1="",u.PU2="",u.STS="",u.CCH="",u.MW="",u.SPA="",u.EPA="",u.SOS="",u.SGCI="",u.SCI="",u.CSI="",u.ST="",u.OSC="",u.PM="",u.APC=""}(d||(s.C1=d={})),function(u){u.ST=`${a.ESC}\\`}(v||(s.C1_ESCAPED=v={}))},7399:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const d=a(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(u,p,C,w){const _={type:0,cancel:!1,key:void 0},n=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:u.key==="UIKeyInputUpArrow"?_.key=p?d.C0.ESC+"OA":d.C0.ESC+"[A":u.key==="UIKeyInputLeftArrow"?_.key=p?d.C0.ESC+"OD":d.C0.ESC+"[D":u.key==="UIKeyInputRightArrow"?_.key=p?d.C0.ESC+"OC":d.C0.ESC+"[C":u.key==="UIKeyInputDownArrow"&&(_.key=p?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:if(u.altKey){_.key=d.C0.ESC+d.C0.DEL;break}_.key=d.C0.DEL;break;case 9:if(u.shiftKey){_.key=d.C0.ESC+"[Z";break}_.key=d.C0.HT,_.cancel=!0;break;case 13:_.key=u.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,_.cancel=!0;break;case 27:_.key=d.C0.ESC,u.altKey&&(_.key=d.C0.ESC+d.C0.ESC),_.cancel=!0;break;case 37:if(u.metaKey)break;n?(_.key=d.C0.ESC+"[1;"+(n+1)+"D",_.key===d.C0.ESC+"[1;3D"&&(_.key=d.C0.ESC+(C?"b":"[1;5D"))):_.key=p?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(u.metaKey)break;n?(_.key=d.C0.ESC+"[1;"+(n+1)+"C",_.key===d.C0.ESC+"[1;3C"&&(_.key=d.C0.ESC+(C?"f":"[1;5C"))):_.key=p?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(u.metaKey)break;n?(_.key=d.C0.ESC+"[1;"+(n+1)+"A",C||_.key!==d.C0.ESC+"[1;3A"||(_.key=d.C0.ESC+"[1;5A")):_.key=p?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(u.metaKey)break;n?(_.key=d.C0.ESC+"[1;"+(n+1)+"B",C||_.key!==d.C0.ESC+"[1;3B"||(_.key=d.C0.ESC+"[1;5B")):_.key=p?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(_.key=d.C0.ESC+"[2~");break;case 46:_.key=n?d.C0.ESC+"[3;"+(n+1)+"~":d.C0.ESC+"[3~";break;case 36:_.key=n?d.C0.ESC+"[1;"+(n+1)+"H":p?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:_.key=n?d.C0.ESC+"[1;"+(n+1)+"F":p?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:u.shiftKey?_.type=2:u.ctrlKey?_.key=d.C0.ESC+"[5;"+(n+1)+"~":_.key=d.C0.ESC+"[5~";break;case 34:u.shiftKey?_.type=3:u.ctrlKey?_.key=d.C0.ESC+"[6;"+(n+1)+"~":_.key=d.C0.ESC+"[6~";break;case 112:_.key=n?d.C0.ESC+"[1;"+(n+1)+"P":d.C0.ESC+"OP";break;case 113:_.key=n?d.C0.ESC+"[1;"+(n+1)+"Q":d.C0.ESC+"OQ";break;case 114:_.key=n?d.C0.ESC+"[1;"+(n+1)+"R":d.C0.ESC+"OR";break;case 115:_.key=n?d.C0.ESC+"[1;"+(n+1)+"S":d.C0.ESC+"OS";break;case 116:_.key=n?d.C0.ESC+"[15;"+(n+1)+"~":d.C0.ESC+"[15~";break;case 117:_.key=n?d.C0.ESC+"[17;"+(n+1)+"~":d.C0.ESC+"[17~";break;case 118:_.key=n?d.C0.ESC+"[18;"+(n+1)+"~":d.C0.ESC+"[18~";break;case 119:_.key=n?d.C0.ESC+"[19;"+(n+1)+"~":d.C0.ESC+"[19~";break;case 120:_.key=n?d.C0.ESC+"[20;"+(n+1)+"~":d.C0.ESC+"[20~";break;case 121:_.key=n?d.C0.ESC+"[21;"+(n+1)+"~":d.C0.ESC+"[21~";break;case 122:_.key=n?d.C0.ESC+"[23;"+(n+1)+"~":d.C0.ESC+"[23~";break;case 123:_.key=n?d.C0.ESC+"[24;"+(n+1)+"~":d.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(C&&!w||!u.altKey||u.metaKey)!C||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&u.key.length===1?_.key=u.key:u.key&&u.ctrlKey&&(u.key==="_"&&(_.key=d.C0.US),u.key==="@"&&(_.key=d.C0.NUL)):u.keyCode===65&&(_.type=1);else{const l=v[u.keyCode],c=l==null?void 0:l[u.shiftKey?1:0];if(c)_.key=d.C0.ESC+c;else if(u.keyCode>=65&&u.keyCode<=90){const h=u.ctrlKey?u.keyCode-64:u.keyCode+32;let m=String.fromCharCode(h);u.shiftKey&&(m=m.toUpperCase()),_.key=d.C0.ESC+m}else if(u.keyCode===32)_.key=d.C0.ESC+(u.ctrlKey?d.C0.NUL:" ");else if(u.key==="Dead"&&u.code.startsWith("Key")){let h=u.code.slice(3,4);u.shiftKey||(h=h.toLowerCase()),_.key=d.C0.ESC+h,_.cancel=!0}}else u.keyCode>=65&&u.keyCode<=90?_.key=String.fromCharCode(u.keyCode-64):u.keyCode===32?_.key=d.C0.NUL:u.keyCode>=51&&u.keyCode<=55?_.key=String.fromCharCode(u.keyCode-51+27):u.keyCode===56?_.key=d.C0.DEL:u.keyCode===219?_.key=d.C0.ESC:u.keyCode===220?_.key=d.C0.FS:u.keyCode===221&&(_.key=d.C0.GS)}return _}},482:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,d=0,v=a.length){let u="";for(let p=d;p<v;++p){let C=a[p];C>65535?(C-=65536,u+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):u+=String.fromCharCode(C)}return u},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,d){const v=a.length;if(!v)return 0;let u=0,p=0;if(this._interim){const C=a.charCodeAt(p++);56320<=C&&C<=57343?d[u++]=1024*(this._interim-55296)+C-56320+65536:(d[u++]=this._interim,d[u++]=C),this._interim=0}for(let C=p;C<v;++C){const w=a.charCodeAt(C);if(55296<=w&&w<=56319){if(++C>=v)return this._interim=w,u;const _=a.charCodeAt(C);56320<=_&&_<=57343?d[u++]=1024*(w-55296)+_-56320+65536:(d[u++]=w,d[u++]=_)}else w!==65279&&(d[u++]=w)}return u}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,d){const v=a.length;if(!v)return 0;let u,p,C,w,_=0,n=0,l=0;if(this.interim[0]){let m=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let x,E=0;for(;(x=63&this.interim[++E])&&E<4;)b<<=6,b|=x;const S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=S-E;for(;l<y;){if(l>=v)return 0;if(x=a[l++],(192&x)!=128){l--,m=!0;break}this.interim[E++]=x,b<<=6,b|=63&x}m||(S===2?b<128?l--:d[_++]=b:S===3?b<2048||b>=55296&&b<=57343||b===65279||(d[_++]=b):b<65536||b>1114111||(d[_++]=b)),this.interim.fill(0)}const c=v-4;let h=l;for(;h<v;){for(;!(!(h<c)||128&(u=a[h])||128&(p=a[h+1])||128&(C=a[h+2])||128&(w=a[h+3]));)d[_++]=u,d[_++]=p,d[_++]=C,d[_++]=w,h+=4;if(u=a[h++],u<128)d[_++]=u;else if((224&u)==192){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(n=(31&u)<<6|63&p,n<128){h--;continue}d[_++]=n}else if((240&u)==224){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,_;if(C=a[h++],(192&C)!=128){h--;continue}if(n=(15&u)<<12|(63&p)<<6|63&C,n<2048||n>=55296&&n<=57343||n===65279)continue;d[_++]=n}else if((248&u)==240){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,_;if(C=a[h++],(192&C)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,this.interim[2]=C,_;if(w=a[h++],(192&w)!=128){h--;continue}if(n=(7&u)<<18|(63&p)<<12|(63&C)<<6|63&w,n<65536||n>1114111)continue;d[_++]=n}}return _}}},225:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let v;s.UnicodeV6=class{constructor(){if(this.version="6",!v){v=new Uint8Array(65536),v.fill(1),v[0]=0,v.fill(0,1,32),v.fill(0,127,160),v.fill(2,4352,4448),v[9001]=2,v[9002]=2,v.fill(2,11904,42192),v[12351]=1,v.fill(2,44032,55204),v.fill(2,63744,64256),v.fill(2,65040,65050),v.fill(2,65072,65136),v.fill(2,65280,65377),v.fill(2,65504,65511);for(let u=0;u<a.length;++u)v.fill(0,a[u][0],a[u][1]+1)}}wcwidth(u){return u<32?0:u<127?1:u<65536?v[u]:function(p,C){let w,_=0,n=C.length-1;if(p<C[0][0]||p>C[n][1])return!1;for(;n>=_;)if(w=_+n>>1,p>C[w][1])_=w+1;else{if(!(p<C[w][0]))return!0;n=w-1}return!1}(u,d)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1}}},5981:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const d=a(8460),v=a(844);class u extends v.Disposable{constructor(C){super(),this._action=C,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(C,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let _;for(this._isSyncWriting=!0;_=this._writeBuffer.shift();){this._action(_);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(C,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(w),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(w)}_innerWrite(C=0,w=!0){const _=C||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],l=this._action(n,w);if(l){const h=m=>Date.now()-_>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(_,m);return void l.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(h)}const c=this._callbacks[this._bufferOffset];if(c&&c(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-_>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=u},5941:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function v(u,p){const C=u.toString(16),w=C.length<2?"0"+C:C;switch(p){case 4:return C[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}s.parseColor=function(u){if(!u)return;let p=u.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);const C=a.exec(p);if(C){const w=C[1]?15:C[4]?255:C[7]?4095:65535;return[Math.round(parseInt(C[1]||C[4]||C[7]||C[10],16)/w*255),Math.round(parseInt(C[2]||C[5]||C[8]||C[11],16)/w*255),Math.round(parseInt(C[3]||C[6]||C[9]||C[12],16)/w*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),d.exec(p)&&[3,6,9,12].includes(p.length))){const C=p.length/3,w=[0,0,0];for(let _=0;_<3;++_){const n=parseInt(p.slice(C*_,C*_+C),16);w[_]=C===1?n<<4:C===2?n:C===3?n>>4:n>>8}return w}},s.toRgbString=function(u,p=16){const[C,w,_]=u;return`rgb:${v(C,p)}/${v(w,p)}/${v(_,p)}`}},5770:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const d=a(482),v=a(8742),u=a(5770),p=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(w,_){this._handlers[w]===void 0&&(this._handlers[w]=[]);const n=this._handlers[w];return n.push(_),{dispose:()=>{const l=n.indexOf(_);l!==-1&&n.splice(l,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(w,_){if(this.reset(),this._ident=w,this._active=this._handlers[w]||p,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(_);else this._handlerFb(this._ident,"HOOK",_)}put(w,_,n){if(this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].put(w,_,n);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(w,_,n))}unhook(w,_=!0){if(this._active.length){let n=!1,l=this._active.length-1,c=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,n=_,c=this._stack.fallThrough,this._stack.paused=!1),!c&&n===!1){for(;l>=0&&(n=this._active[l].unhook(w),n!==!0);l--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,n;l--}for(;l>=0;l--)if(n=this._active[l].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",w);this._active=p,this._ident=0}};const C=new v.Params;C.addParam(0),s.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=C,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():C,this._data="",this._hitLimit=!1}put(w,_,n){this._hitLimit||(this._data+=(0,d.utf32ToString)(w,_,n),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let _=!1;if(this._hitLimit)_=!1;else if(w&&(_=this._handler(this._data,this._params),_ instanceof Promise))return _.then(n=>(this._params=C,this._data="",this._hitLimit=!1,n));return this._params=C,this._data="",this._hitLimit=!1,_}}},2015:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const d=a(844),v=a(8742),u=a(6242),p=a(6351);class C{constructor(l){this.table=new Uint8Array(l)}setDefault(l,c){this.table.fill(l<<4|c)}add(l,c,h,m){this.table[c<<8|l]=h<<4|m}addMany(l,c,h,m){for(let b=0;b<l.length;b++)this.table[c<<8|l[b]]=h<<4|m}}s.TransitionTable=C;const w=160;s.VT500_TRANSITION_TABLE=function(){const n=new C(4095),l=Array.apply(null,Array(256)).map((E,S)=>S),c=(E,S)=>l.slice(E,S),h=c(32,127),m=c(0,24);m.push(25),m.push.apply(m,c(28,32));const b=c(0,14);let x;for(x in n.setDefault(1,0),n.addMany(h,0,2,0),b)n.addMany([24,26,153,154],x,3,0),n.addMany(c(128,144),x,3,0),n.addMany(c(144,152),x,3,0),n.add(156,x,0,0),n.add(27,x,11,1),n.add(157,x,4,8),n.addMany([152,158,159],x,0,7),n.add(155,x,11,3),n.add(144,x,11,9);return n.addMany(m,0,3,0),n.addMany(m,1,3,1),n.add(127,1,0,1),n.addMany(m,8,0,8),n.addMany(m,3,3,3),n.add(127,3,0,3),n.addMany(m,4,3,4),n.add(127,4,0,4),n.addMany(m,6,3,6),n.addMany(m,5,3,5),n.add(127,5,0,5),n.addMany(m,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(h,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(c(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(h,7,0,7),n.addMany(m,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(c(64,127),3,7,0),n.addMany(c(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(c(48,60),4,8,4),n.addMany(c(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(c(32,64),6,0,6),n.add(127,6,0,6),n.addMany(c(64,127),6,0,0),n.addMany(c(32,48),3,9,5),n.addMany(c(32,48),5,9,5),n.addMany(c(48,64),5,0,6),n.addMany(c(64,127),5,7,0),n.addMany(c(32,48),4,9,5),n.addMany(c(32,48),1,9,2),n.addMany(c(32,48),2,9,2),n.addMany(c(48,127),2,10,0),n.addMany(c(48,80),1,10,0),n.addMany(c(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(c(96,127),1,10,0),n.add(80,1,11,9),n.addMany(m,9,0,9),n.add(127,9,0,9),n.addMany(c(28,32),9,0,9),n.addMany(c(32,48),9,9,12),n.addMany(c(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(m,11,0,11),n.addMany(c(32,128),11,0,11),n.addMany(c(28,32),11,0,11),n.addMany(m,10,0,10),n.add(127,10,0,10),n.addMany(c(28,32),10,0,10),n.addMany(c(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(c(32,48),10,9,12),n.addMany(m,12,0,12),n.add(127,12,0,12),n.addMany(c(28,32),12,0,12),n.addMany(c(32,48),12,9,12),n.addMany(c(48,64),12,0,11),n.addMany(c(64,127),12,12,13),n.addMany(c(64,127),10,12,13),n.addMany(c(64,127),9,12,13),n.addMany(m,13,13,13),n.addMany(h,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(w,0,2,0),n.add(w,8,5,8),n.add(w,6,0,6),n.add(w,11,0,11),n.add(w,13,13,13),n}();class _ extends d.Disposable{constructor(l=s.VT500_TRANSITION_TABLE){super(),this._transitions=l,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new v.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(c,h,m)=>{},this._executeHandlerFb=c=>{},this._csiHandlerFb=(c,h)=>{},this._escHandlerFb=c=>{},this._errorHandlerFb=c=>c,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new u.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(l,c=[64,126]){let h=0;if(l.prefix){if(l.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=l.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(l.intermediates){if(l.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let b=0;b<l.intermediates.length;++b){const x=l.intermediates.charCodeAt(b);if(32>x||x>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=x}}if(l.final.length!==1)throw new Error("final must be a single byte");const m=l.final.charCodeAt(0);if(c[0]>m||m>c[1])throw new Error(`final must be in range ${c[0]} .. ${c[1]}`);return h<<=8,h|=m,h}identToString(l){const c=[];for(;l;)c.push(String.fromCharCode(255&l)),l>>=8;return c.reverse().join("")}setPrintHandler(l){this._printHandler=l}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(l,c){const h=this._identifier(l,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);const m=this._escHandlers[h];return m.push(c),{dispose:()=>{const b=m.indexOf(c);b!==-1&&m.splice(b,1)}}}clearEscHandler(l){this._escHandlers[this._identifier(l,[48,126])]&&delete this._escHandlers[this._identifier(l,[48,126])]}setEscHandlerFallback(l){this._escHandlerFb=l}setExecuteHandler(l,c){this._executeHandlers[l.charCodeAt(0)]=c}clearExecuteHandler(l){this._executeHandlers[l.charCodeAt(0)]&&delete this._executeHandlers[l.charCodeAt(0)]}setExecuteHandlerFallback(l){this._executeHandlerFb=l}registerCsiHandler(l,c){const h=this._identifier(l);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);const m=this._csiHandlers[h];return m.push(c),{dispose:()=>{const b=m.indexOf(c);b!==-1&&m.splice(b,1)}}}clearCsiHandler(l){this._csiHandlers[this._identifier(l)]&&delete this._csiHandlers[this._identifier(l)]}setCsiHandlerFallback(l){this._csiHandlerFb=l}registerDcsHandler(l,c){return this._dcsParser.registerHandler(this._identifier(l),c)}clearDcsHandler(l){this._dcsParser.clearHandler(this._identifier(l))}setDcsHandlerFallback(l){this._dcsParser.setHandlerFallback(l)}registerOscHandler(l,c){return this._oscParser.registerHandler(l,c)}clearOscHandler(l){this._oscParser.clearHandler(l)}setOscHandlerFallback(l){this._oscParser.setHandlerFallback(l)}setErrorHandler(l){this._errorHandler=l}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(l,c,h,m,b){this._parseStack.state=l,this._parseStack.handlers=c,this._parseStack.handlerPos=h,this._parseStack.transition=m,this._parseStack.chunkPos=b}parse(l,c,h){let m,b=0,x=0,E=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,E=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const S=this._parseStack.handlers;let y=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&y>-1){for(;y>=0&&(m=S[y](this._params),m!==!0);y--)if(m instanceof Promise)return this._parseStack.handlerPos=y,m}this._parseStack.handlers=[];break;case 4:if(h===!1&&y>-1){for(;y>=0&&(m=S[y](),m!==!0);y--)if(m instanceof Promise)return this._parseStack.handlerPos=y,m}this._parseStack.handlers=[];break;case 6:if(b=l[this._parseStack.chunkPos],m=this._dcsParser.unhook(b!==24&&b!==26,h),m)return m;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(b=l[this._parseStack.chunkPos],m=this._oscParser.end(b!==24&&b!==26,h),m)return m;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,E=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let S=E;S<c;++S){switch(b=l[S],x=this._transitions.table[this.currentState<<8|(b<160?b:w)],x>>4){case 2:for(let D=S+1;;++D){if(D>=c||(b=l[D])<32||b>126&&b<w){this._printHandler(l,S,D),S=D-1;break}if(++D>=c||(b=l[D])<32||b>126&&b<w){this._printHandler(l,S,D),S=D-1;break}if(++D>=c||(b=l[D])<32||b>126&&b<w){this._printHandler(l,S,D),S=D-1;break}if(++D>=c||(b=l[D])<32||b>126&&b<w){this._printHandler(l,S,D),S=D-1;break}}break;case 3:this._executeHandlers[b]?this._executeHandlers[b]():this._executeHandlerFb(b),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:S,code:b,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const y=this._csiHandlers[this._collect<<8|b];let L=y?y.length-1:-1;for(;L>=0&&(m=y[L](this._params),m!==!0);L--)if(m instanceof Promise)return this._preserveStack(3,y,L,x,S),m;L<0&&this._csiHandlerFb(this._collect<<8|b,this._params),this.precedingCodepoint=0;break;case 8:do switch(b){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(b-48)}while(++S<c&&(b=l[S])>47&&b<60);S--;break;case 9:this._collect<<=8,this._collect|=b;break;case 10:const A=this._escHandlers[this._collect<<8|b];let k=A?A.length-1:-1;for(;k>=0&&(m=A[k](),m!==!0);k--)if(m instanceof Promise)return this._preserveStack(4,A,k,x,S),m;k<0&&this._escHandlerFb(this._collect<<8|b),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|b,this._params);break;case 13:for(let D=S+1;;++D)if(D>=c||(b=l[D])===24||b===26||b===27||b>127&&b<w){this._dcsParser.put(l,S,D),S=D-1;break}break;case 14:if(m=this._dcsParser.unhook(b!==24&&b!==26),m)return this._preserveStack(6,[],0,x,S),m;b===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let D=S+1;;D++)if(D>=c||(b=l[D])<32||b>127&&b<w){this._oscParser.put(l,S,D),S=D-1;break}break;case 6:if(m=this._oscParser.end(b!==24&&b!==26),m)return this._preserveStack(5,[],0,x,S),m;b===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&x}}}s.EscapeSequenceParser=_},6242:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const d=a(5770),v=a(482),u=[];s.OscParser=class{constructor(){this._state=0,this._active=u,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,C){this._handlers[p]===void 0&&(this._handlers[p]=[]);const w=this._handlers[p];return w.push(C),{dispose:()=>{const _=w.indexOf(C);_!==-1&&w.splice(_,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=u,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||u,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,C,w){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(p,C,w);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(p,C,w))}start(){this.reset(),this._state=1}put(p,C,w){if(this._state!==3){if(this._state===1)for(;C<w;){const _=p[C++];if(_===59){this._state=2,this._start();break}if(_<48||57<_)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+_-48}this._state===2&&w-C>0&&this._put(p,C,w)}}end(p,C=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,_=this._active.length-1,n=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,w=C,n=this._stack.fallThrough,this._stack.paused=!1),!n&&w===!1){for(;_>=0&&(w=this._active[_].end(p),w!==!0);_--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,w;_--}for(;_>=0;_--)if(w=this._active[_].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",p);this._active=u,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,C,w){this._hitLimit||(this._data+=(0,v.utf32ToString)(p,C,w),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let C=!1;if(this._hitLimit)C=!1;else if(p&&(C=this._handler(this._data),C instanceof Promise))return C.then(w=>(this._data="",this._hitLimit=!1,w));return this._data="",this._hitLimit=!1,C}}},8742:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const a=2147483647;class d{static fromArray(u){const p=new d;if(!u.length)return p;for(let C=Array.isArray(u[0])?1:0;C<u.length;++C){const w=u[C];if(Array.isArray(w))for(let _=0;_<w.length;++_)p.addSubParam(w[_]);else p.addParam(w)}return p}constructor(u=32,p=32){if(this.maxLength=u,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const u=new d(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u}toArray(){const u=[];for(let p=0;p<this.length;++p){u.push(this.params[p]);const C=this._subParamsIdx[p]>>8,w=255&this._subParamsIdx[p];w-C>0&&u.push(Array.prototype.slice.call(this._subParams,C,w))}return u}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>a?a:u}}addSubParam(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>a?a:u,this._subParamsIdx[this.length-1]++}}hasSubParams(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0}getSubParams(u){const p=this._subParamsIdx[u]>>8,C=255&this._subParamsIdx[u];return C-p>0?this._subParams.subarray(p,C):null}getSubParamsAll(){const u={};for(let p=0;p<this.length;++p){const C=this._subParamsIdx[p]>>8,w=255&this._subParamsIdx[p];w-C>0&&(u[p]=this._subParams.slice(C,w))}return u}addDigit(u){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const C=this._digitIsSub?this._subParams:this.params,w=C[p-1];C[p-1]=~w?Math.min(10*w+u,a):u}}s.Params=d},5741:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,d){const v={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(v),d.dispose=()=>this._wrappedAddonDispose(v),d.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let d=-1;for(let v=0;v<this._addons.length;v++)if(this._addons[v]===a){d=v;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(d,1)}}},8771:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const d=a(3785),v=a(511);s.BufferApiView=class{constructor(u,p){this._buffer=u,this.type=p}init(u){return this._buffer=u,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(u){const p=this._buffer.lines.get(u);if(p)return new d.BufferLineApiView(p)}getNullCell(){return new v.CellData}}},3785:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const d=a(511);s.BufferLineApiView=class{constructor(v){this._line=v}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(v,u){if(!(v<0||v>=this._line.length))return u?(this._line.loadCell(v,u),u):this._line.loadCell(v,new d.CellData)}translateToString(v,u,p){return this._line.translateToString(v,u,p)}}},8285:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const d=a(8771),v=a(8460),u=a(844);class p extends u.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new v.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=p},7975:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,d){return this._core.registerCsiHandler(a,v=>d(v.toArray()))}addCsiHandler(a,d){return this.registerCsiHandler(a,d)}registerDcsHandler(a,d){return this._core.registerDcsHandler(a,(v,u)=>d(v,u.toArray()))}addDcsHandler(a,d){return this.registerDcsHandler(a,d)}registerEscHandler(a,d){return this._core.registerEscHandler(a,d)}addEscHandler(a,d){return this.registerEscHandler(a,d)}registerOscHandler(a,d){return this._core.registerOscHandler(a,d)}addOscHandler(a,d){return this.registerOscHandler(a,d)}}},7090:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(g,s,a){var d=this&&this.__decorate||function(n,l,c,h){var m,b=arguments.length,x=b<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,l,c,h);else for(var E=n.length-1;E>=0;E--)(m=n[E])&&(x=(b<3?m(x):b>3?m(l,c,x):m(l,c))||x);return b>3&&x&&Object.defineProperty(l,c,x),x},v=this&&this.__param||function(n,l){return function(c,h){l(c,h,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const u=a(8460),p=a(844),C=a(5295),w=a(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let _=s.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new C.BufferSet(n,this))}resize(n,l){this.cols=n,this.rows=l,this.buffers.resize(n,l),this._onResize.fire({cols:n,rows:l})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,l=!1){const c=this.buffer;let h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===n.fg&&h.getBg(0)===n.bg||(h=c.getBlankLine(n,l),this._cachedBlankLine=h),h.isWrapped=l;const m=c.ybase+c.scrollTop,b=c.ybase+c.scrollBottom;if(c.scrollTop===0){const x=c.lines.isFull;b===c.lines.length-1?x?c.lines.recycle().copyFrom(h):c.lines.push(h.clone()):c.lines.splice(b+1,0,h.clone()),x?this.isUserScrolling&&(c.ydisp=Math.max(c.ydisp-1,0)):(c.ybase++,this.isUserScrolling||c.ydisp++)}else{const x=b-m+1;c.lines.shiftElements(m+1,x-1,-1),c.lines.set(b,h.clone())}this.isUserScrolling||(c.ydisp=c.ybase),this._onScroll.fire(c.ydisp)}scrollLines(n,l,c){const h=this.buffer;if(n<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else n+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);const m=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+n,h.ybase),0),m!==h.ydisp&&(l||this._onScroll.fire(h.ydisp))}};s.BufferService=_=d([v(0,w.IOptionsService)],_)},7994:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,d){this._charsets[a]=d,this.glevel===a&&(this.charset=d)}}},1753:function(g,s,a){var d=this&&this.__decorate||function(h,m,b,x){var E,S=arguments.length,y=S<3?m:x===null?x=Object.getOwnPropertyDescriptor(m,b):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(h,m,b,x);else for(var L=h.length-1;L>=0;L--)(E=h[L])&&(y=(S<3?E(y):S>3?E(m,b,y):E(m,b))||y);return S>3&&y&&Object.defineProperty(m,b,y),y},v=this&&this.__param||function(h,m){return function(b,x){m(b,x,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const u=a(2585),p=a(8460),C=a(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function _(h,m){let b=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(b|=64,b|=h.action):(b|=3&h.button,4&h.button&&(b|=64),8&h.button&&(b|=128),h.action===32?b|=32:h.action!==0||m||(b|=3)),b}const n=String.fromCharCode,l={DEFAULT:h=>{const m=[_(h,!1)+32,h.col+32,h.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${n(m[0])}${n(m[1])}${n(m[2])}`},SGR:h=>{const m=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${_(h,!0)};${h.col};${h.row}${m}`},SGR_PIXELS:h=>{const m=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${_(h,!0)};${h.x};${h.y}${m}`}};let c=s.CoreMouseService=class extends C.Disposable{constructor(h,m){super(),this._bufferService=h,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const b of Object.keys(w))this.addProtocol(b,w[b]);for(const b of Object.keys(l))this.addEncoding(b,l[b]);this.reset()}addProtocol(h,m){this._protocols[h]=m}addEncoding(h,m){this._encodings[h]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;const m=this._encodings[this._activeEncoding](h);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,m,b){if(b){if(h.x!==m.x||h.y!==m.y)return!1}else if(h.col!==m.col||h.row!==m.row)return!1;return h.button===m.button&&h.action===m.action&&h.ctrl===m.ctrl&&h.alt===m.alt&&h.shift===m.shift}};s.CoreMouseService=c=d([v(0,u.IBufferService),v(1,u.ICoreService)],c)},6975:function(g,s,a){var d=this&&this.__decorate||function(c,h,m,b){var x,E=arguments.length,S=E<3?h:b===null?b=Object.getOwnPropertyDescriptor(h,m):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,h,m,b);else for(var y=c.length-1;y>=0;y--)(x=c[y])&&(S=(E<3?x(S):E>3?x(h,m,S):x(h,m))||S);return E>3&&S&&Object.defineProperty(h,m,S),S},v=this&&this.__param||function(c,h){return function(m,b){h(m,b,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const u=a(1439),p=a(8460),C=a(844),w=a(2585),_=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let l=s.CoreService=class extends C.Disposable{constructor(c,h,m){super(),this._bufferService=c,this._logService=h,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,u.clone)(_),this.decPrivateModes=(0,u.clone)(n)}reset(){this.modes=(0,u.clone)(_),this.decPrivateModes=(0,u.clone)(n)}triggerDataEvent(c,h=!1){if(this._optionsService.rawOptions.disableStdin)return;const m=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${c}"`,()=>c.split("").map(b=>b.charCodeAt(0))),this._onData.fire(c)}triggerBinaryEvent(c){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${c}"`,()=>c.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(c))}};s.CoreService=l=d([v(0,w.IBufferService),v(1,w.ILogService),v(2,w.IOptionsService)],l)},9074:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const d=a(8055),v=a(8460),u=a(844),p=a(6106);let C=0,w=0;class _ extends u.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(c=>c==null?void 0:c.marker.line),this._onDecorationRegistered=this.register(new v.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new v.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,u.toDisposable)(()=>this.reset()))}registerDecoration(c){if(c.marker.isDisposed)return;const h=new n(c);if(h){const m=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),m.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(const c of this._decorations.values())c.dispose();this._decorations.clear()}*getDecorationsAtCell(c,h,m){var b,x,E;let S=0,y=0;for(const L of this._decorations.getKeyIterator(h))S=(b=L.options.x)!==null&&b!==void 0?b:0,y=S+((x=L.options.width)!==null&&x!==void 0?x:1),c>=S&&c<y&&(!m||((E=L.options.layer)!==null&&E!==void 0?E:"bottom")===m)&&(yield L)}forEachDecorationAtCell(c,h,m,b){this._decorations.forEachByKey(h,x=>{var E,S,y;C=(E=x.options.x)!==null&&E!==void 0?E:0,w=C+((S=x.options.width)!==null&&S!==void 0?S:1),c>=C&&c<w&&(!m||((y=x.options.layer)!==null&&y!==void 0?y:"bottom")===m)&&b(x)})}}s.DecorationService=_;class n extends u.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(c){super(),this.options=c,this.onRenderEmitter=this.register(new v.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=c.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const d=a(2585),v=a(8343);class u{constructor(...C){this._entries=new Map;for(const[w,_]of C)this.set(w,_)}set(C,w){const _=this._entries.get(C);return this._entries.set(C,w),_}forEach(C){for(const[w,_]of this._entries.entries())C(w,_)}has(C){return this._entries.has(C)}get(C){return this._entries.get(C)}}s.ServiceCollection=u,s.InstantiationService=class{constructor(){this._services=new u,this._services.set(d.IInstantiationService,this)}setService(p,C){this._services.set(p,C)}getService(p){return this._services.get(p)}createInstance(p,...C){const w=(0,v.getServiceDependencies)(p).sort((l,c)=>l.index-c.index),_=[];for(const l of w){const c=this._services.get(l.id);if(!c)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${l.id}.`);_.push(c)}const n=w.length>0?w[0].index:C.length;if(C.length!==n)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${n+1} conflicts with ${C.length} static arguments`);return new p(...C,..._)}}},7866:function(g,s,a){var d=this&&this.__decorate||function(n,l,c,h){var m,b=arguments.length,x=b<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,l,c,h);else for(var E=n.length-1;E>=0;E--)(m=n[E])&&(x=(b<3?m(x):b>3?m(l,c,x):m(l,c))||x);return b>3&&x&&Object.defineProperty(l,c,x),x},v=this&&this.__param||function(n,l){return function(c,h){l(c,h,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const u=a(844),p=a(2585),C={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let w,_=s.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=C[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let l=0;l<n.length;l++)typeof n[l]=="function"&&(n[l]=n[l]())}_log(n,l,c){this._evalLazyOptionalParams(c),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+l,...c)}trace(n,...l){var c,h;this._logLevel<=p.LogLevelEnum.TRACE&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.trace.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,n,l)}debug(n,...l){var c,h;this._logLevel<=p.LogLevelEnum.DEBUG&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.debug.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,n,l)}info(n,...l){var c,h;this._logLevel<=p.LogLevelEnum.INFO&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.info.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.info,n,l)}warn(n,...l){var c,h;this._logLevel<=p.LogLevelEnum.WARN&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.warn.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.warn,n,l)}error(n,...l){var c,h;this._logLevel<=p.LogLevelEnum.ERROR&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.error.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.error,n,l)}};s.LogService=_=d([v(0,p.IOptionsService)],_),s.setTraceLogger=function(n){w=n},s.traceCall=function(n,l,c){if(typeof c.value!="function")throw new Error("not supported");const h=c.value;c.value=function(...m){if(w.logLevel!==p.LogLevelEnum.TRACE)return h.apply(this,m);w.trace(`GlyphRenderer#${h.name}(${m.map(x=>JSON.stringify(x)).join(", ")})`);const b=h.apply(this,m);return w.trace(`GlyphRenderer#${h.name} return`,b),b}}},7302:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const d=a(8460),v=a(844),u=a(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const p=["normal","bold","100","200","300","400","500","600","700","800","900"];class C extends v.Disposable{constructor(_){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n=Object.assign({},s.DEFAULT_OPTIONS);for(const l in _)if(l in n)try{const c=_[l];n[l]=this._sanitizeAndValidateOption(l,c)}catch(c){console.error(c)}this.rawOptions=n,this.options=Object.assign({},n),this._setupOptions()}onSpecificOptionChange(_,n){return this.onOptionChange(l=>{l===_&&n(this.rawOptions[_])})}onMultipleOptionChange(_,n){return this.onOptionChange(l=>{_.indexOf(l)!==-1&&n()})}_setupOptions(){const _=l=>{if(!(l in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);return this.rawOptions[l]},n=(l,c)=>{if(!(l in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);c=this._sanitizeAndValidateOption(l,c),this.rawOptions[l]!==c&&(this.rawOptions[l]=c,this._onOptionChange.fire(l))};for(const l in this.rawOptions){const c={get:_.bind(this,l),set:n.bind(this,l)};Object.defineProperty(this.options,l,c)}}_sanitizeAndValidateOption(_,n){switch(_){case"cursorStyle":if(n||(n=s.DEFAULT_OPTIONS[_]),!function(l){return l==="block"||l==="underline"||l==="bar"}(n))throw new Error(`"${n}" is not a valid value for ${_}`);break;case"wordSeparator":n||(n=s.DEFAULT_OPTIONS[_]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=p.includes(n)?n:s.DEFAULT_OPTIONS[_];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${_} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${_} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${_} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${_} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}s.OptionsService=C},2660:function(g,s,a){var d=this&&this.__decorate||function(C,w,_,n){var l,c=arguments.length,h=c<3?w:n===null?n=Object.getOwnPropertyDescriptor(w,_):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(C,w,_,n);else for(var m=C.length-1;m>=0;m--)(l=C[m])&&(h=(c<3?l(h):c>3?l(w,_,h):l(w,_))||h);return c>3&&h&&Object.defineProperty(w,_,h),h},v=this&&this.__param||function(C,w){return function(_,n){w(_,n,C)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const u=a(2585);let p=s.OscLinkService=class{constructor(C){this._bufferService=C,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(C){const w=this._bufferService.buffer;if(C.id===void 0){const m=w.addMarker(w.ybase+w.y),b={data:C,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(b,m)),this._dataByLinkId.set(b.id,b),b.id}const _=C,n=this._getEntryIdKey(_),l=this._entriesWithId.get(n);if(l)return this.addLineToLink(l.id,w.ybase+w.y),l.id;const c=w.addMarker(w.ybase+w.y),h={id:this._nextId++,key:this._getEntryIdKey(_),data:_,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(h,c)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(C,w){const _=this._dataByLinkId.get(C);if(_&&_.lines.every(n=>n.line!==w)){const n=this._bufferService.buffer.addMarker(w);_.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(_,n))}}getLinkData(C){var w;return(w=this._dataByLinkId.get(C))===null||w===void 0?void 0:w.data}_getEntryIdKey(C){return`${C.id};;${C.uri}`}_removeMarkerFromLink(C,w){const _=C.lines.indexOf(w);_!==-1&&(C.lines.splice(_,1),C.lines.length===0&&(C.data.id!==void 0&&this._entriesWithId.delete(C.key),this._dataByLinkId.delete(C.id)))}};s.OscLinkService=p=d([v(0,u.IBufferService)],p)},8343:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const a="di$target",d="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(v){return v[d]||[]},s.createDecorator=function(v){if(s.serviceRegistry.has(v))return s.serviceRegistry.get(v);const u=function(p,C,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(_,n,l){n[a]===n?n[d].push({id:_,index:l}):(n[d]=[{id:_,index:l}],n[a]=n)})(u,p,w)};return u.toString=()=>v,s.serviceRegistry.set(v,u),u}},2585:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const d=a(8343);var v;s.IBufferService=(0,d.createDecorator)("BufferService"),s.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),s.ICoreService=(0,d.createDecorator)("CoreService"),s.ICharsetService=(0,d.createDecorator)("CharsetService"),s.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(v||(s.LogLevelEnum=v={})),s.ILogService=(0,d.createDecorator)("LogService"),s.IOptionsService=(0,d.createDecorator)("OptionsService"),s.IOscLinkService=(0,d.createDecorator)("OscLinkService"),s.IUnicodeService=(0,d.createDecorator)("UnicodeService"),s.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const d=a(8460),v=a(225);s.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;const u=new v.UnicodeV6;this.register(u),this._active=u.version,this._activeProvider=u}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(u){if(!this._providers[u])throw new Error(`unknown Unicode version "${u}"`);this._active=u,this._activeProvider=this._providers[u],this._onChange.fire(u)}register(u){this._providers[u.version]=u}wcwidth(u){return this._activeProvider.wcwidth(u)}getStringCellWidth(u){let p=0;const C=u.length;for(let w=0;w<C;++w){let _=u.charCodeAt(w);if(55296<=_&&_<=56319){if(++w>=C)return p+this.wcwidth(_);const n=u.charCodeAt(w);56320<=n&&n<=57343?_=1024*(_-55296)+n-56320+65536:p+=this.wcwidth(n)}p+=this.wcwidth(_)}return p}}}},i={};function o(g){var s=i[g];if(s!==void 0)return s.exports;var a=i[g]={exports:{}};return r[g].call(a.exports,a,a.exports,o),a.exports}var f={};return(()=>{var g=f;Object.defineProperty(g,"__esModule",{value:!0}),g.Terminal=void 0;const s=o(9042),a=o(3236),d=o(844),v=o(5741),u=o(8285),p=o(7975),C=o(7090),w=["cols","rows"];class _ extends d.Disposable{constructor(l){super(),this._core=this.register(new a.Terminal(l)),this._addonManager=this.register(new v.AddonManager),this._publicOptions=Object.assign({},this._core.options);const c=m=>this._core.options[m],h=(m,b)=>{this._checkReadonlyOptions(m),this._core.options[m]=b};for(const m in this._core.options){const b={get:c.bind(this,m),set:h.bind(this,m)};Object.defineProperty(this._publicOptions,m,b)}}_checkReadonlyOptions(l){if(w.includes(l))throw new Error(`Option "${l}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new C.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new u.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const l=this._core.coreService.decPrivateModes;let c="none";switch(this._core.coreMouseService.activeProtocol){case"X10":c="x10";break;case"VT200":c="vt200";break;case"DRAG":c="drag";break;case"ANY":c="any"}return{applicationCursorKeysMode:l.applicationCursorKeys,applicationKeypadMode:l.applicationKeypad,bracketedPasteMode:l.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:c,originMode:l.origin,reverseWraparoundMode:l.reverseWraparound,sendFocusMode:l.sendFocus,wraparoundMode:l.wraparound}}get options(){return this._publicOptions}set options(l){for(const c in l)this._publicOptions[c]=l[c]}blur(){this._core.blur()}focus(){this._core.focus()}resize(l,c){this._verifyIntegers(l,c),this._core.resize(l,c)}open(l){this._core.open(l)}attachCustomKeyEventHandler(l){this._core.attachCustomKeyEventHandler(l)}registerLinkProvider(l){return this._core.registerLinkProvider(l)}registerCharacterJoiner(l){return this._checkProposedApi(),this._core.registerCharacterJoiner(l)}deregisterCharacterJoiner(l){this._checkProposedApi(),this._core.deregisterCharacterJoiner(l)}registerMarker(l=0){return this._verifyIntegers(l),this._core.registerMarker(l)}registerDecoration(l){var c,h,m;return this._checkProposedApi(),this._verifyPositiveIntegers((c=l.x)!==null&&c!==void 0?c:0,(h=l.width)!==null&&h!==void 0?h:0,(m=l.height)!==null&&m!==void 0?m:0),this._core.registerDecoration(l)}hasSelection(){return this._core.hasSelection()}select(l,c,h){this._verifyIntegers(l,c,h),this._core.select(l,c,h)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(l,c){this._verifyIntegers(l,c),this._core.selectLines(l,c)}dispose(){super.dispose()}scrollLines(l){this._verifyIntegers(l),this._core.scrollLines(l)}scrollPages(l){this._verifyIntegers(l),this._core.scrollPages(l)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(l){this._verifyIntegers(l),this._core.scrollToLine(l)}clear(){this._core.clear()}write(l,c){this._core.write(l,c)}writeln(l,c){this._core.write(l),this._core.write(`\r
`,c)}paste(l){this._core.paste(l)}refresh(l,c){this._verifyIntegers(l,c),this._core.refresh(l,c)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(l){this._addonManager.loadAddon(this,l)}static get strings(){return s}_verifyIntegers(...l){for(const c of l)if(c===1/0||isNaN(c)||c%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...l){for(const c of l)if(c&&(c===1/0||isNaN(c)||c%1!=0||c<0))throw new Error("This API only accepts positive integers")}}g.Terminal=_})(),f})())})(fp);var Yy=fp.exports,pp={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,()=>(()=>{var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{activate(o){this._terminal=o}dispose(){}fit(){const o=this.proposeDimensions();if(!o||!this._terminal||isNaN(o.cols)||isNaN(o.rows))return;const f=this._terminal._core;this._terminal.rows===o.rows&&this._terminal.cols===o.cols||(f._renderService.clear(),this._terminal.resize(o.cols,o.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const o=this._terminal._core,f=o._renderService.dimensions;if(f.css.cell.width===0||f.css.cell.height===0)return;const g=this._terminal.options.scrollback===0?0:o.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(s.getPropertyValue("height")),d=Math.max(0,parseInt(s.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),u=a-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),p=d-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-g;return{cols:Math.max(2,Math.floor(p/f.css.cell.width)),rows:Math.max(1,Math.floor(u/f.css.cell.height))}}}})(),r})())})(pp);var Jy=pp.exports,vp={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,function(){return(()=>{var r={965:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlyphRenderer=void 0;const d=a(381),v=a(855),u=a(859),p=a(374),C=a(509),w=11,_=w*Float32Array.BYTES_PER_ELEMENT;let n,l=0,c=0,h=0;class m extends u.Disposable{constructor(x,E,S){super(),this._terminal=x,this._gl=E,this._dimensions=S,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const y=this._gl;C.TextureAtlas.maxAtlasPages===void 0&&(C.TextureAtlas.maxAtlasPages=Math.min(32,(0,p.throwIfFalsy)(y.getParameter(y.MAX_TEXTURE_IMAGE_UNITS))),C.TextureAtlas.maxTextureSize=(0,p.throwIfFalsy)(y.getParameter(y.MAX_TEXTURE_SIZE))),this._program=(0,p.throwIfFalsy)((0,d.createProgram)(y,`#version 300 es
}`}(C.TextureAtlas.maxAtlasPages))),this.register((0,u.toDisposable)(()=>y.deleteProgram(this._program))),this._projectionLocation=(0,p.throwIfFalsy)(y.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,p.throwIfFalsy)(y.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,p.throwIfFalsy)(y.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=y.createVertexArray(),y.bindVertexArray(this._vertexArrayObject);const L=new Float32Array([0,0,1,0,0,1,1,1]),A=y.createBuffer();this.register((0,u.toDisposable)(()=>y.deleteBuffer(A))),y.bindBuffer(y.ARRAY_BUFFER,A),y.bufferData(y.ARRAY_BUFFER,L,y.STATIC_DRAW),y.enableVertexAttribArray(0),y.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const k=new Uint8Array([0,1,2,3]),D=y.createBuffer();this.register((0,u.toDisposable)(()=>y.deleteBuffer(D))),y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,D),y.bufferData(y.ELEMENT_ARRAY_BUFFER,k,y.STATIC_DRAW),this._attributesBuffer=(0,p.throwIfFalsy)(y.createBuffer()),this.register((0,u.toDisposable)(()=>y.deleteBuffer(this._attributesBuffer))),y.bindBuffer(y.ARRAY_BUFFER,this._attributesBuffer),y.enableVertexAttribArray(2),y.vertexAttribPointer(2,2,y.FLOAT,!1,_,0),y.vertexAttribDivisor(2,1),y.enableVertexAttribArray(3),y.vertexAttribPointer(3,2,y.FLOAT,!1,_,2*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(3,1),y.enableVertexAttribArray(4),y.vertexAttribPointer(4,1,y.FLOAT,!1,_,4*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(4,1),y.enableVertexAttribArray(5),y.vertexAttribPointer(5,2,y.FLOAT,!1,_,5*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(5,1),y.enableVertexAttribArray(6),y.vertexAttribPointer(6,2,y.FLOAT,!1,_,7*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(6,1),y.enableVertexAttribArray(1),y.vertexAttribPointer(1,2,y.FLOAT,!1,_,9*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(1,1),y.useProgram(this._program);const B=new Int32Array(C.TextureAtlas.maxAtlasPages);for(let N=0;N<C.TextureAtlas.maxAtlasPages;N++)B[N]=N;y.uniform1iv(this._textureLocation,B),y.uniformMatrix4fv(this._projectionLocation,!1,d.PROJECTION_MATRIX),this._atlasTextures=[];for(let N=0;N<C.TextureAtlas.maxAtlasPages;N++){const $=new d.GLTexture((0,p.throwIfFalsy)(y.createTexture()));this.register((0,u.toDisposable)(()=>y.deleteTexture($.texture))),y.activeTexture(y.TEXTURE0+N),y.bindTexture(y.TEXTURE_2D,$.texture),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,1,1,0,y.RGBA,y.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[N]=$}y.enable(y.BLEND),y.blendFunc(y.SRC_ALPHA,y.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(x,E,S,y,L,A,k,D){this._updateCell(this._vertices.attributes,x,E,S,y,L,A,k,D)}_updateCell(x,E,S,y,L,A,k,D,B){l=(S*this._terminal.cols+E)*w,y!==v.NULL_CELL_CODE&&y!==void 0?this._atlas&&(n=D&&D.length>1?this._atlas.getRasterizedGlyphCombinedChar(D,L,A,k):this._atlas.getRasterizedGlyph(y,L,A,k),c=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),L!==B&&n.offset.x>c?(h=n.offset.x-c,x[l]=-(n.offset.x-h)+this._dimensions.device.char.left,x[l+1]=-n.offset.y+this._dimensions.device.char.top,x[l+2]=(n.size.x-h)/this._dimensions.device.canvas.width,x[l+3]=n.size.y/this._dimensions.device.canvas.height,x[l+4]=n.texturePage,x[l+5]=n.texturePositionClipSpace.x+h/this._atlas.pages[n.texturePage].canvas.width,x[l+6]=n.texturePositionClipSpace.y,x[l+7]=n.sizeClipSpace.x-h/this._atlas.pages[n.texturePage].canvas.width,x[l+8]=n.sizeClipSpace.y):(x[l]=-n.offset.x+this._dimensions.device.char.left,x[l+1]=-n.offset.y+this._dimensions.device.char.top,x[l+2]=n.size.x/this._dimensions.device.canvas.width,x[l+3]=n.size.y/this._dimensions.device.canvas.height,x[l+4]=n.texturePage,x[l+5]=n.texturePositionClipSpace.x,x[l+6]=n.texturePositionClipSpace.y,x[l+7]=n.sizeClipSpace.x,x[l+8]=n.sizeClipSpace.y)):x.fill(0,l,l+w-1-2)}clear(){const x=this._terminal,E=x.cols*x.rows*w;this._vertices.count!==E?this._vertices.attributes=new Float32Array(E):this._vertices.attributes.fill(0);let S=0;for(;S<this._vertices.attributesBuffers.length;S++)this._vertices.count!==E?this._vertices.attributesBuffers[S]=new Float32Array(E):this._vertices.attributesBuffers[S].fill(0);this._vertices.count=E,S=0;for(let y=0;y<x.rows;y++)for(let L=0;L<x.cols;L++)this._vertices.attributes[S+9]=L/x.cols,this._vertices.attributes[S+10]=y/x.rows,S+=w}handleResize(){const x=this._gl;x.viewport(0,0,x.canvas.width,x.canvas.height),x.uniform2f(this._resolutionLocation,x.canvas.width,x.canvas.height),this.clear()}render(x){if(!this._atlas)return;const E=this._gl;E.useProgram(this._program),E.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const S=this._vertices.attributesBuffers[this._activeBuffer];let y=0;for(let L=0;L<x.lineLengths.length;L++){const A=L*this._terminal.cols*w,k=this._vertices.attributes.subarray(A,A+x.lineLengths[L]*w);S.set(k,y),y+=k.length}E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.bufferData(E.ARRAY_BUFFER,S.subarray(0,y),E.STREAM_DRAW);for(let L=0;L<this._atlas.pages.length;L++)this._atlas.pages[L].version!==this._atlasTextures[L].version&&this._bindAtlasPageTexture(E,this._atlas,L);E.drawElementsInstanced(E.TRIANGLE_STRIP,4,E.UNSIGNED_BYTE,0,y/w)}setAtlas(x){this._atlas=x;for(const E of this._atlasTextures)E.version=-1}_bindAtlasPageTexture(x,E,S){x.activeTexture(x.TEXTURE0+S),x.bindTexture(x.TEXTURE_2D,this._atlasTextures[S].texture),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texImage2D(x.TEXTURE_2D,0,x.RGBA,x.RGBA,x.UNSIGNED_BYTE,E.pages[S].canvas),x.generateMipmap(x.TEXTURE_2D),this._atlasTextures[S].version=E.pages[S].version}setDimensions(x){this._dimensions=x}}s.GlyphRenderer=m},742:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RectangleRenderer=void 0;const d=a(381),v=a(310),u=a(859),p=a(237),C=a(374),w=8*Float32Array.BYTES_PER_ELEMENT;let _=0,n=!1,l=0,c=0,h=0,m=0,b=0,x=0;class E extends u.Disposable{constructor(y,L,A,k){super(),this._terminal=y,this._gl=L,this._dimensions=A,this._themeService=k,this._vertices={count:0,attributes:new Float32Array(160)};const D=this._gl;this._program=(0,C.throwIfFalsy)((0,d.createProgram)(D,`#version 300 es
}`)),this.register((0,u.toDisposable)(()=>D.deleteProgram(this._program))),this._projectionLocation=(0,C.throwIfFalsy)(D.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=D.createVertexArray(),D.bindVertexArray(this._vertexArrayObject);const B=new Float32Array([0,0,1,0,0,1,1,1]),N=D.createBuffer();this.register((0,u.toDisposable)(()=>D.deleteBuffer(N))),D.bindBuffer(D.ARRAY_BUFFER,N),D.bufferData(D.ARRAY_BUFFER,B,D.STATIC_DRAW),D.enableVertexAttribArray(3),D.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const $=new Uint8Array([0,1,2,3]),I=D.createBuffer();this.register((0,u.toDisposable)(()=>D.deleteBuffer(I))),D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,I),D.bufferData(D.ELEMENT_ARRAY_BUFFER,$,D.STATIC_DRAW),this._attributesBuffer=(0,C.throwIfFalsy)(D.createBuffer()),this.register((0,u.toDisposable)(()=>D.deleteBuffer(this._attributesBuffer))),D.bindBuffer(D.ARRAY_BUFFER,this._attributesBuffer),D.enableVertexAttribArray(0),D.vertexAttribPointer(0,2,D.FLOAT,!1,w,0),D.vertexAttribDivisor(0,1),D.enableVertexAttribArray(1),D.vertexAttribPointer(1,2,D.FLOAT,!1,w,2*Float32Array.BYTES_PER_ELEMENT),D.vertexAttribDivisor(1,1),D.enableVertexAttribArray(2),D.vertexAttribPointer(2,4,D.FLOAT,!1,w,4*Float32Array.BYTES_PER_ELEMENT),D.vertexAttribDivisor(2,1),this._updateCachedColors(k.colors),this.register(this._themeService.onChangeColors(R=>{this._updateCachedColors(R),this._updateViewportRectangle()}))}render(){const y=this._gl;y.useProgram(this._program),y.bindVertexArray(this._vertexArrayObject),y.uniformMatrix4fv(this._projectionLocation,!1,d.PROJECTION_MATRIX),y.bindBuffer(y.ARRAY_BUFFER,this._attributesBuffer),y.bufferData(y.ARRAY_BUFFER,this._vertices.attributes,y.DYNAMIC_DRAW),y.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,y.UNSIGNED_BYTE,0,this._vertices.count)}handleResize(){this._updateViewportRectangle()}setDimensions(y){this._dimensions=y}_updateCachedColors(y){this._bgFloat=this._colorToFloat32Array(y.background)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(y){const L=this._terminal,A=this._vertices;let k,D,B,N,$,I,R,T,P,O,z,V=1;for(k=0;k<L.rows;k++){for(B=-1,N=0,$=0,I=!1,D=0;D<L.cols;D++)R=(k*L.cols+D)*v.RENDER_MODEL_INDICIES_PER_CELL,T=y.cells[R+v.RENDER_MODEL_BG_OFFSET],P=y.cells[R+v.RENDER_MODEL_FG_OFFSET],O=!!(67108864&P),(T!==N||P!==$&&(I||O))&&((N!==0||I&&$!==0)&&(z=8*V++,this._updateRectangle(A,z,$,N,B,D,k)),B=D,N=T,$=P,I=O);(N!==0||I&&$!==0)&&(z=8*V++,this._updateRectangle(A,z,$,N,B,L.cols,k))}A.count=V}_updateRectangle(y,L,A,k,D,B,N){if(n=!1,67108864&A)switch(50331648&A){case 16777216:case 33554432:_=this._themeService.colors.ansi[255&A].rgba;break;case 50331648:_=(16777215&A)<<8;break;default:_=this._themeService.colors.foreground.rgba}else switch(50331648&k){case 16777216:case 33554432:_=this._themeService.colors.ansi[255&k].rgba;break;case 50331648:_=(16777215&k)<<8;break;default:_=this._themeService.colors.background.rgba,n=!0}y.attributes.length<L+4&&(y.attributes=(0,d.expandFloat32Array)(y.attributes,this._terminal.rows*this._terminal.cols*8)),l=D*this._dimensions.device.cell.width,c=N*this._dimensions.device.cell.height,h=(_>>24&255)/255,m=(_>>16&255)/255,b=(_>>8&255)/255,x=!n&&134217728&k?p.DIM_OPACITY:1,this._addRectangle(y.attributes,L,l,c,(B-D)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,h,m,b,x)}_addRectangle(y,L,A,k,D,B,N,$,I,R){y[L]=A/this._dimensions.device.canvas.width,y[L+1]=k/this._dimensions.device.canvas.height,y[L+2]=D/this._dimensions.device.canvas.width,y[L+3]=B/this._dimensions.device.canvas.height,y[L+4]=N,y[L+5]=$,y[L+6]=I,y[L+7]=R}_addRectangleFloat(y,L,A,k,D,B,N){y[L]=A/this._dimensions.device.canvas.width,y[L+1]=k/this._dimensions.device.canvas.height,y[L+2]=D/this._dimensions.device.canvas.width,y[L+3]=B/this._dimensions.device.canvas.height,y[L+4]=N[0],y[L+5]=N[1],y[L+6]=N[2],y[L+7]=N[3]}_colorToFloat32Array(y){return new Float32Array([(y.rgba>>24&255)/255,(y.rgba>>16&255)/255,(y.rgba>>8&255)/255,(255&y.rgba)/255])}}s.RectangleRenderer=E},310:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderModel=s.COMBINED_CHAR_BIT_MASK=s.RENDER_MODEL_EXT_OFFSET=s.RENDER_MODEL_FG_OFFSET=s.RENDER_MODEL_BG_OFFSET=s.RENDER_MODEL_INDICIES_PER_CELL=void 0;const d=a(296);s.RENDER_MODEL_INDICIES_PER_CELL=4,s.RENDER_MODEL_BG_OFFSET=1,s.RENDER_MODEL_FG_OFFSET=2,s.RENDER_MODEL_EXT_OFFSET=3,s.COMBINED_CHAR_BIT_MASK=2147483648,s.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,d.createSelectionRenderModel)()}resize(v,u){const p=v*u*s.RENDER_MODEL_INDICIES_PER_CELL;p!==this.cells.length&&(this.cells=new Uint32Array(p),this.lineLengths=new Uint32Array(u))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.JoinedCellData=s.WebglRenderer=void 0;const d=a(820),v=a(274),u=a(627),p=a(56),C=a(374),w=a(147),_=a(782),n=a(855),l=a(345),c=a(859),h=a(965),m=a(742),b=a(461),x=a(733),E=a(310);class S extends c.Disposable{constructor(A,k,D,B,N,$,I,R,T){super(),this._terminal=A,this._characterJoinerService=k,this._charSizeService=D,this._coreBrowserService=B,this._decorationService=$,this._optionsService=I,this._themeService=R,this._model=new E.RenderModel,this._workCell=new _.CellData,this._onChangeTextureAtlas=this.register(new l.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new l.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new l.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new l.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new l.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new v.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new x.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,I,this._themeService),new b.CursorRenderLayer(A,this._core.screenElement,3,this._onRequestRedraw,this._coreBrowserService,N,I,this._themeService)],this.dimensions=(0,C.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register(I.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");const P={antialias:!1,depth:!1,preserveDrawingBuffer:T};if(this._gl=this._canvas.getContext("webgl2",P),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,d.addDisposableDomListener)(this._canvas,"webglcontextlost",O=>{console.log("webglcontextlost event received"),O.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(O)},3e3)})),this.register((0,d.addDisposableDomListener)(this._canvas,"webglcontextrestored",O=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,u.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,p.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(O,z)=>this._setCanvasDevicePixelDimensions(O,z))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer,this._glyphRenderer]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,c.toDisposable)(()=>{var O;for(const z of this._renderLayers)z.dispose();(O=this._canvas.parentElement)===null||O===void 0||O.removeChild(this._canvas),(0,u.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var A;return(A=this._charAtlas)===null||A===void 0?void 0:A.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(A,k){this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const D of this._renderLayers)D.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,this._rectangleRenderer.setDimensions(this.dimensions),this._rectangleRenderer.handleResize(),this._glyphRenderer.setDimensions(this.dimensions),this._glyphRenderer.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){for(const A of this._renderLayers)A.handleBlur(this._terminal);this._requestRedrawViewport()}handleFocus(){for(const A of this._renderLayers)A.handleFocus(this._terminal);this._requestRedrawViewport()}handleSelectionChanged(A,k,D){for(const B of this._renderLayers)B.handleSelectionChanged(this._terminal,A,k,D);this._model.selection.update(this._terminal,A,k,D),this._requestRedrawViewport()}handleCursorMove(){for(const A of this._renderLayers)A.handleCursorMove(this._terminal)}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas()}_initializeWebGLState(){var A,k;return(A=this._rectangleRenderer)===null||A===void 0||A.dispose(),(k=this._glyphRenderer)===null||k===void 0||k.dispose(),this._rectangleRenderer=this.register(new m.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService)),this._glyphRenderer=this.register(new h.GlyphRenderer(this._terminal,this._gl,this.dimensions)),this.handleCharSizeChanged(),[this._rectangleRenderer,this._glyphRenderer]}_refreshCharAtlas(){var A;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const k=(0,u.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==k&&((A=this._charAtlasDisposable)===null||A===void 0||A.dispose(),this._onChangeTextureAtlas.fire(k.pages[0].canvas),this._charAtlasDisposable=(0,c.getDisposeArrayDisposable)([(0,l.forwardEvent)(k.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,l.forwardEvent)(k.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=k,this._charAtlas.warmUp(),this._glyphRenderer.setAtlas(this._charAtlas)}_clearModel(A){this._model.clear(),A&&this._glyphRenderer.clear()}clearTextureAtlas(){var A;(A=this._charAtlas)===null||A===void 0||A.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){this._clearModel(!0);for(const A of this._renderLayers)A.reset(this._terminal)}registerCharacterJoiner(A){return-1}deregisterCharacterJoiner(A){return!1}renderRows(A,k){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const D of this._renderLayers)D.handleGridChanged(this._terminal,A,k);this._glyphRenderer.beginFrame()&&this._clearModel(!0),this._updateModel(A,k),this._rectangleRenderer.render(),this._glyphRenderer.render(this._model)}_updateModel(A,k){const D=this._core;let B,N,$,I,R,T,P,O,z,V,Q,q,Z,M=this._workCell;for(N=A;N<=k&&($=N+D.buffer.ydisp,I=D.buffer.lines.get($),I);N++)for(this._model.lineLengths[N]=0,R=this._characterJoinerService.getJoinedCharacters($),q=0;q<D.cols;q++)if(B=this._cellColorResolver.result.bg,I.loadCell(q,M),q===0&&(B=this._cellColorResolver.result.bg),T=!1,P=q,R.length>0&&q===R[0][0]&&(T=!0,O=R.shift(),M=new y(M,I.translateToString(!0,O[0],O[1]),O[1]-O[0]),P=O[1]-1),z=M.getChars(),V=M.getCode(),Q=(N*D.cols+q)*E.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(M,q,$),V!==n.NULL_CELL_CODE&&(this._model.lineLengths[N]=q+1),(this._model.cells[Q]!==V||this._model.cells[Q+E.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[Q+E.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[Q+E.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(z.length>1&&(V|=E.COMBINED_CHAR_BIT_MASK),this._model.cells[Q]=V,this._model.cells[Q+E.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[Q+E.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[Q+E.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.updateCell(q,N,V,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,z,B),T))for(M=this._workCell,q++;q<P;q++)Z=(N*D.cols+q)*E.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.updateCell(q,N,n.NULL_CELL_CODE,0,0,0,n.NULL_CELL_CHAR,0),this._model.cells[Z]=n.NULL_CELL_CODE,this._model.cells[Z+E.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[Z+E.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[Z+E.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;this._rectangleRenderer.updateBackgrounds(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(A,k){this._canvas.width===A&&this._canvas.height===k||(this._canvas.width=A,this._canvas.height=k,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}}s.WebglRenderer=S;class y extends w.AttributeData{constructor(A,k,D){super(),this.content=0,this.combinedData="",this.fg=A.fg,this.bg=A.bg,this.combinedData=k,this._width=D}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(A){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=y},381:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GLTexture=s.expandFloat32Array=s.createShader=s.createProgram=s.PROJECTION_MATRIX=void 0;const d=a(374);function v(u,p,C){const w=(0,d.throwIfFalsy)(u.createShader(p));if(u.shaderSource(w,C),u.compileShader(w),u.getShaderParameter(w,u.COMPILE_STATUS))return w;console.error(u.getShaderInfoLog(w)),u.deleteShader(w)}s.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),s.createProgram=function(u,p,C){const w=(0,d.throwIfFalsy)(u.createProgram());if(u.attachShader(w,(0,d.throwIfFalsy)(v(u,u.VERTEX_SHADER,p))),u.attachShader(w,(0,d.throwIfFalsy)(v(u,u.FRAGMENT_SHADER,C))),u.linkProgram(w),u.getProgramParameter(w,u.LINK_STATUS))return w;console.error(u.getProgramInfoLog(w)),u.deleteProgram(w)},s.createShader=v,s.expandFloat32Array=function(u,p){const C=Math.min(2*u.length,p),w=new Float32Array(C);for(let _=0;_<u.length;_++)w[_]=u[_];return w},s.GLTexture=class{constructor(u){this.texture=u,this.version=-1}}},592:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseRenderLayer=void 0;const d=a(627),v=a(237),u=a(374),p=a(859);class C extends p.Disposable{constructor(_,n,l,c,h,m,b,x){super(),this._container=n,this._alpha=h,this._coreBrowserService=m,this._optionsService=b,this._themeService=x,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${l}-layer`),this._canvas.style.zIndex=c.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(E=>{this._refreshCharAtlas(_,E),this.reset(_)})),this.register((0,p.toDisposable)(()=>{var E;this._canvas.remove(),(E=this._charAtlas)===null||E===void 0||E.dispose()}))}_initCanvas(){this._ctx=(0,u.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(_){}handleFocus(_){}handleCursorMove(_){}handleGridChanged(_,n,l){}handleSelectionChanged(_,n,l,c=!1){}_setTransparency(_,n){if(n===this._alpha)return;const l=this._canvas;this._alpha=n,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,l),this._refreshCharAtlas(_,this._themeService.colors),this.handleGridChanged(_,0,_.rows-1)}_refreshCharAtlas(_,n){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,d.acquireTextureAtlas)(_,this._optionsService.rawOptions,n,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(_,n){this._deviceCellWidth=n.device.cell.width,this._deviceCellHeight=n.device.cell.height,this._deviceCharWidth=n.device.char.width,this._deviceCharHeight=n.device.char.height,this._deviceCharLeft=n.device.char.left,this._deviceCharTop=n.device.char.top,this._canvas.width=n.device.canvas.width,this._canvas.height=n.device.canvas.height,this._canvas.style.width=`${n.css.canvas.width}px`,this._canvas.style.height=`${n.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(_,this._themeService.colors)}_fillCells(_,n,l,c){this._ctx.fillRect(_*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,c*this._deviceCellHeight)}_fillBottomLineAtCells(_,n,l=1){this._ctx.fillRect(_*this._deviceCellWidth,(n+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,l*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillLeftLineAtCell(_,n,l){this._ctx.fillRect(_*this._deviceCellWidth,n*this._deviceCellHeight,this._coreBrowserService.dpr*l,this._deviceCellHeight)}_strokeRectAtCell(_,n,l,c){this._ctx.lineWidth=this._coreBrowserService.dpr,this._ctx.strokeRect(_*this._deviceCellWidth+this._coreBrowserService.dpr/2,n*this._deviceCellHeight+this._coreBrowserService.dpr/2,l*this._deviceCellWidth-this._coreBrowserService.dpr,c*this._deviceCellHeight-this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(_,n,l,c){this._alpha?this._ctx.clearRect(_*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,c*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(_*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,c*this._deviceCellHeight))}_fillCharTrueColor(_,n,l,c){this._ctx.font=this._getFont(_,!1,!1),this._ctx.textBaseline=v.TEXT_BASELINE,this._clipCell(l,c,n.getWidth()),this._ctx.fillText(n.getChars(),l*this._deviceCellWidth+this._deviceCharLeft,c*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(_,n,l){this._ctx.beginPath(),this._ctx.rect(_*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(_,n,l){return`${l?"italic":""} ${n?_.options.fontWeightBold:_.options.fontWeight} ${_.options.fontSize*this._coreBrowserService.dpr}px ${_.options.fontFamily}`}}s.BaseRenderLayer=C},461:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CursorRenderLayer=void 0;const d=a(592),v=a(782),u=a(859);class p extends d.BaseRenderLayer{constructor(_,n,l,c,h,m,b,x){super(_,n,"cursor",l,!0,h,b,x),this._onRequestRefreshRowsEvent=c,this._coreService=m,this._cell=new v.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this)},this._handleOptionsChanged(_),this.register(b.onOptionChange(()=>this._handleOptionsChanged(_))),this.register((0,u.toDisposable)(()=>{var E;(E=this._cursorBlinkStateManager)===null||E===void 0||E.dispose(),this._cursorBlinkStateManager=void 0}))}resize(_,n){super.resize(_,n),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(_){var n;this._clearCursor(),(n=this._cursorBlinkStateManager)===null||n===void 0||n.restartBlinkAnimation(_),this._handleOptionsChanged(_)}handleBlur(_){var n;(n=this._cursorBlinkStateManager)===null||n===void 0||n.pause(),this._onRequestRefreshRowsEvent.fire({start:_.buffer.active.cursorY,end:_.buffer.active.cursorY})}handleFocus(_){var n;(n=this._cursorBlinkStateManager)===null||n===void 0||n.resume(_),this._onRequestRefreshRowsEvent.fire({start:_.buffer.active.cursorY,end:_.buffer.active.cursorY})}_handleOptionsChanged(_){var n;_.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new C(()=>{this._render(_,!0)},this._coreBrowserService)):((n=this._cursorBlinkStateManager)===null||n===void 0||n.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:_.buffer.active.cursorY,end:_.buffer.active.cursorY})}handleCursorMove(_){var n;(n=this._cursorBlinkStateManager)===null||n===void 0||n.restartBlinkAnimation(_)}handleGridChanged(_,n,l){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(_,!1):this._cursorBlinkStateManager.restartBlinkAnimation(_)}_render(_,n){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const l=_.buffer.active.baseY+_.buffer.active.cursorY,c=l-_.buffer.active.viewportY,h=Math.min(_.buffer.active.cursorX,_.cols-1);if(c<0||c>=_.rows)this._clearCursor();else if(_._core.buffer.lines.get(l).loadCell(h,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const m=_.options.cursorStyle;return m&&m!=="block"?this._cursorRenderers[m](_,h,c,this._cell):this._renderBlurCursor(_,h,c,this._cell),this._ctx.restore(),this._state.x=h,this._state.y=c,this._state.isFocused=!1,this._state.style=m,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===h&&this._state.y===c&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===_.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[_.options.cursorStyle||"block"](_,h,c,this._cell),this._ctx.restore(),this._state.x=h,this._state.y=c,this._state.isFocused=!1,this._state.style=_.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(_,n,l,c){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(n,l,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(_,n,l,c){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(n,l,c.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(_,c,n,l),this._ctx.restore()}_renderUnderlineCursor(_,n,l,c){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(n,l),this._ctx.restore()}_renderBlurCursor(_,n,l,c){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(n,l,c.getWidth(),1),this._ctx.restore()}}s.CursorRenderLayer=p;class C{constructor(_,n){this._renderCallback=_,this._coreBrowserService=n,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(_){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(_=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const n=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,n>0)return void this._restartInterval(n)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const n=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(n)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},_)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(_){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation(_)}}},733:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkRenderLayer=void 0;const d=a(197),v=a(237),u=a(592);class p extends u.BaseRenderLayer{constructor(w,_,n,l,c,h,m){super(n,w,"link",_,!0,c,h,m),this.register(l.onShowLinkUnderline(b=>this._handleShowLinkUnderline(b))),this.register(l.onHideLinkUnderline(b=>this._handleHideLinkUnderline(b)))}resize(w,_){super.resize(w,_),this._state=void 0}reset(w){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const w=this._state.y2-this._state.y1-1;w>0&&this._clearCells(0,this._state.y1+1,this._state.cols,w),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(w){if(w.fg===v.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:w.fg!==void 0&&(0,d.is256Color)(w.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[w.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,w.y1===w.y2)this._fillBottomLineAtCells(w.x1,w.y1,w.x2-w.x1);else{this._fillBottomLineAtCells(w.x1,w.y1,w.cols-w.x1);for(let _=w.y1+1;_<w.y2;_++)this._fillBottomLineAtCells(0,_,w.cols);this._fillBottomLineAtCells(0,w.y2,w.x2)}this._state=w}_handleHideLinkUnderline(w){this._clearCurrentLink()}}s.LinkRenderLayer=p},820:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,d,v,u){a.addEventListener(d,v,u);let p=!1;return{dispose:()=>{p||(p=!0,a.removeEventListener(d,v,u))}}}},274:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellColorResolver=void 0;let a,d=0,v=0,u=!1,p=!1,C=!1;s.CellColorResolver=class{constructor(w,_,n,l,c){this._terminal=w,this._selectionRenderModel=_,this._decorationService=n,this._coreBrowserService=l,this._themeService=c,this.result={fg:0,bg:0,ext:0}}resolve(w,_,n){this.result.bg=w.bg,this.result.fg=w.fg,this.result.ext=268435456&w.bg?w.extended.ext:0,v=0,d=0,p=!1,u=!1,C=!1,a=this._themeService.colors,this._decorationService.forEachDecorationAtCell(_,n,"bottom",l=>{l.backgroundColorRGB&&(v=l.backgroundColorRGB.rgba>>8&16777215,p=!0),l.foregroundColorRGB&&(d=l.foregroundColorRGB.rgba>>8&16777215,u=!0)}),C=this._selectionRenderModel.isCellSelected(this._terminal,_,n),C&&(v=(this._coreBrowserService.isFocused?a.selectionBackgroundOpaque:a.selectionInactiveBackgroundOpaque).rgba>>8&16777215,p=!0,a.selectionForeground&&(d=a.selectionForeground.rgba>>8&16777215,u=!0)),this._decorationService.forEachDecorationAtCell(_,n,"top",l=>{l.backgroundColorRGB&&(v=l.backgroundColorRGB.rgba>>8&16777215,p=!0),l.foregroundColorRGB&&(d=l.foregroundColorRGB.rgba>>8&16777215,u=!0)}),p&&(v=C?-16777216&w.bg&-134217729|v|50331648:-16777216&w.bg|v|50331648),u&&(d=-16777216&w.fg&-67108865|d|50331648),67108864&this.result.fg&&(p&&!u&&(d=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&a.background.rgba>>8|50331648,u=!0),!p&&u&&(v=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&a.foreground.rgba>>8|50331648,p=!0)),a=void 0,this.result.bg=p?v:this.result.bg,this.result.fg=u?d:this.result.fg}}},627:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeTerminalFromCache=s.acquireTextureAtlas=void 0;const d=a(509),v=a(197),u=[];s.acquireTextureAtlas=function(p,C,w,_,n,l,c,h){const m=(0,v.generateConfig)(_,n,l,c,C,w,h);for(let E=0;E<u.length;E++){const S=u[E],y=S.ownedBy.indexOf(p);if(y>=0){if((0,v.configEquals)(S.config,m))return S.atlas;S.ownedBy.length===1?(S.atlas.dispose(),u.splice(E,1)):S.ownedBy.splice(y,1);break}}for(let E=0;E<u.length;E++){const S=u[E];if((0,v.configEquals)(S.config,m))return S.ownedBy.push(p),S.atlas}const b=p._core,x={atlas:new d.TextureAtlas(document,m,b.unicodeService),config:m,ownedBy:[p]};return u.push(x),x.atlas},s.removeTerminalFromCache=function(p){for(let C=0;C<u.length;C++){const w=u[C].ownedBy.indexOf(p);if(w!==-1){u[C].ownedBy.length===1?(u[C].atlas.dispose(),u.splice(C,1)):u[C].ownedBy.splice(w,1);break}}}},197:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.is256Color=s.configEquals=s.generateConfig=void 0;const d=a(160);s.generateConfig=function(v,u,p,C,w,_,n){const l={foreground:_.foreground,background:_.background,cursor:d.NULL_COLOR,cursorAccent:d.NULL_COLOR,selectionForeground:d.NULL_COLOR,selectionBackgroundTransparent:d.NULL_COLOR,selectionBackgroundOpaque:d.NULL_COLOR,selectionInactiveBackgroundTransparent:d.NULL_COLOR,selectionInactiveBackgroundOpaque:d.NULL_COLOR,ansi:_.ansi.slice(),contrastCache:_.contrastCache};return{customGlyphs:w.customGlyphs,devicePixelRatio:n,letterSpacing:w.letterSpacing,lineHeight:w.lineHeight,deviceCellWidth:v,deviceCellHeight:u,deviceCharWidth:p,deviceCharHeight:C,fontFamily:w.fontFamily,fontSize:w.fontSize,fontWeight:w.fontWeight,fontWeightBold:w.fontWeightBold,allowTransparency:w.allowTransparency,drawBoldTextInBrightColors:w.drawBoldTextInBrightColors,minimumContrastRatio:w.minimumContrastRatio,colors:l}},s.configEquals=function(v,u){for(let p=0;p<v.colors.ansi.length;p++)if(v.colors.ansi[p].rgba!==u.colors.ansi[p].rgba)return!1;return v.devicePixelRatio===u.devicePixelRatio&&v.customGlyphs===u.customGlyphs&&v.lineHeight===u.lineHeight&&v.letterSpacing===u.letterSpacing&&v.fontFamily===u.fontFamily&&v.fontSize===u.fontSize&&v.fontWeight===u.fontWeight&&v.fontWeightBold===u.fontWeightBold&&v.allowTransparency===u.allowTransparency&&v.deviceCharWidth===u.deviceCharWidth&&v.deviceCharHeight===u.deviceCharHeight&&v.drawBoldTextInBrightColors===u.drawBoldTextInBrightColors&&v.minimumContrastRatio===u.minimumContrastRatio&&v.colors.foreground.rgba===u.colors.foreground.rgba&&v.colors.background.rgba===u.colors.background.rgba},s.is256Color=function(v){return(50331648&v)==16777216||(50331648&v)==33554432}},237:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const d=a(399);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},860:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tryDrawCustomChar=s.powerlineDefinitions=s.boxDrawingDefinitions=s.blockElementDefinitions=void 0;const d=a(374);s.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const v={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};s.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(_,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M${.5-_},0 L${.5-_},1 M${.5+_},0 L${.5+_},1`},"":{1:(_,n)=>`M.5,1 L.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M${.5-_},1 L${.5-_},.5 L1,.5 M${.5+_},.5 L${.5+_},1`},"":{1:(_,n)=>`M1,${.5-n} L${.5-_},${.5-n} L${.5-_},1 M1,${.5+n} L${.5+_},${.5+n} L${.5+_},1`},"":{1:(_,n)=>`M0,${.5-n} L.5,${.5-n} L.5,1 M0,${.5+n} L.5,${.5+n}`},"":{1:(_,n)=>`M${.5+_},1 L${.5+_},.5 L0,.5 M${.5-_},.5 L${.5-_},1`},"":{1:(_,n)=>`M0,${.5+n} L${.5-_},${.5+n} L${.5-_},1 M0,${.5-n} L${.5+_},${.5-n} L${.5+_},1`},"":{1:(_,n)=>`M.5,0 L.5,${.5+n} L1,${.5+n} M.5,${.5-n} L1,${.5-n}`},"":{1:(_,n)=>`M1,.5 L${.5-_},.5 L${.5-_},0 M${.5+_},.5 L${.5+_},0`},"":{1:(_,n)=>`M1,${.5-n} L${.5+_},${.5-n} L${.5+_},0 M1,${.5+n} L${.5-_},${.5+n} L${.5-_},0`},"":{1:(_,n)=>`M0,${.5+n} L.5,${.5+n} L.5,0 M0,${.5-n} L.5,${.5-n}`},"":{1:(_,n)=>`M0,.5 L${.5+_},.5 L${.5+_},0 M${.5-_},.5 L${.5-_},0`},"":{1:(_,n)=>`M0,${.5-n} L${.5-_},${.5-n} L${.5-_},0 M0,${.5+n} L${.5+_},${.5+n} L${.5+_},0`},"":{1:(_,n)=>`M.5,0 L.5,1 M.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M${.5-_},0 L${.5-_},1 M${.5+_},0 L${.5+_},1 M${.5+_},.5 L1,.5`},"":{1:(_,n)=>`M${.5-_},0 L${.5-_},1 M1,${.5+n} L${.5+_},${.5+n} L${.5+_},1 M1,${.5-n} L${.5+_},${.5-n} L${.5+_},0`},"":{1:(_,n)=>`M.5,0 L.5,1 M0,${.5-n} L.5,${.5-n} M0,${.5+n} L.5,${.5+n}`},"":{1:(_,n)=>`M0,.5 L${.5-_},.5 M${.5-_},0 L${.5-_},1 M${.5+_},0 L${.5+_},1`},"":{1:(_,n)=>`M${.5+_},0 L${.5+_},1 M0,${.5+n} L${.5-_},${.5+n} L${.5-_},1 M0,${.5-n} L${.5-_},${.5-n} L${.5-_},0`},"":{1:(_,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n} M.5,${.5+n} L.5,1`},"":{1:(_,n)=>`M0,.5 L1,.5 M${.5-_},.5 L${.5-_},1 M${.5+_},.5 L${.5+_},1`},"":{1:(_,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L${.5-_},${.5+n} L${.5-_},1 M1,${.5+n} L${.5+_},${.5+n} L${.5+_},1`},"":{1:(_,n)=>`M.5,0 L.5,${.5-n} M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M0,.5 L1,.5 M${.5-_},.5 L${.5-_},0 M${.5+_},.5 L${.5+_},0`},"":{1:(_,n)=>`M0,${.5+n} L1,${.5+n} M0,${.5-n} L${.5-_},${.5-n} L${.5-_},0 M1,${.5-n} L${.5+_},${.5-n} L${.5+_},0`},"":{1:(_,n)=>`M.5,0 L.5,1 M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M0,.5 L1,.5 M${.5-_},0 L${.5-_},1 M${.5+_},0 L${.5+_},1`},"":{1:(_,n)=>`M0,${.5+n} L${.5-_},${.5+n} L${.5-_},1 M1,${.5+n} L${.5+_},${.5+n} L${.5+_},1 M0,${.5-n} L${.5-_},${.5-n} L${.5-_},0 M1,${.5-n} L${.5+_},${.5-n} L${.5+_},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(_,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,1,.5`},"":{1:(_,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,0,.5`},"":{1:(_,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,0,.5`},"":{1:(_,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,1,.5`}},s.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},s.powerlineDefinitions[""]=s.powerlineDefinitions[""],s.powerlineDefinitions[""]=s.powerlineDefinitions[""],s.tryDrawCustomChar=function(_,n,l,c,h,m,b,x){const E=s.blockElementDefinitions[n];if(E)return function(A,k,D,B,N,$){for(let I=0;I<k.length;I++){const R=k[I],T=N/8,P=$/8;A.fillRect(D+R.x*T,B+R.y*P,R.w*T,R.h*P)}}(_,E,l,c,h,m),!0;const S=v[n];if(S)return function(A,k,D,B,N,$){let I=u.get(k);I||(I=new Map,u.set(k,I));const R=A.fillStyle;if(typeof R!="string")throw new Error(`Unexpected fillStyle type "${R}"`);let T=I.get(R);if(!T){const P=k[0].length,O=k.length,z=document.createElement("canvas");z.width=P,z.height=O;const V=(0,d.throwIfFalsy)(z.getContext("2d")),Q=new ImageData(P,O);let q,Z,M,U;if(R.startsWith("#"))q=parseInt(R.slice(1,3),16),Z=parseInt(R.slice(3,5),16),M=parseInt(R.slice(5,7),16),U=R.length>7&&parseInt(R.slice(7,9),16)||1;else{if(!R.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${R}" when drawing pattern glyph`);[q,Z,M,U]=R.substring(5,R.length-1).split(",").map(j=>parseFloat(j))}for(let j=0;j<O;j++)for(let W=0;W<P;W++)Q.data[4*(j*P+W)]=q,Q.data[4*(j*P+W)+1]=Z,Q.data[4*(j*P+W)+2]=M,Q.data[4*(j*P+W)+3]=k[j][W]*(255*U);V.putImageData(Q,0,0),T=(0,d.throwIfFalsy)(A.createPattern(z,null)),I.set(R,T)}A.fillStyle=T,A.fillRect(D,B,N,$)}(_,S,l,c,h,m),!0;const y=s.boxDrawingDefinitions[n];if(y)return function(A,k,D,B,N,$,I){A.strokeStyle=A.fillStyle;for(const[R,T]of Object.entries(k)){let P;A.beginPath(),A.lineWidth=I*Number.parseInt(R),P=typeof T=="function"?T(.15,.15/$*N):T;for(const O of P.split(" ")){const z=O[0],V=C[z];if(!V){console.error(`Could not find drawing instructions for "${z}"`);continue}const Q=O.substring(1).split(",");Q[0]&&Q[1]&&V(A,w(Q,N,$,D,B,!0,I))}A.stroke(),A.closePath()}}(_,y,l,c,h,m,x),!0;const L=s.powerlineDefinitions[n];return!!L&&(function(A,k,D,B,N,$,I,R){var T,P;const O=new Path2D;O.rect(D,B,N,$),A.clip(O),A.beginPath();const z=I/12;A.lineWidth=R*z;for(const V of k.d.split(" ")){const Q=V[0],q=C[Q];if(!q){console.error(`Could not find drawing instructions for "${Q}"`);continue}const Z=V.substring(1).split(",");Z[0]&&Z[1]&&q(A,w(Z,N,$,D,B,!1,R,((T=k.leftPadding)!==null&&T!==void 0?T:0)*(z/2),((P=k.rightPadding)!==null&&P!==void 0?P:0)*(z/2)))}k.type===1?(A.strokeStyle=A.fillStyle,A.stroke()):A.fill(),A.closePath()}(_,L,l,c,h,m,b,x),!0)};const u=new Map;function p(_,n,l=0){return Math.max(Math.min(_,n),l)}const C={C:(_,n)=>_.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),L:(_,n)=>_.lineTo(n[0],n[1]),M:(_,n)=>_.moveTo(n[0],n[1])};function w(_,n,l,c,h,m,b,x=0,E=0){const S=_.map(y=>parseFloat(y)||parseInt(y));if(S.length<2)throw new Error("Too few arguments for instruction");for(let y=0;y<S.length;y+=2)S[y]*=n-x*b-E*b,m&&S[y]!==0&&(S[y]=p(Math.round(S[y]+.5)-.5,n,0)),S[y]+=c+x*b;for(let y=1;y<S.length;y+=2)S[y]*=l,m&&S[y]!==0&&(S[y]=p(Math.round(S[y]+.5)-.5,l,0)),S[y]+=h;return S}},56:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.observeDevicePixelDimensions=void 0;const d=a(859);s.observeDevicePixelDimensions=function(v,u,p){let C=new u.ResizeObserver(w=>{const _=w.find(c=>c.target===v);if(!_)return;if(!("devicePixelContentBoxSize"in _))return C==null||C.disconnect(),void(C=void 0);const n=_.devicePixelContentBoxSize[0].inlineSize,l=_.devicePixelContentBoxSize[0].blockSize;n>0&&l>0&&p(n,l)});try{C.observe(v,{box:["device-pixel-content-box"]})}catch{C.disconnect(),C=void 0}return(0,d.toDisposable)(()=>C==null?void 0:C.disconnect())}},374:(g,s)=>{function a(d){return 57508<=d&&d<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},s.excludeFromContrastRatioDemands=function(d){return a(d)||function(v){return 9472<=v&&v<=9631}(d)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(v,u,p,C=!1){if(this.selectionStart=u,this.selectionEnd=p,!u||!p||u[0]===p[0]&&u[1]===p[1])return void this.clear();const w=u[1]-v.buffer.active.viewportY,_=p[1]-v.buffer.active.viewportY,n=Math.max(w,0),l=Math.min(_,v.rows-1);n>=v.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=C,this.viewportStartRow=w,this.viewportEndRow=_,this.viewportCappedStartRow=n,this.viewportCappedEndRow=l,this.startCol=u[0],this.endCol=p[0])}isCellSelected(v,u,p){return!!this.hasSelection&&(p-=v.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?u>=this.startCol&&p>=this.viewportCappedStartRow&&u<this.endCol&&p<=this.viewportCappedEndRow:u<this.startCol&&p>=this.viewportCappedStartRow&&u>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&u>=this.startCol&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&u>=this.startCol)}}s.createSelectionRenderModel=function(){return new a}},509:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextureAtlas=void 0;const d=a(237),v=a(855),u=a(147),p=a(160),C=a(860),w=a(374),_=a(485),n=a(385),l=a(345),c={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let h;class m{constructor(y,L,A){this._document=y,this._config=L,this._unicodeService=A,this._didWarmUp=!1,this._cacheMap=new _.FourKeyMap,this._cacheMapCombined=new _.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new u.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new l.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new l.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=E(y,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,w.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}get pages(){return this._pages}dispose(){for(const y of this.pages)y.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const y=new n.IdleTaskQueue;for(let L=33;L<126;L++)y.enqueue(()=>{if(!this._cacheMap.get(L,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT)){const A=this._drawToCache(L,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT);this._cacheMap.set(L,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT,A)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const y of this._pages)y.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages/2)&&queueMicrotask(()=>{const L=this._pages.filter(I=>2*I.canvas.width<=(m.maxTextureSize||4096)).sort((I,R)=>R.canvas.width!==I.canvas.width?R.canvas.width-I.canvas.width:R.percentageUsed-I.percentageUsed);let A=-1,k=0;for(let I=0;I<L.length;I++)if(L[I].canvas.width!==k)A=I,k=L[I].canvas.width;else if(I-A==3)break;const D=L.slice(A,A+4),B=D.map(I=>I.glyphs[0].texturePage).sort((I,R)=>I>R?1:-1),N=B[0],$=this._mergePages(D,N);$.version++,this._pages[N]=$;for(let I=B.length-1;I>=1;I--)this._deletePage(B[I]);this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire($.canvas)});const y=new b(this._document,this._textureSize);return this._pages.push(y),this._activePages.push(y),this._onAddTextureAtlasCanvas.fire(y.canvas),y}_mergePages(y,L){const A=2*y[0].canvas.width,k=new b(this._document,A,y);for(const[D,B]of y.entries()){const N=D*B.canvas.width%A,$=Math.floor(D/2)*B.canvas.height;k.ctx.drawImage(B.canvas,N,$);for(const R of B.glyphs)R.texturePage=L,R.sizeClipSpace.x=R.size.x/A,R.sizeClipSpace.y=R.size.y/A,R.texturePosition.x+=N,R.texturePosition.y+=$,R.texturePositionClipSpace.x=R.texturePosition.x/A,R.texturePositionClipSpace.y=R.texturePosition.y/A;this._onRemoveTextureAtlasCanvas.fire(B.canvas);const I=this._activePages.indexOf(B);I!==-1&&this._activePages.splice(I,1)}return k}_deletePage(y){this._pages.splice(y,1);for(let L=y;L<this._pages.length;L++){const A=this._pages[L];for(const k of A.glyphs)k.texturePage--;A.version++}}getRasterizedGlyphCombinedChar(y,L,A,k){return this._getFromCacheMap(this._cacheMapCombined,y,L,A,k)}getRasterizedGlyph(y,L,A,k){return this._getFromCacheMap(this._cacheMap,y,L,A,k)}_getFromCacheMap(y,L,A,k,D){return h=y.get(L,A,k,D),h||(h=this._drawToCache(L,A,k,D),y.set(L,A,k,D,h)),h}_getColorFromAnsiIndex(y){if(y>=this._config.colors.ansi.length)throw new Error("No color found for idx "+y);return this._config.colors.ansi[y]}_getBackgroundColor(y,L,A,k){if(this._config.allowTransparency)return p.NULL_COLOR;let D;switch(y){case 16777216:case 33554432:D=this._getColorFromAnsiIndex(L);break;case 50331648:const B=u.AttributeData.toColorRGB(L);D=p.rgba.toColor(B[0],B[1],B[2]);break;default:D=A?this._config.colors.foreground:this._config.colors.background}return k&&(D=p.color.blend(this._config.colors.background,p.color.multiplyOpacity(D,d.DIM_OPACITY))),D}_getForegroundColor(y,L,A,k,D,B,N,$,I,R){const T=this._getMinimumContrastColor(y,L,A,k,D,B,!1,I,R);if(T)return T;let P;switch(D){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&B<8&&(B+=8),P=this._getColorFromAnsiIndex(B);break;case 50331648:const O=u.AttributeData.toColorRGB(B);P=p.rgba.toColor(O[0],O[1],O[2]);break;default:P=N?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(P=p.color.opaque(P)),$&&(P=p.color.multiplyOpacity(P,d.DIM_OPACITY)),P}_resolveBackgroundRgba(y,L,A){switch(y){case 16777216:case 33554432:return this._getColorFromAnsiIndex(L).rgba;case 50331648:return L<<8;default:return A?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(y,L,A,k){switch(y){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&k&&L<8&&(L+=8),this._getColorFromAnsiIndex(L).rgba;case 50331648:return L<<8;default:return A?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(y,L,A,k,D,B,N,$,I){if(this._config.minimumContrastRatio===1||I)return;const R=this._config.colors.contrastCache.getColor(y,k);if(R!==void 0)return R||void 0;const T=this._resolveBackgroundRgba(L,A,N),P=this._resolveForegroundRgba(D,B,N,$),O=p.rgba.ensureContrastRatio(T,P,this._config.minimumContrastRatio);if(!O)return void this._config.colors.contrastCache.setColor(y,k,null);const z=p.rgba.toColor(O>>24&255,O>>16&255,O>>8&255);return this._config.colors.contrastCache.setColor(y,k,z),z}_drawToCache(y,L,A,k){const D=typeof y=="number"?String.fromCharCode(y):y,B=this._config.deviceCellWidth*Math.max(D.length,2)+4;this._tmpCanvas.width<B&&(this._tmpCanvas.width=B);const N=this._config.deviceCellHeight+8;if(this._tmpCanvas.height<N&&(this._tmpCanvas.height=N),this._tmpCtx.save(),this._workAttributeData.fg=A,this._workAttributeData.bg=L,this._workAttributeData.extended.ext=k,this._workAttributeData.isInvisible())return c;const $=!!this._workAttributeData.isBold(),I=!!this._workAttributeData.isInverse(),R=!!this._workAttributeData.isDim(),T=!!this._workAttributeData.isItalic(),P=!!this._workAttributeData.isUnderline(),O=!!this._workAttributeData.isStrikethrough();let z=this._workAttributeData.getFgColor(),V=this._workAttributeData.getFgColorMode(),Q=this._workAttributeData.getBgColor(),q=this._workAttributeData.getBgColorMode();if(I){const se=z;z=Q,Q=se;const fe=V;V=q,q=fe}const Z=this._getBackgroundColor(q,Q,I,R);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=Z.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const M=$?this._config.fontWeightBold:this._config.fontWeight,U=T?"italic":"";this._tmpCtx.font=`${U} ${M} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=d.TEXT_BASELINE;const j=D.length===1&&(0,w.isPowerlineGlyph)(D.charCodeAt(0)),W=D.length===1&&(0,w.isRestrictedPowerlineGlyph)(D.charCodeAt(0)),te=this._getForegroundColor(L,q,Q,A,V,z,I,R,$,(0,w.excludeFromContrastRatioDemands)(D.charCodeAt(0)));this._tmpCtx.fillStyle=te.css;const G=W?0:4;let le=!1;this._config.customGlyphs!==!1&&(le=(0,C.tryDrawCustomChar)(this._tmpCtx,D,G,G,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let De,Te=!j;if(De=typeof y=="number"?this._unicodeService.wcwidth(y):this._unicodeService.getStringCellWidth(y),P){this._tmpCtx.save();const se=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),fe=se%2==1?.5:0;if(this._tmpCtx.lineWidth=se,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Te=!1,this._tmpCtx.strokeStyle=`rgb(${u.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Te=!1;let Qe=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&Qe<8&&(Qe+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(Qe).css}this._tmpCtx.beginPath();const Ce=G,Oe=Math.ceil(G+this._config.deviceCharHeight)-fe,je=G+this._config.deviceCharHeight+se-fe,Lt=Math.ceil(G+this._config.deviceCharHeight+2*se)-fe;for(let Qe=0;Qe<De;Qe++){this._tmpCtx.save();const we=Ce+Qe*this._config.deviceCellWidth,rt=Ce+(Qe+1)*this._config.deviceCellWidth,vt=we+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(we,Oe),this._tmpCtx.lineTo(rt,Oe),this._tmpCtx.moveTo(we,Lt),this._tmpCtx.lineTo(rt,Lt);break;case 3:const Ft=se<=1?Lt:Math.ceil(G+this._config.deviceCharHeight-se/2)-fe,ve=se<=1?Oe:Math.ceil(G+this._config.deviceCharHeight+se/2)-fe,pn=new Path2D;pn.rect(we,Oe,this._config.deviceCellWidth,Lt-Oe),this._tmpCtx.clip(pn),this._tmpCtx.moveTo(we-this._config.deviceCellWidth/2,je),this._tmpCtx.bezierCurveTo(we-this._config.deviceCellWidth/2,ve,we,ve,we,je),this._tmpCtx.bezierCurveTo(we,Ft,vt,Ft,vt,je),this._tmpCtx.bezierCurveTo(vt,ve,rt,ve,rt,je),this._tmpCtx.bezierCurveTo(rt,Ft,rt+this._config.deviceCellWidth/2,Ft,rt+this._config.deviceCellWidth/2,je);break;case 4:this._tmpCtx.setLineDash([2*this._config.devicePixelRatio,this._config.devicePixelRatio]),this._tmpCtx.moveTo(we,Oe),this._tmpCtx.lineTo(rt,Oe);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(we,Oe),this._tmpCtx.lineTo(rt,Oe);break;default:this._tmpCtx.moveTo(we,Oe),this._tmpCtx.lineTo(rt,Oe)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!le&&this._config.fontSize>=12&&!this._config.allowTransparency&&D!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const Qe=this._tmpCtx.measureText(D);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in Qe&&Qe.actualBoundingBoxDescent>0){this._tmpCtx.save();const we=new Path2D;we.rect(Ce,Oe-Math.ceil(se/2),this._config.deviceCellWidth,Lt-Oe+Math.ceil(se/2)),this._tmpCtx.clip(we),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=Z.css,this._tmpCtx.strokeText(D,G,G+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(le||this._tmpCtx.fillText(D,G,G+this._config.deviceCharHeight),D==="_"&&!this._config.allowTransparency){let se=x(this._tmpCtx.getImageData(G,G,this._config.deviceCellWidth,this._config.deviceCellHeight),Z,te,Te);if(se)for(let fe=1;fe<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=Z.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(D,G,G+this._config.deviceCharHeight-fe),se=x(this._tmpCtx.getImageData(G,G,this._config.deviceCellWidth,this._config.deviceCellHeight),Z,te,Te),se);fe++);}if(O){const se=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),fe=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=se,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(G,G+Math.floor(this._config.deviceCharHeight/2)-fe),this._tmpCtx.lineTo(G+this._config.deviceCharWidth*De,G+Math.floor(this._config.deviceCharHeight/2)-fe),this._tmpCtx.stroke()}this._tmpCtx.restore();const Et=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let ie;if(ie=this._config.allowTransparency?function(se){for(let fe=0;fe<se.data.length;fe+=4)if(se.data[fe+3]>0)return!1;return!0}(Et):x(Et,Z,te,Te),ie)return c;const de=this._findGlyphBoundingBox(Et,this._workBoundingBox,B,W,le,G);let ce,he;for(;;){if(this._activePages.length===0){const se=this._createNewPage();ce=se,he=se.currentRow,he.height=de.size.y;break}ce=this._activePages[this._activePages.length-1],he=ce.currentRow;for(const se of this._activePages)de.size.y<=se.currentRow.height&&(ce=se,he=se.currentRow);for(let se=this._activePages.length-1;se>=0;se--)for(const fe of this._activePages[se].fixedRows)fe.height<=he.height&&de.size.y<=fe.height&&(ce=this._activePages[se],he=fe);if(he.y+de.size.y>=ce.canvas.height||he.height>de.size.y+2){let se=!1;if(ce.currentRow.y+ce.currentRow.height+de.size.y>=ce.canvas.height){let fe;for(const Ce of this._activePages)if(Ce.currentRow.y+Ce.currentRow.height+de.size.y<Ce.canvas.height){fe=Ce;break}if(fe)ce=fe;else{const Ce=this._createNewPage();ce=Ce,he=Ce.currentRow,he.height=de.size.y,se=!0}}se||(ce.currentRow.height>0&&ce.fixedRows.push(ce.currentRow),he={x:0,y:ce.currentRow.y+ce.currentRow.height,height:de.size.y},ce.fixedRows.push(he),ce.currentRow={x:0,y:he.y+he.height,height:0})}if(he.x+de.size.x<=ce.canvas.width)break;he===ce.currentRow?(he.x=0,he.y+=he.height,he.height=0):ce.fixedRows.splice(ce.fixedRows.indexOf(he),1)}return de.texturePage=this._pages.indexOf(ce),de.texturePosition.x=he.x,de.texturePosition.y=he.y,de.texturePositionClipSpace.x=he.x/ce.canvas.width,de.texturePositionClipSpace.y=he.y/ce.canvas.height,de.sizeClipSpace.x/=ce.canvas.width,de.sizeClipSpace.y/=ce.canvas.height,he.height=Math.max(he.height,de.size.y),he.x+=de.size.x,ce.ctx.putImageData(Et,de.texturePosition.x-this._workBoundingBox.left,de.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,de.size.x,de.size.y),ce.addGlyph(de),ce.version++,de}_findGlyphBoundingBox(y,L,A,k,D,B){L.top=0;const N=k?this._config.deviceCellHeight:this._tmpCanvas.height,$=k?this._config.deviceCellWidth:A;let I=!1;for(let R=0;R<N;R++){for(let T=0;T<$;T++){const P=R*this._tmpCanvas.width*4+4*T+3;if(y.data[P]!==0){L.top=R,I=!0;break}}if(I)break}L.left=0,I=!1;for(let R=0;R<B+$;R++){for(let T=0;T<N;T++){const P=T*this._tmpCanvas.width*4+4*R+3;if(y.data[P]!==0){L.left=R,I=!0;break}}if(I)break}L.right=$,I=!1;for(let R=B+$-1;R>=B;R--){for(let T=0;T<N;T++){const P=T*this._tmpCanvas.width*4+4*R+3;if(y.data[P]!==0){L.right=R,I=!0;break}}if(I)break}L.bottom=N,I=!1;for(let R=N-1;R>=0;R--){for(let T=0;T<$;T++){const P=R*this._tmpCanvas.width*4+4*T+3;if(y.data[P]!==0){L.bottom=R,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:L.right-L.left+1,y:L.bottom-L.top+1},sizeClipSpace:{x:L.right-L.left+1,y:L.bottom-L.top+1},offset:{x:-L.left+B+(k||D?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-L.top+B+(k||D?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}s.TextureAtlas=m;class b{constructor(y,L,A){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],A)for(const k of A)this._glyphs.push(...k.glyphs),this._usedPixels+=k._usedPixels;this.canvas=E(y,L,L),this.ctx=(0,w.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(y){this._glyphs.push(y),this._usedPixels+=y.size.x*y.size.y}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function x(S,y,L,A){const k=y.rgba>>>24,D=y.rgba>>>16&255,B=y.rgba>>>8&255,N=L.rgba>>>24,$=L.rgba>>>16&255,I=L.rgba>>>8&255,R=Math.floor((Math.abs(k-N)+Math.abs(D-$)+Math.abs(B-I))/12);let T=!0;for(let P=0;P<S.data.length;P+=4)S.data[P]===k&&S.data[P+1]===D&&S.data[P+2]===B||A&&Math.abs(S.data[P]-k)+Math.abs(S.data[P+1]-D)+Math.abs(S.data[P+2]-B)<R?S.data[P+3]=0:T=!1;return T}function E(S,y,L){const A=S.createElement("canvas");return A.width=y,A.height=L,A}},160:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;const d=a(399);let v=0,u=0,p=0,C=0;var w,_,n;function l(h){const m=h.toString(16);return m.length<2?"0"+m:m}function c(h,m){return h<m?(m+.05)/(h+.05):(h+.05)/(m+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(h){h.toCss=function(m,b,x,E){return E!==void 0?`#${l(m)}${l(b)}${l(x)}${l(E)}`:`#${l(m)}${l(b)}${l(x)}`},h.toRgba=function(m,b,x,E=255){return(m<<24|b<<16|x<<8|E)>>>0}}(w=s.channels||(s.channels={})),function(h){function m(b,x){return C=Math.round(255*x),[v,u,p]=n.toChannels(b.rgba),{css:w.toCss(v,u,p,C),rgba:w.toRgba(v,u,p,C)}}h.blend=function(b,x){if(C=(255&x.rgba)/255,C===1)return{css:x.css,rgba:x.rgba};const E=x.rgba>>24&255,S=x.rgba>>16&255,y=x.rgba>>8&255,L=b.rgba>>24&255,A=b.rgba>>16&255,k=b.rgba>>8&255;return v=L+Math.round((E-L)*C),u=A+Math.round((S-A)*C),p=k+Math.round((y-k)*C),{css:w.toCss(v,u,p),rgba:w.toRgba(v,u,p)}},h.isOpaque=function(b){return(255&b.rgba)==255},h.ensureContrastRatio=function(b,x,E){const S=n.ensureContrastRatio(b.rgba,x.rgba,E);if(S)return n.toColor(S>>24&255,S>>16&255,S>>8&255)},h.opaque=function(b){const x=(255|b.rgba)>>>0;return[v,u,p]=n.toChannels(x),{css:w.toCss(v,u,p),rgba:x}},h.opacity=m,h.multiplyOpacity=function(b,x){return C=255&b.rgba,m(b,C*x/255)},h.toColorRGB=function(b){return[b.rgba>>24&255,b.rgba>>16&255,b.rgba>>8&255]}}(s.color||(s.color={})),function(h){let m,b;if(!d.isNode){const x=document.createElement("canvas");x.width=1,x.height=1;const E=x.getContext("2d",{willReadFrequently:!0});E&&(m=E,m.globalCompositeOperation="copy",b=m.createLinearGradient(0,0,1,1))}h.toColor=function(x){if(x.match(/#[\da-f]{3,8}/i))switch(x.length){case 4:return v=parseInt(x.slice(1,2).repeat(2),16),u=parseInt(x.slice(2,3).repeat(2),16),p=parseInt(x.slice(3,4).repeat(2),16),n.toColor(v,u,p);case 5:return v=parseInt(x.slice(1,2).repeat(2),16),u=parseInt(x.slice(2,3).repeat(2),16),p=parseInt(x.slice(3,4).repeat(2),16),C=parseInt(x.slice(4,5).repeat(2),16),n.toColor(v,u,p,C);case 7:return{css:x,rgba:(parseInt(x.slice(1),16)<<8|255)>>>0};case 9:return{css:x,rgba:parseInt(x.slice(1),16)>>>0}}const E=x.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(E)return v=parseInt(E[1]),u=parseInt(E[2]),p=parseInt(E[3]),C=Math.round(255*(E[5]===void 0?1:parseFloat(E[5]))),n.toColor(v,u,p,C);if(!m||!b)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=b,m.fillStyle=x,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[v,u,p,C]=m.getImageData(0,0,1,1).data,C!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:w.toRgba(v,u,p,C),css:x}}}(s.css||(s.css={})),function(h){function m(b,x,E){const S=b/255,y=x/255,L=E/255;return .2126*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.7152*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.0722*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))}h.relativeLuminance=function(b){return m(b>>16&255,b>>8&255,255&b)},h.relativeLuminance2=m}(_=s.rgb||(s.rgb={})),function(h){function m(x,E,S){const y=x>>24&255,L=x>>16&255,A=x>>8&255;let k=E>>24&255,D=E>>16&255,B=E>>8&255,N=c(_.relativeLuminance2(k,D,B),_.relativeLuminance2(y,L,A));for(;N<S&&(k>0||D>0||B>0);)k-=Math.max(0,Math.ceil(.1*k)),D-=Math.max(0,Math.ceil(.1*D)),B-=Math.max(0,Math.ceil(.1*B)),N=c(_.relativeLuminance2(k,D,B),_.relativeLuminance2(y,L,A));return(k<<24|D<<16|B<<8|255)>>>0}function b(x,E,S){const y=x>>24&255,L=x>>16&255,A=x>>8&255;let k=E>>24&255,D=E>>16&255,B=E>>8&255,N=c(_.relativeLuminance2(k,D,B),_.relativeLuminance2(y,L,A));for(;N<S&&(k<255||D<255||B<255);)k=Math.min(255,k+Math.ceil(.1*(255-k))),D=Math.min(255,D+Math.ceil(.1*(255-D))),B=Math.min(255,B+Math.ceil(.1*(255-B))),N=c(_.relativeLuminance2(k,D,B),_.relativeLuminance2(y,L,A));return(k<<24|D<<16|B<<8|255)>>>0}h.ensureContrastRatio=function(x,E,S){const y=_.relativeLuminance(x>>8),L=_.relativeLuminance(E>>8);if(c(y,L)<S){if(L<y){const D=m(x,E,S),B=c(y,_.relativeLuminance(D>>8));if(B<S){const N=b(x,E,S);return B>c(y,_.relativeLuminance(N>>8))?D:N}return D}const A=b(x,E,S),k=c(y,_.relativeLuminance(A>>8));if(k<S){const D=m(x,E,S);return k>c(y,_.relativeLuminance(D>>8))?A:D}return A}},h.reduceLuminance=m,h.increaseLuminance=b,h.toChannels=function(x){return[x>>24&255,x>>16&255,x>>8&255,255&x]},h.toColor=function(x,E,S,y){return{css:w.toCss(x,E,S,y),rgba:w.toRgba(x,E,S,y)}}}(n=s.rgba||(s.rgba={})),s.toPaddedHex=l,s.contrastRatio=c},345:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===a)return void this._listeners.splice(d,1)}}})),this._event}fire(a,d){const v=[];for(let u=0;u<this._listeners.length;u++)v.push(this._listeners[u]);for(let u=0;u<v.length;u++)v[u].call(void 0,a,d)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},s.forwardEvent=function(a,d){return a(v=>d.fire(v))}},859:(g,s)=>{function a(d){for(const v of d)v.dispose();d.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const v=this._disposables.indexOf(d);v!==-1&&this._disposables.splice(v,1)}},s.toDisposable=function(d){return{dispose:d}},s.disposeArray=a,s.getDisposeArrayDisposable=function(d){return{dispose:()=>a(d)}}},485:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(v,u,p){this._data[v]||(this._data[v]={}),this._data[v][u]=p}get(v,u){return this._data[v]?this._data[v][u]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(d,v,u,p,C){this._data.get(d,v)||this._data.set(d,v,new a),this._data.get(d,v).set(u,p,C)}get(d,v,u,p){var C;return(C=this._data.get(d,v))===null||C===void 0?void 0:C.get(u,p)}clear(){this._data.clear()}}},399:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";const a=s.isNode?"node":navigator.userAgent,d=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;const v=a.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),s.isIpad=d==="iPad",s.isIphone=d==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),s.isLinux=d.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},385:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const d=a(399);class v{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let w=0,_=0,n=C.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),_=Math.max(w,_),l=C.timeRemaining(),1.5*_>l)return n-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-w))}ms`),void this._start();n=l}this.clear()}}class u extends v{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const w=Date.now()+C;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}s.PriorityTaskQueue=u,s.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:u,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){const u=new a;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=a;class d{constructor(u=0,p=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=p}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=d},782:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const d=a(133),v=a(855),u=a(147);class p extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const _=new p;return _.setFromCharData(w),_}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let _=!1;if(w[v.CHAR_DATA_CHAR_INDEX].length>2)_=!0;else if(w[v.CHAR_DATA_CHAR_INDEX].length===2){const n=w[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const l=w[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(n-55296)+l-56320+65536|w[v.CHAR_DATA_WIDTH_INDEX]<<22:_=!0}else _=!0}else this.content=w[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[v.CHAR_DATA_WIDTH_INDEX]<<22;_&&(this.combinedData=w[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=p},855:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},133:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,d=0,v=a.length){let u="";for(let p=d;p<v;++p){let C=a[p];C>65535?(C-=65536,u+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):u+=String.fromCharCode(C)}return u},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,d){const v=a.length;if(!v)return 0;let u=0,p=0;if(this._interim){const C=a.charCodeAt(p++);56320<=C&&C<=57343?d[u++]=1024*(this._interim-55296)+C-56320+65536:(d[u++]=this._interim,d[u++]=C),this._interim=0}for(let C=p;C<v;++C){const w=a.charCodeAt(C);if(55296<=w&&w<=56319){if(++C>=v)return this._interim=w,u;const _=a.charCodeAt(C);56320<=_&&_<=57343?d[u++]=1024*(w-55296)+_-56320+65536:(d[u++]=w,d[u++]=_)}else w!==65279&&(d[u++]=w)}return u}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,d){const v=a.length;if(!v)return 0;let u,p,C,w,_=0,n=0,l=0;if(this.interim[0]){let m=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let x,E=0;for(;(x=63&this.interim[++E])&&E<4;)b<<=6,b|=x;const S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=S-E;for(;l<y;){if(l>=v)return 0;if(x=a[l++],(192&x)!=128){l--,m=!0;break}this.interim[E++]=x,b<<=6,b|=63&x}m||(S===2?b<128?l--:d[_++]=b:S===3?b<2048||b>=55296&&b<=57343||b===65279||(d[_++]=b):b<65536||b>1114111||(d[_++]=b)),this.interim.fill(0)}const c=v-4;let h=l;for(;h<v;){for(;!(!(h<c)||128&(u=a[h])||128&(p=a[h+1])||128&(C=a[h+2])||128&(w=a[h+3]));)d[_++]=u,d[_++]=p,d[_++]=C,d[_++]=w,h+=4;if(u=a[h++],u<128)d[_++]=u;else if((224&u)==192){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(n=(31&u)<<6|63&p,n<128){h--;continue}d[_++]=n}else if((240&u)==224){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,_;if(C=a[h++],(192&C)!=128){h--;continue}if(n=(15&u)<<12|(63&p)<<6|63&C,n<2048||n>=55296&&n<=57343||n===65279)continue;d[_++]=n}else if((248&u)==240){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,_;if(C=a[h++],(192&C)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,this.interim[2]=C,_;if(w=a[h++],(192&w)!=128){h--;continue}if(n=(7&u)<<18|(63&p)<<12|(63&C)<<6|63&w,n<65536||n>1114111)continue;d[_++]=n}}return _}}}},i={};function o(g){var s=i[g];if(s!==void 0)return s.exports;var a=i[g]={exports:{}};return r[g](a,a.exports,o),a.exports}var f={};return(()=>{var g=f;Object.defineProperty(g,"__esModule",{value:!0}),g.WebglAddon=void 0;const s=o(345),a=o(859),d=o(399),v=o(666);class u extends a.Disposable{constructor(C){if(d.isSafari&&(0,d.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=C,this._onChangeTextureAtlas=this.register(new s.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new s.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new s.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new s.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(C){const w=C._core;if(!C.element)return void this.register(w.onWillOpen(()=>this.activate(C)));this._terminal=C;const _=w.coreService,n=w.optionsService,l=w,c=l._renderService,h=l._characterJoinerService,m=l._charSizeService,b=l._coreBrowserService,x=l._decorationService,E=l._themeService;this._renderer=this.register(new v.WebglRenderer(C,h,m,b,_,x,n,E,this._preserveDrawingBuffer)),this.register((0,s.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,s.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,s.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,s.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),c.setRenderer(this._renderer),this.register((0,a.toDisposable)(()=>{const S=this._terminal._core._renderService;S.setRenderer(this._terminal._core._createRenderer()),S.handleResize(C.cols,C.rows)}))}get textureAtlas(){var C;return(C=this._renderer)===null||C===void 0?void 0:C.textureAtlas}clearTextureAtlas(){var C;(C=this._renderer)===null||C===void 0||C.clearTextureAtlas()}}g.WebglAddon=u})(),f})()})})(vp);var Zy=vp.exports;function e1({containerName:e}){const t=F.useRef(null),r=F.useRef(null),i=F.useRef(null),[o]=w_(dp),[f,g]=F.useState(!1),[s,a]=F.useState(!1),d=e||o,v=u=>{var C;const p=i.current;p&&p.readyState===WebSocket.OPEN&&p.send(u),(C=r.current)==null||C.focus()};return F.useEffect(()=>{a("ontouchstart"in window||navigator.maxTouchPoints>0)},[]),F.useEffect(()=>{if(!d||!t.current)return;g(!0),r.current&&r.current.dispose(),i.current&&i.current.close();const u=new Yy.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',scrollback:5e3,drawBoldTextInBrightColors:!0}),p=new Jy.FitAddon;u.loadAddon(p);try{const C=new Zy.WebglAddon;u.loadAddon(C)}catch{}r.current=u;try{u.open(t.current),u.focus(),setTimeout(()=>{try{p.fit();const y=i.current;if(y&&y.readyState===WebSocket.OPEN){const L=u.cols,A=u.rows;y.send(`__RESIZE__:${L},${A}`)}}catch(y){console.warn("Failed to fit terminal:",y)}},100);const C=window.location.protocol==="https:"?"wss":"ws",w=new URLSearchParams(window.location.search).get("token")||d,_=new URLSearchParams(window.location.search),n=_.get("run"),l=_.get("run_b64"),c=_.get("cwd"),h=_.get("cwd_b64"),m=new URLSearchParams;m.set("token",w),l?m.set("run_b64",l):n&&m.set("run",n),h?m.set("cwd_b64",h):c&&m.set("cwd",c);const b=new WebSocket(`${C}://${window.location.host}/terminal/${d}?${m.toString()}`);i.current=b,b.onopen=()=>{g(!1),u.write(`Connected to container...\r
`);try{const y=u.cols,L=u.rows;Number.isFinite(y)&&Number.isFinite(L)&&b.send(`__RESIZE__:${y},${L}`)}catch(y){console.warn("Failed to send initial resize:",y)}},b.onmessage=y=>{try{u.write(y.data)}catch(L){console.error("Failed to write to terminal:",L)}},b.onerror=y=>{console.error("WebSocket error:",y),g(!1),u.write(`\r
`)},b.onclose=()=>{g(!1),u.write(`\r
`)},u.onData(y=>{b.readyState===WebSocket.OPEN&&b.send(y)});const x=(y,L)=>{b.readyState===WebSocket.OPEN&&b.send(`__RESIZE__:${y},${L}`)},E=()=>{try{p.fit();const y=u.cols,L=u.rows;Number.isFinite(y)&&Number.isFinite(L)&&x(y,L)}catch(y){console.warn("Failed to fit terminal on resize:",y)}};window.addEventListener("resize",E);const S=u.onResize(({cols:y,rows:L})=>{Number.isFinite(y)&&Number.isFinite(L)&&x(y,L)});return()=>{window.removeEventListener("resize",E),b.readyState===WebSocket.OPEN&&b.close(),S.dispose(),u.dispose()}}catch(C){console.error("Failed to initialize terminal:",C),g(!1)}},[d]),d?X.jsxs("div",{className:"h-full w-full relative",children:[f&&X.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 text-white z-10",children:"Connecting to terminal..."}),s&&X.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2 z-20",children:[X.jsx("button",{className:"px-2 py-1 text-sm bg-gray-700 text-white rounded",onClick:()=>v(""),children:"Ctrl+C"}),X.jsx("button",{className:"px-2 py-1 text-sm bg-gray-700 text-white rounded",onClick:()=>v("\x1B"),children:"Esc"})]}),X.jsx("div",{ref:t,className:"h-full w-full"})]}):X.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-500",children:"No container specified"})}function t1({containerName:e}){const[t]=w_(dp),r=e||t,{data:i,isLoading:o,error:f}=p_({queryKey:["diff",r],queryFn:async()=>{const s=await fetch(`/api/changed/${r}`);if(!s.ok)throw new Error("failed");return s.json()},enabled:!!r,refetchInterval:5e3});if(!r)return X.jsx("p",{className:"p-4",children:"No container specified."});if(o)return X.jsx("p",{className:"p-4",children:"Loading..."});if(f)return X.jsx("p",{className:"p-4",children:"Error loading diff."});function g(s){const a=s.split(`
`),d=[];let v=0,u=0;const p=/@@ -(\d+),?\d* \+(\d+),?\d* @@/;for(const C of a)if(C.startsWith("@@")){const w=C.match(p);w&&(v=parseInt(w[1],10),u=parseInt(w[2],10)),d.push({content:C,type:"hunk"})}else C.startsWith("+")&&!C.startsWith("+++")?d.push({content:C,oldNumber:void 0,newNumber:u++,type:"add"}):C.startsWith("-")&&!C.startsWith("---")?d.push({content:C,oldNumber:v++,newNumber:void 0,type:"remove"}):d.push({content:C,oldNumber:v++,newNumber:u++,type:"context"});return d}return X.jsx("div",{className:"p-2 space-y-4 text-sm",children:i==null?void 0:i.files.map(s=>X.jsxs("div",{children:[X.jsxs("h3",{className:"font-medium",children:[s.path," (",s.status,")"]}),s.diff?X.jsx("div",{className:"bg-gray-100 p-2 overflow-auto text-xs font-mono",children:g(s.diff).map((a,d)=>{let v="flex whitespace-pre";return a.type==="add"?v+=" text-green-700 bg-green-100":a.type==="remove"?v+=" text-red-700 bg-red-100":a.type==="hunk"&&(v+=" text-purple-700"),X.jsxs("div",{className:v,children:[X.jsx("span",{className:"w-12 text-right pr-2 text-gray-500 select-none",children:a.oldNumber??""}),X.jsx("span",{className:"w-12 text-right pr-2 text-gray-500 select-none",children:a.newNumber??""}),X.jsx("span",{className:"flex-1",children:a.content})]},d)})}):X.jsx("div",{className:"bg-gray-100 p-2 overflow-auto text-xs",children:"No diff"})]},s.path))})}const Mh=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Th=_n,r1=(e,t)=>r=>{var i;if((t==null?void 0:t.variants)==null)return Th(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:o,defaultVariants:f}=t,g=Object.keys(o).map(d=>{const v=r==null?void 0:r[d],u=f==null?void 0:f[d];if(v===null)return null;const p=Mh(v)||Mh(u);return o[d][p]}),s=r&&Object.entries(r).reduce((d,v)=>{let[u,p]=v;return p===void 0||(d[u]=p),d},{}),a=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((d,v)=>{let{class:u,className:p,...C}=v;return Object.entries(C).every(w=>{let[_,n]=w;return Array.isArray(n)?n.includes({...f,...s}[_]):{...f,...s}[_]===n})?[...d,u,p]:d},[]);return Th(e,g,a,r==null?void 0:r.class,r==null?void 0:r.className)},Jc="-",i1=e=>{const t=n1(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:g=>{const s=g.split(Jc);return s[0]===""&&s.length!==1&&s.shift(),gp(s,t)||s1(g)},getConflictingClassGroupIds:(g,s)=>{const a=r[g]||[];return s&&i[g]?[...a,...i[g]]:a}}},gp=(e,t)=>{var g;if(e.length===0)return t.classGroupId;const r=e[0],i=t.nextPart.get(r),o=i?gp(e.slice(1),i):void 0;if(o)return o;if(t.validators.length===0)return;const f=e.join(Jc);return(g=t.validators.find(({validator:s})=>s(f)))==null?void 0:g.classGroupId},Ph=/^\[(.+)\]$/,s1=e=>{if(Ph.test(e)){const t=Ph.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},n1=e=>{const{theme:t,prefix:r}=e,i={nextPart:new Map,validators:[]};return a1(Object.entries(e.classGroups),r).forEach(([f,g])=>{Vl(g,i,f,t)}),i},Vl=(e,t,r,i)=>{e.forEach(o=>{if(typeof o=="string"){const f=o===""?t:Oh(t,o);f.classGroupId=r;return}if(typeof o=="function"){if(o1(o)){Vl(o(i),t,r,i);return}t.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(([f,g])=>{Vl(g,Oh(t,f),r,i)})})},Oh=(e,t)=>{let r=e;return t.split(Jc).forEach(i=>{r.nextPart.has(i)||r.nextPart.set(i,{nextPart:new Map,validators:[]}),r=r.nextPart.get(i)}),r},o1=e=>e.isThemeGetter,a1=(e,t)=>t?e.map(([r,i])=>{const o=i.map(f=>typeof f=="string"?t+f:typeof f=="object"?Object.fromEntries(Object.entries(f).map(([g,s])=>[t+g,s])):f);return[r,o]}):e,l1=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,i=new Map;const o=(f,g)=>{r.set(f,g),t++,t>e&&(t=0,i=r,r=new Map)};return{get(f){let g=r.get(f);if(g!==void 0)return g;if((g=i.get(f))!==void 0)return o(f,g),g},set(f,g){r.has(f)?r.set(f,g):o(f,g)}}},mp="!",c1=e=>{const{separator:t,experimentalParseClassName:r}=e,i=t.length===1,o=t[0],f=t.length,g=s=>{const a=[];let d=0,v=0,u;for(let n=0;n<s.length;n++){let l=s[n];if(d===0){if(l===o&&(i||s.slice(n,n+f)===t)){a.push(s.slice(v,n)),v=n+f;continue}if(l==="/"){u=n;continue}}l==="["?d++:l==="]"&&d--}const p=a.length===0?s:s.substring(v),C=p.startsWith(mp),w=C?p.substring(1):p,_=u&&u>v?u-v:void 0;return{modifiers:a,hasImportantModifier:C,baseClassName:w,maybePostfixModifierPosition:_}};return r?s=>r({className:s,parseClassName:g}):g},u1=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(i=>{i[0]==="["?(t.push(...r.sort(),i),r=[]):r.push(i)}),t.push(...r.sort()),t},h1=e=>({cache:l1(e.cacheSize),parseClassName:c1(e),...i1(e)}),d1=/\s+/,f1=(e,t)=>{const{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:o}=t,f=[],g=e.trim().split(d1);let s="";for(let a=g.length-1;a>=0;a-=1){const d=g[a],{modifiers:v,hasImportantModifier:u,baseClassName:p,maybePostfixModifierPosition:C}=r(d);let w=!!C,_=i(w?p.substring(0,C):p);if(!_){if(!w){s=d+(s.length>0?" "+s:s);continue}if(_=i(p),!_){s=d+(s.length>0?" "+s:s);continue}w=!1}const n=u1(v).join(":"),l=u?n+mp:n,c=l+_;if(f.includes(c))continue;f.push(c);const h=o(_,w);for(let m=0;m<h.length;++m){const b=h[m];f.push(l+b)}s=d+(s.length>0?" "+s:s)}return s};function _1(){let e=0,t,r,i="";for(;e<arguments.length;)(t=arguments[e++])&&(r=yp(t))&&(i&&(i+=" "),i+=r);return i}const yp=e=>{if(typeof e=="string")return e;let t,r="";for(let i=0;i<e.length;i++)e[i]&&(t=yp(e[i]))&&(r&&(r+=" "),r+=t);return r};function p1(e,...t){let r,i,o,f=g;function g(a){const d=t.reduce((v,u)=>u(v),e());return r=h1(d),i=r.cache.get,o=r.cache.set,f=s,s(a)}function s(a){const d=i(a);if(d)return d;const v=f1(a,r);return o(a,v),v}return function(){return f(_1.apply(null,arguments))}}const me=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Sp=/^\[(?:([a-z-]+):)?(.+)\]$/i,v1=/^\d+\/\d+$/,g1=new Set(["px","full","screen"]),m1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,y1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,S1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,C1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,w1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Qt=e=>Ti(e)||g1.has(e)||v1.test(e),dr=e=>ns(e,"length",D1),Ti=e=>!!e&&!Number.isNaN(Number(e)),Da=e=>ns(e,"number",Ti),vs=e=>!!e&&Number.isInteger(Number(e)),b1=e=>e.endsWith("%")&&Ti(e.slice(0,-1)),re=e=>Sp.test(e),fr=e=>m1.test(e),x1=new Set(["length","size","percentage"]),E1=e=>ns(e,x1,Cp),L1=e=>ns(e,"position",Cp),R1=new Set(["image","url"]),k1=e=>ns(e,R1,T1),A1=e=>ns(e,"",M1),gs=()=>!0,ns=(e,t,r)=>{const i=Sp.exec(e);return i?i[1]?typeof t=="string"?i[1]===t:t.has(i[1]):r(i[2]):!1},D1=e=>y1.test(e)&&!S1.test(e),Cp=()=>!1,M1=e=>C1.test(e),T1=e=>w1.test(e),P1=()=>{const e=me("colors"),t=me("spacing"),r=me("blur"),i=me("brightness"),o=me("borderColor"),f=me("borderRadius"),g=me("borderSpacing"),s=me("borderWidth"),a=me("contrast"),d=me("grayscale"),v=me("hueRotate"),u=me("invert"),p=me("gap"),C=me("gradientColorStops"),w=me("gradientColorStopPositions"),_=me("inset"),n=me("margin"),l=me("opacity"),c=me("padding"),h=me("saturate"),m=me("scale"),b=me("sepia"),x=me("skew"),E=me("space"),S=me("translate"),y=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",re,t],k=()=>[re,t],D=()=>["",Qt,dr],B=()=>["auto",Ti,re],N=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],I=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],T=()=>["","0",re],P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>[Ti,re];return{cacheSize:500,separator:":",theme:{colors:[gs],spacing:[Qt,dr],blur:["none","",fr,re],brightness:O(),borderColor:[e],borderRadius:["none","","full",fr,re],borderSpacing:k(),borderWidth:D(),contrast:O(),grayscale:T(),hueRotate:O(),invert:T(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[b1,dr],inset:A(),margin:A(),opacity:O(),padding:k(),saturate:O(),scale:O(),sepia:T(),skew:O(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",re]}],container:["container"],columns:[{columns:[fr]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...N(),re]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:y()}],"overscroll-x":[{"overscroll-x":y()}],"overscroll-y":[{"overscroll-y":y()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vs,re]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",re]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",vs,re]}],"grid-cols":[{"grid-cols":[gs]}],"col-start-end":[{col:["auto",{span:["full",vs,re]},re]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[gs]}],"row-start-end":[{row:["auto",{span:[vs,re]},re]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",re]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",re]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[c]}],px:[{px:[c]}],py:[{py:[c]}],ps:[{ps:[c]}],pe:[{pe:[c]}],pt:[{pt:[c]}],pr:[{pr:[c]}],pb:[{pb:[c]}],pl:[{pl:[c]}],m:[{m:[n]}],mx:[{mx:[n]}],my:[{my:[n]}],ms:[{ms:[n]}],me:[{me:[n]}],mt:[{mt:[n]}],mr:[{mr:[n]}],mb:[{mb:[n]}],ml:[{ml:[n]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",re,t]}],"min-w":[{"min-w":[re,t,"min","max","fit"]}],"max-w":[{"max-w":[re,t,"none","full","min","max","fit","prose",{screen:[fr]},fr]}],h:[{h:[re,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[re,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[re,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[re,t,"auto","min","max","fit"]}],"font-size":[{text:["base",fr,dr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Da]}],"font-family":[{font:[gs]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",re]}],"line-clamp":[{"line-clamp":["none",Ti,Da]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Qt,re]}],"list-image":[{"list-image":["none",re]}],"list-style-type":[{list:["none","disc","decimal",re]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[l]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[l]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Qt,dr]}],"underline-offset":[{"underline-offset":["auto",Qt,re]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[l]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...N(),L1]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",E1]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},k1]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[C]}],"gradient-via":[{via:[C]}],"gradient-to":[{to:[C]}],rounded:[{rounded:[f]}],"rounded-s":[{"rounded-s":[f]}],"rounded-e":[{"rounded-e":[f]}],"rounded-t":[{"rounded-t":[f]}],"rounded-r":[{"rounded-r":[f]}],"rounded-b":[{"rounded-b":[f]}],"rounded-l":[{"rounded-l":[f]}],"rounded-ss":[{"rounded-ss":[f]}],"rounded-se":[{"rounded-se":[f]}],"rounded-ee":[{"rounded-ee":[f]}],"rounded-es":[{"rounded-es":[f]}],"rounded-tl":[{"rounded-tl":[f]}],"rounded-tr":[{"rounded-tr":[f]}],"rounded-br":[{"rounded-br":[f]}],"rounded-bl":[{"rounded-bl":[f]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[l]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[l]}],"divide-style":[{divide:$()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[Qt,re]}],"outline-w":[{outline:[Qt,dr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[l]}],"ring-offset-w":[{"ring-offset":[Qt,dr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",fr,A1]}],"shadow-color":[{shadow:[gs]}],opacity:[{opacity:[l]}],"mix-blend":[{"mix-blend":[...I(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":I()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[i]}],contrast:[{contrast:[a]}],"drop-shadow":[{"drop-shadow":["","none",fr,re]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[v]}],invert:[{invert:[u]}],saturate:[{saturate:[h]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[a]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[v]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[l]}],"backdrop-saturate":[{"backdrop-saturate":[h]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[g]}],"border-spacing-x":[{"border-spacing-x":[g]}],"border-spacing-y":[{"border-spacing-y":[g]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",re]}],duration:[{duration:O()}],ease:[{ease:["linear","in","out","in-out",re]}],delay:[{delay:O()}],animate:[{animate:["none","spin","ping","pulse","bounce",re]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[m]}],"scale-x":[{"scale-x":[m]}],"scale-y":[{"scale-y":[m]}],rotate:[{rotate:[vs,re]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",re]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",re]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",re]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Qt,dr,Da]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},O1=p1(P1);function Xo(...e){return O1(_n(e))}const B1=r1("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-blue-500 text-white hover:bg-blue-600",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",link:"underline-offset-4 hover:underline text-blue-600"},size:{default:"h-9 px-4 py-2",sm:"h-8 px-3",lg:"h-10 px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Jn=F.forwardRef(({className:e,variant:t,size:r,asChild:i=!1,...o},f)=>{const g=i?gy:"button";return X.jsx(g,{className:Xo(B1({variant:t,size:r,className:e})),ref:f,...o})});Jn.displayName="Button";const wp=F.forwardRef(({className:e,...t},r)=>X.jsx("div",{ref:r,className:Xo("rounded-lg border bg-white shadow-sm",e),...t}));wp.displayName="Card";const bp=F.forwardRef(({className:e,...t},r)=>X.jsx("div",{ref:r,className:Xo("flex items-center justify-between p-4",e),...t}));bp.displayName="CardHeader";const xp=F.forwardRef(({className:e,...t},r)=>X.jsx("div",{ref:r,className:Xo("p-4",e),...t}));xp.displayName="CardContent";function I1(){const[e,t]=F.useState("/"),r=Vc(),{data:i,isLoading:o,error:f}=p_({queryKey:["list",e],queryFn:async()=>{const a=await fetch(`/api/list?path=${encodeURIComponent(e)}`);if(!a.ok)throw new Error("failed");return a.json()}}),g=()=>{if(e==="/")return;const a=e.replace(/\/?[^/]+$/,"")||"/";t(a)},s=async()=>{const a=await fetch("/api/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,agent:"claude"})});if(a.ok){const d=await a.json();r(`/container/${d.container}`)}};return o?X.jsx("p",{className:"p-4",children:"Loading..."}):f?X.jsx("p",{className:"p-4",children:"Error loading directory."}):X.jsxs(wp,{className:"max-w-xl mx-auto",children:[X.jsxs(bp,{children:[X.jsxs("div",{className:"space-x-2",children:[X.jsx(Jn,{variant:"secondary",onClick:g,children:"Up"}),X.jsx(Jn,{onClick:s,children:"Start Here"})]}),X.jsx("span",{className:"text-sm text-gray-600",children:e})]}),X.jsx(xp,{children:X.jsx("ul",{className:"space-y-1",children:i==null?void 0:i.filter(a=>a.is_dir).map(a=>X.jsx("li",{children:X.jsx(Jn,{variant:"link",className:"px-0",onClick:()=>t(a.path),children:a.name})},a.path))})})]})}function F1(){const{containerName:e}=w0();return X.jsxs(Xy,{defaultValue:"terminal",className:"h-full min-h-0 flex flex-col",children:[X.jsxs(hp,{className:"fixed bottom-0 w-full",children:[X.jsx(Wl,{value:"terminal",children:"Terminal"}),X.jsx(Wl,{value:"diff",children:"Diff"})]}),X.jsx(jl,{value:"terminal",className:"flex-1 min-h-0 mb-12",children:X.jsx(e1,{containerName:e})}),X.jsx(jl,{value:"diff",className:"flex-1 min-h-0 overflow-auto mb-12",children:X.jsx(t1,{containerName:e})})]})}function N1(){const e=Vc(),t=Wr();return F.useEffect(()=>{const r=new URLSearchParams(t.search),i=r.get("container");if(i){r.delete("container");const o=r.toString(),f=o?`/container/${i}?${o}`:`/container/${i}`;e(f,{replace:!0})}},[t.search,e]),new URLSearchParams(t.search).get("container")?null:X.jsx(I1,{})}function H1(){return X.jsxs(F0,{children:[X.jsx($l,{path:"/container/:containerName",element:X.jsx(F1,{})}),X.jsx($l,{path:"/",element:X.jsx(N1,{})})]})}const $1=new vm;Ma.createRoot(document.getElementById("root")).render(X.jsx(Mt.StrictMode,{children:X.jsx(Wm,{children:X.jsx(Cm,{client:$1,children:X.jsx(oy,{children:X.jsx(H1,{})})})})}));
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(N){let $="";for(let I=1;I<N;I++)$+=` else if (v_texpage == ${I}) { outColor = texture(u_texture[${I}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${N}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${$}
}`}(C.TextureAtlas.maxAtlasPages))),this.register((0,u.toDisposable)(()=>y.deleteProgram(this._program))),this._projectionLocation=(0,p.throwIfFalsy)(y.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,p.throwIfFalsy)(y.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,p.throwIfFalsy)(y.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=y.createVertexArray(),y.bindVertexArray(this._vertexArrayObject);const L=new Float32Array([0,0,1,0,0,1,1,1]),k=y.createBuffer();this.register((0,u.toDisposable)(()=>y.deleteBuffer(k))),y.bindBuffer(y.ARRAY_BUFFER,k),y.bufferData(y.ARRAY_BUFFER,L,y.STATIC_DRAW),y.enableVertexAttribArray(0),y.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const D=new Uint8Array([0,1,2,3]),A=y.createBuffer();this.register((0,u.toDisposable)(()=>y.deleteBuffer(A))),y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,A),y.bufferData(y.ELEMENT_ARRAY_BUFFER,D,y.STATIC_DRAW),this._attributesBuffer=(0,p.throwIfFalsy)(y.createBuffer()),this.register((0,u.toDisposable)(()=>y.deleteBuffer(this._attributesBuffer))),y.bindBuffer(y.ARRAY_BUFFER,this._attributesBuffer),y.enableVertexAttribArray(2),y.vertexAttribPointer(2,2,y.FLOAT,!1,_,0),y.vertexAttribDivisor(2,1),y.enableVertexAttribArray(3),y.vertexAttribPointer(3,2,y.FLOAT,!1,_,2*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(3,1),y.enableVertexAttribArray(4),y.vertexAttribPointer(4,1,y.FLOAT,!1,_,4*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(4,1),y.enableVertexAttribArray(5),y.vertexAttribPointer(5,2,y.FLOAT,!1,_,5*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(5,1),y.enableVertexAttribArray(6),y.vertexAttribPointer(6,2,y.FLOAT,!1,_,7*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(6,1),y.enableVertexAttribArray(1),y.vertexAttribPointer(1,2,y.FLOAT,!1,_,9*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(1,1),y.useProgram(this._program);const B=new Int32Array(C.TextureAtlas.maxAtlasPages);for(let N=0;N<C.TextureAtlas.maxAtlasPages;N++)B[N]=N;y.uniform1iv(this._textureLocation,B),y.uniformMatrix4fv(this._projectionLocation,!1,d.PROJECTION_MATRIX),this._atlasTextures=[];for(let N=0;N<C.TextureAtlas.maxAtlasPages;N++){const $=new d.GLTexture((0,p.throwIfFalsy)(y.createTexture()));this.register((0,u.toDisposable)(()=>y.deleteTexture($.texture))),y.activeTexture(y.TEXTURE0+N),y.bindTexture(y.TEXTURE_2D,$.texture),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,1,1,0,y.RGBA,y.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[N]=$}y.enable(y.BLEND),y.blendFunc(y.SRC_ALPHA,y.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(b,x,S,y,L,k,D,A){this._updateCell(this._vertices.attributes,b,x,S,y,L,k,D,A)}_updateCell(b,x,S,y,L,k,D,A,B){l=(S*this._terminal.cols+x)*E,y!==v.NULL_CELL_CODE&&y!==void 0?this._atlas&&(n=A&&A.length>1?this._atlas.getRasterizedGlyphCombinedChar(A,L,k,D):this._atlas.getRasterizedGlyph(y,L,k,D),c=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),L!==B&&n.offset.x>c?(h=n.offset.x-c,b[l]=-(n.offset.x-h)+this._dimensions.device.char.left,b[l+1]=-n.offset.y+this._dimensions.device.char.top,b[l+2]=(n.size.x-h)/this._dimensions.device.canvas.width,b[l+3]=n.size.y/this._dimensions.device.canvas.height,b[l+4]=n.texturePage,b[l+5]=n.texturePositionClipSpace.x+h/this._atlas.pages[n.texturePage].canvas.width,b[l+6]=n.texturePositionClipSpace.y,b[l+7]=n.sizeClipSpace.x-h/this._atlas.pages[n.texturePage].canvas.width,b[l+8]=n.sizeClipSpace.y):(b[l]=-n.offset.x+this._dimensions.device.char.left,b[l+1]=-n.offset.y+this._dimensions.device.char.top,b[l+2]=n.size.x/this._dimensions.device.canvas.width,b[l+3]=n.size.y/this._dimensions.device.canvas.height,b[l+4]=n.texturePage,b[l+5]=n.texturePositionClipSpace.x,b[l+6]=n.texturePositionClipSpace.y,b[l+7]=n.sizeClipSpace.x,b[l+8]=n.sizeClipSpace.y)):b.fill(0,l,l+E-1-2)}clear(){const b=this._terminal,x=b.cols*b.rows*E;this._vertices.count!==x?this._vertices.attributes=new Float32Array(x):this._vertices.attributes.fill(0);let S=0;for(;S<this._vertices.attributesBuffers.length;S++)this._vertices.count!==x?this._vertices.attributesBuffers[S]=new Float32Array(x):this._vertices.attributesBuffers[S].fill(0);this._vertices.count=x,S=0;for(let y=0;y<b.rows;y++)for(let L=0;L<b.cols;L++)this._vertices.attributes[S+9]=L/b.cols,this._vertices.attributes[S+10]=y/b.rows,S+=E}handleResize(){const b=this._gl;b.viewport(0,0,b.canvas.width,b.canvas.height),b.uniform2f(this._resolutionLocation,b.canvas.width,b.canvas.height),this.clear()}render(b){if(!this._atlas)return;const x=this._gl;x.useProgram(this._program),x.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const S=this._vertices.attributesBuffers[this._activeBuffer];let y=0;for(let L=0;L<b.lineLengths.length;L++){const k=L*this._terminal.cols*E,D=this._vertices.attributes.subarray(k,k+b.lineLengths[L]*E);S.set(D,y),y+=D.length}x.bindBuffer(x.ARRAY_BUFFER,this._attributesBuffer),x.bufferData(x.ARRAY_BUFFER,S.subarray(0,y),x.STREAM_DRAW);for(let L=0;L<this._atlas.pages.length;L++)this._atlas.pages[L].version!==this._atlasTextures[L].version&&this._bindAtlasPageTexture(x,this._atlas,L);x.drawElementsInstanced(x.TRIANGLE_STRIP,4,x.UNSIGNED_BYTE,0,y/E)}setAtlas(b){this._atlas=b;for(const x of this._atlasTextures)x.version=-1}_bindAtlasPageTexture(b,x,S){b.activeTexture(b.TEXTURE0+S),b.bindTexture(b.TEXTURE_2D,this._atlasTextures[S].texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,x.pages[S].canvas),b.generateMipmap(b.TEXTURE_2D),this._atlasTextures[S].version=x.pages[S].version}setDimensions(b){this._dimensions=b}}s.GlyphRenderer=m},742:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RectangleRenderer=void 0;const d=a(381),v=a(310),u=a(859),p=a(237),C=a(374),E=8*Float32Array.BYTES_PER_ELEMENT;let _=0,n=!1,l=0,c=0,h=0,m=0,w=0,b=0;class x extends u.Disposable{constructor(y,L,k,D){super(),this._terminal=y,this._gl=L,this._dimensions=k,this._themeService=D,this._vertices={count:0,attributes:new Float32Array(160)};const A=this._gl;this._program=(0,C.throwIfFalsy)((0,d.createProgram)(A,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,u.toDisposable)(()=>A.deleteProgram(this._program))),this._projectionLocation=(0,C.throwIfFalsy)(A.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=A.createVertexArray(),A.bindVertexArray(this._vertexArrayObject);const B=new Float32Array([0,0,1,0,0,1,1,1]),N=A.createBuffer();this.register((0,u.toDisposable)(()=>A.deleteBuffer(N))),A.bindBuffer(A.ARRAY_BUFFER,N),A.bufferData(A.ARRAY_BUFFER,B,A.STATIC_DRAW),A.enableVertexAttribArray(3),A.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const $=new Uint8Array([0,1,2,3]),I=A.createBuffer();this.register((0,u.toDisposable)(()=>A.deleteBuffer(I))),A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,I),A.bufferData(A.ELEMENT_ARRAY_BUFFER,$,A.STATIC_DRAW),this._attributesBuffer=(0,C.throwIfFalsy)(A.createBuffer()),this.register((0,u.toDisposable)(()=>A.deleteBuffer(this._attributesBuffer))),A.bindBuffer(A.ARRAY_BUFFER,this._attributesBuffer),A.enableVertexAttribArray(0),A.vertexAttribPointer(0,2,A.FLOAT,!1,E,0),A.vertexAttribDivisor(0,1),A.enableVertexAttribArray(1),A.vertexAttribPointer(1,2,A.FLOAT,!1,E,2*Float32Array.BYTES_PER_ELEMENT),A.vertexAttribDivisor(1,1),A.enableVertexAttribArray(2),A.vertexAttribPointer(2,4,A.FLOAT,!1,E,4*Float32Array.BYTES_PER_ELEMENT),A.vertexAttribDivisor(2,1),this._updateCachedColors(D.colors),this.register(this._themeService.onChangeColors(R=>{this._updateCachedColors(R),this._updateViewportRectangle()}))}render(){const y=this._gl;y.useProgram(this._program),y.bindVertexArray(this._vertexArrayObject),y.uniformMatrix4fv(this._projectionLocation,!1,d.PROJECTION_MATRIX),y.bindBuffer(y.ARRAY_BUFFER,this._attributesBuffer),y.bufferData(y.ARRAY_BUFFER,this._vertices.attributes,y.DYNAMIC_DRAW),y.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,y.UNSIGNED_BYTE,0,this._vertices.count)}handleResize(){this._updateViewportRectangle()}setDimensions(y){this._dimensions=y}_updateCachedColors(y){this._bgFloat=this._colorToFloat32Array(y.background)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(y){const L=this._terminal,k=this._vertices;let D,A,B,N,$,I,R,T,P,O,W,V=1;for(D=0;D<L.rows;D++){for(B=-1,N=0,$=0,I=!1,A=0;A<L.cols;A++)R=(D*L.cols+A)*v.RENDER_MODEL_INDICIES_PER_CELL,T=y.cells[R+v.RENDER_MODEL_BG_OFFSET],P=y.cells[R+v.RENDER_MODEL_FG_OFFSET],O=!!(67108864&P),(T!==N||P!==$&&(I||O))&&((N!==0||I&&$!==0)&&(W=8*V++,this._updateRectangle(k,W,$,N,B,A,D)),B=A,N=T,$=P,I=O);(N!==0||I&&$!==0)&&(W=8*V++,this._updateRectangle(k,W,$,N,B,L.cols,D))}k.count=V}_updateRectangle(y,L,k,D,A,B,N){if(n=!1,67108864&k)switch(50331648&k){case 16777216:case 33554432:_=this._themeService.colors.ansi[255&k].rgba;break;case 50331648:_=(16777215&k)<<8;break;default:_=this._themeService.colors.foreground.rgba}else switch(50331648&D){case 16777216:case 33554432:_=this._themeService.colors.ansi[255&D].rgba;break;case 50331648:_=(16777215&D)<<8;break;default:_=this._themeService.colors.background.rgba,n=!0}y.attributes.length<L+4&&(y.attributes=(0,d.expandFloat32Array)(y.attributes,this._terminal.rows*this._terminal.cols*8)),l=A*this._dimensions.device.cell.width,c=N*this._dimensions.device.cell.height,h=(_>>24&255)/255,m=(_>>16&255)/255,w=(_>>8&255)/255,b=!n&&134217728&D?p.DIM_OPACITY:1,this._addRectangle(y.attributes,L,l,c,(B-A)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,h,m,w,b)}_addRectangle(y,L,k,D,A,B,N,$,I,R){y[L]=k/this._dimensions.device.canvas.width,y[L+1]=D/this._dimensions.device.canvas.height,y[L+2]=A/this._dimensions.device.canvas.width,y[L+3]=B/this._dimensions.device.canvas.height,y[L+4]=N,y[L+5]=$,y[L+6]=I,y[L+7]=R}_addRectangleFloat(y,L,k,D,A,B,N){y[L]=k/this._dimensions.device.canvas.width,y[L+1]=D/this._dimensions.device.canvas.height,y[L+2]=A/this._dimensions.device.canvas.width,y[L+3]=B/this._dimensions.device.canvas.height,y[L+4]=N[0],y[L+5]=N[1],y[L+6]=N[2],y[L+7]=N[3]}_colorToFloat32Array(y){return new Float32Array([(y.rgba>>24&255)/255,(y.rgba>>16&255)/255,(y.rgba>>8&255)/255,(255&y.rgba)/255])}}s.RectangleRenderer=x},310:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderModel=s.COMBINED_CHAR_BIT_MASK=s.RENDER_MODEL_EXT_OFFSET=s.RENDER_MODEL_FG_OFFSET=s.RENDER_MODEL_BG_OFFSET=s.RENDER_MODEL_INDICIES_PER_CELL=void 0;const d=a(296);s.RENDER_MODEL_INDICIES_PER_CELL=4,s.RENDER_MODEL_BG_OFFSET=1,s.RENDER_MODEL_FG_OFFSET=2,s.RENDER_MODEL_EXT_OFFSET=3,s.COMBINED_CHAR_BIT_MASK=2147483648,s.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,d.createSelectionRenderModel)()}resize(v,u){const p=v*u*s.RENDER_MODEL_INDICIES_PER_CELL;p!==this.cells.length&&(this.cells=new Uint32Array(p),this.lineLengths=new Uint32Array(u))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.JoinedCellData=s.WebglRenderer=void 0;const d=a(820),v=a(274),u=a(627),p=a(56),C=a(374),E=a(147),_=a(782),n=a(855),l=a(345),c=a(859),h=a(965),m=a(742),w=a(461),b=a(733),x=a(310);class S extends c.Disposable{constructor(k,D,A,B,N,$,I,R,T){super(),this._terminal=k,this._characterJoinerService=D,this._charSizeService=A,this._coreBrowserService=B,this._decorationService=$,this._optionsService=I,this._themeService=R,this._model=new x.RenderModel,this._workCell=new _.CellData,this._onChangeTextureAtlas=this.register(new l.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new l.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new l.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new l.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new l.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new v.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new b.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,I,this._themeService),new w.CursorRenderLayer(k,this._core.screenElement,3,this._onRequestRedraw,this._coreBrowserService,N,I,this._themeService)],this.dimensions=(0,C.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register(I.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");const P={antialias:!1,depth:!1,preserveDrawingBuffer:T};if(this._gl=this._canvas.getContext("webgl2",P),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,d.addDisposableDomListener)(this._canvas,"webglcontextlost",O=>{console.log("webglcontextlost event received"),O.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(O)},3e3)})),this.register((0,d.addDisposableDomListener)(this._canvas,"webglcontextrestored",O=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,u.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,p.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(O,W)=>this._setCanvasDevicePixelDimensions(O,W))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer,this._glyphRenderer]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,c.toDisposable)(()=>{var O;for(const W of this._renderLayers)W.dispose();(O=this._canvas.parentElement)===null||O===void 0||O.removeChild(this._canvas),(0,u.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var k;return(k=this._charAtlas)===null||k===void 0?void 0:k.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(k,D){this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const A of this._renderLayers)A.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,this._rectangleRenderer.setDimensions(this.dimensions),this._rectangleRenderer.handleResize(),this._glyphRenderer.setDimensions(this.dimensions),this._glyphRenderer.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){for(const k of this._renderLayers)k.handleBlur(this._terminal);this._requestRedrawViewport()}handleFocus(){for(const k of this._renderLayers)k.handleFocus(this._terminal);this._requestRedrawViewport()}handleSelectionChanged(k,D,A){for(const B of this._renderLayers)B.handleSelectionChanged(this._terminal,k,D,A);this._model.selection.update(this._terminal,k,D,A),this._requestRedrawViewport()}handleCursorMove(){for(const k of this._renderLayers)k.handleCursorMove(this._terminal)}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas()}_initializeWebGLState(){var k,D;return(k=this._rectangleRenderer)===null||k===void 0||k.dispose(),(D=this._glyphRenderer)===null||D===void 0||D.dispose(),this._rectangleRenderer=this.register(new m.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService)),this._glyphRenderer=this.register(new h.GlyphRenderer(this._terminal,this._gl,this.dimensions)),this.handleCharSizeChanged(),[this._rectangleRenderer,this._glyphRenderer]}_refreshCharAtlas(){var k;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const D=(0,u.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==D&&((k=this._charAtlasDisposable)===null||k===void 0||k.dispose(),this._onChangeTextureAtlas.fire(D.pages[0].canvas),this._charAtlasDisposable=(0,c.getDisposeArrayDisposable)([(0,l.forwardEvent)(D.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,l.forwardEvent)(D.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=D,this._charAtlas.warmUp(),this._glyphRenderer.setAtlas(this._charAtlas)}_clearModel(k){this._model.clear(),k&&this._glyphRenderer.clear()}clearTextureAtlas(){var k;(k=this._charAtlas)===null||k===void 0||k.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){this._clearModel(!0);for(const k of this._renderLayers)k.reset(this._terminal)}registerCharacterJoiner(k){return-1}deregisterCharacterJoiner(k){return!1}renderRows(k,D){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const A of this._renderLayers)A.handleGridChanged(this._terminal,k,D);this._glyphRenderer.beginFrame()&&this._clearModel(!0),this._updateModel(k,D),this._rectangleRenderer.render(),this._glyphRenderer.render(this._model)}_updateModel(k,D){const A=this._core;let B,N,$,I,R,T,P,O,W,V,Q,q,Z,M=this._workCell;for(N=k;N<=D&&($=N+A.buffer.ydisp,I=A.buffer.lines.get($),I);N++)for(this._model.lineLengths[N]=0,R=this._characterJoinerService.getJoinedCharacters($),q=0;q<A.cols;q++)if(B=this._cellColorResolver.result.bg,I.loadCell(q,M),q===0&&(B=this._cellColorResolver.result.bg),T=!1,P=q,R.length>0&&q===R[0][0]&&(T=!0,O=R.shift(),M=new y(M,I.translateToString(!0,O[0],O[1]),O[1]-O[0]),P=O[1]-1),W=M.getChars(),V=M.getCode(),Q=(N*A.cols+q)*x.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(M,q,$),V!==n.NULL_CELL_CODE&&(this._model.lineLengths[N]=q+1),(this._model.cells[Q]!==V||this._model.cells[Q+x.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[Q+x.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[Q+x.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(W.length>1&&(V|=x.COMBINED_CHAR_BIT_MASK),this._model.cells[Q]=V,this._model.cells[Q+x.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[Q+x.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[Q+x.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.updateCell(q,N,V,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,W,B),T))for(M=this._workCell,q++;q<P;q++)Z=(N*A.cols+q)*x.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.updateCell(q,N,n.NULL_CELL_CODE,0,0,0,n.NULL_CELL_CHAR,0),this._model.cells[Z]=n.NULL_CELL_CODE,this._model.cells[Z+x.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[Z+x.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[Z+x.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;this._rectangleRenderer.updateBackgrounds(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(k,D){this._canvas.width===k&&this._canvas.height===D||(this._canvas.width=k,this._canvas.height=D,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}}s.WebglRenderer=S;class y extends E.AttributeData{constructor(k,D,A){super(),this.content=0,this.combinedData="",this.fg=k.fg,this.bg=k.bg,this.combinedData=D,this._width=A}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(k){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=y},381:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GLTexture=s.expandFloat32Array=s.createShader=s.createProgram=s.PROJECTION_MATRIX=void 0;const d=a(374);function v(u,p,C){const E=(0,d.throwIfFalsy)(u.createShader(p));if(u.shaderSource(E,C),u.compileShader(E),u.getShaderParameter(E,u.COMPILE_STATUS))return E;console.error(u.getShaderInfoLog(E)),u.deleteShader(E)}s.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),s.createProgram=function(u,p,C){const E=(0,d.throwIfFalsy)(u.createProgram());if(u.attachShader(E,(0,d.throwIfFalsy)(v(u,u.VERTEX_SHADER,p))),u.attachShader(E,(0,d.throwIfFalsy)(v(u,u.FRAGMENT_SHADER,C))),u.linkProgram(E),u.getProgramParameter(E,u.LINK_STATUS))return E;console.error(u.getProgramInfoLog(E)),u.deleteProgram(E)},s.createShader=v,s.expandFloat32Array=function(u,p){const C=Math.min(2*u.length,p),E=new Float32Array(C);for(let _=0;_<u.length;_++)E[_]=u[_];return E},s.GLTexture=class{constructor(u){this.texture=u,this.version=-1}}},592:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseRenderLayer=void 0;const d=a(627),v=a(237),u=a(374),p=a(859);class C extends p.Disposable{constructor(_,n,l,c,h,m,w,b){super(),this._container=n,this._alpha=h,this._coreBrowserService=m,this._optionsService=w,this._themeService=b,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${l}-layer`),this._canvas.style.zIndex=c.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(x=>{this._refreshCharAtlas(_,x),this.reset(_)})),this.register((0,p.toDisposable)(()=>{var x;this._canvas.remove(),(x=this._charAtlas)===null||x===void 0||x.dispose()}))}_initCanvas(){this._ctx=(0,u.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(_){}handleFocus(_){}handleCursorMove(_){}handleGridChanged(_,n,l){}handleSelectionChanged(_,n,l,c=!1){}_setTransparency(_,n){if(n===this._alpha)return;const l=this._canvas;this._alpha=n,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,l),this._refreshCharAtlas(_,this._themeService.colors),this.handleGridChanged(_,0,_.rows-1)}_refreshCharAtlas(_,n){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,d.acquireTextureAtlas)(_,this._optionsService.rawOptions,n,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(_,n){this._deviceCellWidth=n.device.cell.width,this._deviceCellHeight=n.device.cell.height,this._deviceCharWidth=n.device.char.width,this._deviceCharHeight=n.device.char.height,this._deviceCharLeft=n.device.char.left,this._deviceCharTop=n.device.char.top,this._canvas.width=n.device.canvas.width,this._canvas.height=n.device.canvas.height,this._canvas.style.width=`${n.css.canvas.width}px`,this._canvas.style.height=`${n.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(_,this._themeService.colors)}_fillCells(_,n,l,c){this._ctx.fillRect(_*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,c*this._deviceCellHeight)}_fillBottomLineAtCells(_,n,l=1){this._ctx.fillRect(_*this._deviceCellWidth,(n+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,l*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillLeftLineAtCell(_,n,l){this._ctx.fillRect(_*this._deviceCellWidth,n*this._deviceCellHeight,this._coreBrowserService.dpr*l,this._deviceCellHeight)}_strokeRectAtCell(_,n,l,c){this._ctx.lineWidth=this._coreBrowserService.dpr,this._ctx.strokeRect(_*this._deviceCellWidth+this._coreBrowserService.dpr/2,n*this._deviceCellHeight+this._coreBrowserService.dpr/2,l*this._deviceCellWidth-this._coreBrowserService.dpr,c*this._deviceCellHeight-this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(_,n,l,c){this._alpha?this._ctx.clearRect(_*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,c*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(_*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,c*this._deviceCellHeight))}_fillCharTrueColor(_,n,l,c){this._ctx.font=this._getFont(_,!1,!1),this._ctx.textBaseline=v.TEXT_BASELINE,this._clipCell(l,c,n.getWidth()),this._ctx.fillText(n.getChars(),l*this._deviceCellWidth+this._deviceCharLeft,c*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(_,n,l){this._ctx.beginPath(),this._ctx.rect(_*this._deviceCellWidth,n*this._deviceCellHeight,l*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(_,n,l){return`${l?"italic":""} ${n?_.options.fontWeightBold:_.options.fontWeight} ${_.options.fontSize*this._coreBrowserService.dpr}px ${_.options.fontFamily}`}}s.BaseRenderLayer=C},461:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CursorRenderLayer=void 0;const d=a(592),v=a(782),u=a(859);class p extends d.BaseRenderLayer{constructor(_,n,l,c,h,m,w,b){super(_,n,"cursor",l,!0,h,w,b),this._onRequestRefreshRowsEvent=c,this._coreService=m,this._cell=new v.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this)},this._handleOptionsChanged(_),this.register(w.onOptionChange(()=>this._handleOptionsChanged(_))),this.register((0,u.toDisposable)(()=>{var x;(x=this._cursorBlinkStateManager)===null||x===void 0||x.dispose(),this._cursorBlinkStateManager=void 0}))}resize(_,n){super.resize(_,n),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(_){var n;this._clearCursor(),(n=this._cursorBlinkStateManager)===null||n===void 0||n.restartBlinkAnimation(_),this._handleOptionsChanged(_)}handleBlur(_){var n;(n=this._cursorBlinkStateManager)===null||n===void 0||n.pause(),this._onRequestRefreshRowsEvent.fire({start:_.buffer.active.cursorY,end:_.buffer.active.cursorY})}handleFocus(_){var n;(n=this._cursorBlinkStateManager)===null||n===void 0||n.resume(_),this._onRequestRefreshRowsEvent.fire({start:_.buffer.active.cursorY,end:_.buffer.active.cursorY})}_handleOptionsChanged(_){var n;_.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new C(()=>{this._render(_,!0)},this._coreBrowserService)):((n=this._cursorBlinkStateManager)===null||n===void 0||n.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:_.buffer.active.cursorY,end:_.buffer.active.cursorY})}handleCursorMove(_){var n;(n=this._cursorBlinkStateManager)===null||n===void 0||n.restartBlinkAnimation(_)}handleGridChanged(_,n,l){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(_,!1):this._cursorBlinkStateManager.restartBlinkAnimation(_)}_render(_,n){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const l=_.buffer.active.baseY+_.buffer.active.cursorY,c=l-_.buffer.active.viewportY,h=Math.min(_.buffer.active.cursorX,_.cols-1);if(c<0||c>=_.rows)this._clearCursor();else if(_._core.buffer.lines.get(l).loadCell(h,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const m=_.options.cursorStyle;return m&&m!=="block"?this._cursorRenderers[m](_,h,c,this._cell):this._renderBlurCursor(_,h,c,this._cell),this._ctx.restore(),this._state.x=h,this._state.y=c,this._state.isFocused=!1,this._state.style=m,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===h&&this._state.y===c&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===_.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[_.options.cursorStyle||"block"](_,h,c,this._cell),this._ctx.restore(),this._state.x=h,this._state.y=c,this._state.isFocused=!1,this._state.style=_.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(_,n,l,c){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(n,l,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(_,n,l,c){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(n,l,c.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(_,c,n,l),this._ctx.restore()}_renderUnderlineCursor(_,n,l,c){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(n,l),this._ctx.restore()}_renderBlurCursor(_,n,l,c){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(n,l,c.getWidth(),1),this._ctx.restore()}}s.CursorRenderLayer=p;class C{constructor(_,n){this._renderCallback=_,this._coreBrowserService=n,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(_){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(_=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const n=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,n>0)return void this._restartInterval(n)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const n=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(n)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},_)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(_){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation(_)}}},733:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkRenderLayer=void 0;const d=a(197),v=a(237),u=a(592);class p extends u.BaseRenderLayer{constructor(E,_,n,l,c,h,m){super(n,E,"link",_,!0,c,h,m),this.register(l.onShowLinkUnderline(w=>this._handleShowLinkUnderline(w))),this.register(l.onHideLinkUnderline(w=>this._handleHideLinkUnderline(w)))}resize(E,_){super.resize(E,_),this._state=void 0}reset(E){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const E=this._state.y2-this._state.y1-1;E>0&&this._clearCells(0,this._state.y1+1,this._state.cols,E),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(E){if(E.fg===v.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:E.fg!==void 0&&(0,d.is256Color)(E.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[E.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,E.y1===E.y2)this._fillBottomLineAtCells(E.x1,E.y1,E.x2-E.x1);else{this._fillBottomLineAtCells(E.x1,E.y1,E.cols-E.x1);for(let _=E.y1+1;_<E.y2;_++)this._fillBottomLineAtCells(0,_,E.cols);this._fillBottomLineAtCells(0,E.y2,E.x2)}this._state=E}_handleHideLinkUnderline(E){this._clearCurrentLink()}}s.LinkRenderLayer=p},820:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,d,v,u){a.addEventListener(d,v,u);let p=!1;return{dispose:()=>{p||(p=!0,a.removeEventListener(d,v,u))}}}},274:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellColorResolver=void 0;let a,d=0,v=0,u=!1,p=!1,C=!1;s.CellColorResolver=class{constructor(E,_,n,l,c){this._terminal=E,this._selectionRenderModel=_,this._decorationService=n,this._coreBrowserService=l,this._themeService=c,this.result={fg:0,bg:0,ext:0}}resolve(E,_,n){this.result.bg=E.bg,this.result.fg=E.fg,this.result.ext=268435456&E.bg?E.extended.ext:0,v=0,d=0,p=!1,u=!1,C=!1,a=this._themeService.colors,this._decorationService.forEachDecorationAtCell(_,n,"bottom",l=>{l.backgroundColorRGB&&(v=l.backgroundColorRGB.rgba>>8&16777215,p=!0),l.foregroundColorRGB&&(d=l.foregroundColorRGB.rgba>>8&16777215,u=!0)}),C=this._selectionRenderModel.isCellSelected(this._terminal,_,n),C&&(v=(this._coreBrowserService.isFocused?a.selectionBackgroundOpaque:a.selectionInactiveBackgroundOpaque).rgba>>8&16777215,p=!0,a.selectionForeground&&(d=a.selectionForeground.rgba>>8&16777215,u=!0)),this._decorationService.forEachDecorationAtCell(_,n,"top",l=>{l.backgroundColorRGB&&(v=l.backgroundColorRGB.rgba>>8&16777215,p=!0),l.foregroundColorRGB&&(d=l.foregroundColorRGB.rgba>>8&16777215,u=!0)}),p&&(v=C?-16777216&E.bg&-134217729|v|50331648:-16777216&E.bg|v|50331648),u&&(d=-16777216&E.fg&-67108865|d|50331648),67108864&this.result.fg&&(p&&!u&&(d=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&a.background.rgba>>8|50331648,u=!0),!p&&u&&(v=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&a.foreground.rgba>>8|50331648,p=!0)),a=void 0,this.result.bg=p?v:this.result.bg,this.result.fg=u?d:this.result.fg}}},627:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeTerminalFromCache=s.acquireTextureAtlas=void 0;const d=a(509),v=a(197),u=[];s.acquireTextureAtlas=function(p,C,E,_,n,l,c,h){const m=(0,v.generateConfig)(_,n,l,c,C,E,h);for(let x=0;x<u.length;x++){const S=u[x],y=S.ownedBy.indexOf(p);if(y>=0){if((0,v.configEquals)(S.config,m))return S.atlas;S.ownedBy.length===1?(S.atlas.dispose(),u.splice(x,1)):S.ownedBy.splice(y,1);break}}for(let x=0;x<u.length;x++){const S=u[x];if((0,v.configEquals)(S.config,m))return S.ownedBy.push(p),S.atlas}const w=p._core,b={atlas:new d.TextureAtlas(document,m,w.unicodeService),config:m,ownedBy:[p]};return u.push(b),b.atlas},s.removeTerminalFromCache=function(p){for(let C=0;C<u.length;C++){const E=u[C].ownedBy.indexOf(p);if(E!==-1){u[C].ownedBy.length===1?(u[C].atlas.dispose(),u.splice(C,1)):u[C].ownedBy.splice(E,1);break}}}},197:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.is256Color=s.configEquals=s.generateConfig=void 0;const d=a(160);s.generateConfig=function(v,u,p,C,E,_,n){const l={foreground:_.foreground,background:_.background,cursor:d.NULL_COLOR,cursorAccent:d.NULL_COLOR,selectionForeground:d.NULL_COLOR,selectionBackgroundTransparent:d.NULL_COLOR,selectionBackgroundOpaque:d.NULL_COLOR,selectionInactiveBackgroundTransparent:d.NULL_COLOR,selectionInactiveBackgroundOpaque:d.NULL_COLOR,ansi:_.ansi.slice(),contrastCache:_.contrastCache};return{customGlyphs:E.customGlyphs,devicePixelRatio:n,letterSpacing:E.letterSpacing,lineHeight:E.lineHeight,deviceCellWidth:v,deviceCellHeight:u,deviceCharWidth:p,deviceCharHeight:C,fontFamily:E.fontFamily,fontSize:E.fontSize,fontWeight:E.fontWeight,fontWeightBold:E.fontWeightBold,allowTransparency:E.allowTransparency,drawBoldTextInBrightColors:E.drawBoldTextInBrightColors,minimumContrastRatio:E.minimumContrastRatio,colors:l}},s.configEquals=function(v,u){for(let p=0;p<v.colors.ansi.length;p++)if(v.colors.ansi[p].rgba!==u.colors.ansi[p].rgba)return!1;return v.devicePixelRatio===u.devicePixelRatio&&v.customGlyphs===u.customGlyphs&&v.lineHeight===u.lineHeight&&v.letterSpacing===u.letterSpacing&&v.fontFamily===u.fontFamily&&v.fontSize===u.fontSize&&v.fontWeight===u.fontWeight&&v.fontWeightBold===u.fontWeightBold&&v.allowTransparency===u.allowTransparency&&v.deviceCharWidth===u.deviceCharWidth&&v.deviceCharHeight===u.deviceCharHeight&&v.drawBoldTextInBrightColors===u.drawBoldTextInBrightColors&&v.minimumContrastRatio===u.minimumContrastRatio&&v.colors.foreground.rgba===u.colors.foreground.rgba&&v.colors.background.rgba===u.colors.background.rgba},s.is256Color=function(v){return(50331648&v)==16777216||(50331648&v)==33554432}},237:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const d=a(399);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},860:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tryDrawCustomChar=s.powerlineDefinitions=s.boxDrawingDefinitions=s.blockElementDefinitions=void 0;const d=a(374);s.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const v={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};s.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(_,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M${.5-_},0 L${.5-_},1 M${.5+_},0 L${.5+_},1`},"":{1:(_,n)=>`M.5,1 L.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M${.5-_},1 L${.5-_},.5 L1,.5 M${.5+_},.5 L${.5+_},1`},"":{1:(_,n)=>`M1,${.5-n} L${.5-_},${.5-n} L${.5-_},1 M1,${.5+n} L${.5+_},${.5+n} L${.5+_},1`},"":{1:(_,n)=>`M0,${.5-n} L.5,${.5-n} L.5,1 M0,${.5+n} L.5,${.5+n}`},"":{1:(_,n)=>`M${.5+_},1 L${.5+_},.5 L0,.5 M${.5-_},.5 L${.5-_},1`},"":{1:(_,n)=>`M0,${.5+n} L${.5-_},${.5+n} L${.5-_},1 M0,${.5-n} L${.5+_},${.5-n} L${.5+_},1`},"":{1:(_,n)=>`M.5,0 L.5,${.5+n} L1,${.5+n} M.5,${.5-n} L1,${.5-n}`},"":{1:(_,n)=>`M1,.5 L${.5-_},.5 L${.5-_},0 M${.5+_},.5 L${.5+_},0`},"":{1:(_,n)=>`M1,${.5-n} L${.5+_},${.5-n} L${.5+_},0 M1,${.5+n} L${.5-_},${.5+n} L${.5-_},0`},"":{1:(_,n)=>`M0,${.5+n} L.5,${.5+n} L.5,0 M0,${.5-n} L.5,${.5-n}`},"":{1:(_,n)=>`M0,.5 L${.5+_},.5 L${.5+_},0 M${.5-_},.5 L${.5-_},0`},"":{1:(_,n)=>`M0,${.5-n} L${.5-_},${.5-n} L${.5-_},0 M0,${.5+n} L${.5+_},${.5+n} L${.5+_},0`},"":{1:(_,n)=>`M.5,0 L.5,1 M.5,${.5-n} L1,${.5-n} M.5,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M${.5-_},0 L${.5-_},1 M${.5+_},0 L${.5+_},1 M${.5+_},.5 L1,.5`},"":{1:(_,n)=>`M${.5-_},0 L${.5-_},1 M1,${.5+n} L${.5+_},${.5+n} L${.5+_},1 M1,${.5-n} L${.5+_},${.5-n} L${.5+_},0`},"":{1:(_,n)=>`M.5,0 L.5,1 M0,${.5-n} L.5,${.5-n} M0,${.5+n} L.5,${.5+n}`},"":{1:(_,n)=>`M0,.5 L${.5-_},.5 M${.5-_},0 L${.5-_},1 M${.5+_},0 L${.5+_},1`},"":{1:(_,n)=>`M${.5+_},0 L${.5+_},1 M0,${.5+n} L${.5-_},${.5+n} L${.5-_},1 M0,${.5-n} L${.5-_},${.5-n} L${.5-_},0`},"":{1:(_,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n} M.5,${.5+n} L.5,1`},"":{1:(_,n)=>`M0,.5 L1,.5 M${.5-_},.5 L${.5-_},1 M${.5+_},.5 L${.5+_},1`},"":{1:(_,n)=>`M0,${.5-n} L1,${.5-n} M0,${.5+n} L${.5-_},${.5+n} L${.5-_},1 M1,${.5+n} L${.5+_},${.5+n} L${.5+_},1`},"":{1:(_,n)=>`M.5,0 L.5,${.5-n} M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M0,.5 L1,.5 M${.5-_},.5 L${.5-_},0 M${.5+_},.5 L${.5+_},0`},"":{1:(_,n)=>`M0,${.5+n} L1,${.5+n} M0,${.5-n} L${.5-_},${.5-n} L${.5-_},0 M1,${.5-n} L${.5+_},${.5-n} L${.5+_},0`},"":{1:(_,n)=>`M.5,0 L.5,1 M0,${.5-n} L1,${.5-n} M0,${.5+n} L1,${.5+n}`},"":{1:(_,n)=>`M0,.5 L1,.5 M${.5-_},0 L${.5-_},1 M${.5+_},0 L${.5+_},1`},"":{1:(_,n)=>`M0,${.5+n} L${.5-_},${.5+n} L${.5-_},1 M1,${.5+n} L${.5+_},${.5+n} L${.5+_},1 M0,${.5-n} L${.5-_},${.5-n} L${.5-_},0 M1,${.5-n} L${.5+_},${.5-n} L${.5+_},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(_,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,1,.5`},"":{1:(_,n)=>`M.5,1 L.5,${.5+n/.15*.5} C.5,${.5+n/.15*.5},.5,.5,0,.5`},"":{1:(_,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,0,.5`},"":{1:(_,n)=>`M.5,0 L.5,${.5-n/.15*.5} C.5,${.5-n/.15*.5},.5,.5,1,.5`}},s.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},s.powerlineDefinitions[""]=s.powerlineDefinitions[""],s.powerlineDefinitions[""]=s.powerlineDefinitions[""],s.tryDrawCustomChar=function(_,n,l,c,h,m,w,b){const x=s.blockElementDefinitions[n];if(x)return function(k,D,A,B,N,$){for(let I=0;I<D.length;I++){const R=D[I],T=N/8,P=$/8;k.fillRect(A+R.x*T,B+R.y*P,R.w*T,R.h*P)}}(_,x,l,c,h,m),!0;const S=v[n];if(S)return function(k,D,A,B,N,$){let I=u.get(D);I||(I=new Map,u.set(D,I));const R=k.fillStyle;if(typeof R!="string")throw new Error(`Unexpected fillStyle type "${R}"`);let T=I.get(R);if(!T){const P=D[0].length,O=D.length,W=document.createElement("canvas");W.width=P,W.height=O;const V=(0,d.throwIfFalsy)(W.getContext("2d")),Q=new ImageData(P,O);let q,Z,M,U;if(R.startsWith("#"))q=parseInt(R.slice(1,3),16),Z=parseInt(R.slice(3,5),16),M=parseInt(R.slice(5,7),16),U=R.length>7&&parseInt(R.slice(7,9),16)||1;else{if(!R.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${R}" when drawing pattern glyph`);[q,Z,M,U]=R.substring(5,R.length-1).split(",").map(j=>parseFloat(j))}for(let j=0;j<O;j++)for(let z=0;z<P;z++)Q.data[4*(j*P+z)]=q,Q.data[4*(j*P+z)+1]=Z,Q.data[4*(j*P+z)+2]=M,Q.data[4*(j*P+z)+3]=D[j][z]*(255*U);V.putImageData(Q,0,0),T=(0,d.throwIfFalsy)(k.createPattern(W,null)),I.set(R,T)}k.fillStyle=T,k.fillRect(A,B,N,$)}(_,S,l,c,h,m),!0;const y=s.boxDrawingDefinitions[n];if(y)return function(k,D,A,B,N,$,I){k.strokeStyle=k.fillStyle;for(const[R,T]of Object.entries(D)){let P;k.beginPath(),k.lineWidth=I*Number.parseInt(R),P=typeof T=="function"?T(.15,.15/$*N):T;for(const O of P.split(" ")){const W=O[0],V=C[W];if(!V){console.error(`Could not find drawing instructions for "${W}"`);continue}const Q=O.substring(1).split(",");Q[0]&&Q[1]&&V(k,E(Q,N,$,A,B,!0,I))}k.stroke(),k.closePath()}}(_,y,l,c,h,m,b),!0;const L=s.powerlineDefinitions[n];return!!L&&(function(k,D,A,B,N,$,I,R){var T,P;const O=new Path2D;O.rect(A,B,N,$),k.clip(O),k.beginPath();const W=I/12;k.lineWidth=R*W;for(const V of D.d.split(" ")){const Q=V[0],q=C[Q];if(!q){console.error(`Could not find drawing instructions for "${Q}"`);continue}const Z=V.substring(1).split(",");Z[0]&&Z[1]&&q(k,E(Z,N,$,A,B,!1,R,((T=D.leftPadding)!==null&&T!==void 0?T:0)*(W/2),((P=D.rightPadding)!==null&&P!==void 0?P:0)*(W/2)))}D.type===1?(k.strokeStyle=k.fillStyle,k.stroke()):k.fill(),k.closePath()}(_,L,l,c,h,m,w,b),!0)};const u=new Map;function p(_,n,l=0){return Math.max(Math.min(_,n),l)}const C={C:(_,n)=>_.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),L:(_,n)=>_.lineTo(n[0],n[1]),M:(_,n)=>_.moveTo(n[0],n[1])};function E(_,n,l,c,h,m,w,b=0,x=0){const S=_.map(y=>parseFloat(y)||parseInt(y));if(S.length<2)throw new Error("Too few arguments for instruction");for(let y=0;y<S.length;y+=2)S[y]*=n-b*w-x*w,m&&S[y]!==0&&(S[y]=p(Math.round(S[y]+.5)-.5,n,0)),S[y]+=c+b*w;for(let y=1;y<S.length;y+=2)S[y]*=l,m&&S[y]!==0&&(S[y]=p(Math.round(S[y]+.5)-.5,l,0)),S[y]+=h;return S}},56:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.observeDevicePixelDimensions=void 0;const d=a(859);s.observeDevicePixelDimensions=function(v,u,p){let C=new u.ResizeObserver(E=>{const _=E.find(c=>c.target===v);if(!_)return;if(!("devicePixelContentBoxSize"in _))return C==null||C.disconnect(),void(C=void 0);const n=_.devicePixelContentBoxSize[0].inlineSize,l=_.devicePixelContentBoxSize[0].blockSize;n>0&&l>0&&p(n,l)});try{C.observe(v,{box:["device-pixel-content-box"]})}catch{C.disconnect(),C=void 0}return(0,d.toDisposable)(()=>C==null?void 0:C.disconnect())}},374:(g,s)=>{function a(d){return 57508<=d&&d<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},s.excludeFromContrastRatioDemands=function(d){return a(d)||function(v){return 9472<=v&&v<=9631}(d)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(v,u,p,C=!1){if(this.selectionStart=u,this.selectionEnd=p,!u||!p||u[0]===p[0]&&u[1]===p[1])return void this.clear();const E=u[1]-v.buffer.active.viewportY,_=p[1]-v.buffer.active.viewportY,n=Math.max(E,0),l=Math.min(_,v.rows-1);n>=v.rows||l<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=C,this.viewportStartRow=E,this.viewportEndRow=_,this.viewportCappedStartRow=n,this.viewportCappedEndRow=l,this.startCol=u[0],this.endCol=p[0])}isCellSelected(v,u,p){return!!this.hasSelection&&(p-=v.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?u>=this.startCol&&p>=this.viewportCappedStartRow&&u<this.endCol&&p<=this.viewportCappedEndRow:u<this.startCol&&p>=this.viewportCappedStartRow&&u>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&u>=this.startCol&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&u>=this.startCol)}}s.createSelectionRenderModel=function(){return new a}},509:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextureAtlas=void 0;const d=a(237),v=a(855),u=a(147),p=a(160),C=a(860),E=a(374),_=a(485),n=a(385),l=a(345),c={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let h;class m{constructor(y,L,k){this._document=y,this._config=L,this._unicodeService=k,this._didWarmUp=!1,this._cacheMap=new _.FourKeyMap,this._cacheMapCombined=new _.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new u.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new l.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new l.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=x(y,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,E.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}get pages(){return this._pages}dispose(){for(const y of this.pages)y.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const y=new n.IdleTaskQueue;for(let L=33;L<126;L++)y.enqueue(()=>{if(!this._cacheMap.get(L,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT)){const k=this._drawToCache(L,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT);this._cacheMap.set(L,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT,k)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const y of this._pages)y.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages/2)&&queueMicrotask(()=>{const L=this._pages.filter(I=>2*I.canvas.width<=(m.maxTextureSize||4096)).sort((I,R)=>R.canvas.width!==I.canvas.width?R.canvas.width-I.canvas.width:R.percentageUsed-I.percentageUsed);let k=-1,D=0;for(let I=0;I<L.length;I++)if(L[I].canvas.width!==D)k=I,D=L[I].canvas.width;else if(I-k==3)break;const A=L.slice(k,k+4),B=A.map(I=>I.glyphs[0].texturePage).sort((I,R)=>I>R?1:-1),N=B[0],$=this._mergePages(A,N);$.version++,this._pages[N]=$;for(let I=B.length-1;I>=1;I--)this._deletePage(B[I]);this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire($.canvas)});const y=new w(this._document,this._textureSize);return this._pages.push(y),this._activePages.push(y),this._onAddTextureAtlasCanvas.fire(y.canvas),y}_mergePages(y,L){const k=2*y[0].canvas.width,D=new w(this._document,k,y);for(const[A,B]of y.entries()){const N=A*B.canvas.width%k,$=Math.floor(A/2)*B.canvas.height;D.ctx.drawImage(B.canvas,N,$);for(const R of B.glyphs)R.texturePage=L,R.sizeClipSpace.x=R.size.x/k,R.sizeClipSpace.y=R.size.y/k,R.texturePosition.x+=N,R.texturePosition.y+=$,R.texturePositionClipSpace.x=R.texturePosition.x/k,R.texturePositionClipSpace.y=R.texturePosition.y/k;this._onRemoveTextureAtlasCanvas.fire(B.canvas);const I=this._activePages.indexOf(B);I!==-1&&this._activePages.splice(I,1)}return D}_deletePage(y){this._pages.splice(y,1);for(let L=y;L<this._pages.length;L++){const k=this._pages[L];for(const D of k.glyphs)D.texturePage--;k.version++}}getRasterizedGlyphCombinedChar(y,L,k,D){return this._getFromCacheMap(this._cacheMapCombined,y,L,k,D)}getRasterizedGlyph(y,L,k,D){return this._getFromCacheMap(this._cacheMap,y,L,k,D)}_getFromCacheMap(y,L,k,D,A){return h=y.get(L,k,D,A),h||(h=this._drawToCache(L,k,D,A),y.set(L,k,D,A,h)),h}_getColorFromAnsiIndex(y){if(y>=this._config.colors.ansi.length)throw new Error("No color found for idx "+y);return this._config.colors.ansi[y]}_getBackgroundColor(y,L,k,D){if(this._config.allowTransparency)return p.NULL_COLOR;let A;switch(y){case 16777216:case 33554432:A=this._getColorFromAnsiIndex(L);break;case 50331648:const B=u.AttributeData.toColorRGB(L);A=p.rgba.toColor(B[0],B[1],B[2]);break;default:A=k?this._config.colors.foreground:this._config.colors.background}return D&&(A=p.color.blend(this._config.colors.background,p.color.multiplyOpacity(A,d.DIM_OPACITY))),A}_getForegroundColor(y,L,k,D,A,B,N,$,I,R){const T=this._getMinimumContrastColor(y,L,k,D,A,B,!1,I,R);if(T)return T;let P;switch(A){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&B<8&&(B+=8),P=this._getColorFromAnsiIndex(B);break;case 50331648:const O=u.AttributeData.toColorRGB(B);P=p.rgba.toColor(O[0],O[1],O[2]);break;default:P=N?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(P=p.color.opaque(P)),$&&(P=p.color.multiplyOpacity(P,d.DIM_OPACITY)),P}_resolveBackgroundRgba(y,L,k){switch(y){case 16777216:case 33554432:return this._getColorFromAnsiIndex(L).rgba;case 50331648:return L<<8;default:return k?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(y,L,k,D){switch(y){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&D&&L<8&&(L+=8),this._getColorFromAnsiIndex(L).rgba;case 50331648:return L<<8;default:return k?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(y,L,k,D,A,B,N,$,I){if(this._config.minimumContrastRatio===1||I)return;const R=this._config.colors.contrastCache.getColor(y,D);if(R!==void 0)return R||void 0;const T=this._resolveBackgroundRgba(L,k,N),P=this._resolveForegroundRgba(A,B,N,$),O=p.rgba.ensureContrastRatio(T,P,this._config.minimumContrastRatio);if(!O)return void this._config.colors.contrastCache.setColor(y,D,null);const W=p.rgba.toColor(O>>24&255,O>>16&255,O>>8&255);return this._config.colors.contrastCache.setColor(y,D,W),W}_drawToCache(y,L,k,D){const A=typeof y=="number"?String.fromCharCode(y):y,B=this._config.deviceCellWidth*Math.max(A.length,2)+4;this._tmpCanvas.width<B&&(this._tmpCanvas.width=B);const N=this._config.deviceCellHeight+8;if(this._tmpCanvas.height<N&&(this._tmpCanvas.height=N),this._tmpCtx.save(),this._workAttributeData.fg=k,this._workAttributeData.bg=L,this._workAttributeData.extended.ext=D,this._workAttributeData.isInvisible())return c;const $=!!this._workAttributeData.isBold(),I=!!this._workAttributeData.isInverse(),R=!!this._workAttributeData.isDim(),T=!!this._workAttributeData.isItalic(),P=!!this._workAttributeData.isUnderline(),O=!!this._workAttributeData.isStrikethrough();let W=this._workAttributeData.getFgColor(),V=this._workAttributeData.getFgColorMode(),Q=this._workAttributeData.getBgColor(),q=this._workAttributeData.getBgColorMode();if(I){const ie=W;W=Q,Q=ie;const de=V;V=q,q=de}const Z=this._getBackgroundColor(q,Q,I,R);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=Z.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const M=$?this._config.fontWeightBold:this._config.fontWeight,U=T?"italic":"";this._tmpCtx.font=`${U} ${M} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=d.TEXT_BASELINE;const j=A.length===1&&(0,E.isPowerlineGlyph)(A.charCodeAt(0)),z=A.length===1&&(0,E.isRestrictedPowerlineGlyph)(A.charCodeAt(0)),te=this._getForegroundColor(L,q,Q,k,V,W,I,R,$,(0,E.excludeFromContrastRatioDemands)(A.charCodeAt(0)));this._tmpCtx.fillStyle=te.css;const G=z?0:4;let ae=!1;this._config.customGlyphs!==!1&&(ae=(0,C.tryDrawCustomChar)(this._tmpCtx,A,G,G,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let ke,Ae=!j;if(ke=typeof y=="number"?this._unicodeService.wcwidth(y):this._unicodeService.getStringCellWidth(y),P){this._tmpCtx.save();const ie=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),de=ie%2==1?.5:0;if(this._tmpCtx.lineWidth=ie,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Ae=!1,this._tmpCtx.strokeStyle=`rgb(${u.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Ae=!1;let qe=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&qe<8&&(qe+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(qe).css}this._tmpCtx.beginPath();const ye=G,Te=Math.ceil(G+this._config.deviceCharHeight)-de,We=G+this._config.deviceCharHeight+ie-de,bt=Math.ceil(G+this._config.deviceCharHeight+2*ie)-de;for(let qe=0;qe<ke;qe++){this._tmpCtx.save();const Se=ye+qe*this._config.deviceCellWidth,et=ye+(qe+1)*this._config.deviceCellWidth,_t=Se+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Se,Te),this._tmpCtx.lineTo(et,Te),this._tmpCtx.moveTo(Se,bt),this._tmpCtx.lineTo(et,bt);break;case 3:const Bt=ie<=1?bt:Math.ceil(G+this._config.deviceCharHeight-ie/2)-de,pe=ie<=1?Te:Math.ceil(G+this._config.deviceCharHeight+ie/2)-de,nn=new Path2D;nn.rect(Se,Te,this._config.deviceCellWidth,bt-Te),this._tmpCtx.clip(nn),this._tmpCtx.moveTo(Se-this._config.deviceCellWidth/2,We),this._tmpCtx.bezierCurveTo(Se-this._config.deviceCellWidth/2,pe,Se,pe,Se,We),this._tmpCtx.bezierCurveTo(Se,Bt,_t,Bt,_t,We),this._tmpCtx.bezierCurveTo(_t,pe,et,pe,et,We),this._tmpCtx.bezierCurveTo(et,Bt,et+this._config.deviceCellWidth/2,Bt,et+this._config.deviceCellWidth/2,We);break;case 4:this._tmpCtx.setLineDash([2*this._config.devicePixelRatio,this._config.devicePixelRatio]),this._tmpCtx.moveTo(Se,Te),this._tmpCtx.lineTo(et,Te);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Se,Te),this._tmpCtx.lineTo(et,Te);break;default:this._tmpCtx.moveTo(Se,Te),this._tmpCtx.lineTo(et,Te)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ae&&this._config.fontSize>=12&&!this._config.allowTransparency&&A!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const qe=this._tmpCtx.measureText(A);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in qe&&qe.actualBoundingBoxDescent>0){this._tmpCtx.save();const Se=new Path2D;Se.rect(ye,Te-Math.ceil(ie/2),this._config.deviceCellWidth,bt-Te+Math.ceil(ie/2)),this._tmpCtx.clip(Se),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=Z.css,this._tmpCtx.strokeText(A,G,G+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(ae||this._tmpCtx.fillText(A,G,G+this._config.deviceCharHeight),A==="_"&&!this._config.allowTransparency){let ie=b(this._tmpCtx.getImageData(G,G,this._config.deviceCellWidth,this._config.deviceCellHeight),Z,te,Ae);if(ie)for(let de=1;de<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=Z.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(A,G,G+this._config.deviceCharHeight-de),ie=b(this._tmpCtx.getImageData(G,G,this._config.deviceCellWidth,this._config.deviceCellHeight),Z,te,Ae),ie);de++);}if(O){const ie=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),de=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=ie,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(G,G+Math.floor(this._config.deviceCharHeight/2)-de),this._tmpCtx.lineTo(G+this._config.deviceCharWidth*ke,G+Math.floor(this._config.deviceCharHeight/2)-de),this._tmpCtx.stroke()}this._tmpCtx.restore();const Et=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let re;if(re=this._config.allowTransparency?function(ie){for(let de=0;de<ie.data.length;de+=4)if(ie.data[de+3]>0)return!1;return!0}(Et):b(Et,Z,te,Ae),re)return c;const he=this._findGlyphBoundingBox(Et,this._workBoundingBox,B,z,ae,G);let le,ue;for(;;){if(this._activePages.length===0){const ie=this._createNewPage();le=ie,ue=ie.currentRow,ue.height=he.size.y;break}le=this._activePages[this._activePages.length-1],ue=le.currentRow;for(const ie of this._activePages)he.size.y<=ie.currentRow.height&&(le=ie,ue=ie.currentRow);for(let ie=this._activePages.length-1;ie>=0;ie--)for(const de of this._activePages[ie].fixedRows)de.height<=ue.height&&he.size.y<=de.height&&(le=this._activePages[ie],ue=de);if(ue.y+he.size.y>=le.canvas.height||ue.height>he.size.y+2){let ie=!1;if(le.currentRow.y+le.currentRow.height+he.size.y>=le.canvas.height){let de;for(const ye of this._activePages)if(ye.currentRow.y+ye.currentRow.height+he.size.y<ye.canvas.height){de=ye;break}if(de)le=de;else{const ye=this._createNewPage();le=ye,ue=ye.currentRow,ue.height=he.size.y,ie=!0}}ie||(le.currentRow.height>0&&le.fixedRows.push(le.currentRow),ue={x:0,y:le.currentRow.y+le.currentRow.height,height:he.size.y},le.fixedRows.push(ue),le.currentRow={x:0,y:ue.y+ue.height,height:0})}if(ue.x+he.size.x<=le.canvas.width)break;ue===le.currentRow?(ue.x=0,ue.y+=ue.height,ue.height=0):le.fixedRows.splice(le.fixedRows.indexOf(ue),1)}return he.texturePage=this._pages.indexOf(le),he.texturePosition.x=ue.x,he.texturePosition.y=ue.y,he.texturePositionClipSpace.x=ue.x/le.canvas.width,he.texturePositionClipSpace.y=ue.y/le.canvas.height,he.sizeClipSpace.x/=le.canvas.width,he.sizeClipSpace.y/=le.canvas.height,ue.height=Math.max(ue.height,he.size.y),ue.x+=he.size.x,le.ctx.putImageData(Et,he.texturePosition.x-this._workBoundingBox.left,he.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,he.size.x,he.size.y),le.addGlyph(he),le.version++,he}_findGlyphBoundingBox(y,L,k,D,A,B){L.top=0;const N=D?this._config.deviceCellHeight:this._tmpCanvas.height,$=D?this._config.deviceCellWidth:k;let I=!1;for(let R=0;R<N;R++){for(let T=0;T<$;T++){const P=R*this._tmpCanvas.width*4+4*T+3;if(y.data[P]!==0){L.top=R,I=!0;break}}if(I)break}L.left=0,I=!1;for(let R=0;R<B+$;R++){for(let T=0;T<N;T++){const P=T*this._tmpCanvas.width*4+4*R+3;if(y.data[P]!==0){L.left=R,I=!0;break}}if(I)break}L.right=$,I=!1;for(let R=B+$-1;R>=B;R--){for(let T=0;T<N;T++){const P=T*this._tmpCanvas.width*4+4*R+3;if(y.data[P]!==0){L.right=R,I=!0;break}}if(I)break}L.bottom=N,I=!1;for(let R=N-1;R>=0;R--){for(let T=0;T<$;T++){const P=R*this._tmpCanvas.width*4+4*T+3;if(y.data[P]!==0){L.bottom=R,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:L.right-L.left+1,y:L.bottom-L.top+1},sizeClipSpace:{x:L.right-L.left+1,y:L.bottom-L.top+1},offset:{x:-L.left+B+(D||A?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-L.top+B+(D||A?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}s.TextureAtlas=m;class w{constructor(y,L,k){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],k)for(const D of k)this._glyphs.push(...D.glyphs),this._usedPixels+=D._usedPixels;this.canvas=x(y,L,L),this.ctx=(0,E.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(y){this._glyphs.push(y),this._usedPixels+=y.size.x*y.size.y}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function b(S,y,L,k){const D=y.rgba>>>24,A=y.rgba>>>16&255,B=y.rgba>>>8&255,N=L.rgba>>>24,$=L.rgba>>>16&255,I=L.rgba>>>8&255,R=Math.floor((Math.abs(D-N)+Math.abs(A-$)+Math.abs(B-I))/12);let T=!0;for(let P=0;P<S.data.length;P+=4)S.data[P]===D&&S.data[P+1]===A&&S.data[P+2]===B||k&&Math.abs(S.data[P]-D)+Math.abs(S.data[P+1]-A)+Math.abs(S.data[P+2]-B)<R?S.data[P+3]=0:T=!1;return T}function x(S,y,L){const k=S.createElement("canvas");return k.width=y,k.height=L,k}},160:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;const d=a(399);let v=0,u=0,p=0,C=0;var E,_,n;function l(h){const m=h.toString(16);return m.length<2?"0"+m:m}function c(h,m){return h<m?(m+.05)/(h+.05):(h+.05)/(m+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(h){h.toCss=function(m,w,b,x){return x!==void 0?`#${l(m)}${l(w)}${l(b)}${l(x)}`:`#${l(m)}${l(w)}${l(b)}`},h.toRgba=function(m,w,b,x=255){return(m<<24|w<<16|b<<8|x)>>>0}}(E=s.channels||(s.channels={})),function(h){function m(w,b){return C=Math.round(255*b),[v,u,p]=n.toChannels(w.rgba),{css:E.toCss(v,u,p,C),rgba:E.toRgba(v,u,p,C)}}h.blend=function(w,b){if(C=(255&b.rgba)/255,C===1)return{css:b.css,rgba:b.rgba};const x=b.rgba>>24&255,S=b.rgba>>16&255,y=b.rgba>>8&255,L=w.rgba>>24&255,k=w.rgba>>16&255,D=w.rgba>>8&255;return v=L+Math.round((x-L)*C),u=k+Math.round((S-k)*C),p=D+Math.round((y-D)*C),{css:E.toCss(v,u,p),rgba:E.toRgba(v,u,p)}},h.isOpaque=function(w){return(255&w.rgba)==255},h.ensureContrastRatio=function(w,b,x){const S=n.ensureContrastRatio(w.rgba,b.rgba,x);if(S)return n.toColor(S>>24&255,S>>16&255,S>>8&255)},h.opaque=function(w){const b=(255|w.rgba)>>>0;return[v,u,p]=n.toChannels(b),{css:E.toCss(v,u,p),rgba:b}},h.opacity=m,h.multiplyOpacity=function(w,b){return C=255&w.rgba,m(w,C*b/255)},h.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(s.color||(s.color={})),function(h){let m,w;if(!d.isNode){const b=document.createElement("canvas");b.width=1,b.height=1;const x=b.getContext("2d",{willReadFrequently:!0});x&&(m=x,m.globalCompositeOperation="copy",w=m.createLinearGradient(0,0,1,1))}h.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return v=parseInt(b.slice(1,2).repeat(2),16),u=parseInt(b.slice(2,3).repeat(2),16),p=parseInt(b.slice(3,4).repeat(2),16),n.toColor(v,u,p);case 5:return v=parseInt(b.slice(1,2).repeat(2),16),u=parseInt(b.slice(2,3).repeat(2),16),p=parseInt(b.slice(3,4).repeat(2),16),C=parseInt(b.slice(4,5).repeat(2),16),n.toColor(v,u,p,C);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}const x=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(x)return v=parseInt(x[1]),u=parseInt(x[2]),p=parseInt(x[3]),C=Math.round(255*(x[5]===void 0?1:parseFloat(x[5]))),n.toColor(v,u,p,C);if(!m||!w)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=w,m.fillStyle=b,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[v,u,p,C]=m.getImageData(0,0,1,1).data,C!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:E.toRgba(v,u,p,C),css:b}}}(s.css||(s.css={})),function(h){function m(w,b,x){const S=w/255,y=b/255,L=x/255;return .2126*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.7152*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.0722*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))}h.relativeLuminance=function(w){return m(w>>16&255,w>>8&255,255&w)},h.relativeLuminance2=m}(_=s.rgb||(s.rgb={})),function(h){function m(b,x,S){const y=b>>24&255,L=b>>16&255,k=b>>8&255;let D=x>>24&255,A=x>>16&255,B=x>>8&255,N=c(_.relativeLuminance2(D,A,B),_.relativeLuminance2(y,L,k));for(;N<S&&(D>0||A>0||B>0);)D-=Math.max(0,Math.ceil(.1*D)),A-=Math.max(0,Math.ceil(.1*A)),B-=Math.max(0,Math.ceil(.1*B)),N=c(_.relativeLuminance2(D,A,B),_.relativeLuminance2(y,L,k));return(D<<24|A<<16|B<<8|255)>>>0}function w(b,x,S){const y=b>>24&255,L=b>>16&255,k=b>>8&255;let D=x>>24&255,A=x>>16&255,B=x>>8&255,N=c(_.relativeLuminance2(D,A,B),_.relativeLuminance2(y,L,k));for(;N<S&&(D<255||A<255||B<255);)D=Math.min(255,D+Math.ceil(.1*(255-D))),A=Math.min(255,A+Math.ceil(.1*(255-A))),B=Math.min(255,B+Math.ceil(.1*(255-B))),N=c(_.relativeLuminance2(D,A,B),_.relativeLuminance2(y,L,k));return(D<<24|A<<16|B<<8|255)>>>0}h.ensureContrastRatio=function(b,x,S){const y=_.relativeLuminance(b>>8),L=_.relativeLuminance(x>>8);if(c(y,L)<S){if(L<y){const A=m(b,x,S),B=c(y,_.relativeLuminance(A>>8));if(B<S){const N=w(b,x,S);return B>c(y,_.relativeLuminance(N>>8))?A:N}return A}const k=w(b,x,S),D=c(y,_.relativeLuminance(k>>8));if(D<S){const A=m(b,x,S);return D>c(y,_.relativeLuminance(A>>8))?k:A}return k}},h.reduceLuminance=m,h.increaseLuminance=w,h.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]},h.toColor=function(b,x,S,y){return{css:E.toCss(b,x,S,y),rgba:E.toRgba(b,x,S,y)}}}(n=s.rgba||(s.rgba={})),s.toPaddedHex=l,s.contrastRatio=c},345:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===a)return void this._listeners.splice(d,1)}}})),this._event}fire(a,d){const v=[];for(let u=0;u<this._listeners.length;u++)v.push(this._listeners[u]);for(let u=0;u<v.length;u++)v[u].call(void 0,a,d)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},s.forwardEvent=function(a,d){return a(v=>d.fire(v))}},859:(g,s)=>{function a(d){for(const v of d)v.dispose();d.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const v=this._disposables.indexOf(d);v!==-1&&this._disposables.splice(v,1)}},s.toDisposable=function(d){return{dispose:d}},s.disposeArray=a,s.getDisposeArrayDisposable=function(d){return{dispose:()=>a(d)}}},485:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(v,u,p){this._data[v]||(this._data[v]={}),this._data[v][u]=p}get(v,u){return this._data[v]?this._data[v][u]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(d,v,u,p,C){this._data.get(d,v)||this._data.set(d,v,new a),this._data.get(d,v).set(u,p,C)}get(d,v,u,p){var C;return(C=this._data.get(d,v))===null||C===void 0?void 0:C.get(u,p)}clear(){this._data.clear()}}},399:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";const a=s.isNode?"node":navigator.userAgent,d=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;const v=a.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),s.isIpad=d==="iPad",s.isIphone=d==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),s.isLinux=d.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},385:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const d=a(399);class v{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let E=0,_=0,n=C.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(E=Date.now(),this._tasks[this._i]()||this._i++,E=Math.max(1,Date.now()-E),_=Math.max(E,_),l=C.timeRemaining(),1.5*_>l)return n-E<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-E))}ms`),void this._start();n=l}this.clear()}}class u extends v{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const E=Date.now()+C;return{timeRemaining:()=>Math.max(0,E-Date.now())}}}s.PriorityTaskQueue=u,s.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:u,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){const u=new a;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=a;class d{constructor(u=0,p=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=p}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=d},782:(g,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const d=a(133),v=a(855),u=a(147);class p extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(E){const _=new p;return _.setFromCharData(E),_}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(E){this.fg=E[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let _=!1;if(E[v.CHAR_DATA_CHAR_INDEX].length>2)_=!0;else if(E[v.CHAR_DATA_CHAR_INDEX].length===2){const n=E[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const l=E[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(n-55296)+l-56320+65536|E[v.CHAR_DATA_WIDTH_INDEX]<<22:_=!0}else _=!0}else this.content=E[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|E[v.CHAR_DATA_WIDTH_INDEX]<<22;_&&(this.combinedData=E[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|E[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=p},855:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},133:(g,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,d=0,v=a.length){let u="";for(let p=d;p<v;++p){let C=a[p];C>65535?(C-=65536,u+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):u+=String.fromCharCode(C)}return u},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,d){const v=a.length;if(!v)return 0;let u=0,p=0;if(this._interim){const C=a.charCodeAt(p++);56320<=C&&C<=57343?d[u++]=1024*(this._interim-55296)+C-56320+65536:(d[u++]=this._interim,d[u++]=C),this._interim=0}for(let C=p;C<v;++C){const E=a.charCodeAt(C);if(55296<=E&&E<=56319){if(++C>=v)return this._interim=E,u;const _=a.charCodeAt(C);56320<=_&&_<=57343?d[u++]=1024*(E-55296)+_-56320+65536:(d[u++]=E,d[u++]=_)}else E!==65279&&(d[u++]=E)}return u}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,d){const v=a.length;if(!v)return 0;let u,p,C,E,_=0,n=0,l=0;if(this.interim[0]){let m=!1,w=this.interim[0];w&=(224&w)==192?31:(240&w)==224?15:7;let b,x=0;for(;(b=63&this.interim[++x])&&x<4;)w<<=6,w|=b;const S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=S-x;for(;l<y;){if(l>=v)return 0;if(b=a[l++],(192&b)!=128){l--,m=!0;break}this.interim[x++]=b,w<<=6,w|=63&b}m||(S===2?w<128?l--:d[_++]=w:S===3?w<2048||w>=55296&&w<=57343||w===65279||(d[_++]=w):w<65536||w>1114111||(d[_++]=w)),this.interim.fill(0)}const c=v-4;let h=l;for(;h<v;){for(;!(!(h<c)||128&(u=a[h])||128&(p=a[h+1])||128&(C=a[h+2])||128&(E=a[h+3]));)d[_++]=u,d[_++]=p,d[_++]=C,d[_++]=E,h+=4;if(u=a[h++],u<128)d[_++]=u;else if((224&u)==192){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(n=(31&u)<<6|63&p,n<128){h--;continue}d[_++]=n}else if((240&u)==224){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,_;if(C=a[h++],(192&C)!=128){h--;continue}if(n=(15&u)<<12|(63&p)<<6|63&C,n<2048||n>=55296&&n<=57343||n===65279)continue;d[_++]=n}else if((248&u)==240){if(h>=v)return this.interim[0]=u,_;if(p=a[h++],(192&p)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,_;if(C=a[h++],(192&C)!=128){h--;continue}if(h>=v)return this.interim[0]=u,this.interim[1]=p,this.interim[2]=C,_;if(E=a[h++],(192&E)!=128){h--;continue}if(n=(7&u)<<18|(63&p)<<12|(63&C)<<6|63&E,n<65536||n>1114111)continue;d[_++]=n}}return _}}}},i={};function o(g){var s=i[g];if(s!==void 0)return s.exports;var a=i[g]={exports:{}};return r[g](a,a.exports,o),a.exports}var f={};return(()=>{var g=f;Object.defineProperty(g,"__esModule",{value:!0}),g.WebglAddon=void 0;const s=o(345),a=o(859),d=o(399),v=o(666);class u extends a.Disposable{constructor(C){if(d.isSafari&&(0,d.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=C,this._onChangeTextureAtlas=this.register(new s.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new s.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new s.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new s.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(C){const E=C._core;if(!C.element)return void this.register(E.onWillOpen(()=>this.activate(C)));this._terminal=C;const _=E.coreService,n=E.optionsService,l=E,c=l._renderService,h=l._characterJoinerService,m=l._charSizeService,w=l._coreBrowserService,b=l._decorationService,x=l._themeService;this._renderer=this.register(new v.WebglRenderer(C,h,m,w,_,b,n,x,this._preserveDrawingBuffer)),this.register((0,s.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,s.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,s.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,s.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),c.setRenderer(this._renderer),this.register((0,a.toDisposable)(()=>{const S=this._terminal._core._renderService;S.setRenderer(this._terminal._core._createRenderer()),S.handleResize(C.cols,C.rows)}))}get textureAtlas(){var C;return(C=this._renderer)===null||C===void 0?void 0:C.textureAtlas}clearTextureAtlas(){var C;(C=this._renderer)===null||C===void 0||C.clearTextureAtlas()}}g.WebglAddon=u})(),f})()})})(J_);var Ly=J_.exports;function Ry({containerName:e}){const t=F.useRef(null),r=F.useRef(null),i=F.useRef(null),[o]=s_(G_),[f,g]=F.useState(!1),[s,a]=F.useState(!1),d=e||o,v=u=>{var C;const p=i.current;p&&p.readyState===WebSocket.OPEN&&p.send(u),(C=r.current)==null||C.focus()};return F.useEffect(()=>{a("ontouchstart"in window||navigator.maxTouchPoints>0)},[]),F.useEffect(()=>{if(!d||!t.current)return;g(!0),r.current&&r.current.dispose(),i.current&&i.current.close();const u=new by.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',scrollback:5e3,drawBoldTextInBrightColors:!0}),p=new xy.FitAddon;u.loadAddon(p);try{const C=new Ly.WebglAddon;u.loadAddon(C)}catch{}r.current=u;try{u.open(t.current),u.focus(),setTimeout(()=>{try{p.fit();const y=i.current;if(y&&y.readyState===WebSocket.OPEN){const L=u.cols,k=u.rows;y.send(`__RESIZE__:${L},${k}`)}}catch(y){console.warn("Failed to fit terminal:",y)}},100);const C=window.location.protocol==="https:"?"wss":"ws",E=new URLSearchParams(window.location.search).get("token")||d,_=new URLSearchParams(window.location.search),n=_.get("run"),l=_.get("run_b64"),c=_.get("cwd"),h=_.get("cwd_b64"),m=new URLSearchParams;m.set("token",E),l?m.set("run_b64",l):n&&m.set("run",n),h?m.set("cwd_b64",h):c&&m.set("cwd",c);const w=new WebSocket(`${C}://${window.location.host}/terminal/${d}?${m.toString()}`);i.current=w,w.onopen=()=>{g(!1),u.write(`Connected to container...\r
`);try{const y=u.cols,L=u.rows;Number.isFinite(y)&&Number.isFinite(L)&&w.send(`__RESIZE__:${y},${L}`)}catch(y){console.warn("Failed to send initial resize:",y)}},w.onmessage=y=>{try{u.write(y.data)}catch(L){console.error("Failed to write to terminal:",L)}},w.onerror=y=>{console.error("WebSocket error:",y),g(!1),u.write(`\r
Connection error. Please try again.\r
`)},w.onclose=()=>{g(!1),u.write(`\r
Connection closed.\r
`)},u.onData(y=>{w.readyState===WebSocket.OPEN&&w.send(y)});const b=(y,L)=>{w.readyState===WebSocket.OPEN&&w.send(`__RESIZE__:${y},${L}`)},x=()=>{try{p.fit();const y=u.cols,L=u.rows;Number.isFinite(y)&&Number.isFinite(L)&&b(y,L)}catch(y){console.warn("Failed to fit terminal on resize:",y)}};window.addEventListener("resize",x);const S=u.onResize(({cols:y,rows:L})=>{Number.isFinite(y)&&Number.isFinite(L)&&b(y,L)});return()=>{window.removeEventListener("resize",x),w.readyState===WebSocket.OPEN&&w.close(),S.dispose(),u.dispose()}}catch(C){console.error("Failed to initialize terminal:",C),g(!1)}},[d]),d?X.jsxs("div",{className:"h-full w-full relative",children:[f&&X.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 text-white z-10",children:"Connecting to terminal..."}),s&&X.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2 z-20",children:[X.jsx("button",{className:"px-2 py-1 text-sm bg-gray-700 text-white rounded",onClick:()=>v(""),children:"Ctrl+C"}),X.jsx("button",{className:"px-2 py-1 text-sm bg-gray-700 text-white rounded",onClick:()=>v("\x1B"),children:"Esc"})]}),X.jsx("div",{ref:t,className:"h-full w-full"})]}):X.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-500",children:"No container specified"})}function ky({containerName:e}){const[t]=s_(G_),r=e||t,{data:i,isLoading:o,error:f}=Yf({queryKey:["diff",r],queryFn:async()=>{const s=await fetch(`/api/changed/${r}`);if(!s.ok)throw new Error("failed");return s.json()},enabled:!!r,refetchInterval:5e3});if(!r)return X.jsx("p",{className:"p-4",children:"No container specified."});if(o)return X.jsx("p",{className:"p-4",children:"Loading..."});if(f)return X.jsx("p",{className:"p-4",children:"Error loading diff."});function g(s){const a=s.split(`
`),d=[];let v=0,u=0;const p=/@@ -(\d+),?\d* \+(\d+),?\d* @@/;for(const C of a)if(C.startsWith("@@")){const E=C.match(p);E&&(v=parseInt(E[1],10),u=parseInt(E[2],10)),d.push({content:C,type:"hunk"})}else C.startsWith("+")&&!C.startsWith("+++")?d.push({content:C,oldNumber:void 0,newNumber:u++,type:"add"}):C.startsWith("-")&&!C.startsWith("---")?d.push({content:C,oldNumber:v++,newNumber:void 0,type:"remove"}):d.push({content:C,oldNumber:v++,newNumber:u++,type:"context"});return d}return X.jsx("div",{className:"p-2 space-y-4 text-sm",children:i==null?void 0:i.files.map(s=>X.jsxs("div",{children:[X.jsxs("h3",{className:"font-medium",children:[s.path," (",s.status,")"]}),s.diff?X.jsx("div",{className:"bg-gray-100 p-2 overflow-auto text-xs font-mono",children:g(s.diff).map((a,d)=>{let v="flex whitespace-pre";return a.type==="add"?v+=" text-green-700 bg-green-100":a.type==="remove"?v+=" text-red-700 bg-red-100":a.type==="hunk"&&(v+=" text-purple-700"),X.jsxs("div",{className:v,children:[X.jsx("span",{className:"w-12 text-right pr-2 text-gray-500 select-none",children:a.oldNumber??""}),X.jsx("span",{className:"w-12 text-right pr-2 text-gray-500 select-none",children:a.newNumber??""}),X.jsx("span",{className:"flex-1",children:a.content})]},d)})}):X.jsx("div",{className:"bg-gray-100 p-2 overflow-auto text-xs",children:"No diff"})]},s.path))})}function Dy(){const[e,t]=F.useState("/"),r=Mc(),{data:i,isLoading:o,error:f}=Yf({queryKey:["list",e],queryFn:async()=>{const a=await fetch(`/api/list?path=${encodeURIComponent(e)}`);if(!a.ok)throw new Error("failed");return a.json()}}),g=()=>{if(e==="/")return;const a=e.replace(/\/?[^/]+$/,"")||"/";t(a)},s=async()=>{const a=await fetch("/api/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,agent:"claude"})});if(a.ok){const d=await a.json();r(`/container/${d.container}`)}};return o?X.jsx("p",{className:"p-4",children:"Loading..."}):f?X.jsx("p",{className:"p-4",children:"Error loading directory."}):X.jsxs("div",{className:"p-4 space-y-2",children:[X.jsxs("div",{className:"flex space-x-2",children:[X.jsx("button",{className:"px-2 py-1 bg-gray-200",onClick:g,children:"Up"}),X.jsx("button",{className:"px-2 py-1 bg-blue-500 text-white",onClick:s,children:"Start Here"}),X.jsx("span",{className:"ml-4",children:e})]}),X.jsx("ul",{className:"space-y-1",children:i==null?void 0:i.filter(a=>a.is_dir).map(a=>X.jsx("li",{children:X.jsx("button",{className:"text-blue-600 underline",onClick:()=>t(a.path),children:a.name})},a.path))})]})}function Ay(){const{containerName:e}=Xm();return X.jsxs(Ey,{defaultValue:"terminal",className:"h-full min-h-0 flex flex-col",children:[X.jsxs(q_,{className:"fixed bottom-0 w-full",children:[X.jsx(Al,{value:"terminal",children:"Terminal"}),X.jsx(Al,{value:"diff",children:"Diff"})]}),X.jsx(Ml,{value:"terminal",className:"flex-1 min-h-0 mb-12",children:X.jsx(Ry,{containerName:e})}),X.jsx(Ml,{value:"diff",className:"flex-1 min-h-0 overflow-auto mb-12",children:X.jsx(ky,{containerName:e})})]})}function My(){const e=Mc(),t=Nr();return F.useEffect(()=>{const r=new URLSearchParams(t.search),i=r.get("container");if(i){r.delete("container");const o=r.toString(),f=o?`/container/${i}?${o}`:`/container/${i}`;e(f,{replace:!0})}},[t.search,e]),new URLSearchParams(t.search).get("container")?null:X.jsx(Dy,{})}function Ty(){return X.jsxs(h0,{children:[X.jsx(Ll,{path:"/container/:containerName",element:X.jsx(Ay,{})}),X.jsx(Ll,{path:"/",element:X.jsx(My,{})})]})}const Py=new jg;ga.createRoot(document.getElementById("root")).render(X.jsx(Dt.StrictMode,{children:X.jsx(gm,{children:X.jsx(Qg,{client:Py,children:X.jsx(O0,{children:X.jsx(Ty,{})})})})}));
